---
layout: post
categories: DevOps
tag: [] 
date: 2019-08-02
---


```shell
40mins practices 
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# history
    1  pwd
    2  apt update
    3  apt install docker
    4  apt install docker.io
    5  docker ps
    6  history
    7  docer version
Axxx303j
Detach: CtrlP -> CtrlQ
```



```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -it busybox sleep 10
Unable to find image 'busybox:latest' locally
latest: Pulling from library/busybox
50783e0dfb64: Pull complete
Digest: sha256:53ce9dbb39d7b1f422c137ae9fb81259816c23f556d622a39736ede882579b5d
Status: Downloaded newer image for busybox:latest
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -it busybox sleep 5
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -it busybox sleep 5
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -it ubuntu bash
Unable to find image 'ubuntu:latest' locally
latest: Pulling from library/ubuntu
405f018f9d1d: Pull complete
Digest: sha256:b6b83d3c331794420340093eb706a6f152d9c1fa51b262d9bf34594887c2c7ac
Status: Downloaded newer image for ubuntu:latest
root@753141b94d75:/# hostname
753141b94d75
root@753141b94d75:/#
```



### docker exec

```shell
docker exec -it xxxx bash
```



### docker network

> **docker network ls** command will list all the networks with network id

```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network ls
NETWORK ID     NAME      DRIVER    SCOPE
8719d0b37317   bridge    bridge    local
725e396ecad9   host      host      local
a829f0fd4a99   none      null      local
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network create mynet
37b855bf53deb61c3a70f2ec7642820bbb5b41ac8718894562c447108205af9c
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network ls
NETWORK ID     NAME      DRIVER    SCOPE
8719d0b37317   bridge    bridge    local
725e396ecad9   host      host      local
37b855bf53de   mynet     bridge    local
a829f0fd4a99   none      null      local
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network rm 37b
37b
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network ls
NETWORK ID     NAME      DRIVER    SCOPE
8719d0b37317   bridge    bridge    local
725e396ecad9   host      host      local
a829f0fd4a99   none      null      local
```



### docker Volume

```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker volume ls
DRIVER    VOLUME NAME
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker volume  create myvol
myvol
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker volume ls
DRIVER    VOLUME NAME
local     myvol
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -itd -v myvol:/home ubuntu
5c1703a73220b7c383a75aded1ba80d60c08562edd68a729474ae9aacefbff8b
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps
CONTAINER ID   IMAGE     COMMAND   CREATED         STATUS         PORTS     NAMES
5c1703a73220   ubuntu    "bash"    8 seconds ago   Up 7 seconds             distracted_kowalevski
6afbb3b42ffe   ubuntu    "bash"    9 minutes ago   Up 9 minutes             competent_archimedes
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker volume rm myvol
Error response from daemon: remove myvol: volume is in use - [5c1703a73220b7c383a75aded1ba80d60c08562edd68a729474ae9aacefbff8b]
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker kill 5c1703a73220
5c1703a73220
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps
CONTAINER ID   IMAGE     COMMAND   CREATED         STATUS         PORTS     NAMES
6afbb3b42ffe   ubuntu    "bash"    9 minutes ago   Up 9 minutes             competent_archimedes
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps -a
CONTAINER ID   IMAGE     COMMAND      CREATED          STATUS                        PORTS     NAMES
5c1703a73220   ubuntu    "bash"       46 seconds ago   Exited (137) 10 seconds ago             distracted_kowalevski
6afbb3b42ffe   ubuntu    "bash"       9 minutes ago    Up 9 minutes                            competent_archimedes
7a2d98a947e5   ubuntu    "bash"       14 minutes ago   Exited (137) 10 minutes ago             hardcore_chatelet
052d21d3ee5f   ubuntu    "bash"       14 minutes ago   Exited (0) 14 minutes ago               blissful_roentgen
753141b94d75   ubuntu    "bash"       15 minutes ago   Exited (0) 14 minutes ago               quirky_noyce
06dcacefd87a   busybox   "sleep 5"    15 minutes ago   Exited (0) 15 minutes ago               naughty_chaum
c26d2c98b03b   busybox   "sleep 5"    16 minutes ago   Exited (0) 16 minutes ago               mystifying_fermi
680256a46e0f   busybox   "sleep 10"   16 minutes ago   Exited (0) 16 minutes ago               zen_turing
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker rm 5c1703a73220
5c1703a73220
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker volume rm myvol
myvol
```



### docker rm -f <container_id>



### docker cp 

```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# touch dummy.txt
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -itd ubuntu
b3eedf250d85b8132345f9370ce9c4bbc1e656af364312c3370ae08c0ba35173
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps
CONTAINER ID   IMAGE     COMMAND   CREATED          STATUS         PORTS     NAMES
b3eedf250d85   ubuntu    "bash"    10 seconds ago   Up 9 seconds             suspicious_antonelli
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker cp dummy.txt b3e:/root/
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker exec -it b3e
"docker exec" requires at least 2 arguments.
See 'docker exec --help'.

Usage:  docker exec [OPTIONS] CONTAINER COMMAND [ARG...]

Run a command in a running container
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker exec -it b3e bash
root@b3eedf250d85:/# ls -l /root
total 0
-rw-r--r-- 1 root root 0 Aug  2 07:13 dummy.txt
root@b3eedf250d85:/#


root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker cp b3e:/var/log/bootstrap.log ./
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# vi bootstrap.log
```



### docker exec

```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker exec -d b3e touch /root/test.txt
```



### docker inspect

1. <container_id>
2. <image_name>

```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker inspect ubuntu
[
    {
        "Id": "sha256:27941809078cc9b2802deb2b0bb6feed6c236cde01e487f200e24653533701ee",
        "RepoTags": [
            "ubuntu:latest"
        ],
        "RepoDigests": [
            "ubuntu@sha256:b6b83d3c331794420340093eb706a6f152d9c1fa51b262d9bf34594887c2c7ac"
        ],
        "Parent": "",
        "Comment": "",
        "Created": "2022-06-06T22:21:26.309275979Z",
        "Container": "9d10d71fc8cc81806d2fd79443b0cb3d3fac07aee4fd4e2164d8959fd620ba7e",
        "ContainerConfig": {
            "Hostname": "9d10d71fc8cc",
            "Domainname": "",
            "User": "",
            "AttachStdin": false,
            "AttachStdout": false,
            "AttachStderr": false,
            "Tty": false,
            "OpenStdin": false,
            "StdinOnce": false,
            "Env": [
                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            ],
            "Cmd": [
                "/bin/sh",
                "-c",
                "#(nop) ",
                "CMD [\"bash\"]"
            ],
            "Image": "sha256:77be170d4f899ace0ee153facbd195111feabb489dd11cbcdce1f9652fd5befa",
            "Volumes": null,
            "WorkingDir": "",
            "Entrypoint": null,
            "OnBuild": null,
            "Labels": {}
        },
        "DockerVersion": "20.10.12",
        "Author": "",
        "Config": {
            "Hostname": "",
            "Domainname": "",
            "User": "",
            "AttachStdin": false,
            "AttachStdout": false,
            "AttachStderr": false,
            "Tty": false,
            "OpenStdin": false,
            "StdinOnce": false,
            "Env": [
                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            ],
            "Cmd": [
                "bash"
            ],
            "Image": "sha256:77be170d4f899ace0ee153facbd195111feabb489dd11cbcdce1f9652fd5befa",
            "Volumes": null,
            "WorkingDir": "",
            "Entrypoint": null,
            "OnBuild": null,
            "Labels": null
        },
        "Architecture": "amd64",
        "Os": "linux",
        "Size": 77819423,
        "VirtualSize": 77819423,
        "GraphDriver": {
            "Data": {
                "MergedDir": "/var/lib/docker/overlay2/90eeb24f7634763672e8b3ed2df632fd67522b7bb7d311886e1835c2ab959f96/merged",
                "UpperDir": "/var/lib/docker/overlay2/90eeb24f7634763672e8b3ed2df632fd67522b7bb7d311886e1835c2ab959f96/diff",
                "WorkDir": "/var/lib/docker/overlay2/90eeb24f7634763672e8b3ed2df632fd67522b7bb7d311886e1835c2ab959f96/work"
            },
            "Name": "overlay2"
        },
        "RootFS": {
            "Type": "layers",
            "Layers": [
                "sha256:a790f937a6aea2600982de54a5fb995c681dd74f26968d6b74286e06839e4fb3"
            ]
        },
        "Metadata": {
            "LastTagTime": "0001-01-01T00:00:00Z"
        }
    }
]
```



### docker logs

```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker logs 1fdce2600057
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
/docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
/docker-entrypoint.sh: Configuration complete; ready for start up
2022/08/02 07:22:47 [notice] 1#1: using the "epoll" event method
2022/08/02 07:22:47 [notice] 1#1: nginx/1.23.1
2022/08/02 07:22:47 [notice] 1#1: built by gcc 10.2.1 20210110 (Debian 10.2.1-6)
2022/08/02 07:22:47 [notice] 1#1: OS: Linux 5.15.0-41-generic
2022/08/02 07:22:47 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576
2022/08/02 07:22:47 [notice] 1#1: start worker processes
2022/08/02 07:22:47 [notice] 1#1: start worker process 31
```



### docker kill & docker stop

### docker save & docker load

```shell
ot@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker pull httpd
Using default tag: latest
docker save httplatest: Pulling from library/httpd
1efc276f4ff9: Pull complete
aed046121ed8: Pull complete
4340e7be3d7f: Pull complete
80e368ef21fc: Pull complete
80cb79a80bbe: Pull complete
Digest: sha256:6336eb9c57992d3516c34809a652405d1961945171b778de252f14013e4c550d
Status: Downloaded newer image for httpd:latest
docker.io/library/httpd:latest
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker save httpd > httpd.tar

root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker image load < httpd.tar
Loaded image: httpd:latest
```



### docker stat

### docker top

### docker restart

```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -itd nginx
e9a702ba20b6c3897cd4e236bc04e72b0935c128b9ede042569e05b9b690c429
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps
CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS         PORTS     NAMES
e9a702ba20b6   nginx     "/docker-entrypoint.…"   10 seconds ago   Up 9 seconds   80/tcp    epic_cray
b3eedf250d85   ubuntu    "bash"                   3 hours ago      Up 3 hours               suspicious_antonelli
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker restart e9a
e9a
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps
CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS         PORTS     NAMES
e9a702ba20b6   nginx     "/docker-entrypoint.…"   23 seconds ago   Up 3 seconds   80/tcp    epic_cray
b3eedf250d85   ubuntu    "bash"                   3 hours ago      Up 3 hours               suspicious_antonelli
root@ubuntu-s-1vcpu-2gb-sgp1-01:~#
```



### docker rename

```shell
oot@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker rename e9a my_nginx
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps
CONTAINER ID   IMAGE     COMMAND                  CREATED              STATUS          PORTS     NAMES
e9a702ba20b6   nginx     "/docker-entrypoint.…"   About a minute ago   Up 47 seconds   80/tcp    my_nginx
b3eedf250d85   ubuntu    "bash"                   3 hours ago          Up 3 hours                suspicious_antonelli
```



### ★docker - expose port

```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -itd nginx
0a5a17ff7d7ff49a6c3a6fae0fc5c1ef6a8a7586381a2a8ed1c310d3c7c158ce
droot@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps
CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS                  PORTS     NAMES
0a5a17ff7d7f   nginx     "/docker-entrypoint.…"   2 seconds ago   Up Less than a second   80/tcp    tender_heyrovsky
e9a702ba20b6   nginx     "/docker-entrypoint.…"   2 minutes ago   Up 2 minutes            80/tcp    my_nginx
b3eedf250d85   ubuntu    "bash"                   3 hours ago     Up 3 hours                        suspicious_antonelli
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker expost 80 0a5
docker: 'expost' is not a docker command.
See 'docker --help'
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker expose 80 0a5
docker: 'expose' is not a docker command.
See 'docker --help'
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -itd -p 80:80 nginx
5140dc7221f7bf524e85057ff12d6dcf3b9f1c3f552012e42859c281c8aac413
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps
CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                               NAMES
5140dc7221f7   nginx     "/docker-entrypoint.…"   3 seconds ago   Up 2 seconds   0.0.0.0:80->80/tcp, :::80->80/tcp   hardcore_chaum
0a5a17ff7d7f   nginx     "/docker-entrypoint.…"   4 minutes ago   Up 4 minutes   80/tcp                              tender_heyrovsky
e9a702ba20b6   nginx     "/docker-entrypoint.…"   7 minutes ago   Up 6 minutes   80/tcp                              my_nginx
b3eedf250d85   ubuntu    "bash"                   3 hours ago     Up 3 hours                                         suspicious_antonelli
root@ubuntu-s-1vcpu-2gb-sgp1-01:~#
```

<img src="/Users/joe/Library/Application Support/typora-user-images/image-20220802180001723.png" alt="image-20220802180001723" style="zoom:25%;" />



# Docker Images

### docker image prune

> **docker image prune** will remove all unused images from your machine



### docker history 

> docker history image_name will print the history related to that image



### ★docker commit

```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -itd ubuntu
41a10cc1b7bc85232fe5f519c4db07c5f1b9d6924a1e6ae6616f4e9ae543c97c
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps
CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS                               NAMES
41a10cc1b7bc   ubuntu    "bash"                   5 seconds ago    Up 3 seconds                                        keen_fermi
5140dc7221f7   nginx     "/docker-entrypoint.…"   13 minutes ago   Up 13 minutes   0.0.0.0:80->80/tcp, :::80->80/tcp   hardcore_chaum
0a5a17ff7d7f   nginx     "/docker-entrypoint.…"   17 minutes ago   Up 17 minutes   80/tcp                              tender_heyrovsky
e9a702ba20b6   nginx     "/docker-entrypoint.…"   20 minutes ago   Up 19 minutes   80/tcp                              my_nginx
b3eedf250d85   ubuntu    "bash"                   3 hours ago      Up 3 hours                                          suspicious_antonelli
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker exec -it 41a bash
root@41a10cc1b7bc:/# apt update
Get:1 http://security.ubuntu.com/ubuntu jammy-security InRelease [110 kB]
Get:2 http://archive.ubuntu.com/ubuntu jammy InRelease [270 kB]
Get:3 http://security.ubuntu.com/ubuntu jammy-security/universe amd64 Packages [119 kB]
Get:4 http://archive.ubuntu.com/ubuntu jammy-updates InRelease [114 kB]
Get:5 http://security.ubuntu.com/ubuntu jammy-security/restricted amd64 Packages [275 kB]
Get:6 http://archive.ubuntu.com/ubuntu jammy-backports InRelease [99.8 kB]
Get:7 http://security.ubuntu.com/ubuntu jammy-security/multiverse amd64 Packages [4648 B]
Get:8 http://security.ubuntu.com/ubuntu jammy-security/main amd64 Packages [303 kB]
Get:9 http://archive.ubuntu.com/ubuntu jammy/universe amd64 Packages [17.5 MB]
Get:10 http://archive.ubuntu.com/ubuntu jammy/main amd64 Packages [1792 kB]
Get:11 http://archive.ubuntu.com/ubuntu jammy/multiverse amd64 Packages [266 kB]
Get:12 http://archive.ubuntu.com/ubuntu jammy/restricted amd64 Packages [164 kB]
Get:13 http://archive.ubuntu.com/ubuntu jammy-updates/restricted amd64 Packages [319 kB]
Get:14 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 Packages [602 kB]
Get:15 http://archive.ubuntu.com/ubuntu jammy-updates/multiverse amd64 Packages [7804 B]
Get:16 http://archive.ubuntu.com/ubuntu jammy-updates/universe amd64 Packages [243 kB]
Get:17 http://archive.ubuntu.com/ubuntu jammy-backports/universe amd64 Packages [5814 B]
Fetched 22.2 MB in 6s (4006 kB/s)
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
16 packages can be upgraded. Run 'apt list --upgradable' to see them.
root@41a10cc1b7bc:/# apt install apache2
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  apache2-bin apache2-data apache2-utils bzip2 ca-certificates file libapr1 libaprutil1 libaprutil1-dbd-sqlite3 libaprutil1-ldap libbrotli1
  libcurl4 libexpat1 libgdbm-compat4 libgdbm6 libicu70 libjansson4 libldap-2.5-0 libldap-common liblua5.3-0 libmagic-mgc libmagic1
  libnghttp2-14 libperl5.34 libpsl5 librtmp1 libsasl2-2 libsasl2-modules libsasl2-modules-db libsqlite3-0 libssh-4 libxml2 mailcap media-types
  mime-support netbase openssl perl perl-modules-5.34 publicsuffix ssl-cert xz-utils
Suggested packages:
  apache2-doc apache2-suexec-pristine | apache2-suexec-custom www-browser ufw bzip2-doc gdbm-l10n libsasl2-modules-gssapi-mit
  | libsasl2-modules-gssapi-heimdal libsasl2-modules-ldap libsasl2-modules-otp libsasl2-modules-sql perl-doc libterm-readline-gnu-perl
  | libterm-readline-perl-perl make libtap-harness-archive-perl
The following NEW packages will be installed:
  apache2 apache2-bin apache2-data apache2-utils bzip2 ca-certificates file libapr1 libaprutil1 libaprutil1-dbd-sqlite3 libaprutil1-ldap
  libbrotli1 libcurl4 libexpat1 libgdbm-compat4 libgdbm6 libicu70 libjansson4 libldap-2.5-0 libldap-common liblua5.3-0 libmagic-mgc libmagic1
  libnghttp2-14 libperl5.34 libpsl5 librtmp1 libsasl2-2 libsasl2-modules libsasl2-modules-db libsqlite3-0 libssh-4 libxml2 mailcap media-types
  mime-support netbase openssl perl perl-modules-5.34 publicsuffix ssl-cert xz-utils
0 upgraded, 43 newly installed, 0 to remove and 16 not upgraded.
Need to get 25.6 MB of archives.
After this operation, 111 MB of additional disk space will be used.
Do you want to continue? [Y/n] Y
Get:1 http://archive.ubuntu.com/ubuntu jammy/main amd64 perl-modules-5.34 all 5.34.0-3ubuntu1 [2975 kB]
Get:2 http://archive.ubuntu.com/ubuntu jammy/main amd64 libgdbm6 amd64 1.23-1 [33.9 kB]
Get:3 http://archive.ubuntu.com/ubuntu jammy/main amd64 libgdbm-compat4 amd64 1.23-1 [6606 B]
Get:4 http://archive.ubuntu.com/ubuntu jammy/main amd64 libperl5.34 amd64 5.34.0-3ubuntu1 [4809 kB]
Get:5 http://archive.ubuntu.com/ubuntu jammy/main amd64 perl amd64 5.34.0-3ubuntu1 [232 kB]
Get:6 http://archive.ubuntu.com/ubuntu jammy/main amd64 libapr1 amd64 1.7.0-8build1 [107 kB]
Get:7 http://archive.ubuntu.com/ubuntu jammy/main amd64 libexpat1 amd64 2.4.7-1 [90.7 kB]
Get:8 http://archive.ubuntu.com/ubuntu jammy/main amd64 libaprutil1 amd64 1.6.1-5ubuntu4 [92.4 kB]
Get:9 http://archive.ubuntu.com/ubuntu jammy/main amd64 libsqlite3-0 amd64 3.37.2-2 [643 kB]
Get:10 http://archive.ubuntu.com/ubuntu jammy/main amd64 libaprutil1-dbd-sqlite3 amd64 1.6.1-5ubuntu4 [11.3 kB]
Get:11 http://archive.ubuntu.com/ubuntu jammy/main amd64 libsasl2-modules-db amd64 2.1.27+dfsg2-3ubuntu1 [20.8 kB]
Get:12 http://archive.ubuntu.com/ubuntu jammy/main amd64 libsasl2-2 amd64 2.1.27+dfsg2-3ubuntu1 [53.9 kB]
Get:13 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libldap-2.5-0 amd64 2.5.12+dfsg-0ubuntu0.22.04.1 [184 kB]
Get:14 http://archive.ubuntu.com/ubuntu jammy/main amd64 libaprutil1-ldap amd64 1.6.1-5ubuntu4 [9162 B]
Get:15 http://archive.ubuntu.com/ubuntu jammy/main amd64 libbrotli1 amd64 1.0.9-2build6 [315 kB]
Get:16 http://archive.ubuntu.com/ubuntu jammy/main amd64 libnghttp2-14 amd64 1.43.0-1build3 [76.3 kB]
Get:17 http://archive.ubuntu.com/ubuntu jammy/main amd64 libpsl5 amd64 0.21.0-1.2build2 [58.4 kB]
Get:18 http://archive.ubuntu.com/ubuntu jammy/main amd64 librtmp1 amd64 2.4+20151223.gitfa8646d.1-2build4 [58.2 kB]
Get:19 http://archive.ubuntu.com/ubuntu jammy/main amd64 libssh-4 amd64 0.9.6-2build1 [184 kB]
Get:20 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libcurl4 amd64 7.81.0-1ubuntu1.3 [290 kB]
Get:21 http://archive.ubuntu.com/ubuntu jammy/main amd64 libjansson4 amd64 2.13.1-1.1build3 [32.4 kB]
Get:22 http://archive.ubuntu.com/ubuntu jammy/main amd64 liblua5.3-0 amd64 5.3.6-1build1 [140 kB]
Get:23 http://archive.ubuntu.com/ubuntu jammy/main amd64 libicu70 amd64 70.1-2 [10.6 MB]
Get:24 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libxml2 amd64 2.9.13+dfsg-1ubuntu0.1 [763 kB]
Get:25 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 apache2-bin amd64 2.4.52-1ubuntu4.1 [1347 kB]
Get:26 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 apache2-data all 2.4.52-1ubuntu4.1 [165 kB]
Get:27 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 apache2-utils amd64 2.4.52-1ubuntu4.1 [89.1 kB]
Get:28 http://archive.ubuntu.com/ubuntu jammy/main amd64 media-types all 7.0.0 [25.5 kB]
Get:29 http://archive.ubuntu.com/ubuntu jammy/main amd64 mailcap all 3.70+nmu1ubuntu1 [23.8 kB]
Get:30 http://archive.ubuntu.com/ubuntu jammy/main amd64 mime-support all 3.66 [3696 B]
Get:31 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 apache2 amd64 2.4.52-1ubuntu4.1 [97.8 kB]
Get:32 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 openssl amd64 3.0.2-0ubuntu1.6 [1184 kB]
Get:33 http://archive.ubuntu.com/ubuntu jammy/main amd64 ca-certificates all 20211016 [148 kB]
Get:34 http://archive.ubuntu.com/ubuntu jammy/main amd64 netbase all 6.3 [12.9 kB]
Get:35 http://archive.ubuntu.com/ubuntu jammy/main amd64 libmagic-mgc amd64 1:5.41-3 [257 kB]
Get:36 http://archive.ubuntu.com/ubuntu jammy/main amd64 libmagic1 amd64 1:5.41-3 [87.2 kB]
Get:37 http://archive.ubuntu.com/ubuntu jammy/main amd64 file amd64 1:5.41-3 [21.5 kB]
Get:38 http://archive.ubuntu.com/ubuntu jammy/main amd64 publicsuffix all 20211207.1025-1 [129 kB]
Get:39 http://archive.ubuntu.com/ubuntu jammy/main amd64 xz-utils amd64 5.2.5-2ubuntu1 [84.8 kB]
Get:40 http://archive.ubuntu.com/ubuntu jammy/main amd64 bzip2 amd64 1.0.8-5build1 [34.8 kB]
Get:41 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libldap-common all 2.5.12+dfsg-0ubuntu0.22.04.1 [16.4 kB]
Get:42 http://archive.ubuntu.com/ubuntu jammy/main amd64 libsasl2-modules amd64 2.1.27+dfsg2-3ubuntu1 [57.5 kB]
Get:43 http://archive.ubuntu.com/ubuntu jammy/main amd64 ssl-cert all 1.1.2 [17.4 kB]
Fetched 25.6 MB in 5s (5294 kB/s)
debconf: delaying package configuration, since apt-utils is not installed
Selecting previously unselected package perl-modules-5.34.
(Reading database ... 4395 files and directories currently installed.)
Preparing to unpack .../00-perl-modules-5.34_5.34.0-3ubuntu1_all.deb ...
Unpacking perl-modules-5.34 (5.34.0-3ubuntu1) ...
Selecting previously unselected package libgdbm6:amd64.
Preparing to unpack .../01-libgdbm6_1.23-1_amd64.deb ...
Unpacking libgdbm6:amd64 (1.23-1) ...
Selecting previously unselected package libgdbm-compat4:amd64.
Preparing to unpack .../02-libgdbm-compat4_1.23-1_amd64.deb ...
Unpacking libgdbm-compat4:amd64 (1.23-1) ...
Selecting previously unselected package libperl5.34:amd64.
Preparing to unpack .../03-libperl5.34_5.34.0-3ubuntu1_amd64.deb ...
Unpacking libperl5.34:amd64 (5.34.0-3ubuntu1) ...
Selecting previously unselected package perl.
Preparing to unpack .../04-perl_5.34.0-3ubuntu1_amd64.deb ...
Unpacking perl (5.34.0-3ubuntu1) ...
Selecting previously unselected package libapr1:amd64.
Preparing to unpack .../05-libapr1_1.7.0-8build1_amd64.deb ...
Unpacking libapr1:amd64 (1.7.0-8build1) ...
Selecting previously unselected package libexpat1:amd64.
Preparing to unpack .../06-libexpat1_2.4.7-1_amd64.deb ...
Unpacking libexpat1:amd64 (2.4.7-1) ...
Selecting previously unselected package libaprutil1:amd64.
Preparing to unpack .../07-libaprutil1_1.6.1-5ubuntu4_amd64.deb ...
Unpacking libaprutil1:amd64 (1.6.1-5ubuntu4) ...
Selecting previously unselected package libsqlite3-0:amd64.
Preparing to unpack .../08-libsqlite3-0_3.37.2-2_amd64.deb ...
Unpacking libsqlite3-0:amd64 (3.37.2-2) ...
Selecting previously unselected package libaprutil1-dbd-sqlite3:amd64.
Preparing to unpack .../09-libaprutil1-dbd-sqlite3_1.6.1-5ubuntu4_amd64.deb ...
Unpacking libaprutil1-dbd-sqlite3:amd64 (1.6.1-5ubuntu4) ...
Selecting previously unselected package libsasl2-modules-db:amd64.
Preparing to unpack .../10-libsasl2-modules-db_2.1.27+dfsg2-3ubuntu1_amd64.deb ...
Unpacking libsasl2-modules-db:amd64 (2.1.27+dfsg2-3ubuntu1) ...
Selecting previously unselected package libsasl2-2:amd64.
Preparing to unpack .../11-libsasl2-2_2.1.27+dfsg2-3ubuntu1_amd64.deb ...
Unpacking libsasl2-2:amd64 (2.1.27+dfsg2-3ubuntu1) ...
Selecting previously unselected package libldap-2.5-0:amd64.
Preparing to unpack .../12-libldap-2.5-0_2.5.12+dfsg-0ubuntu0.22.04.1_amd64.deb ...
Unpacking libldap-2.5-0:amd64 (2.5.12+dfsg-0ubuntu0.22.04.1) ...
Selecting previously unselected package libaprutil1-ldap:amd64.
Preparing to unpack .../13-libaprutil1-ldap_1.6.1-5ubuntu4_amd64.deb ...
Unpacking libaprutil1-ldap:amd64 (1.6.1-5ubuntu4) ...
Selecting previously unselected package libbrotli1:amd64.
Preparing to unpack .../14-libbrotli1_1.0.9-2build6_amd64.deb ...
Unpacking libbrotli1:amd64 (1.0.9-2build6) ...
Selecting previously unselected package libnghttp2-14:amd64.
Preparing to unpack .../15-libnghttp2-14_1.43.0-1build3_amd64.deb ...
Unpacking libnghttp2-14:amd64 (1.43.0-1build3) ...
Selecting previously unselected package libpsl5:amd64.
Preparing to unpack .../16-libpsl5_0.21.0-1.2build2_amd64.deb ...
Unpacking libpsl5:amd64 (0.21.0-1.2build2) ...
Selecting previously unselected package librtmp1:amd64.
Preparing to unpack .../17-librtmp1_2.4+20151223.gitfa8646d.1-2build4_amd64.deb ...
Unpacking librtmp1:amd64 (2.4+20151223.gitfa8646d.1-2build4) ...
Selecting previously unselected package libssh-4:amd64.
Preparing to unpack .../18-libssh-4_0.9.6-2build1_amd64.deb ...
Unpacking libssh-4:amd64 (0.9.6-2build1) ...
Selecting previously unselected package libcurl4:amd64.
Preparing to unpack .../19-libcurl4_7.81.0-1ubuntu1.3_amd64.deb ...
Unpacking libcurl4:amd64 (7.81.0-1ubuntu1.3) ...
Selecting previously unselected package libjansson4:amd64.
Preparing to unpack .../20-libjansson4_2.13.1-1.1build3_amd64.deb ...
Unpacking libjansson4:amd64 (2.13.1-1.1build3) ...
Selecting previously unselected package liblua5.3-0:amd64.
Preparing to unpack .../21-liblua5.3-0_5.3.6-1build1_amd64.deb ...
Unpacking liblua5.3-0:amd64 (5.3.6-1build1) ...
Selecting previously unselected package libicu70:amd64.
Preparing to unpack .../22-libicu70_70.1-2_amd64.deb ...
Unpacking libicu70:amd64 (70.1-2) ...
Selecting previously unselected package libxml2:amd64.
Preparing to unpack .../23-libxml2_2.9.13+dfsg-1ubuntu0.1_amd64.deb ...
Unpacking libxml2:amd64 (2.9.13+dfsg-1ubuntu0.1) ...
Selecting previously unselected package apache2-bin.
Preparing to unpack .../24-apache2-bin_2.4.52-1ubuntu4.1_amd64.deb ...
Unpacking apache2-bin (2.4.52-1ubuntu4.1) ...
Selecting previously unselected package apache2-data.
Preparing to unpack .../25-apache2-data_2.4.52-1ubuntu4.1_all.deb ...
Unpacking apache2-data (2.4.52-1ubuntu4.1) ...
Selecting previously unselected package apache2-utils.
Preparing to unpack .../26-apache2-utils_2.4.52-1ubuntu4.1_amd64.deb ...
Unpacking apache2-utils (2.4.52-1ubuntu4.1) ...
Selecting previously unselected package media-types.
Preparing to unpack .../27-media-types_7.0.0_all.deb ...
Unpacking media-types (7.0.0) ...
Selecting previously unselected package mailcap.
Preparing to unpack .../28-mailcap_3.70+nmu1ubuntu1_all.deb ...
Unpacking mailcap (3.70+nmu1ubuntu1) ...
Selecting previously unselected package mime-support.
Preparing to unpack .../29-mime-support_3.66_all.deb ...
Unpacking mime-support (3.66) ...
Selecting previously unselected package apache2.
Preparing to unpack .../30-apache2_2.4.52-1ubuntu4.1_amd64.deb ...
Unpacking apache2 (2.4.52-1ubuntu4.1) ...
Selecting previously unselected package openssl.
Preparing to unpack .../31-openssl_3.0.2-0ubuntu1.6_amd64.deb ...
Unpacking openssl (3.0.2-0ubuntu1.6) ...
Selecting previously unselected package ca-certificates.
Preparing to unpack .../32-ca-certificates_20211016_all.deb ...
Unpacking ca-certificates (20211016) ...
Selecting previously unselected package netbase.
Preparing to unpack .../33-netbase_6.3_all.deb ...
Unpacking netbase (6.3) ...
Selecting previously unselected package libmagic-mgc.
Preparing to unpack .../34-libmagic-mgc_1%3a5.41-3_amd64.deb ...
Unpacking libmagic-mgc (1:5.41-3) ...
Selecting previously unselected package libmagic1:amd64.
Preparing to unpack .../35-libmagic1_1%3a5.41-3_amd64.deb ...
Unpacking libmagic1:amd64 (1:5.41-3) ...
Selecting previously unselected package file.
Preparing to unpack .../36-file_1%3a5.41-3_amd64.deb ...
Unpacking file (1:5.41-3) ...
Selecting previously unselected package publicsuffix.
Preparing to unpack .../37-publicsuffix_20211207.1025-1_all.deb ...
Unpacking publicsuffix (20211207.1025-1) ...
Selecting previously unselected package xz-utils.
Preparing to unpack .../38-xz-utils_5.2.5-2ubuntu1_amd64.deb ...
Unpacking xz-utils (5.2.5-2ubuntu1) ...
Selecting previously unselected package bzip2.
Preparing to unpack .../39-bzip2_1.0.8-5build1_amd64.deb ...
Unpacking bzip2 (1.0.8-5build1) ...
Selecting previously unselected package libldap-common.
Preparing to unpack .../40-libldap-common_2.5.12+dfsg-0ubuntu0.22.04.1_all.deb ...
Unpacking libldap-common (2.5.12+dfsg-0ubuntu0.22.04.1) ...
Selecting previously unselected package libsasl2-modules:amd64.
Preparing to unpack .../41-libsasl2-modules_2.1.27+dfsg2-3ubuntu1_amd64.deb ...
Unpacking libsasl2-modules:amd64 (2.1.27+dfsg2-3ubuntu1) ...
Selecting previously unselected package ssl-cert.
Preparing to unpack .../42-ssl-cert_1.1.2_all.deb ...
Unpacking ssl-cert (1.1.2) ...
Setting up libexpat1:amd64 (2.4.7-1) ...
Setting up media-types (7.0.0) ...
Setting up libpsl5:amd64 (0.21.0-1.2build2) ...
Setting up libmagic-mgc (1:5.41-3) ...
Setting up libbrotli1:amd64 (1.0.9-2build6) ...
Setting up libsqlite3-0:amd64 (3.37.2-2) ...
Setting up libsasl2-modules:amd64 (2.1.27+dfsg2-3ubuntu1) ...
Setting up libnghttp2-14:amd64 (1.43.0-1build3) ...
Setting up libmagic1:amd64 (1:5.41-3) ...
Setting up libapr1:amd64 (1.7.0-8build1) ...
Setting up file (1:5.41-3) ...
Setting up perl-modules-5.34 (5.34.0-3ubuntu1) ...
Setting up bzip2 (1.0.8-5build1) ...
Setting up libldap-common (2.5.12+dfsg-0ubuntu0.22.04.1) ...
Setting up libjansson4:amd64 (2.13.1-1.1build3) ...
Setting up libsasl2-modules-db:amd64 (2.1.27+dfsg2-3ubuntu1) ...
Setting up librtmp1:amd64 (2.4+20151223.gitfa8646d.1-2build4) ...
Setting up xz-utils (5.2.5-2ubuntu1) ...
update-alternatives: using /usr/bin/xz to provide /usr/bin/lzma (lzma) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/lzma.1.gz because associated file /usr/share/man/man1/xz.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/unlzma.1.gz because associated file /usr/share/man/man1/unxz.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzcat.1.gz because associated file /usr/share/man/man1/xzcat.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzmore.1.gz because associated file /usr/share/man/man1/xzmore.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzless.1.gz because associated file /usr/share/man/man1/xzless.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzdiff.1.gz because associated file /usr/share/man/man1/xzdiff.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzcmp.1.gz because associated file /usr/share/man/man1/xzcmp.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzgrep.1.gz because associated file /usr/share/man/man1/xzgrep.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzegrep.1.gz because associated file /usr/share/man/man1/xzegrep.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzfgrep.1.gz because associated file /usr/share/man/man1/xzfgrep.1.gz (of link group lzma) doesn't exist
Setting up libsasl2-2:amd64 (2.1.27+dfsg2-3ubuntu1) ...
Setting up libssh-4:amd64 (0.9.6-2build1) ...
Setting up liblua5.3-0:amd64 (5.3.6-1build1) ...
Setting up netbase (6.3) ...
Setting up apache2-data (2.4.52-1ubuntu4.1) ...
Setting up openssl (3.0.2-0ubuntu1.6) ...
Setting up publicsuffix (20211207.1025-1) ...
Setting up libgdbm6:amd64 (1.23-1) ...
Setting up libicu70:amd64 (70.1-2) ...
Setting up libaprutil1:amd64 (1.6.1-5ubuntu4) ...
Setting up libaprutil1-dbd-sqlite3:amd64 (1.6.1-5ubuntu4) ...
Setting up libldap-2.5-0:amd64 (2.5.12+dfsg-0ubuntu0.22.04.1) ...
Setting up ca-certificates (20211016) ...
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline
Updating certificates in /etc/ssl/certs...
127 added, 0 removed; done.
Setting up ssl-cert (1.1.2) ...
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline
Setting up libgdbm-compat4:amd64 (1.23-1) ...
Setting up libcurl4:amd64 (7.81.0-1ubuntu1.3) ...
Setting up libxml2:amd64 (2.9.13+dfsg-1ubuntu0.1) ...
Setting up apache2-utils (2.4.52-1ubuntu4.1) ...
Setting up libperl5.34:amd64 (5.34.0-3ubuntu1) ...
Setting up libaprutil1-ldap:amd64 (1.6.1-5ubuntu4) ...
Setting up perl (5.34.0-3ubuntu1) ...
Setting up mailcap (3.70+nmu1ubuntu1) ...
Setting up mime-support (3.66) ...
Setting up apache2-bin (2.4.52-1ubuntu4.1) ...
Setting up apache2 (2.4.52-1ubuntu4.1) ...
Enabling module mpm_event.
Enabling module authz_core.
Enabling module authz_host.
Enabling module authn_core.
Enabling module auth_basic.
Enabling module access_compat.
Enabling module authn_file.
Enabling module authz_user.
Enabling module alias.
Enabling module dir.
Enabling module autoindex.
Enabling module env.
Enabling module mime.
Enabling module negotiation.
Enabling module setenvif.
Enabling module filter.
Enabling module deflate.
Enabling module status.
Enabling module reqtimeout.
Enabling conf charset.
Enabling conf localized-error-pages.
Enabling conf other-vhosts-access-log.
Enabling conf security.
Enabling conf serve-cgi-bin.
Enabling site 000-default.
invoke-rc.d: could not determine current runlevel
invoke-rc.d: policy-rc.d denied execution of start.
Processing triggers for libc-bin (2.35-0ubuntu3) ...
Processing triggers for ca-certificates (20211016) ...
Updating certificates in /etc/ssl/certs...
0 added, 0 removed; done.
Running hooks in /etc/ca-certificates/update.d...
done.
root@41a10cc1b7bc:/# which apache2
/usr/sbin/apache2
root@41a10cc1b7bc:/# exit
exit
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps
CONTAINER ID   IMAGE     COMMAND                  CREATED              STATUS              PORTS                               NAMES
41a10cc1b7bc   ubuntu    "bash"                   About a minute ago   Up About a minute                                       keen_fermi
5140dc7221f7   nginx     "/docker-entrypoint.…"   14 minutes ago       Up 14 minutes       0.0.0.0:80->80/tcp, :::80->80/tcp   hardcore_chaum
0a5a17ff7d7f   nginx     "/docker-entrypoint.…"   18 minutes ago       Up 18 minutes       80/tcp                              tender_heyrovsky
e9a702ba20b6   nginx     "/docker-entrypoint.…"   21 minutes ago       Up 20 minutes       80/tcp                              my_nginx
b3eedf250d85   ubuntu    "bash"                   3 hours ago          Up 3 hours                                              suspicious_antonelli
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker commit 41a10cc1b7bc ubuntuapache2:v1
sha256:d769d651ecaf6b9a8e11720cab2b702411a96d6b9a16e6a4905c8cefea25754d
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker images
REPOSITORY      TAG       IMAGE ID       CREATED         SIZE
ubuntuapache2   v1        d769d651ecaf   5 seconds ago   221MB
httpd           latest    f2a976f932ec   6 hours ago     145MB
busybox         latest    7a80323521cc   3 days ago      1.24MB
nginx           latest    670dcc86b69d   13 days ago     142MB
ubuntu          latest    27941809078c   8 weeks ago     77.8MB
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -it ubuntuapache2:v1 bash
root@c7e915d9bbce:/# which apache2
/usr/sbin/apache2
root@c7e915d9bbce:/#
```



# Docker Network

### docker network inspect bridge

> **docker network inspect** command will be helpful to inspect docker network

```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network inspect bridge
[
    {
        "Name": "bridge",
        "Id": "8719d0b37317b859b4d082d7c8f9e162be41445555163b75ef3494952e548ff6",
        "Created": "2022-07-29T02:33:34.787699583Z",
        "Scope": "local",
        "Driver": "bridge",
        "EnableIPv6": false,
        "IPAM": {
            "Driver": "default",
            "Options": null,
            "Config": [
                {
                    "Subnet": "172.17.0.0/16"
                }
            ]
        },
        "Internal": false,
        "Attachable": false,
        "Ingress": false,
        "ConfigFrom": {
            "Network": ""
        },
        "ConfigOnly": false,
        "Containers": {
            "0a5a17ff7d7ff49a6c3a6fae0fc5c1ef6a8a7586381a2a8ed1c310d3c7c158ce": {
                "Name": "tender_heyrovsky",
                "EndpointID": "ce94b0532d7ed1a3222590c25e388b3001f88f0dc0d1da472c35b4d50269b34a",
                "MacAddress": "02:42:ac:11:00:04",
                "IPv4Address": "172.17.0.4/16",
                "IPv6Address": ""
            },
            "41a10cc1b7bc85232fe5f519c4db07c5f1b9d6924a1e6ae6616f4e9ae543c97c": {
                "Name": "keen_fermi",
                "EndpointID": "85f719112636e11e14099fb96bf6e686d6c5f24f13ba976a3c9be2affd3a2543",
                "MacAddress": "02:42:ac:11:00:06",
                "IPv4Address": "172.17.0.6/16",
                "IPv6Address": ""
            },
            "5140dc7221f7bf524e85057ff12d6dcf3b9f1c3f552012e42859c281c8aac413": {
                "Name": "hardcore_chaum",
                "EndpointID": "ec657b04489438ba3b8d5866d72ae687bb35a53ec0e2f1d438cb117bcfd231fe",
                "MacAddress": "02:42:ac:11:00:05",
                "IPv4Address": "172.17.0.5/16",
                "IPv6Address": ""
            },
            "b3eedf250d85b8132345f9370ce9c4bbc1e656af364312c3370ae08c0ba35173": {
                "Name": "suspicious_antonelli",
                "EndpointID": "659ddf97512879e1cf03e4122573085da40fab2edf9cb5a169197dfe94127550",
                "MacAddress": "02:42:ac:11:00:02",
                "IPv4Address": "172.17.0.2/16",
                "IPv6Address": ""
            },
            "e9a702ba20b6c3897cd4e236bc04e72b0935c128b9ede042569e05b9b690c429": {
                "Name": "my_nginx",
                "EndpointID": "f1f35dc7ddb18982dc89659466d3d9a7851c8097b1e2d286c96cddb004ad7b90",
                "MacAddress": "02:42:ac:11:00:03",
                "IPv4Address": "172.17.0.3/16",
                "IPv6Address": ""
            }
        },
        "Options": {
            "com.docker.network.bridge.default_bridge": "true",
            "com.docker.network.bridge.enable_icc": "true",
            "com.docker.network.bridge.enable_ip_masquerade": "true",
            "com.docker.network.bridge.host_binding_ipv4": "0.0.0.0",
            "com.docker.network.bridge.name": "docker0",
            "com.docker.network.driver.mtu": "1500"
        },
        "Labels": {}
    }
]
```





### docker network create

#### attach & disconnect

> **docker network create** command will be used to create new network of type bridge

> we can define --network while creating new container

```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network create mynetwork
7fc52d34b07783ebd4d1132ef27dbe7c0bac71e1e8cc744fbe5d5df2dce2d490
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network ls
NETWORK ID     NAME        DRIVER    SCOPE
8719d0b37317   bridge      bridge    local
725e396ecad9   host        host      local
7fc52d34b077   mynetwork   bridge    local
a829f0fd4a99   none        null      local
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker container run -itd --network=mynetwork ubuntu
1ac570cee7d129aa8e048d937a5e362e0d196dd23f90a4220f46fd43568c278c
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps
CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS                               NAMES
1ac570cee7d1   ubuntu    "bash"                   51 seconds ago   Up 50 seconds                                       upbeat_bhaskara
41a10cc1b7bc   ubuntu    "bash"                   13 minutes ago   Up 13 minutes                                       keen_fermi
5140dc7221f7   nginx     "/docker-entrypoint.…"   26 minutes ago   Up 26 minutes   0.0.0.0:80->80/tcp, :::80->80/tcp   hardcore_chaum
0a5a17ff7d7f   nginx     "/docker-entrypoint.…"   30 minutes ago   Up 30 minutes   80/tcp                              tender_heyrovsky
e9a702ba20b6   nginx     "/docker-entrypoint.…"   33 minutes ago   Up 32 minutes   80/tcp                              my_nginx
b3eedf250d85   ubuntu    "bash"                   3 hours ago      Up 3 hours                                          suspicious_antonelli
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network disconnect mynetwork 1ac
```



#### **Host networks are unique so we cannot create 2 host networks**

```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network create -d host myhost
Error response from daemon: only one instance of "host" network is allowed
root@ubuntu-s-1vcpu-2gb-sgp1-01:~#
```



### docker network rm

```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network ls
NETWORK ID     NAME        DRIVER    SCOPE
8719d0b37317   bridge      bridge    local
725e396ecad9   host        host      local
7fc52d34b077   mynetwork   bridge    local
a829f0fd4a99   none        null      local
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network rm mynetwork
mynetwork
```



### docker network prune



# Docker Volumes

### attach

> **Create a new container with "jenkins" image with tag 2.60.2, expose the port 8080:8080 and mount the volume "myvol" which we created in the previous task with path "/var/jenkins_home" from inside the container ?**

> we can use -v to mount volume with the container file path, docker run -v VOLUME:/path/inside/container image

```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -itd -p 8080:8080 -v myvol:/var/jenkins_home jenkins:2.60.2
```



### remove

> we need to remove the container first which was using the volume, then we can remove the volume as well using command **docker volume rm vol_name**

```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker kill 5de; docker rm 5de; docker volume rm myvol
5de
5de
myvol
```



### prune

> rm the volumes that are not used by any container



### bind mount

```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -itd -p 8080:8080 -v /tmp:/var/jenkins_home jenkins:2.60.2
5ec47c6b6630d11f0ab25410c9a071e863cbeffa1967493d4227cc0cd6cb8a5d
```





# DockerFile

```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker# docker images
REPOSITORY      TAG       IMAGE ID       CREATED          SIZE
myubuntuimage   v1        083f997ca0ff   18 seconds ago   77.8MB
ubuntuapache2   v1        d769d651ecaf   49 minutes ago   221MB
httpd           latest    f2a976f932ec   6 hours ago      145MB
busybox         latest    7a80323521cc   3 days ago       1.24MB
nginx           latest    670dcc86b69d   13 days ago      142MB
ubuntu          latest    27941809078c   8 weeks ago      77.8MB
jenkins         2.60.2    112170efb091   4 years ago      810MB
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker# vi Dockerfile
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker# cat Dockerfile
FROM ubuntu
LABEL name="devops"
LABEL email="devops@gmail.com"
RUN date > /tmp/date.txt
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker# docker build -t myubuntuimage:v2 .
Sending build context to Docker daemon  2.048kB
Step 1/4 : FROM ubuntu
 ---> 27941809078c
Step 2/4 : LABEL name="devops"
 ---> Using cache
 ---> 169d3013b658
Step 3/4 : LABEL email="devops@gmail.com"
 ---> Using cache
 ---> 083f997ca0ff
Step 4/4 : RUN date > /tmp/date.txt
 ---> Running in c97ebb220b58
Removing intermediate container c97ebb220b58
 ---> d28cdf10dd65
Successfully built d28cdf10dd65
Successfully tagged myubuntuimage:v2
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker# docker images
REPOSITORY      TAG       IMAGE ID       CREATED              SIZE
myubuntuimage   v2        d28cdf10dd65   24 seconds ago       77.8MB
myubuntuimage   v1        083f997ca0ff   About a minute ago   77.8MB
ubuntuapache2   v1        d769d651ecaf   50 minutes ago       221MB
httpd           latest    f2a976f932ec   6 hours ago          145MB
busybox         latest    7a80323521cc   3 days ago           1.24MB
nginx           latest    670dcc86b69d   13 days ago          142MB
ubuntu          latest    27941809078c   8 weeks ago          77.8MB
jenkins         2.60.2    112170efb091   4 years ago          810MB
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker# docker run -it d28cdf10dd65 bash
root@20ff93dc204f:/# hostname
20ff93dc204f
root@20ff93dc204f:/# cd /tmp/
root@20ff93dc204f:/tmp# ls -l
total 4
-rw-r--r-- 1 root root 29 Aug  2 11:03 date.txt
root@20ff93dc204f:/tmp# cat date.txt
Tue Aug  2 11:03:35 UTC 2022
root@20ff93dc204f:/tmp#
```



## Case7

> **Write a Dockerfile , meet below conditions:**
>
> 
>
> - **Use base Image of Ubuntu**
> - **Set Label "name = devops"**
> - **Set Environment Variable "pass = mypass"**
> - **Build the dockerfile and name your image as myubuntu and version must be 1**

```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker#  mkdir d47
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker#  cd d47
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d47# vi Dockerfile
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d47# docker build -t myubuntu:v1 .
Sending build context to Docker daemon  2.048kB
Step 1/3 : FROM ubuntu
 ---> 27941809078c
Step 2/3 : LABEL name="devops"
 ---> Using cache
 ---> 169d3013b658
Step 3/3 : ENV pass mypass
 ---> Running in bb62dc8cf111
Removing intermediate container bb62dc8cf111
 ---> 643d2a069187
Successfully built 643d2a069187
Successfully tagged myubuntu:v1
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d47# cat Dockerfile
FROM ubuntu
LABEL name="devops"
ENV pass mypass
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d47#
```



## Case8

> **Write a Dockerfile , meet below conditions:**
>
> 
>
> - **Use base Image of Ubuntu**
> - **Set Label as "name = devops"**
> - **Add run command with command "date > /etc/creation_date.txt"**
> - **Build the dockerfile and name your image as myubuntu and version must be 2**

```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker#  mkdir d48
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker# cd d48
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d48# ls
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d48# vi Dockerfile
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d48# docker build -t mybuntu:v2 .
Sending build context to Docker daemon  2.048kB
Step 1/3 : FROM ubuntu
 ---> 27941809078c
Step 2/3 : LABEL name="devops"
 ---> Using cache
 ---> 169d3013b658
Step 3/3 : RUN date > /etc/creation_date.txt
 ---> Running in fc3cf1ec34b0
Removing intermediate container fc3cf1ec34b0
 ---> a7222460443f
Successfully built a7222460443f
Successfully tagged mybuntu:v2
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d48# cat Dockerfile
FROM ubuntu
LABEL name="devops"
RUN date > /etc/creation_date.txt

root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d48#
```



## Case9

> **Write a Dockerfile , meet below conditions:**
>
> 
>
> - **Create empty file "log.txt" on your local machine , where you will create Dockerfile**
> - **Use base Image of Ubuntu**
> - **Set Label name = devops**
> - **COPY log.txt /etc/**
> - **Build the dockerfile and name your image as myubuntu and version must be 3**

```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d49# docker build -t myubuntu:v3 .
Sending build context to Docker daemon   2.56kB
Step 1/3 : FROM ubuntu
 ---> 27941809078c
Step 2/3 : LABEL name="devops"
 ---> Using cache
 ---> 169d3013b658
Step 3/3 : COPY log.txt /etc/
 ---> 2b5fff83947c
Successfully built 2b5fff83947c
Successfully tagged myubuntu:v3
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d49# cat Dockerfile
FROM ubuntu
LABEL name="devops"
COPY log.txt /etc/

root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d49#
```



## CaseA

> **Write a Dockerfile , meet below conditions:**
>
> 
>
> - **Use base Image of alpine**
> - **Set Label name = devops**
> - **CMD ["sleep" , "60"]**
> - **Build the dockerfile and name your image as myalpine and version must be 1**



> FROM tag is used to define the base image in your Dockerfile
>
> Label add label to docker image as key=value
>
> **CMD provides a default executable command for a container**



```shell
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d50# docker build -t myalpine:v1 .
Sending build context to Docker daemon  2.048kB
Step 1/3 : FROM alpine
latest: Pulling from library/alpine
530afca65e2e: Pull complete
Digest: sha256:7580ece7963bfa863801466c0a488f11c86f85d9988051a9f9c68cb27f6b7872
Status: Downloaded newer image for alpine:latest
 ---> d7d3d98c851f
Step 2/3 : LABEL name="devops"
 ---> Running in ef5e70272181
Removing intermediate container ef5e70272181
 ---> 63f6ecaa530b
Step 3/3 : CMD ["sleep", "60"]
 ---> Running in 129a0fa644cf
Removing intermediate container 129a0fa644cf
 ---> df58f3a5003a
Successfully built df58f3a5003a
Successfully tagged myalpine:v1
root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d50# cat Dockerfile
FROM alpine
LABEL name="devops"
CMD ["sleep", "60"]
```



