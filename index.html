<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content=""><meta name="keywords" content=""><meta name="author" content="Joe Huang"><meta name="copyright" content="Joe Huang"><title>Awaken Desparado</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 4.1.1"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="false"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Joe Huang</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">273</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">25</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">40</span></a></div></div></div><nav class="no-bg" id="nav"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Awaken Desparado</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="site-info"><div id="site-title">Awaken Desparado</div><div id="site-sub-title"></div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2020/07/15/Algo.%20Ult./BIT(FenwickTree)%20&amp;%20SegTree%20&amp;%20MST/">Algo. Ult./BIT(FenwickTree) &amp; SegTree &amp; MST</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-07-15</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Algo-Ult/">Algo. Ult.</a></span><div class="content"><h1 id="Fenwick-Tree"><a href="#Fenwick-Tree" class="headerlink" title="Fenwick Tree"></a>Fenwick Tree</h1><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggrsh3fq61j31920lm47i.jpg" alt="image-20200715173319551"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggrsp6fuk6j31960mgqeg.jpg" alt="image-20200715174108116"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggrsxs6yawj30y60ge7cg.jpg" alt="image-20200715174924357"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FenwickTree</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        self.sums_ = [<span class="number">0</span>] * (n+<span class="number">1</span>)</span><br><span class="line">        self.n = n</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, i, delta)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; len(self.sums_):</span><br><span class="line">            self.sums_[i] += delta</span><br><span class="line">            i += self._lowbit(i)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(self, i)</span>:</span></span><br><span class="line">        sum_ = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i &gt; <span class="number">0</span>:</span><br><span class="line">            sum_ += self.sums_[i]</span><br><span class="line">            i -= self._lowbit(i)</span><br><span class="line">        <span class="keyword">return</span> sum_</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_lowbit</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> x &amp; -x</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumArray</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, nums: List[int])</span>:</span></span><br><span class="line">        self.nums = nums</span><br><span class="line">        self.tree = FenwickTree(len(nums))</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">            self.tree.update(i+<span class="number">1</span>, nums[i])</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, i: int, val: int)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        self.tree.update(i+<span class="number">1</span>, val - self.nums[i])</span><br><span class="line">        self.nums[i] = val</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sumRange</span><span class="params">(self, i: int, j: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">return</span> self.tree.query(j + <span class="number">1</span>) - self.tree.query(i)</span><br></pre></td></tr></table></figure>



<h2 id="315-Count-of-Smaller-Numbers-After-Self"><a href="#315-Count-of-Smaller-Numbers-After-Self" class="headerlink" title="315.Count of Smaller Numbers After Self"></a>315.Count of Smaller Numbers After Self</h2><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggujdp1o3cj319y0n2k4o.jpg" alt="image-20200718023519761"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggujeh5tfej31ae0ms12c.jpg" alt="image-20200718023609770"></p>
<p>![image-20200718023824394](/Users/joe/Library/Application Support/typora-user-images/image-20200718023824394.png)</p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggujh9hnupj30xy0kygz9.jpg" alt="image-20200718023848244"></p>
<h1 id="Segment-Tree"><a href="#Segment-Tree" class="headerlink" title="Segment Tree"></a>Segment Tree</h1><ul>
<li>更直觀且容易理解，但就是代碼長</li>
<li>binary tree, balanced, so O(logN); not necessary perfect</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggtajfaf6jj315q0k2ajx.jpg" alt="image-20200717004335838"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggtaogby29j31760l4al7.jpg" alt="image-20200717004840098"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggtazhqyolj31380i210v.jpg" alt="image-20200717005918569"></p>
<p>![image-20200717010205089](/Users/joe/Library/Application Support/typora-user-images/image-20200717010205089.png)</p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggtbc3bhtbj31720ke13z.jpg" alt="image-20200717011114867"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggtbcsjngrj31840mgwq4.jpg" alt="image-20200717011201336"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggtbh09kqsj317s0mu7gt.jpg" alt="image-20200717011546317"></p>
<h1 id="MST"><a href="#MST" class="headerlink" title="MST"></a>MST</h1><p>Usually, turn edge list into adj. list</p>
<ul>
<li>adj matrix: |V| x |V|</li>
<li>adj list: |V| + |E|</li>
<li>edge list: |E|</li>
</ul>
<h2 id="Prim"><a href="#Prim" class="headerlink" title="Prim"></a>Prim</h2><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggrulfnwylj30gk05ujt1.jpg" alt="image-20200715184644350"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggrulc6ffvj30im0b00w3.jpg" alt="image-20200715184636907"></p>
<p>Greedy!</p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggrus16rd6j31dk0ognax.jpg" alt="image-20200715185254214"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggrusiuvkpj31iu0q41gm.jpg" alt="image-20200715185312545"></p>
<h2 id="Kruskal"><a href="#Kruskal" class="headerlink" title="Kruskal"></a>Kruskal</h2><p>![image-20200715230409210](/Users/joe/Library/Application Support/typora-user-images/image-20200715230409210.png)</p>
<p>![image-20200715230645534](/Users/joe/Library/Application Support/typora-user-images/image-20200715230645534.png)</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/05/26/Algo.%20Ult./9P_high_freq/">Algo. Ult./9P_high_freq</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-05-26</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/AlgoUlt/">AlgoUlt.</a></span><div class="content"><h2 id="暴力-1835-1827-停在原地的方案數"><a href="#暴力-1835-1827-停在原地的方案數" class="headerlink" title="暴力: 1835, 1827 停在原地的方案數"></a>暴力: 1835, 1827 停在原地的方案數</h2><h2 id="1835-停在原地的方案數-I"><a href="#1835-停在原地的方案數-I" class="headerlink" title="1835 停在原地的方案數 I"></a>1835 停在原地的方案數 I</h2><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gf5m5otwomj31ee0sekgd.jpg" alt="image-20200526095155742"></p>
<p>![image-20200526095237745](<a href="https://tva1.sinaimg.cn/large/007S8ZIlgy1gf5m6bmw5ij31em0sgh7a.jpg" target="_blank" rel="noopener">https://tva1.sinaimg.cn/large/007S8ZIlgy1gf5m6bmw5ij31em0sgh7a.jpg</a></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gf5m6p6z2kj31eg0nekao.jpg" alt="image-20200526095300143"></p>
<ul>
<li><p>DFS: 指數級, O(3^steps)</p>
</li>
<li><p>DP: O(position*step); O(step^2), </p>
<ul>
<li><pre><code>dp[pos][steps]
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#96;&#96;&#96;python</span><br><span class="line">        # write your code here</span><br><span class="line">        return self.dp_MLE(steps, arrLen)</span><br><span class="line">        return self.dp(steps, arrLen)</span><br><span class="line">    # def dfs(self, steps, arrLen):</span><br><span class="line">    </span><br><span class="line">    def dp_MLE(self, steps, arrLen):</span><br><span class="line">        n &#x3D; arrLen</span><br><span class="line">        dp &#x3D; [[0 for _ in range(n)] for _ in range(steps+1)]</span><br><span class="line">        dp[0][0] &#x3D; 1</span><br><span class="line">        M &#x3D; 10**9 + 7</span><br><span class="line">        </span><br><span class="line">        # for k in range(1, steps&#x2F;&#x2F;2+1):</span><br><span class="line">        #     for i in range(n):</span><br><span class="line">        for k in range(1, steps+1):</span><br><span class="line">            for i in range(0, n):</span><br><span class="line">                if i &#x3D;&#x3D; 0:</span><br><span class="line">                    dp[k][i] &#x3D; dp[k-1][i] + dp[k-1][i+1]</span><br><span class="line">                elif i &#x3D;&#x3D; n-1:</span><br><span class="line">                    dp[k][i] &#x3D; dp[k-1][i-1] + dp[k-1][i]</span><br><span class="line">                else:</span><br><span class="line">                    dp[k][i] &#x3D; dp[k-1][i-1] + dp[k-1][i] + dp[k-1][i+1]</span><br><span class="line">        </span><br><span class="line">            dp[k][i] %&#x3D; M</span><br><span class="line">        return dp[steps][0]        </span><br><span class="line">        </span><br><span class="line">    def dp(self, steps, arrLen):</span><br><span class="line">        # VIDEO:</span><br><span class="line">        #     https:&#x2F;&#x2F;youtu.be&#x2F;WiYfBPmhRDk?t&#x3D;895</span><br><span class="line">        </span><br><span class="line">        # dp[i][j] means @ i-th round, at j-th pos</span><br><span class="line">        # max steps &#x3D;&#x3D; 500, means</span><br><span class="line">        # dp[250][250] &#x3D; 1</span><br><span class="line">        # dp[251][249] &#x3D; dp[250][248, 249, 250]</span><br><span class="line">        # dp[252][248] &#x3D; dp[251][247, 248, 259]</span><br><span class="line">        </span><br><span class="line">        n &#x3D; arrLen</span><br><span class="line">        </span><br><span class="line">        dp &#x3D; [[0 for _ in range(steps&#x2F;&#x2F;2 + 2)] for _ in range(steps+1)]</span><br><span class="line">        dp[0][0] &#x3D; 1</span><br><span class="line">        M &#x3D; 10**9 + 7</span><br><span class="line">        </span><br><span class="line">        # for k in range(1, steps&#x2F;&#x2F;2+1):</span><br><span class="line">        #     for i in range(n):</span><br><span class="line">        for k in range(1, steps+1):</span><br><span class="line">            for i in range(0, steps&#x2F;&#x2F;2+1):</span><br><span class="line">                if i &#x3D;&#x3D; 0:</span><br><span class="line">                    dp[k][i] &#x3D; dp[k-1][i] + dp[k-1][i+1]</span><br><span class="line">                elif i &#x3D;&#x3D; n-1:</span><br><span class="line">                    dp[k][i] &#x3D; dp[k-1][i-1] + dp[k-1][i]</span><br><span class="line">                else:</span><br><span class="line">                    dp[k][i] &#x3D; dp[k-1][i-1] + dp[k-1][i] + dp[k-1][i+1]</span><br><span class="line">        </span><br><span class="line">            dp[k][i] %&#x3D; M</span><br><span class="line">        return dp[steps][0]</span><br></pre></td></tr></table></figure>


</code></pre></li>
</ul>
</li>
</ul>
<h2 id="156-合併區間"><a href="#156-合併區間" class="headerlink" title="156 合併區間"></a>156 合併區間</h2><p>只是個引子?! </p>
<ul>
<li>排序、priority queue、掃描線 skyline</li>
<li>一般start排序，只有会议室是用end排序</li>
</ul>
<h2 id="1879-兩數之和"><a href="#1879-兩數之和" class="headerlink" title="1879 兩數之和"></a>1879 兩數之和</h2><h2 id="1563-目的地的最短路徑"><a href="#1563-目的地的最短路徑" class="headerlink" title="1563 目的地的最短路徑"></a>1563 目的地的最短路徑</h2><ul>
<li>BFS: <ol>
<li>最短路徑</li>
<li>分層遍歷</li>
<li>拓樸排序 (有前置要求的遍歷)</li>
</ol>
</li>
</ul>
<ul>
<li>BFS or DFS ?!<ul>
<li>DFS: 遞歸、棧、可能 stack overflow</li>
<li>BFS: Queue</li>
</ul>
</li>
</ul>
<ul>
<li>DFS:<ol>
<li>所有方案</li>
</ol>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gf5nq3o73mj31gs0t67g0.jpg" alt="image-20200526104615664"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gf5ntvcuuoj31gw0r6n7l.jpg" alt="image-20200526104952612"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MapType</span>:</span></span><br><span class="line">    ROAD = <span class="number">0</span></span><br><span class="line">    WALL = <span class="number">1</span></span><br><span class="line">    DESTINATION = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">DIRECTIONS = [[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">-1</span>], [<span class="number">1</span>, <span class="number">0</span>], [<span class="number">-1</span>, <span class="number">0</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># (x, y) ==&gt; x*i + y In Other languages</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    @param targetMap: </span></span><br><span class="line"><span class="string">    @return: nothing</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">shortestPath</span><span class="params">(self, targetMap)</span>:</span></span><br><span class="line">        <span class="comment"># Write your code here</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> targetMap: <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        </span><br><span class="line">        Q = deque()</span><br><span class="line">        visited = set()</span><br><span class="line">        Q.append((<span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">        visited.add((<span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">        step = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> Q:</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> range(len(Q)):</span><br><span class="line">                x, y = Q.popleft()</span><br><span class="line">                <span class="comment"># visited.add(next_x, next_y) # ?! V.S. Line39</span></span><br><span class="line">                <span class="comment"># [0,0]</span></span><br><span class="line">                <span class="comment"># [0,1], [1,0]</span></span><br><span class="line">                <span class="comment"># [0,2], [1,1], [2,0], [1,1]，[1,1]會被重覆放，就不是一個 O(N)了，所以必須放在下面</span></span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> targetMap[x][y] == MapType.DESTINATION:</span><br><span class="line">                    <span class="keyword">return</span> step</span><br><span class="line">                        </span><br><span class="line">                <span class="keyword">for</span> direction <span class="keyword">in</span> DIRECTIONS:</span><br><span class="line">                    next_x = x + direction[<span class="number">0</span>]</span><br><span class="line">                    next_y = y + direction[<span class="number">1</span>]</span><br><span class="line">                    <span class="keyword">if</span> self.is_valid(next_x, next_y, targetMap, visited):</span><br><span class="line">                        Q.append((next_x, next_y))</span><br><span class="line">                        visited.add((next_x, next_y))</span><br><span class="line">            </span><br><span class="line">            step += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_valid</span><span class="params">(self, x, y, targetMap, visited)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> x &lt; <span class="number">0</span> <span class="keyword">or</span> y &lt; <span class="number">0</span> <span class="keyword">or</span> x &gt;= len(targetMap) <span class="keyword">or</span> y &gt;= len(targetMap[<span class="number">0</span>]):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">if</span> (x, y) <span class="keyword">in</span> visited:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">if</span> targetMap[x][y] == MapType.WALL:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gf5ocag5joj31260aateb.jpg" alt="image-20200526110735910"></p>
<h2 id="1833-pen-box-—-56-兩數之和-151-Stock-III"><a href="#1833-pen-box-—-56-兩數之和-151-Stock-III" class="headerlink" title="1833 pen box  — 56 兩數之和 + 151 Stock III"></a>1833 pen box  — 56 兩數之和 + 151 Stock III</h2><ul>
<li>两個不重疊的區間問題，用隔板思考, 同Stock iii</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    @param boxes: number of pens for each box</span></span><br><span class="line"><span class="string">    @param target: the target number</span></span><br><span class="line"><span class="string">    @return: the minimum boxes</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="comment"># # write your code here</span></span><br><span class="line">    <span class="comment"># # 找有效區間: 2 pointer</span></span><br><span class="line">    <span class="comment"># # 找最短有效后間: 打擂台 min_len = sys.maxsize; min_len = min(min_len, now_len)</span></span><br><span class="line">    <span class="comment"># # 枚舉隔板位置, 左半部分最短有效區間 + 右半部分最短有效區間</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># # O(N)</span></span><br><span class="line">    <span class="comment"># min_left[i]: [0:i] 前i個元素組成的list最短有效區間長度</span></span><br><span class="line">    <span class="comment"># min_right[i]: [i:n-1]第i個元素之後的list最短有效區間長度</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># # O(N) ↑結合上面那個 O(N)</span></span><br><span class="line">    <span class="comment"># min_len = sys.maxsize</span></span><br><span class="line">    <span class="comment"># for 隔板位置 in range(n):</span></span><br><span class="line">    <span class="comment">#     min_len = min(min_len, min_left[隔板位置] + min_right[隔板位置+1])</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment"># i = t+1, 相較於 i=t，最短的有效區間長度變小了，代表目前這個點一定在有效區間中</span></span><br><span class="line">    <span class="comment"># min_left[t+1] = min(min_left[t], 右針在t+1的有效區間的長度)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 一步一步移右指針</span></span><br><span class="line">    <span class="comment">#     如果區間和 &gt; target:</span></span><br><span class="line">    <span class="comment">#         左指針右移</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment">#     if now_sum != target:</span></span><br><span class="line">    <span class="comment">#         left_min[right] = 之前的最短有效區間的長度</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment">#     if now_sum == target:</span></span><br><span class="line">    <span class="comment">#         打擂台</span></span><br><span class="line">    <span class="comment">#         left_min[right] = min(之前的最短有效區間長度，當前區間長度)</span></span><br><span class="line">            </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minimumBoxes</span><span class="params">(self, boxes, target)</span>:</span> <span class="comment"># 前提：都正數</span></span><br><span class="line">        n = len(boxes)</span><br><span class="line">        <span class="keyword">if</span> n == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        left_min = self.get_minimum_valid_length(boxes, target)</span><br><span class="line">        <span class="comment"># [1,2,3,4,5,6], target=5</span></span><br><span class="line">        <span class="comment"># left_min = [M,M,2,2,1]</span></span><br><span class="line">        </span><br><span class="line">        boxes = boxes[::<span class="number">-1</span>] <span class="comment"># 外面進來的 boxes 並沒有被改掉，不用擔心, 要注意會發生變化的時候或不會發生的時候</span></span><br><span class="line">        right_min = self.get_minimum_valid_length(boxes, target)</span><br><span class="line">        right_min = right_min[::<span class="number">-1</span>]</span><br><span class="line">        <span class="comment"># [6,5,4,3,2,1], target=5</span></span><br><span class="line">        <span class="comment"># right_min = [M,1,1,1,1,1,M]</span></span><br><span class="line">        <span class="comment"># [1,1,1,1,1,M]</span></span><br><span class="line">        </span><br><span class="line">        ans = sys.maxsize</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n<span class="number">-1</span>):</span><br><span class="line">            ans = min(ans, left_min[i]+right_min[i+<span class="number">1</span>])</span><br><span class="line">        <span class="keyword">if</span> ans == sys.maxsize:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        <span class="keyword">return</span> ans</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_minimum_valid_length</span><span class="params">(self, boxes, target)</span>:</span></span><br><span class="line">        <span class="comment"># 當前區間和</span></span><br><span class="line">        now_sum = <span class="number">0</span></span><br><span class="line">        n = len(boxes)</span><br><span class="line">        left_min = [sys.maxsize] * n</span><br><span class="line">        </span><br><span class="line">        left = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> right <span class="keyword">in</span> range(n):</span><br><span class="line">            now_sum += boxes[right]</span><br><span class="line">            <span class="keyword">while</span> now_sum &gt; target:</span><br><span class="line">                now_sum -= boxes[left]</span><br><span class="line">                left += <span class="number">1</span></span><br><span class="line">                </span><br><span class="line">            <span class="string">"""!!! 防OOR """</span> </span><br><span class="line">            <span class="keyword">if</span> right == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">if</span> now_sum == target:</span><br><span class="line">                    left_min[right] = <span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> now_sum != target:</span><br><span class="line">                left_min[right] = left_min[right - <span class="number">1</span>]</span><br><span class="line">            <span class="keyword">if</span> now_sum == target:</span><br><span class="line">                left_min[right] = min(left_min[right - <span class="number">1</span>], right - left + <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> left_min</span><br></pre></td></tr></table></figure>









<h1 id="數據範圍思考"><a href="#數據範圍思考" class="headerlink" title="數據範圍思考"></a>數據範圍思考</h1><ul>
<li>如何接水</li>
</ul>
<blockquote>
<h5 id="单选题-一般评测机1s能运算多少次"><a href="#单选题-一般评测机1s能运算多少次" class="headerlink" title="[单选题]一般评测机1s能运算多少次"></a>[单选题]一般评测机1s能运算多少次</h5><p>A.10^4-10^631.43% 选择</p>
<p>B.10^7-10^942.86% 选择</p>
<p>C.10^10-10^1225.71% 选择</p>
<p><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTM0MTgxMjgxODM5IiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjM3NjIiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTUxOC4xMiA1MTYuMTZtLTQ5MCAwYTQ5MCA0OTAgMCAxIDAgOTgwIDAgNDkwIDQ5MCAwIDEgMC05ODAgMFoiIGZpbGw9IiM1NkI0MzIiIHAtaWQ9IjM3NjMiPjwvcGF0aD48cGF0aCBkPSJNMzkzLjIxMzYxOSA2NjQuMzM1NDk1bTI4LjI4NDI3MS0yOC4yODQyNzFsMjk2Ljk4NDg0OS0yOTYuOTg0ODQ4cTI4LjI4NDI3MS0yOC4yODQyNzEgNTYuNTY4NTQyIDBsMCAwcTI4LjI4NDI3MSAyOC4yODQyNzEgMCA1Ni41Njg1NDJsLTI5Ni45ODQ4NDggMjk2Ljk4NDg0OHEtMjguMjg0MjcxIDI4LjI4NDI3MS01Ni41Njg1NDMgMGwwIDBxLTI4LjI4NDI3MS0yOC4yODQyNzEgMC01Ni41Njg1NDJaIiBmaWxsPSIjRkZGRkZGIiBwLWlkPSIzNzY0Ij48L3BhdGg+PHBhdGggZD0iTTI4OS40Njk4NCA0NTIuODQ3ODgzbTI4LjI4NDI3MSAyOC4yODQyNzFsMTU1LjU2MzQ5MiAxNTUuNTYzNDkycTI4LjI4NDI3MSAyOC4yODQyNzEgMCA1Ni41Njg1NDNsMCAwcS0yOC4yODQyNzEgMjguMjg0MjcxLTU2LjU2ODU0MyAwbC0xNTUuNTYzNDkxLTE1NS41NjM0OTJxLTI4LjI4NDI3MS0yOC4yODQyNzEgMC01Ni41Njg1NDNsMCAwcTI4LjI4NDI3MS0yOC4yODQyNzEgNTYuNTY4NTQyIDBaIiBmaWxsPSIjRkZGRkZGIiBwLWlkPSIzNzY1Ij48L3BhdGg+PC9zdmc+" alt="img">答对了，您选择的答案是B</p>
<p><strong>正确答案:</strong>B</p>
<p><strong>解析:</strong></p>
<p>我们一般认为如果最终的运算次数达到10^7-10^9就可能会超时，但是达到更大的如10^10-10^12次的计算次数时就可能会超时。比如n=10^3时，时间复杂度为O(n^2）复杂度的算法就一定不会超时，但是时间复杂度为O(N^3)复杂度的算法就大概率会超时。</p>
</blockquote>
<blockquote>
<h5 id="单选题-如果一个数组长为10-5，那么以下哪种算法一定会超时？"><a href="#单选题-如果一个数组长为10-5，那么以下哪种算法一定会超时？" class="headerlink" title="[单选题]如果一个数组长为10^5，那么以下哪种算法一定会超时？"></a>[单选题]如果一个数组长为10^5，那么以下哪种算法一定会超时？</h5><p>A.双指针0.00% 选择    N</p>
<p>B.前缀和2.33% 选择    N</p>
<p>C.一维dp13.95% 选择    N</p>
<p>D.枚举数组中的所有子区间进行O(1)判断79.07% 选择    N^2 &gt; 10^9 必超時</p>
<p>E.在数组中二分查找n次4.65% 选择    NlogN</p>
<p>F.这都是些啥算法qaq0.00% 选择</p>
<p><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTM0MTgxMjgxODM5IiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjM3NjIiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTUxOC4xMiA1MTYuMTZtLTQ5MCAwYTQ5MCA0OTAgMCAxIDAgOTgwIDAgNDkwIDQ5MCAwIDEgMC05ODAgMFoiIGZpbGw9IiM1NkI0MzIiIHAtaWQ9IjM3NjMiPjwvcGF0aD48cGF0aCBkPSJNMzkzLjIxMzYxOSA2NjQuMzM1NDk1bTI4LjI4NDI3MS0yOC4yODQyNzFsMjk2Ljk4NDg0OS0yOTYuOTg0ODQ4cTI4LjI4NDI3MS0yOC4yODQyNzEgNTYuNTY4NTQyIDBsMCAwcTI4LjI4NDI3MSAyOC4yODQyNzEgMCA1Ni41Njg1NDJsLTI5Ni45ODQ4NDggMjk2Ljk4NDg0OHEtMjguMjg0MjcxIDI4LjI4NDI3MS01Ni41Njg1NDMgMGwwIDBxLTI4LjI4NDI3MS0yOC4yODQyNzEgMC01Ni41Njg1NDJaIiBmaWxsPSIjRkZGRkZGIiBwLWlkPSIzNzY0Ij48L3BhdGg+PHBhdGggZD0iTTI4OS40Njk4NCA0NTIuODQ3ODgzbTI4LjI4NDI3MSAyOC4yODQyNzFsMTU1LjU2MzQ5MiAxNTUuNTYzNDkycTI4LjI4NDI3MSAyOC4yODQyNzEgMCA1Ni41Njg1NDNsMCAwcS0yOC4yODQyNzEgMjguMjg0MjcxLTU2LjU2ODU0MyAwbC0xNTUuNTYzNDkxLTE1NS41NjM0OTJxLTI4LjI4NDI3MS0yOC4yODQyNzEgMC01Ni41Njg1NDNsMCAwcTI4LjI4NDI3MS0yOC4yODQyNzEgNTYuNTY4NTQyIDBaIiBmaWxsPSIjRkZGRkZGIiBwLWlkPSIzNzY1Ij48L3BhdGg+PC9zdmc+" alt="img">答对了，您选择的答案是D</p>
<p><strong>正确答案:</strong>D</p>
<p><strong>解析:</strong></p>
<p>数组中的子区间个数为O(N^2)级别，因此，即使判断的时间复杂度为O(1), 总时间复杂度仍然是O(N^2). 而10^10以上级别的时间对于评测机来说需要运行的时间非常长，一定会超出时间限制。</p>
</blockquote>
<h2 id="Analyzation"><a href="#Analyzation" class="headerlink" title="Analyzation"></a>Analyzation</h2><ul>
<li>n = 10^4 、 10^5<ul>
<li>O(n) ==&gt; 雙指針？前綴和？遍歷？DP?</li>
<li>O(nlogn) ==&gt; 排序？二分？</li>
</ul>
</li>
<li>n = 10^3<ul>
<li>O(n^2) ==&gt; 二維數組？雙重循環？二維dp?</li>
</ul>
</li>
<li>n = 10^2<ul>
<li>O(n^3) ==&gt; 三重循環？e.g. Stone game 區間DP</li>
</ul>
</li>
<li>n = 10<ul>
<li>O(2^n), O(n!) ==&gt; dfs暴力？    2^n ~= 10^3, 10^6</li>
</ul>
</li>
<li>n = 10^9<ul>
<li>別打算開數組存或 O(n) 複雜度</li>
</ul>
</li>
</ul>
<h2 id="159-尋找旋轉排序數中的最小值-無重複值"><a href="#159-尋找旋轉排序數中的最小值-無重複值" class="headerlink" title="159. 尋找旋轉排序數中的最小值 - 無重複值"></a>159. 尋找旋轉排序數中的最小值 - 無重複值</h2><h2 id="183-木材加工"><a href="#183-木材加工" class="headerlink" title="183. 木材加工"></a>183. 木材加工</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    @param L: Given n pieces of wood with length L[i]</span></span><br><span class="line"><span class="string">    @param k: An integer</span></span><br><span class="line"><span class="string">    @return: The maximum length of the small pieces</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">woodCut</span><span class="params">(self, L, k)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> L: </span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="comment"># start, end = max(L), sum(L)</span></span><br><span class="line">        start, end = <span class="number">1</span>, max(L)</span><br><span class="line">        <span class="keyword">while</span> start+<span class="number">1</span> &lt; end:</span><br><span class="line">            mid = start + (end - start)//<span class="number">2</span></span><br><span class="line">            <span class="keyword">if</span> self.get_pieces(L, mid) &lt; k:</span><br><span class="line">                end = mid</span><br><span class="line">            <span class="keyword">else</span>:   <span class="comment"># 表示可以切出k段，就加長再試試</span></span><br><span class="line">                start = mid</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> self.get_pieces(L, end) &gt;= k:</span><br><span class="line">            <span class="keyword">return</span> end</span><br><span class="line">        <span class="keyword">if</span> self.get_pieces(L, start) &gt;= k:</span><br><span class="line">            <span class="keyword">return</span> start</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_pieces</span><span class="params">(self, L, length)</span>:</span></span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(L)):</span><br><span class="line">            count += L[i]//length</span><br><span class="line">        <span class="keyword">return</span> count</span><br><span class="line">            </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    <span class="comment">#     if not L:</span></span><br><span class="line">    <span class="comment">#         return 0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#     start, end = 1, max(L)</span></span><br><span class="line">    <span class="comment">#     while start + 1 &lt; end:</span></span><br><span class="line">    <span class="comment">#         mid = (start + end) // 2</span></span><br><span class="line">    <span class="comment">#         if self.get_pieces(L, mid) &gt;= k:</span></span><br><span class="line">    <span class="comment">#             start = mid</span></span><br><span class="line">    <span class="comment">#         else:</span></span><br><span class="line">    <span class="comment">#             end = mid</span></span><br><span class="line">                </span><br><span class="line">    <span class="comment">#     if self.get_pieces(L, end) &gt;= k:</span></span><br><span class="line">    <span class="comment">#         return end</span></span><br><span class="line">    <span class="comment">#     if self.get_pieces(L, start) &gt;= k:</span></span><br><span class="line">    <span class="comment">#         return start</span></span><br><span class="line">            </span><br><span class="line">    <span class="comment">#     return 0</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment"># def get_pieces(self, L, length):</span></span><br><span class="line">    <span class="comment">#     pieces = 0</span></span><br><span class="line">    <span class="comment">#     for l in L:</span></span><br><span class="line">    <span class="comment">#         pieces += l // length</span></span><br><span class="line">    <span class="comment">#     return pieces</span></span><br></pre></td></tr></table></figure>



<h2 id="62-搜索旋转排序数组"><a href="#62-搜索旋转排序数组" class="headerlink" title="62. 搜索旋转排序数组"></a>62. 搜索旋转排序数组</h2><h2 id="437-書籍複印"><a href="#437-書籍複印" class="headerlink" title="437. 書籍複印"></a>437. 書籍複印</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    @param pages: an array of integers</span></span><br><span class="line"><span class="string">    @param k: An integer</span></span><br><span class="line"><span class="string">    @return: an integer</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">copyBooks</span><span class="params">(self, pages, k)</span>:</span></span><br><span class="line">        <span class="comment"># return self.copyBooks_old(pages, k)</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> pages:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="comment"># 使用九章算法强化班中讲过的基于答案值域的二分法。 答案的范围在 max(pages)~sum(pages) 之间，每次二分到一个时间 time_limit 的时候，用贪心法从左到右扫描一下 pages，看看需要多少个人来完成抄袭。 如果这个值 &lt;= k，那么意味着大家花的时间可能可以再少一些，如果 &gt; k 则意味着人数不够，需要降低工作量。</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># mins</span></span><br><span class="line">        start, end = max(pages), sum(pages)</span><br><span class="line">        <span class="keyword">while</span> start + <span class="number">1</span> &lt; end:</span><br><span class="line">            mid = start + (end - start)//<span class="number">2</span></span><br><span class="line">            <span class="keyword">if</span> self.get_min_required_people(pages, mid) &lt;= k:</span><br><span class="line">                <span class="comment"># 人手夠的情況，時間可以再短一點</span></span><br><span class="line">                end = mid</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># 人手不夠的情況，時間給得再多一點</span></span><br><span class="line">                start = mid</span><br><span class="line">                </span><br><span class="line">        <span class="comment"># print(start, end)</span></span><br><span class="line">        <span class="keyword">if</span> self.get_min_required_people(pages, start) &lt;= k:</span><br><span class="line">            <span class="keyword">return</span> start</span><br><span class="line">        <span class="comment"># if self.get_min_required_people(pages, end) &lt;= k:</span></span><br><span class="line">        <span class="keyword">return</span> end</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_min_required_people</span><span class="params">(self, pages, time_limit)</span>:</span></span><br><span class="line">        people = <span class="number">1</span></span><br><span class="line">        time = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(pages)):</span><br><span class="line">            time += pages[i]</span><br><span class="line">            <span class="keyword">if</span> time &gt; time_limit:</span><br><span class="line">                <span class="comment"># print(pages[i])</span></span><br><span class="line">                people += <span class="number">1</span></span><br><span class="line">                time = pages[i] <span class="comment"># CRITICAL!!!</span></span><br><span class="line">                </span><br><span class="line">        <span class="comment"># print(people)</span></span><br><span class="line">        <span class="keyword">return</span> people</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">copyBooks_old</span><span class="params">(self, pages, k)</span>:</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> pages:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">            </span><br><span class="line">        start, end = max(pages), sum(pages)</span><br><span class="line">        <span class="keyword">while</span> start + <span class="number">1</span> &lt; end:</span><br><span class="line">            print(start, end)</span><br><span class="line">            mid = (start + end) // <span class="number">2</span></span><br><span class="line">            <span class="keyword">if</span> self.get_least_people(pages, mid) &lt;= k:</span><br><span class="line">                end = mid</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                start = mid</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> self.get_least_people(pages, start) &lt;= k:</span><br><span class="line">            <span class="keyword">return</span> start</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">return</span> end</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_least_people</span><span class="params">(self, pages, time_limit)</span>:</span></span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        time_cost = <span class="number">0</span> </span><br><span class="line">        <span class="keyword">for</span> page <span class="keyword">in</span> pages:</span><br><span class="line">            <span class="keyword">if</span> time_cost + page &gt; time_limit:</span><br><span class="line">                count += <span class="number">1</span></span><br><span class="line">                time_cost = <span class="number">0</span></span><br><span class="line">            time_cost += page</span><br><span class="line">        print(count+<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> count + <span class="number">1</span></span><br></pre></td></tr></table></figure>



<h2 id="949-Fibo-II"><a href="#949-Fibo-II" class="headerlink" title="949. Fibo II"></a>949. Fibo II</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># import numpy as np </span></span><br><span class="line"><span class="keyword">from</span> copy <span class="keyword">import</span> deepcopy</span><br><span class="line">MOD = <span class="number">10000</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Matrix</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n, m)</span>:</span></span><br><span class="line">        self.mat = [[<span class="number">0</span> <span class="keyword">for</span> j <span class="keyword">in</span> range(m)] <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line">        self.n = n</span><br><span class="line">        self.m = m </span><br><span class="line"></span><br><span class="line">    <span class="comment"># A * B  ==&gt; A.__mul__(B)  n*m (x) m*k </span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__mul__</span><span class="params">(self, matrix)</span>:</span></span><br><span class="line">        k = len(matrix.mat[<span class="number">0</span>])</span><br><span class="line">        tmp = Matrix(self.n, k)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(self.n):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(k):</span><br><span class="line">                <span class="keyword">for</span> t <span class="keyword">in</span> range(self.n):</span><br><span class="line">                    tmp.mat[i][j] += self.mat[i][t] * matrix.mat[t][j]</span><br><span class="line">                    tmp.mat[i][j] %= MOD </span><br><span class="line">        <span class="keyword">return</span> tmp</span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    @param n: an integer</span></span><br><span class="line"><span class="string">    @return: return an int</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">lastFourDigitsOfFn</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        <span class="comment"># write your code here</span></span><br><span class="line">        <span class="keyword">if</span> n == <span class="number">0</span>: </span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="comment"># return self.O_N(n)</span></span><br><span class="line">        <span class="comment"># return self.O_logN(n)</span></span><br><span class="line">        <span class="keyword">return</span> self.O_logN_tmpl(n)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">power</span><span class="params">(self, A, k)</span>:</span>	<span class="comment"># FAST POW</span></span><br><span class="line">        n = len(A.mat)</span><br><span class="line">        ans = Matrix(n, n)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            ans.mat[i][i] = <span class="number">1</span> </span><br><span class="line">        <span class="keyword">while</span> k &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">if</span> k %  <span class="number">2</span> == <span class="number">1</span>:</span><br><span class="line">                ans = A * ans </span><br><span class="line">            A = A * A</span><br><span class="line">            k //= <span class="number">2</span> </span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans    </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">O_logN_tmpl</span><span class="params">(self, n)</span>:</span>    </span><br><span class="line">        <span class="keyword">if</span> n == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">            </span><br><span class="line">        A = Matrix(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">        A.mat = [[<span class="number">1</span>, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">0</span>]]</span><br><span class="line">        A = self.power(A, n<span class="number">-1</span>)</span><br><span class="line">        </span><br><span class="line">        x = Matrix(<span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">        x.mat = [[<span class="number">1</span>], [<span class="number">0</span>]]</span><br><span class="line">        </span><br><span class="line">        ans = A * x</span><br><span class="line">        <span class="keyword">return</span> ans.mat[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">            </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">O_logN</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        # T = np.array([</span></span><br><span class="line"><span class="string">        #         [1, 1], </span></span><br><span class="line"><span class="string">        #         [1, 0]</span></span><br><span class="line"><span class="string">        #     ])</span></span><br><span class="line"><span class="string">        # X = T.copy()</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        # for i in range(n):</span></span><br><span class="line"><span class="string">        #     X = np.dot(T, X)</span></span><br><span class="line"><span class="string">        # for i in range(1, n):     # Should do this D&amp;C</span></span><br><span class="line"><span class="string">            # X = dot2x2(T, X)</span></span><br><span class="line"><span class="string">        # return X[0][1]%10000</span></span><br><span class="line"><span class="string">        # https://www.youtube.com/watch?v=PJT0oqZqixU        </span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">dot2x2</span><span class="params">(A, B)</span>:</span></span><br><span class="line">            <span class="comment"># m, n, k = len(A), len(A[0]), len(B[0])</span></span><br><span class="line">            C = [[<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">2</span>)] <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">2</span>)]</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>):</span><br><span class="line">                <span class="keyword">for</span> t <span class="keyword">in</span> range(<span class="number">2</span>):</span><br><span class="line">                    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">2</span>):</span><br><span class="line">                        C[i][t] += A[i][j] * B[j][t] % <span class="number">10000</span></span><br><span class="line">            <span class="comment"># C[0][0] = A[0][0] * B[0][0] + A[0][1] * B[1][0]</span></span><br><span class="line">            <span class="comment"># C[0][1] = A[0][0] * B[0][1] + A[0][1] * B[1][1]</span></span><br><span class="line">            <span class="comment"># C[1][0] = A[1][0] * B[0][0] + A[1][1] * B[1][0]</span></span><br><span class="line">            <span class="comment"># C[1][1] = A[1][0] * B[0][1] + A[1][1] * B[1][1]</span></span><br><span class="line">            <span class="keyword">return</span> C</span><br><span class="line">            </span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">helper</span><span class="params">(T, n)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> n &lt;= <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">return</span> T</span><br><span class="line">            X = helper(T, n//<span class="number">2</span>)</span><br><span class="line">            tmp = dot2x2(X, X)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> n % <span class="number">2</span> == <span class="number">1</span>:</span><br><span class="line">                Y = [[<span class="number">1</span>, <span class="number">1</span>], </span><br><span class="line">                     [<span class="number">1</span>, <span class="number">0</span>]]</span><br><span class="line">                <span class="keyword">return</span> dot2x2(tmp, Y)</span><br><span class="line">            <span class="keyword">return</span> tmp</span><br><span class="line">            </span><br><span class="line">        T = [[<span class="number">1</span>, <span class="number">1</span>], </span><br><span class="line">             [<span class="number">1</span>, <span class="number">0</span>]]</span><br><span class="line">        RES = helper(T, n)</span><br><span class="line">        <span class="comment"># print(RES)</span></span><br><span class="line">        <span class="keyword">return</span> RES[<span class="number">0</span>][<span class="number">1</span>] % <span class="number">10000</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">O_N</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> n &lt;= <span class="number">1</span>: </span><br><span class="line">            <span class="keyword">return</span> n</span><br><span class="line">            </span><br><span class="line">        f0 = <span class="number">0</span></span><br><span class="line">        f1 = <span class="number">1</span></span><br><span class="line">        ans = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, n+<span class="number">1</span>):</span><br><span class="line">            ans = f0 + f1</span><br><span class="line">            f0 = f1</span><br><span class="line">            f1 = ans</span><br><span class="line">        <span class="keyword">return</span> ans % <span class="number">10000</span></span><br></pre></td></tr></table></figure>

</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/05/23/OOD/2019-05-23-OOD%20for%20Real%20Life%20Object/">OOD/2019-05-23-OOD for Real Life Object</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-05-23</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/OOD/">OOD</a></span><div class="content"><h1 id="Real-Obj-OOD"><a href="#Real-Obj-OOD" class="headerlink" title="Real Obj OOD"></a>Real Obj OOD</h1><ul>
<li>Vending Machine</li>
<li>Jukebox 點菜機</li>
<li>CD Player</li>
<li>Coffee maker</li>
<li>Kindle</li>
<li><strong><em>ATM</em></strong></li>
</ul>
<ul>
<li><p>Input / Output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">	CoffeeBean --&gt; CoffeeMaker --&gt; Coffee</span><br></pre></td></tr></table></figure>
</li>
<li><p>Design Pattern - 大多數實物類都可用到</p>
<ul>
<li>Strategy pattern</li>
<li>Decorate pattern</li>
<li>Factory pattern</li>
</ul>
</li>
</ul>
<h1 id="Design-a-Vending-Machine"><a href="#Design-a-Vending-Machine" class="headerlink" title="Design a Vending Machine"></a>Design a Vending Machine</h1><h2 id="Clarify"><a href="#Clarify" class="headerlink" title="Clarify"></a>Clarify</h2><ul>
<li><p>What: </p>
<ul>
<li><p>Input ? Output ? &amp; 該如何提問這兩者?</p>
</li>
<li><p>External request?! ==&gt; 包含 <strong>($, item)</strong> 這樣先後順序沒有能體現</p>
</li>
<li><p>不需要提廠家、重量、顏色這些的只是加了private attribute等等的 getter，這些並不是影響設計的流程，只是「通用屬性的點」，浪費了時間; 大小是否有限制？–&gt; 也不是要注意的點</p>
</li>
<li><p>Input: </p>
<ul>
<li>Payment<ul>
<li>不同<strong><em>種類</em></strong>的錢？！<ul>
<li>紙/硬幣<ul>
<li>找零</li>
</ul>
</li>
<li>CreditCard/ApplePay..</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">	Payment --&gt; VendingMachine --&gt; Item</span><br></pre></td></tr></table></figure>

<ul>
<li>Item<ul>
<li>What to do when an item <strong><em>sold out</em></strong>?<ul>
<li>refill sue case ==&gt; <strong>ItemSoldOutException</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>假設：</p>
<ul>
<li>Vending Machine 大小沒限制</li>
<li>只賣三種產品；Coke, Sprite, Mountain Dew</li>
<li>目前只可coins，不考慮payments所以沒有 Strategy Design </li>
</ul>
</li>
</ul>
</li>
<li><p>How: </p>
<ul>
<li>how to select item ? </li>
<li>假設：<ul>
<li>輸入一個input，代表一種item: A1 -&gt; Coke</li>
</ul>
</li>
<li>Refill</li>
</ul>
</li>
<li><p>Who: N/A</p>
</li>
</ul>
<h2 id="Core-Object"><a href="#Core-Object" class="headerlink" title="Core Object"></a>Core Object</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">	class Coin</span><br><span class="line">	class VendingMachine</span><br><span class="line">	class Item</span><br><span class="line">	class Sprite</span><br><span class="line">  class Coke</span><br><span class="line">  class MountainDew</span><br><span class="line">  Item &lt;|-- Sprite</span><br><span class="line">  Item &lt;|-- Coke</span><br><span class="line">  Item &lt;|-- MountainDew</span><br></pre></td></tr></table></figure>



<h3 id="Use-Cases"><a href="#Use-Cases" class="headerlink" title="Use Cases"></a>Use Cases</h3><table>
<thead>
<tr>
<th align="center">Use Cases</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Select Item</td>
</tr>
<tr>
<td align="center">Insert Coin</td>
</tr>
<tr>
<td align="center">Execute Transaction</td>
</tr>
<tr>
<td align="center">Cancel Transaction</td>
</tr>
<tr>
<td align="center">Refill Items</td>
</tr>
</tbody></table>
<h3 id="Classes"><a href="#Classes" class="headerlink" title="Classes"></a>Classes</h3><h4 id="Use-case-Select-item"><a href="#Use-case-Select-item" class="headerlink" title="Use case: Select item"></a>Use case: Select item</h4><p>​    - Vending machine taks an external input, show the price of that item</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">	class Coin</span><br><span class="line">	class VendingMachine&#123;</span><br><span class="line">		- List&lt;Coin&gt; coins</span><br><span class="line">		- List&lt;item&gt; items</span><br><span class="line">		- Map&lt;String, item&gt; itemIdentifiers &#x3D;&gt; &quot;A1 to Coke&quot;</span><br><span class="line">	&#125;</span><br><span class="line">	class Item</span><br><span class="line">	class Sprite</span><br><span class="line">  class Coke</span><br><span class="line">  class MountainDew</span><br><span class="line">  Item &lt;|-- Sprite</span><br><span class="line">  Item &lt;|-- Coke</span><br><span class="line">  Item &lt;|-- MountainDew</span><br><span class="line">	</span><br><span class="line">	VendingMachine: + float selectItem(String selection)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>問題: </p>
<ul>
<li><p>itemIdentifiers 的問題：</p>
<ul>
<li><p>item 沒有價格，再加上去 屬性吧</p>
</li>
<li><p>Item 不存在的話？如E2, 加Exception</p>
</li>
<li><p>sold out?</p>
</li>
<li><p>☆★☆★☆ ItemIdentifier是個靜態，item是動態的，如果客人把 Coke destroy，那我們的機器就被影響了！！動態的物品被買走後，別人對item做的變動我們不能保證，所以不能這樣做</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">	class ItemInfo</span><br></pre></td></tr></table></figure>

<p>應該是要對到一個靜態的 <strong><em>ItemInfo</em></strong></p>
<p>並用ItemInfo映射到 List<Item></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">	class Coin</span><br><span class="line">	class VendingMachine&#123;</span><br><span class="line">		- List&lt;Coin&gt; coins</span><br><span class="line">		- List&lt;item&gt; items</span><br><span class="line">		- Map&lt;String, ItemInfo&gt; itemIdentifiers &#x3D;&gt; &quot;A1 to Coke&quot;</span><br><span class="line">	&#125;</span><br><span class="line">	class ItemInfo&#123;</span><br><span class="line">		- float price</span><br><span class="line">		+ float getPrice()</span><br><span class="line">	&#125;</span><br><span class="line">	class Item</span><br><span class="line">	class Sprite</span><br><span class="line">  class Coke</span><br><span class="line">  class MountainDew</span><br><span class="line">  Item &lt;|-- Sprite</span><br><span class="line">  Item &lt;|-- Coke</span><br><span class="line">  Item &lt;|-- MountainDew</span><br><span class="line">	</span><br><span class="line">	VendingMachine: + float selectItem(String selection)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">	class Coin</span><br><span class="line">	class VendingMachine&#123;</span><br><span class="line">		- List&lt;Coin&gt; coins</span><br><span class="line">		- Map&lt;ItemInfo, List&lt;Item&gt;&gt; items</span><br><span class="line">		- Map&lt;String, ItemInfo&gt; itemIdentifiers &#x3D;&gt; &quot;A1 to Coke&quot;</span><br><span class="line">	&#125;</span><br><span class="line">	class ItemInfo&#123;</span><br><span class="line">		- float price</span><br><span class="line">		+ float getPrice()</span><br><span class="line">	&#125;</span><br><span class="line">	class Item</span><br><span class="line">	class Sprite</span><br><span class="line">  class Coke</span><br><span class="line">  class MountainDew</span><br><span class="line">  Item &lt;|-- Sprite</span><br><span class="line">  Item &lt;|-- Coke</span><br><span class="line">  Item &lt;|-- MountainDew</span><br><span class="line">	</span><br><span class="line">	VendingMachine: + float selectItem(String selection)</span><br></pre></td></tr></table></figure>

<p>​                        修改價錢時，直接對應到所有的Item上去了！</p>
<ul>
<li>現在是先選，再投幣</li>
</ul>
<h4 id="Use-Case-Execute-Transaction"><a href="#Use-Case-Execute-Transaction" class="headerlink" title="Use Case: Execute Transaction"></a>Use Case: Execute Transaction</h4><ul>
<li>Get current selected item</li>
<li>Cpr the item price and inserted coins</li>
<li>If not enough money, throw an exeption</li>
<li>Else, return the item purchased</li>
<li>Refund if any</li>
</ul>
<ol>
<li>&amp; 2. Cur selection &amp; inserted coins</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">	class Coin</span><br><span class="line">	class VendingMachine&#123;</span><br><span class="line">		- List&lt;Coin&gt; coins</span><br><span class="line">		- Map&lt;ItemInfo, List&lt;Item&gt;&gt; items</span><br><span class="line">		- Map&lt;String, ItemInfo&gt; itemIdentifiers &#x3D;&gt; &quot;A1 to Coke&quot;</span><br><span class="line">		- ItemInfo currentSelection</span><br><span class="line">		- List &lt;Coin&gt; currentCoins</span><br><span class="line">	&#125;</span><br><span class="line">	class ItemInfo&#123;</span><br><span class="line">		- float price</span><br><span class="line">		+ float getPrice()</span><br><span class="line">	&#125;</span><br><span class="line">	class Item</span><br><span class="line">	class Sprite</span><br><span class="line">  class Coke</span><br><span class="line">  class MountainDew</span><br><span class="line">  Item &lt;|-- Sprite</span><br><span class="line">  Item &lt;|-- Coke</span><br><span class="line">  Item &lt;|-- MountainDew</span><br><span class="line">	</span><br><span class="line">	VendingMachine: + float selectItem(String selection)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">	class Coin&#123;</span><br><span class="line">		&lt;&lt;enumeration&gt;&gt;</span><br><span class="line">		PENNY(1)</span><br><span class="line">		NICKLE(5)</span><br><span class="line">		DIME(10)</span><br><span class="line">		QUARTER(25)</span><br><span class="line">	&#125;</span><br><span class="line">	Coin: +Float value</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">	class	NotEnoughMoneyException</span><br></pre></td></tr></table></figure>





<p>SelectItems 已經把東西選好了，所以executeTransaction可以執行，而不用再有input，前面做了可以顯示，不綁定在executeTransaction裡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">	class Coin</span><br><span class="line">	class VendingMachine&#123;</span><br><span class="line">		- List&lt;Coin&gt; coins</span><br><span class="line">		- Map&lt;ItemInfo, List&lt;Item&gt;&gt; items</span><br><span class="line">		- Map&lt;String, ItemInfo&gt; itemIdentifiers &#x3D;&gt; &quot;A1 to Coke&quot;</span><br><span class="line">		- ItemInfo currentSelection</span><br><span class="line">		- List &lt;Coin&gt; currentCoins</span><br><span class="line">	&#125;</span><br><span class="line">	class ItemInfo&#123;</span><br><span class="line">		- float price</span><br><span class="line">		+ float getPrice()</span><br><span class="line">	&#125;</span><br><span class="line">	class Item</span><br><span class="line">	class Sprite</span><br><span class="line">  class Coke</span><br><span class="line">  class MountainDew</span><br><span class="line">  Item &lt;|-- Sprite</span><br><span class="line">  Item &lt;|-- Coke</span><br><span class="line">  Item &lt;|-- MountainDew</span><br><span class="line">	</span><br><span class="line">	VendingMachine: + float selectItem(String selection)</span><br><span class="line">	VendingMachine: + void insertCoins(List&lt;Coin&gt; coins)</span><br><span class="line">	VendingMachine: + Item executeTransaction()</span><br><span class="line">	VendingMachine: + List&lt;Coin&gt; refund()</span><br></pre></td></tr></table></figure>

<p>找零 + 東西出來</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">	class Coin</span><br><span class="line">	class VendingMachine&#123;</span><br><span class="line">		- List&lt;Coin&gt; coins</span><br><span class="line">		- Map&lt;ItemInfo, List&lt;Item&gt;&gt; items</span><br><span class="line">		- Map&lt;String, ItemInfo&gt; itemIdentifiers &#x3D;&gt; &quot;A1 to Coke&quot;</span><br><span class="line">		- ItemInfo currentSelection</span><br><span class="line">		- List &lt;Coin&gt; currentCoins</span><br><span class="line">	&#125;</span><br><span class="line">	class ItemInfo&#123;</span><br><span class="line">		- float price</span><br><span class="line">		+ float getPrice()</span><br><span class="line">	&#125;</span><br><span class="line">	class Item</span><br><span class="line">	class Sprite</span><br><span class="line">  class Coke</span><br><span class="line">  class MountainDew</span><br><span class="line">  Item &lt;|-- Sprite</span><br><span class="line">  Item &lt;|-- Coke</span><br><span class="line">  Item &lt;|-- MountainDew</span><br><span class="line">	</span><br><span class="line">	VendingMachine: + float selectItem(String selection)</span><br><span class="line">	VendingMachine: + void insertCoins(List&lt;Coin&gt; coins)</span><br><span class="line">	VendingMachine: + Pair&lt;Item, List&lt;Coin&gt;&gt; executeTransaction()</span><br><span class="line">	VendingMachine: + List&lt;Coin&gt; refund()</span><br></pre></td></tr></table></figure>



<h4 id="Use-Case-Cancel-Selection-amp-Refill"><a href="#Use-Case-Cancel-Selection-amp-Refill" class="headerlink" title="Use Case: Cancel Selection &amp; Refill"></a>Use Case: Cancel Selection &amp; Refill</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">	class Coin</span><br><span class="line">	class VendingMachine&#123;</span><br><span class="line">		- List&lt;Coin&gt; coins</span><br><span class="line">		- Map&lt;ItemInfo, List&lt;Item&gt;&gt; items</span><br><span class="line">		- Map&lt;String, ItemInfo&gt; itemIdentifiers &#x3D;&gt; &quot;A1 to Coke&quot;</span><br><span class="line">		- ItemInfo currentSelection</span><br><span class="line">		- List &lt;Coin&gt; currentCoins</span><br><span class="line">	&#125;</span><br><span class="line">	class ItemInfo&#123;</span><br><span class="line">		- float price</span><br><span class="line">		+ float getPrice()</span><br><span class="line">	&#125;</span><br><span class="line">	class Item</span><br><span class="line">	class Sprite</span><br><span class="line">  class Coke</span><br><span class="line">  class MountainDew</span><br><span class="line">  Item &lt;|-- Sprite</span><br><span class="line">  Item &lt;|-- Coke</span><br><span class="line">  Item &lt;|-- MountainDew</span><br><span class="line">	</span><br><span class="line">	VendingMachine: + float selectItem(String selection)</span><br><span class="line">	VendingMachine: + void insertCoins(List&lt;Coin&gt; coins)</span><br><span class="line">	VendingMachine: + Pair&lt;Item, List&lt;Coin&gt;&gt; executeTransaction()</span><br><span class="line">	VendingMachine: + List&lt;Coin&gt; cancelTransaction()	</span><br><span class="line">	VendingMachine: + void refillItems(List&lt;Item&gt; items)	</span><br><span class="line">	VendingMachine: + List&lt;Coin&gt; refund()</span><br></pre></td></tr></table></figure>



<h4 id="Use-Case-Final-View"><a href="#Use-Case-Final-View" class="headerlink" title="Use Case: Final View"></a>Use Case: Final View</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">	class Coin</span><br><span class="line">	class VendingMachine&#123;</span><br><span class="line">		- List&lt;Coin&gt; coins</span><br><span class="line">		- Map&lt;ItemInfo, List&lt;Item&gt;&gt; items</span><br><span class="line">		- Map&lt;String, ItemInfo&gt; itemIdentifiers &#x3D;&gt; &quot;A1 to Coke&quot;</span><br><span class="line">		- ItemInfo currentSelection</span><br><span class="line">		- List &lt;Coin&gt; currentCoins</span><br><span class="line">		- Map&lt;ItemInfo, List&lt;Item&gt;&gt; stock</span><br><span class="line">	&#125;</span><br><span class="line">	class ItemInfo&#123;</span><br><span class="line">		- float price</span><br><span class="line">		+ float getPrice()</span><br><span class="line">	&#125;</span><br><span class="line">	class Item</span><br><span class="line">	class Sprite</span><br><span class="line">  class Coke</span><br><span class="line">  class MountainDew</span><br><span class="line">  Item &lt;|-- Sprite</span><br><span class="line">  Item &lt;|-- Coke</span><br><span class="line">  Item &lt;|-- MountainDew</span><br><span class="line">	</span><br><span class="line">	VendingMachine: + float selectItem(String selection)</span><br><span class="line">	VendingMachine: + void insertCoins(List&lt;Coin&gt; coins)</span><br><span class="line">	VendingMachine: + Pair&lt;Item, List&lt;Coin&gt;&gt; executeTransaction()</span><br><span class="line">	VendingMachine: + List&lt;Coin&gt; cancelTransaction()	</span><br><span class="line">	VendingMachine: + void refillItems(List&lt;Item&gt; items)	</span><br><span class="line">	VendingMachine: + List&lt;Coin&gt; refund()</span><br></pre></td></tr></table></figure>



<h4 id="GOOD-PRACTICE-for-NESTED-ITEMs"><a href="#GOOD-PRACTICE-for-NESTED-ITEMs" class="headerlink" title="GOOD PRACTICE for NESTED ITEMs"></a>GOOD PRACTICE for NESTED ITEMs</h4><p>For example:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">stock = <span class="keyword">new</span> HashMap&lt;ItemInfo, List&lt;Item&gt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">refillItem</span><span class="params">(List&lt;Item&gt; items)</span></span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (Item item: items)&#123;</span><br><span class="line">    ItemInfo info = item.getInfo();</span><br><span class="line">    List&lt;Item&gt; itemsInStock = stock.get(info);</span><br><span class="line">    itemsInSotck.add(item);</span><br><span class="line">    stock.put(info, itemsInStock);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>當遇到Nested-Structure時，可以用一個類去代替　↓</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stock</span></span>&#123;&#125;</span><br><span class="line">	<span class="keyword">private</span> HashMap&lt;ItemInfo, List&lt;Item&gt;&gt; stock;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Item item)</span></span>&#123;</span><br><span class="line">    ItemInfo info = item.getInfo();</span><br><span class="line">    List&lt;Item&gt; itemsInStock = stock.get(info);</span><br><span class="line">    itemsInStock.add(item);</span><br><span class="line">    stock.put(info, itemsInStock);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">stock = <span class="keyword">new</span> Stock();</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">refillItem</span><span class="params">(List&lt;Item&gt; items)</span></span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (Item item: items)&#123;</span><br><span class="line">    stock.add(item);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">	class Coin</span><br><span class="line">	class VendingMachine&#123;</span><br><span class="line">		- List&lt;Coin&gt; coins</span><br><span class="line">		- Map&lt;ItemInfo, List&lt;Item&gt;&gt; items</span><br><span class="line">		- Map&lt;String, ItemInfo&gt; itemIdentifiers &#x3D;&gt; &quot;A1 to Coke&quot;</span><br><span class="line">		- ItemInfo currentSelection</span><br><span class="line">		- List &lt;Coin&gt; currentCoins</span><br><span class="line">		- Map&lt;ItemInfo, List&lt;Item&gt;&gt; stock</span><br><span class="line">	&#125;</span><br><span class="line">  class Coin&#123;</span><br><span class="line">    &lt;&lt;enumeration&gt;&gt;</span><br><span class="line">    PENNY(1)</span><br><span class="line">    NICKLE(5)</span><br><span class="line">    DIME(10)</span><br><span class="line">    QUARTER(25)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  class Stock&#123;</span><br><span class="line">  	- Map&lt;ItemInfo, List&lt;Item&gt;&gt; stock</span><br><span class="line">  &#125;</span><br><span class="line">	class ItemInfo&#123;</span><br><span class="line">		- String name</span><br><span class="line">		- float price</span><br><span class="line">		+ float getPrice()</span><br><span class="line">	&#125;</span><br><span class="line">	class Item&#123;</span><br><span class="line">		# ItemInfo info</span><br><span class="line">	&#125;</span><br><span class="line">	class Item</span><br><span class="line">	class Sprite</span><br><span class="line">  class Coke</span><br><span class="line">  class MountainDew</span><br><span class="line">  class NotEnoughMoneyException</span><br><span class="line">  class NotEnoughItemException</span><br><span class="line">  </span><br><span class="line">  Item &lt;|-- Sprite</span><br><span class="line">  Item &lt;|-- Coke</span><br><span class="line">  Item &lt;|-- MountainDew</span><br><span class="line"></span><br><span class="line">	Coin: +Float value</span><br><span class="line">	Stock: + int getQuantity(Iteminfo info)</span><br><span class="line">	Stock: void add(Item t)</span><br><span class="line">	Stock: deduct(Iteminfo info)</span><br><span class="line">	VendingMachine: + float selectItem(String selection)</span><br><span class="line">	VendingMachine: + void insertCoins(List&lt;Coin&gt; coins)</span><br><span class="line">	VendingMachine: + Pair&lt;Item, List&lt;Coin&gt;&gt; executeTransaction()</span><br><span class="line">	VendingMachine: + List&lt;Coin&gt; cancelTransaction()	</span><br><span class="line">	VendingMachine: + void refillItems(List&lt;Item&gt; items)	</span><br><span class="line">	VendingMachine: + List&lt;Coin&gt; refund()</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">	class Stock&#123;</span><br><span class="line">		- Map&lt;ItemInfo, List&lt;Item&gt;&gt; stock</span><br><span class="line">	&#125;</span><br><span class="line">	Stock: + int getQuantity(Iteminfo info)</span><br><span class="line">	Stock: void add(Item t)</span><br><span class="line">	Stock: deduct(Iteminfo info)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">	class Item&#123;</span><br><span class="line">		# ItemInfo info	&#x3D;&#x3D;&gt; should be protected for modification</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/05/06/Python/2020-05-06-Faster%20than%20O(N)%20--%20SortedContainers/">Python/2020-05-06-Faster than O(N) -- SortedContainers</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-05-06</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Python/">Python</a></span><div class="content"><p>ref: <a href="http://www.grantjenks.com/docs/sortedcontainers/" target="_blank" rel="noopener">http://www.grantjenks.com/docs/sortedcontainers/</a></p>
<p>For Map/TreeMap data structure, we may use <a href="http://www.grantjenks.com/docs/sortedcontainers/" target="_blank" rel="noopener">sortedcontainers</a> library.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> sortedcontainers <span class="keyword">import</span> SortedList</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sl = SortedList([<span class="string">'e'</span>, <span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'b'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sl</span><br><span class="line">SortedList([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sl *= <span class="number">10</span>_000_000</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sl.count(<span class="string">'c'</span>)</span><br><span class="line"><span class="number">10000000</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sl[<span class="number">-3</span>:]</span><br><span class="line">[<span class="string">'e'</span>, <span class="string">'e'</span>, <span class="string">'e'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> sortedcontainers <span class="keyword">import</span> SortedDict</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sd = SortedDict(&#123;<span class="string">'c'</span>: <span class="number">3</span>, <span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sd</span><br><span class="line">SortedDict(&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sd.popitem(index=<span class="number">-1</span>)</span><br><span class="line">(<span class="string">'c'</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> sortedcontainers <span class="keyword">import</span> SortedSet</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ss = SortedSet(<span class="string">'abracadabra'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ss</span><br><span class="line">SortedSet([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'r'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ss.bisect_left(<span class="string">'c'</span>)</span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>All of the operations shown above run in faster than linear time.</p>
<p>Ref: <a href="https://support.leetcode.com/hc/en-us/articles/360011833974-What-are-the-environments-for-the-programming-languages-" target="_blank" rel="noopener">https://support.leetcode.com/hc/en-us/articles/360011833974-What-are-the-environments-for-the-programming-languages-</a></p>
<blockquote>
<h1 id="What-are-the-environments-for-the-programming-languages"><a href="#What-are-the-environments-for-the-programming-languages" class="headerlink" title="What are the environments for the programming languages?"></a>What are the environments for the programming languages?</h1><ul>
<li><p>1 month ago</p>
</li>
<li></li>
<li><p>Updated</p>
</li>
</ul>
<p><a href="https://support.leetcode.com/hc/en-us/articles/360011833974-What-are-the-environments-for-the-programming-languages-/subscription.html" target="_blank" rel="noopener">Follow</a></p>
<table>
<thead>
<tr>
<th>Language</th>
<th>Version</th>
<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td>C++</td>
<td>clang 9</td>
<td>Uses the C++17 standard.</td>
</tr>
<tr>
<td>Java</td>
<td>java 13.0.1</td>
<td>Includes <code>Pair</code> class, with documentation at <a href="https://docs.oracle.com/javase/8/javafx/api/javafx/util/Pair.html" target="_blank" rel="noopener">https://docs.oracle.com/javase/8/javafx/api/javafx/util/Pair.html</a></td>
</tr>
<tr>
<td>Python</td>
<td>python 2.7.12</td>
<td>For Map/TreeMap data structure, you may use <a href="http://www.grantjenks.com/docs/sortedcontainers/" target="_blank" rel="noopener">sortedcontainers</a> library.</td>
</tr>
<tr>
<td>Python3</td>
<td>Python 3.8</td>
<td>For Map/TreeMap data structure, you may use <a href="http://www.grantjenks.com/docs/sortedcontainers/" target="_blank" rel="noopener">sortedcontainers</a> library.</td>
</tr>
<tr>
<td>MySQL</td>
<td>mysql-server 5.7.21</td>
<td></td>
</tr>
<tr>
<td>MS SQL</td>
<td>mssql 14.0.3</td>
<td></td>
</tr>
<tr>
<td>Oracle</td>
<td>Oracle SQL 11.2</td>
<td></td>
</tr>
<tr>
<td>C</td>
<td>gcc 8.2</td>
<td>For hash table operations, you may use <a href="https://troydhanson.github.io/uthash/" target="_blank" rel="noopener">uthash</a>. <code>&quot;uthash.h&quot;</code> is included by default.</td>
</tr>
<tr>
<td>C#</td>
<td>mono 5.18.0</td>
<td>Run with <code>/debug</code> flag, with <a href="https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-7" target="_blank" rel="noopener">full support for C# 7</a>.</td>
</tr>
<tr>
<td>JavaScript</td>
<td>nodejs 10.15.0</td>
<td>Run with <code>--harmony</code> flag, enabling <a href="http://node.green/" target="_blank" rel="noopener">new ES6 features</a>. <a href="https://lodash.com/" target="_blank" rel="noopener">lodash.js</a> library is included by default.</td>
</tr>
<tr>
<td>Ruby</td>
<td>ruby 2.4.5</td>
<td></td>
</tr>
<tr>
<td>Bash</td>
<td>bash 4.3.30</td>
<td></td>
</tr>
<tr>
<td>Swift</td>
<td>swift 5.0.1</td>
<td></td>
</tr>
<tr>
<td>Go</td>
<td>go 1.13</td>
<td></td>
</tr>
<tr>
<td>Scala</td>
<td>Scala 2.13</td>
<td></td>
</tr>
<tr>
<td>Kotlin</td>
<td>Kotlin 1.3.10</td>
<td></td>
</tr>
<tr>
<td>Rust</td>
<td>1.40.0</td>
<td>edition = 2018, supports <a href="https://crates.io/crates/rand" target="_blank" rel="noopener">rand</a> from crates.io</td>
</tr>
<tr>
<td>PHP</td>
<td>PHP 7.2</td>
<td></td>
</tr>
</tbody></table>
</blockquote>
<p>ref: <a href="https://leetcode.com/discuss/general-discussion/452863/how-do-you-deal-with-no-treeset-or-treemap-in-python" target="_blank" rel="noopener">https://leetcode.com/discuss/general-discussion/452863/how-do-you-deal-with-no-treeset-or-treemap-in-python</a></p>
<blockquote>
<p>There are quite a few problems that can use TreeSet or TreeMap, but it seems python does not have anything? Any tips on how to deal with this. Recently switched over from java to pyhton</p>
<p><a href="https://leetcode.com/problems/the-skyline-problem/" target="_blank" rel="noopener">https://leetcode.com/problems/the-skyline-problem/</a> -&gt; Needs removal O log(n)<br><a href="https://leetcode.com/problems/k-empty-slots/" target="_blank" rel="noopener">https://leetcode.com/problems/k-empty-slots/</a> -&gt; TreeMap is a accepted solution</p>
<p>Thanks,<br>Uv</p>
<p>Comments: 1</p>
<p>BestMost VotesNewest to OldestOldest to Newest</p>
<p>Preview</p>
<p>Post</p>
<p><a href="https://leetcode.com/leetcode" target="_blank" rel="noopener"><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gejri4cfqej305k05kmx8.jpg" alt="LeetCode&#39;s avatar"></a></p>
<p><a href="https://leetcode.com/leetcode" target="_blank" rel="noopener">LeetCode</a>Admin3460</p>
<p>December 17, 2019 9:45 AM</p>
<p>Read More</p>
<p><a href="https://support.leetcode.com/hc/en-us/articles/360011833974-What-are-the-environments-for-the-programming-languages-" target="_blank" rel="noopener">https://support.leetcode.com/hc/en-us/articles/360011833974-What-are-the-environments-for-the-programming-languages-</a></p>
<p>Please take a look at the environments for the programming languages above. For Python you may use <a href="http://www.grantjenks.com/docs/sortedcontainers/" target="_blank" rel="noopener">sortedcontainers</a> library for TreeSet/TreeMap data structure.</p>
</blockquote>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/05/04/Plot/mermaid_notes/">Plot/mermaid_notes</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-05-04</time><div class="content"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">graph TB</span><br><span class="line">    Start --&gt; Stop</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">    Start --&gt; Stop</span><br></pre></td></tr></table></figure>





<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[方形] --&gt;B(圆角)</span><br><span class="line">    B --&gt; C&#123;条件a&#125;</span><br><span class="line">    C --&gt;|a&#x3D;1| D[结果1]</span><br><span class="line">    C --&gt;|a&#x3D;2| E[结果2]</span><br><span class="line">    F[横向流程图]</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">graph TB</span><br><span class="line">    Start(开始) --&gt; Open[打开冰箱门]</span><br><span class="line">    Open --&gt; Put[把大象放进去]</span><br><span class="line">    Put[把大象放进去] --&gt; IsFit&#123;&quot;冰箱小不小？&quot;&#125;</span><br><span class="line">    </span><br><span class="line">    IsFit --&gt;|不小| Close[把冰箱门关上]</span><br><span class="line">    Close --&gt; End(结束)</span><br><span class="line">        </span><br><span class="line">    IsFit --&gt;|小| Change[换个大冰箱]</span><br><span class="line">    Change --&gt; Open</span><br></pre></td></tr></table></figure>



<p>ref: <a href="https://jingyan.baidu.com/article/48b558e3035d9a7f38c09aeb.html" target="_blank" rel="noopener">https://jingyan.baidu.com/article/48b558e3035d9a7f38c09aeb.html</a></p>
<p>live: <a href="https://mermaid-js.github.io/mermaid-live-editor/" target="_blank" rel="noopener">https://mermaid-js.github.io/mermaid-live-editor/</a></p>
</div><hr></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/55/">55</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2020 By Joe Huang</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>