<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Algo. Ult./my_templates"><meta name="keywords" content=""><meta name="author" content="Joe Huang"><meta name="copyright" content="Joe Huang"><title>Algo. Ult./my_templates | Awaken Desparado</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-180692466-1', 'auto');
ga('send', 'pageview');</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 4.2.1"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Quick-Select"><span class="toc-number">1.</span> <span class="toc-text">Quick-Select</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#More"><span class="toc-number">1.0.0.1.</span> <span class="toc-text">More:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Special-Partition-in-List-LC-86"><span class="toc-number">1.1.</span> <span class="toc-text">Special: Partition in List, LC-86</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sieve-of-Eratosthenes"><span class="toc-number">2.</span> <span class="toc-text">Sieve of Eratosthenes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hungary"><span class="toc-number">3.</span> <span class="toc-text">Hungary</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Max-Invitation"><span class="toc-number">3.1.</span> <span class="toc-text">Max Invitation</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SkipList"><span class="toc-number">4.</span> <span class="toc-text">SkipList</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#792-Number-of-Matching-Subsequences"><span class="toc-number">4.1.</span> <span class="toc-text">792. Number of Matching Subsequences</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1055-Shortest-Way-to-Form-String"><span class="toc-number">4.2.</span> <span class="toc-text">1055. Shortest Way to Form String</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ultimate-B-search"><span class="toc-number">5.</span> <span class="toc-text">Ultimate B-search</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#658-K-Closest"><span class="toc-number">5.1.</span> <span class="toc-text">658. K Closest</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Target-出現次數-–-gt-超大array"><span class="toc-number">6.</span> <span class="toc-text">Target 出現次數 –&gt; 超大array</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#K-distance-apart"><span class="toc-number">7.</span> <span class="toc-text">K distance apart</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Kth-subarray-sum"><span class="toc-number">8.</span> <span class="toc-text">Kth subarray sum</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dijkastra-or-Kruskal"><span class="toc-number">9.</span> <span class="toc-text">Dijkastra or Kruskal</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1631-Path-With-Minimum-Effort"><span class="toc-number">9.1.</span> <span class="toc-text">1631. Path With Minimum Effort</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Memo"><span class="toc-number">10.</span> <span class="toc-text">Memo</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#329-Longest-Increasing-Path-in-a-Matrix"><span class="toc-number">10.1.</span> <span class="toc-text">329. Longest Increasing Path in a Matrix</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shortest-Path"><span class="toc-number">11.</span> <span class="toc-text">Shortest Path</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Dijkastra-V-S-A"><span class="toc-number">11.1.</span> <span class="toc-text">Dijkastra V.S. A*</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Rearrange-String-k-Dist"><span class="toc-number">12.</span> <span class="toc-text">Rearrange String k Dist</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#358-Rearrange-String-k-Distance-Apart"><span class="toc-number">12.1.</span> <span class="toc-text">358. Rearrange String k Distance Apart</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Deserialization"><span class="toc-number">13.</span> <span class="toc-text">Deserialization</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Longest-Cycle-in-a-Graph"><span class="toc-number">14.</span> <span class="toc-text">Longest Cycle in a Graph</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2360-Longest-Cycle-in-a-Graph"><span class="toc-number">14.1.</span> <span class="toc-text">2360. Longest Cycle in a Graph</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Tail-DP"><span class="toc-number">15.</span> <span class="toc-text">Tail DP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2214-Minimum-Health-to-Beat-Game"><span class="toc-number">15.1.</span> <span class="toc-text">2214. Minimum Health to Beat Game</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#P-S-Best-solution-to-this-problem-is-Greedy-instead-of-this-DP-However-this-DP-brings-valuable-ideas"><span class="toc-number">15.1.0.1.</span> <span class="toc-text">P.S. Best solution to this problem is Greedy instead of this DP. However, this DP brings valuable ideas</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#State-DP"><span class="toc-number">16.</span> <span class="toc-text">State DP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2222-Number-of-Ways-to-Select-Buildings"><span class="toc-number">16.1.</span> <span class="toc-text">2222. Number of Ways to Select Buildings</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#P-S-can-also-be-solved-with-L-R-partition-method"><span class="toc-number">16.1.0.1.</span> <span class="toc-text">P.S. can also be solved with L&#x2F;R partition method</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1048-Longest-String-Chain"><span class="toc-number">16.2.</span> <span class="toc-text">1048. Longest String Chain</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Weird-DP"><span class="toc-number">17.</span> <span class="toc-text">Weird DP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#552-Student-Attendance-Record-II"><span class="toc-number">17.1.</span> <span class="toc-text">552. Student Attendance Record II</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Tree-Parent-Path"><span class="toc-number">18.</span> <span class="toc-text">Tree Parent Path</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2385-Amount-of-Time-for-Binary-Tree-to-Be-Infected"><span class="toc-number">18.1.</span> <span class="toc-text">2385. Amount of Time for Binary Tree to Be Infected</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BT-or-Special-Graph"><span class="toc-number">19.</span> <span class="toc-text">BT or Special Graph</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2242-Maximum-Score-of-a-Node-Sequence"><span class="toc-number">19.1.</span> <span class="toc-text">2242. Maximum Score of a Node Sequence</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Bottom-up-FAILED"><span class="toc-number">20.</span> <span class="toc-text">Bottom-up FAILED</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2242-Maximum-Score-of-a-Node-Sequence-↑"><span class="toc-number">20.1.</span> <span class="toc-text">2242. Maximum Score of a Node Sequence ↑</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Servers"><span class="toc-number">21.</span> <span class="toc-text">Servers</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1606-Find-Servers-That-Handled-Most-Number-of-Requests"><span class="toc-number">21.1.</span> <span class="toc-text">1606. Find Servers That Handled Most Number of Requests</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Merge-2-Sorted-Intervals"><span class="toc-number">22.</span> <span class="toc-text">Merge 2 Sorted Intervals</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#My-Inheritance"><span class="toc-number">23.</span> <span class="toc-text">My Inheritance</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TLE-Hash-solved-by-Rabin-Karp"><span class="toc-number">24.</span> <span class="toc-text">TLE Hash, solved by Rabin-Karp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Using-Defaultdict-as-an-Array-alternative"><span class="toc-number">25.</span> <span class="toc-text">Using Defaultdict as an Array alternative</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2400-Number-of-Ways-to-Reach-a-Position-After-Exactly-k-Steps"><span class="toc-number">25.1.</span> <span class="toc-text">2400. Number of Ways to Reach a Position After Exactly k Steps</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Iterative-SegTree-to-replace-MonoDeque"><span class="toc-number">26.</span> <span class="toc-text">Iterative SegTree to replace MonoDeque</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#可撤銷-DSU"><span class="toc-number">27.</span> <span class="toc-text">可撤銷 DSU</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2092-Find-All-People-With-Secret"><span class="toc-number">27.1.</span> <span class="toc-text">2092. Find All People With Secret</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Max-E"><span class="toc-number">28.</span> <span class="toc-text">Max E</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Bisect-in-2D"><span class="toc-number">29.</span> <span class="toc-text">Bisect in 2D</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1272-Remove-Interval"><span class="toc-number">29.1.</span> <span class="toc-text">1272. Remove Interval</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Skyline"><span class="toc-number">30.</span> <span class="toc-text">Skyline</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cyclic-Sort"><span class="toc-number">31.</span> <span class="toc-text">Cyclic Sort</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Comparator"><span class="toc-number">32.</span> <span class="toc-text">Comparator</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#692-Top-K-Frequent-Words"><span class="toc-number">32.1.</span> <span class="toc-text">692. Top K Frequent Words</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Bit-OPs"><span class="toc-number">33.</span> <span class="toc-text">Bit OPs</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1239-Maximum-Length-of-a-Concatenated-String-with-Unique-Characters"><span class="toc-number">33.1.</span> <span class="toc-text">1239. Maximum Length of a Concatenated String with Unique Characters</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#等差-Seq-DP"><span class="toc-number">34.</span> <span class="toc-text">等差 Seq. DP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#446-Arighmetic-Slices-II-Subsequence"><span class="toc-number">34.1.</span> <span class="toc-text">446. Arighmetic Slices II - Subsequence</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Lee215"><span class="toc-number"></span> <span class="toc-text">Lee215</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Sum-of-total-strength-of-Wizards"><span class="toc-number">1.</span> <span class="toc-text">Sum of total strength of Wizards</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Sum-of-All-Subarr-Sum…-etc"><span class="toc-number">1.0.1.</span> <span class="toc-text">Sum of All Subarr Sum… etc</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Built-in-Agg-w-Customization"><span class="toc-number">2.</span> <span class="toc-text">Built-in Agg w&#x2F; Customization</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#To-Improve"><span class="toc-number">3.</span> <span class="toc-text">To Improve</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#BQ"><span class="toc-number"></span> <span class="toc-text">BQ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Vue"><span class="toc-number"></span> <span class="toc-text">Vue</span></a></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Joe Huang</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">382</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">25</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">65</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Awaken Desparado</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">Algo. Ult./my_templates</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2022-01-31</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/AlgoUlt/">AlgoUlt.</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h2 id="Quick-Select"><a href="#Quick-Select" class="headerlink" title="Quick-Select"></a>Quick-Select</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">return</span> self.congcong9p_20220718(nums, <span class="number">0</span>, len(nums)<span class="number">-1</span>, k<span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">congcong9p_20220718</span><span class="params">(self, nums, left, right, k)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> left == right:</span><br><span class="line">        <span class="keyword">return</span> nums[left]</span><br><span class="line">    </span><br><span class="line">    n = len(nums)</span><br><span class="line">    <span class="comment"># lo, hi =  0, n - 2</span></span><br><span class="line">    pivot = nums[right]</span><br><span class="line">    lo, hi = left, right</span><br><span class="line">    <span class="keyword">while</span> lo &lt;= hi:</span><br><span class="line">        <span class="comment"># mid = lo + (hi - lo) // 2</span></span><br><span class="line">        <span class="keyword">while</span> lo &lt;= hi <span class="keyword">and</span> nums[lo] &gt; pivot:</span><br><span class="line">            lo += <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> lo &lt;= hi <span class="keyword">and</span> nums[hi] &lt; pivot:</span><br><span class="line">            hi -= <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> lo &lt;= hi:</span><br><span class="line">            nums[lo], nums[hi] = nums[hi], nums[lo]</span><br><span class="line">            lo += <span class="number">1</span></span><br><span class="line">            hi -= <span class="number">1</span></span><br><span class="line">    <span class="comment"># print(nums, lo, hi)</span></span><br><span class="line">    <span class="keyword">if</span> k &lt;= hi:</span><br><span class="line">        <span class="keyword">return</span> self.congcong9p_20220718(nums, left, hi, k)</span><br><span class="line">    <span class="keyword">if</span> k &gt;= lo:</span><br><span class="line">        <span class="keyword">return</span> self.congcong9p_20220718(nums, lo, right, k)</span><br><span class="line">    <span class="keyword">return</span> nums[k]</span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">return</span> self.my_20220719(nums, k)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_20220719</span><span class="params">(self, nums, k)</span>:</span></span><br><span class="line">    n = len(nums)</span><br><span class="line">    p_idx = <span class="number">-1</span>    <span class="comment"># tells us which position is correct now</span></span><br><span class="line">    lo, hi = <span class="number">0</span>, n - <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> p_idx != k - <span class="number">1</span>:</span><br><span class="line">    <span class="comment"># while lo &lt; hi:</span></span><br><span class="line">        p_idx = self.partition_20220719(nums, lo, hi) <span class="comment"># LOMU</span></span><br><span class="line">        <span class="comment"># print(nums, p_idx)</span></span><br><span class="line">        <span class="keyword">if</span> k - <span class="number">1</span> &lt; p_idx:</span><br><span class="line">            hi = p_idx - <span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> k - <span class="number">1</span> &gt; p_idx:</span><br><span class="line">            lo = p_idx + <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">return</span> nums[k - <span class="number">1</span>]</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">partition_20220719</span><span class="params">(self, nums, lo, hi)</span>:</span></span><br><span class="line">    i = lo - <span class="number">1</span>  <span class="comment"># i: last pos, whose val &gt; pivot</span></span><br><span class="line">    pivot = nums[hi]</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(lo, hi + <span class="number">1</span>): <span class="comment"># j: trvsing index</span></span><br><span class="line">        <span class="keyword">if</span> nums[j] &gt; pivot:</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">            nums[i], nums[j] = nums[j], nums[i]</span><br><span class="line">    nums[i+<span class="number">1</span>], nums[hi] = nums[hi], nums[i+<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">return</span> i + <span class="number">1</span>    <span class="comment"># i+1 大於 pivot的人的個數</span></span><br></pre></td></tr></table></figure>



<p>3 1 5 7 4</p>
<p>​      4</p>
<h5 id="More"><a href="#More" class="headerlink" title="More:"></a>More:</h5><p><a href="https://www.freecodecamp.org/news/quickselect-algorithm-explained-with-examples/" target="_blank" rel="noopener">Lomuto VS Hoare</a></p>
<p><a href="https://leetcode.com/problems/k-closest-points-to-origin/discuss/578663/quick-select-same-template-to-solve-215-on" target="_blank" rel="noopener">LC215</a></p>
<h3 id="Special-Partition-in-List-LC-86"><a href="#Special-Partition-in-List-LC-86" class="headerlink" title="Special: Partition in List, LC-86"></a>Special: Partition in List, LC-86</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">partition</span><span class="params">(self, head, x)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.my_20220722(head, x)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20220722</span><span class="params">(self, head, x)</span>:</span></span><br><span class="line">        i = left_head = ListNode(<span class="number">0</span>)</span><br><span class="line">        j = right_head = ListNode(<span class="number">0</span>)</span><br><span class="line">        cur = head</span><br><span class="line">        <span class="keyword">while</span> cur:</span><br><span class="line">            <span class="keyword">if</span> cur.val &lt; x:</span><br><span class="line">                <span class="comment"># now = i</span></span><br><span class="line">                i.next = cur</span><br><span class="line">                i = i.next</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># now = j</span></span><br><span class="line">                j.next = cur</span><br><span class="line">                j = j.next</span><br><span class="line">            <span class="comment"># now.next = cur    # BUGGG</span></span><br><span class="line">            <span class="comment"># now = now.next</span></span><br><span class="line"></span><br><span class="line">            cur = cur.next</span><br><span class="line"></span><br><span class="line">        i.next = right_head.next</span><br><span class="line">        j.next = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">return</span> left_head.next</span><br></pre></td></tr></table></figure>



<h2 id="Sieve-of-Eratosthenes"><a href="#Sieve-of-Eratosthenes" class="headerlink" title="Sieve of Eratosthenes"></a>Sieve of Eratosthenes</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> isqrt</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countPrimes</span><span class="params">(self, n: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># n -= 1</span></span><br><span class="line">        <span class="keyword">if</span> n &lt;= <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        is_prime = [<span class="literal">True</span>] * n</span><br><span class="line">        is_prime[<span class="number">0</span>] = is_prime[<span class="number">1</span>] = <span class="literal">False</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        2 3 4 5 6..  16 17  35</span></span><br><span class="line"><span class="string">                X X XXX</span></span><br><span class="line"><span class="string">                            5.9 &lt; 7</span></span><br><span class="line"><span class="string">              5 or 6 7 8 9 </span></span><br><span class="line"><span class="string">                            5</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># for i in range(2, n):#isqrt(n + 1) + 1):</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, isqrt(n) + <span class="number">1</span>):    <span class="comment"># OPTIMIZATION!</span></span><br><span class="line">            <span class="keyword">if</span> is_prime[i]:</span><br><span class="line">                <span class="comment"># for x in range(2, n):     # TLE</span></span><br><span class="line">                    <span class="comment"># if x*i &gt; n-1:</span></span><br><span class="line">                    <span class="comment">#     break</span></span><br><span class="line">                    <span class="comment"># is_prime[x*i] = False    </span></span><br><span class="line">                    </span><br><span class="line">                <span class="string">""" OPTIMIZATION BELOW: """</span></span><br><span class="line">                <span class="keyword">for</span> x <span class="keyword">in</span> range(i*i, n, i):       <span class="comment"># OPTIMIZATION!</span></span><br><span class="line">                    is_prime[x] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># print(is_prime)</span></span><br><span class="line">        <span class="keyword">return</span> sum(is_prime)</span><br></pre></td></tr></table></figure>



<h2 id="Hungary"><a href="#Hungary" class="headerlink" title="Hungary"></a>Hungary</h2><h3 id="Max-Invitation"><a href="#Max-Invitation" class="headerlink" title="Max Invitation"></a>Max Invitation</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maximumInvitations</span><span class="params">(self, grid: List[List[int]])</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># return self.my_20220719(grid)   # with EF (bfs), ref: https://www.youtube.com/watch?v=OViaWp9Q-Oc</span></span><br><span class="line">        <span class="keyword">return</span> self.my_20220719_FF(grid)  <span class="comment"># ref: https://leetcode.com/problems/maximum-number-of-accepted-invitations/discuss/1978859/Python-or-Hungarian-Algorithm-easy-to-understand-%3A)</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20220719_FF</span><span class="params">(self, grid)</span>:</span></span><br><span class="line">        m, n = len(grid), len(grid[<span class="number">0</span>])</span><br><span class="line">        matches = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> boy <span class="keyword">in</span> range(m):</span><br><span class="line">            self.dfs_20220719(grid, boy, set([]), matches)</span><br><span class="line">        <span class="keyword">return</span> len(matches)</span><br><span class="line">            </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dfs_20220719</span><span class="params">(self, grid, boy, visited, matches)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> girl <span class="keyword">in</span> range(len(grid[<span class="number">0</span>])):</span><br><span class="line">            <span class="keyword">if</span> grid[boy][girl] <span class="keyword">and</span> girl <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">                visited.add(girl)</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> girl <span class="keyword">not</span> <span class="keyword">in</span> matches <span class="keyword">or</span> self.dfs_20220719(grid, matches[girl], visited, matches):</span><br><span class="line">                    matches[girl] = boy</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure>





<h2 id="SkipList"><a href="#SkipList" class="headerlink" title="SkipList"></a>SkipList</h2><h3 id="792-Number-of-Matching-Subsequences"><a href="#792-Number-of-Matching-Subsequences" class="headerlink" title="792. Number of Matching Subsequences"></a>792. Number of Matching Subsequences</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">return</span> self.my_20220720(S, words)</span><br><span class="line">    <span class="keyword">return</span> self.my_20220724(S, words)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_20220724</span><span class="params">(self, s, words)</span>:</span></span><br><span class="line">    s = <span class="string">'#'</span> + s</span><br><span class="line">    </span><br><span class="line">    next_s_char = [[<span class="number">-1</span>] * <span class="number">26</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(len(s))]</span><br><span class="line">    <span class="string">'''TODO!'''</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(s) - <span class="number">2</span>, <span class="number">-1</span>, <span class="number">-1</span>):</span><br><span class="line">        next_s_char[i] = next_s_char[i + <span class="number">1</span>].copy()</span><br><span class="line">        pos = ord(s[i + <span class="number">1</span>]) - ord(<span class="string">'a'</span>)</span><br><span class="line">        next_s_char[i][pos] = i + <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    ans = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">        <span class="keyword">if</span> self.is_subseq_20220724(word, s, next_s_char):</span><br><span class="line">            ans += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_subseq_20220724</span><span class="params">(self, word, s, next_s_char)</span>:</span></span><br><span class="line">    </span><br><span class="line">    i = j = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; len(s) <span class="keyword">and</span> j &lt; len(word):</span><br><span class="line">        nxt_pos = next_s_char[i][ord(word[j]) - ord(<span class="string">'a'</span>)]</span><br><span class="line">        <span class="keyword">if</span> nxt_pos == <span class="number">-1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        i = nxt_pos</span><br><span class="line">        j += <span class="number">1</span>  <span class="comment"># j needs to be completely matched!</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># if j == len(word):    # MUST be!</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_20220720</span><span class="params">(self, s, words)</span>:</span></span><br><span class="line">    mapping = defaultdict(list)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(s)):</span><br><span class="line">        mapping[s[i]].append(i)</span><br><span class="line">    <span class="comment"># print(mapping)</span></span><br><span class="line">    cnt = <span class="number">0</span></span><br><span class="line">    <span class="comment"># pos = [-1] * len(words)</span></span><br><span class="line">    m, n = len(s), len(words)</span><br><span class="line">    <span class="comment"># for i in range(n):</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">        word = words[i]</span><br><span class="line">        <span class="comment"># prev_pos = pos[i]</span></span><br><span class="line">        prev_pos = <span class="number">-1</span></span><br><span class="line">        <span class="comment"># for j in range(len(word)):</span></span><br><span class="line">        j = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> j &lt; len(word):</span><br><span class="line">            searching_arr = mapping[word[j]]</span><br><span class="line">            <span class="comment"># TO KNOW: in searching_arr, if there elem's value &gt; prev_pos(left hanside char)</span></span><br><span class="line">            idx = self.upper_bound(searching_arr, prev_pos)</span><br><span class="line">            <span class="comment"># print(searching_arr, i, j, idx, prev_pos)</span></span><br><span class="line">            <span class="comment"># if idx == len(word[j]): # BUGGG no val is larger than me</span></span><br><span class="line">            <span class="keyword">if</span> idx == len(searching_arr): <span class="comment"># FIX</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="comment"># prev_pos = idx    # BUGGG!!</span></span><br><span class="line">            prev_pos = searching_arr[idx]    <span class="comment"># BUGGG!!</span></span><br><span class="line">            j += <span class="number">1</span></span><br><span class="line">        <span class="comment"># print(i, j)</span></span><br><span class="line">        <span class="keyword">if</span> j == len(word):</span><br><span class="line">            cnt += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> cnt</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">upper_bound</span><span class="params">(self, arr, target)</span>:</span></span><br><span class="line">    lo, hi = <span class="number">0</span>, len(arr)</span><br><span class="line">    <span class="keyword">while</span> lo &lt; hi:</span><br><span class="line">        mid = lo + (hi - lo) // <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> arr[mid] &gt; target:</span><br><span class="line">            hi = mid</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            lo = mid + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> lo</span><br></pre></td></tr></table></figure>



<h3 id="1055-Shortest-Way-to-Form-String"><a href="#1055-Shortest-Way-to-Form-String" class="headerlink" title="1055. Shortest Way to Form String"></a>1055. Shortest Way to Form String</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">shortestWay</span><span class="params">(self, source, target)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    :type source: str</span></span><br><span class="line"><span class="string">    :type target: str</span></span><br><span class="line"><span class="string">    :rtype: int</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> source: <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">    <span class="comment"># return self.my_sol(source, target)</span></span><br><span class="line">    <span class="comment"># return self.sol_sisi(source, target)</span></span><br><span class="line">    <span class="keyword">return</span> self.my_20220721(source, target)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_20220721</span><span class="params">(self, source, target)</span>:</span></span><br><span class="line">    source = <span class="string">'#'</span> + source</span><br><span class="line">    m, n = len(source), len(target)</span><br><span class="line">    next_s_char = [[<span class="number">-1</span>] * <span class="number">26</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(len(source))]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(source) - <span class="number">2</span>, <span class="number">-1</span>, <span class="number">-1</span>):</span><br><span class="line">        next_s_char[i] = next_s_char[i + <span class="number">1</span>].copy()</span><br><span class="line">        pos = ord(source[i + <span class="number">1</span>]) - ord(<span class="string">'a'</span>)</span><br><span class="line">        next_s_char[i][pos] = i + <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="comment"># ans = 0   # BUG</span></span><br><span class="line">    ans = <span class="number">1</span></span><br><span class="line">    <span class="comment"># for j in range(len(target)):  # BUGG!</span></span><br><span class="line">    j = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> j &lt; len(target):</span><br><span class="line">        idx = ord(target[j]) - ord(<span class="string">'a'</span>)</span><br><span class="line">        next_pos = next_s_char[i][idx]</span><br><span class="line">        <span class="comment"># print(j, i, idx, next_pos)</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> next_pos == <span class="number">-1</span>:  <span class="comment"># needs loop again!</span></span><br><span class="line">            <span class="string">""" CRITICAL!! """</span></span><br><span class="line">            <span class="comment"># print(next_pos, i)</span></span><br><span class="line">            <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">            </span><br><span class="line">            ans += <span class="number">1</span></span><br><span class="line">            i = <span class="number">0</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            i = next_pos</span><br><span class="line">            j += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>



<h2 id="Ultimate-B-search"><a href="#Ultimate-B-search" class="headerlink" title="Ultimate B-search"></a>Ultimate B-search</h2><h3 id="658-K-Closest"><a href="#658-K-Closest" class="headerlink" title="658. K Closest"></a>658. K Closest</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment"># return self.my_20220720(arr, k, x)    # AC</span></span><br><span class="line">    <span class="keyword">return</span> self.my_20220720_B(arr, k, x)    <span class="comment"># AC</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_20220720_B</span><span class="params">(self, arr, k, x)</span>:</span> <span class="comment"># <span class="doctag">TODO:</span> discuss OOXXXX</span></span><br><span class="line">    n = len(arr)</span><br><span class="line">    <span class="keyword">if</span> k &gt;= n:</span><br><span class="line">        <span class="keyword">return</span> arr</span><br><span class="line">    </span><br><span class="line">    lo, hi = <span class="number">0</span>, n - k   <span class="comment"># starting pos of the k-leng subarray</span></span><br><span class="line">    <span class="keyword">while</span> lo &lt; hi:</span><br><span class="line">        mid = lo + (hi - lo) // <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> arr[mid + k] - x &gt;= x - arr[mid]:</span><br><span class="line">            hi = mid</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            lo = mid + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> arr[lo:lo + k]</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_20220720</span><span class="params">(self, arr, k, x)</span>:</span></span><br><span class="line">    n = len(arr)</span><br><span class="line">    <span class="keyword">if</span> k &gt;= n:</span><br><span class="line">        <span class="keyword">return</span> arr</span><br><span class="line">    </span><br><span class="line">    lo, hi = <span class="number">0</span>, n - k   <span class="comment"># starting pos of the k-leng subarray</span></span><br><span class="line">    <span class="keyword">while</span> lo + <span class="number">1</span> &lt; hi:</span><br><span class="line">        print(lo, hi)</span><br><span class="line">        mid = lo + (hi - lo) // <span class="number">2</span></span><br><span class="line">        print(mid)</span><br><span class="line">        <span class="comment"># if abs(arr[mid] - x) &lt;= abs(arr[mid+k] - x):    # BUGGG!</span></span><br><span class="line">        <span class="comment"># if x - arr[mid] &lt;= arr[mid + k] - x:            # CORRECT FIX!</span></span><br><span class="line">        <span class="keyword">if</span> arr[mid + k] - x &gt;= x - arr[mid]:</span><br><span class="line">            hi = mid</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            lo = mid</span><br><span class="line">    print(lo, hi)</span><br><span class="line">    </span><br><span class="line">    head = abs(arr[lo] - x)</span><br><span class="line">    tail = abs(arr[lo+k] - x)</span><br><span class="line">    <span class="keyword">if</span> head &lt;= tail:</span><br><span class="line">        <span class="keyword">return</span> arr[lo:lo+k]</span><br><span class="line">    <span class="keyword">return</span> arr[hi:hi+k]</span><br></pre></td></tr></table></figure>



<h2 id="Target-出現次數-–-gt-超大array"><a href="#Target-出現次數-–-gt-超大array" class="headerlink" title="Target 出現次數 –&gt; 超大array"></a>Target 出現次數 –&gt; 超大array</h2><ul>
<li>Partition w/ 100 as the partition_size, then GroupBy</li>
</ul>
<h2 id="K-distance-apart"><a href="#K-distance-apart" class="headerlink" title="K distance apart"></a>K distance apart</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">rearrangeString</span><span class="params">(self, s: str, k: int)</span> -&gt; str:</span></span><br><span class="line">        <span class="keyword">if</span> k &lt;= <span class="number">1</span> <span class="keyword">or</span> len(s) &lt;= <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> s</span><br><span class="line">        <span class="comment"># return self.sol_w_arr(s, k) # still FAILED</span></span><br><span class="line">        <span class="comment"># return self.solution_0921_A(s, k) # 112ms</span></span><br><span class="line">        <span class="comment"># return self.solution_0921_B(s, k)   # 48ms</span></span><br><span class="line">        <span class="keyword">return</span> self.my_20220726(s, k)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20220726</span><span class="params">(self, s, k)</span>:</span></span><br><span class="line">        n = len(s)</span><br><span class="line">        max_heap = []</span><br><span class="line">        [heapq.heappush(max_heap, (-v, k)) <span class="keyword">for</span> k, v <span class="keyword">in</span> Counter(s).items()]</span><br><span class="line">        <span class="comment"># if -max_heap[0][0] &gt; n // k:</span></span><br><span class="line">        <span class="comment">#     return ''</span></span><br><span class="line">        count = Counter(s)</span><br><span class="line">        maxf = -max_heap[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">if</span> (maxf - <span class="number">1</span>) * k + list(count.values()).count(maxf) &gt; len(s):</span><br><span class="line">            <span class="keyword">return</span> <span class="string">""</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        res = [<span class="string">''</span>] * n</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, n, k):</span><br><span class="line">            using = []</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(k):</span><br><span class="line">                <span class="keyword">if</span> max_heap:</span><br><span class="line">                    cnt, char = heapq.heappop(max_heap)</span><br><span class="line">                    cnt = abs(cnt)</span><br><span class="line">                    using.append([cnt - <span class="number">1</span>, char])</span><br><span class="line">                    res[i + j] = char</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                </span><br><span class="line">            <span class="keyword">for</span> new_cnt, char <span class="keyword">in</span> using:</span><br><span class="line">                <span class="keyword">if</span> new_cnt &gt; <span class="number">0</span>:</span><br><span class="line">                    heapq.heappush(max_heap, (-new_cnt, char))</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span>.join(res)</span><br></pre></td></tr></table></figure>



<h2 id="Kth-subarray-sum"><a href="#Kth-subarray-sum" class="headerlink" title="Kth subarray sum"></a>Kth subarray sum</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">kthSmallestSubarraySum</span><span class="params">(self, nums: List[int], k: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># return self.congcong(nums, k)</span></span><br><span class="line">        <span class="keyword">return</span> self.my_20220802(nums, k)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20220802</span><span class="params">(self, nums, k)</span>:</span></span><br><span class="line">        nums.sort()</span><br><span class="line">        <span class="comment"># print(nums)</span></span><br><span class="line">        n = len(nums)</span><br><span class="line">        lo, hi = min(nums), sum(nums)</span><br><span class="line">        <span class="keyword">while</span> lo + <span class="number">1</span> &lt; hi:  <span class="comment"># binary answer!</span></span><br><span class="line">            mid = lo + (hi - lo) // <span class="number">2</span></span><br><span class="line">            <span class="comment"># print(lo, hi, mid)</span></span><br><span class="line">            <span class="comment"># print(lo, hi, mid)</span></span><br><span class="line">            <span class="keyword">if</span> self.getSmallerOrEqualCount(nums, mid) &gt;= k - <span class="number">1</span>:</span><br><span class="line">                hi = mid</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                lo = mid</span><br><span class="line">        <span class="comment"># print(lo, hi)</span></span><br><span class="line">        <span class="keyword">if</span> self.getSmallerOrEqualCount(nums, lo) == k - <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> lo</span><br><span class="line">        <span class="keyword">return</span> hi</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getSmallerOrEqualCount</span><span class="params">(self, nums, target)</span>:</span></span><br><span class="line">        n = len(nums)</span><br><span class="line">        tot = n * (n + <span class="number">1</span>) // <span class="number">2</span></span><br><span class="line">        now = <span class="number">0</span></span><br><span class="line">        cnt = <span class="number">0</span></span><br><span class="line">        i = <span class="number">0</span></span><br><span class="line">        fin = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(n):</span><br><span class="line">            now += nums[j]</span><br><span class="line">            <span class="keyword">while</span> now &gt; target:</span><br><span class="line">                <span class="comment"># cnt += (n - 1 - (j - 1))</span></span><br><span class="line">                cnt += n - j</span><br><span class="line">                now -= nums[i]</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            <span class="comment">#     if i &gt; j:     # BUGGGGG!!!!! 不可不可!!</span></span><br><span class="line">            <span class="comment">#         fin = True</span></span><br><span class="line">            <span class="comment"># if fin:</span></span><br><span class="line">            <span class="comment">#     break</span></span><br><span class="line">            </span><br><span class="line">        <span class="comment"># print(cnt)</span></span><br><span class="line">        <span class="keyword">return</span> tot - cnt <span class="comment"># return tot - #(sub array sum &gt; than target)</span></span><br></pre></td></tr></table></figure>



<h2 id="Dijkastra-or-Kruskal"><a href="#Dijkastra-or-Kruskal" class="headerlink" title="Dijkastra or Kruskal"></a>Dijkastra or Kruskal</h2><h3 id="1631-Path-With-Minimum-Effort"><a href="#1631-Path-With-Minimum-Effort" class="headerlink" title="1631. Path With Minimum Effort"></a>1631. Path With Minimum Effort</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UF</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        self.parents = [i <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">find</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> x != self.parents[x]:</span><br><span class="line">            self.parents[x] = self.find(self.parents[x])</span><br><span class="line">        <span class="keyword">return</span> self.parents[x]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">merge</span><span class="params">(self, x, y)</span>:</span></span><br><span class="line">        px, py = self.find(x), self.find(y)</span><br><span class="line">        <span class="keyword">if</span> px != py:</span><br><span class="line">            self.parents[py] = px</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_connected</span><span class="params">(self, x, y)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.find(x) == self.find(y)</span><br><span class="line"></span><br><span class="line">DIRECTIONS = [(<span class="number">-1</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">-1</span>)]</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minimumEffortPath</span><span class="params">(self, A: List[List[int]])</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># return self.my_20220207(A)    # AC, sol MST</span></span><br><span class="line">        <span class="keyword">return</span> self.my_20220803(A)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20220803</span><span class="params">(self, A)</span>:</span></span><br><span class="line">        m, n = len(A), len(A[<span class="number">0</span>])</span><br><span class="line">        END = (m - <span class="number">1</span>, n - <span class="number">1</span>)</span><br><span class="line">        min_heap = [(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)]</span><br><span class="line">        visited = &#123;(<span class="number">0</span>, <span class="number">0</span>): <span class="number">0</span>&#125;</span><br><span class="line">        <span class="keyword">while</span> min_heap:</span><br><span class="line">            <span class="comment"># print(min_heap)</span></span><br><span class="line">            effort, i, j = heapq.heappop(min_heap)</span><br><span class="line">            <span class="keyword">if</span> (i, j) == END:</span><br><span class="line">                <span class="keyword">return</span> visited[END]</span><br><span class="line">            <span class="keyword">for</span> di, dj <span class="keyword">in</span> DIRECTIONS:</span><br><span class="line">                ni, nj = i + di, j + dj</span><br><span class="line">                <span class="string">""" BUGGG!!!</span></span><br><span class="line"><span class="string">                if 0 &lt;= ni &lt; m and 0 &lt;= nj &lt; n and (ni, nj) not in visited:</span></span><br><span class="line"><span class="string">                    effort = abs(A[ni][nj] - A[i][j])</span></span><br><span class="line"><span class="string">                    visited[(ni, nj)] = max(effort, visited[(i, j)])</span></span><br><span class="line"><span class="string">                    heapq.heappush(min_heap, (max(effort, visited[(i, j)]), ni, nj))</span></span><br><span class="line"><span class="string">                    """</span></span><br><span class="line">                <span class="keyword">if</span> <span class="number">0</span> &lt;= ni &lt; m <span class="keyword">and</span> <span class="number">0</span> &lt;= nj &lt; n:</span><br><span class="line">                    next_effort = abs(A[ni][nj] - A[i][j])</span><br><span class="line">                    <span class="comment"># if next_effort &gt; effort:    # BUG, No need</span></span><br><span class="line">                    <span class="comment">#     path_max_effort = max(next_effort, effort)</span></span><br><span class="line">                    path_max_effort = max(next_effort, effort)</span><br><span class="line">                    <span class="keyword">if</span> (ni, nj) <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">                        visited[(ni, nj)] = path_max_effort</span><br><span class="line">                    <span class="keyword">else</span>: </span><br><span class="line">                        <span class="keyword">if</span> visited[(ni, nj)] &gt; path_max_effort:  <span class="comment"># 曾經發生的路上的最大如果大於effort的話；因為我們要的是 min(max)</span></span><br><span class="line">                            visited[(ni, nj)] = path_max_effort</span><br><span class="line">                        <span class="keyword">else</span>:</span><br><span class="line">                            <span class="keyword">continue</span></span><br><span class="line">                    heapq.heappush(min_heap, (path_max_effort, ni, nj))            </span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20220803_WRONG</span><span class="params">(self, A)</span>:</span></span><br><span class="line">        m, n = len(A), len(A[<span class="number">0</span>])</span><br><span class="line">        END = (m - <span class="number">1</span>, n - <span class="number">1</span>)</span><br><span class="line">        min_heap = [(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)]</span><br><span class="line">        visited = &#123;(<span class="number">0</span>, <span class="number">0</span>): <span class="number">0</span>&#125;</span><br><span class="line">        <span class="keyword">while</span> min_heap:</span><br><span class="line">            <span class="comment"># print(min_heap)</span></span><br><span class="line">            effort, i, j = heapq.heappop(min_heap)</span><br><span class="line">            <span class="keyword">if</span> (i, j) == END:</span><br><span class="line">                <span class="keyword">return</span> visited[END]</span><br><span class="line">            <span class="keyword">for</span> di, dj <span class="keyword">in</span> DIRECTIONS:</span><br><span class="line">                ni, nj = i + di, j + dj</span><br><span class="line">                <span class="string">""" BUGGG!!!</span></span><br><span class="line"><span class="string">                if 0 &lt;= ni &lt; m and 0 &lt;= nj &lt; n and (ni, nj) not in visited:</span></span><br><span class="line"><span class="string">                    effort = abs(A[ni][nj] - A[i][j])</span></span><br><span class="line"><span class="string">                    visited[(ni, nj)] = max(effort, visited[(i, j)])</span></span><br><span class="line"><span class="string">                    heapq.heappush(min_heap, (max(effort, visited[(i, j)]), ni, nj))</span></span><br><span class="line"><span class="string">                    """</span></span><br><span class="line">                <span class="keyword">if</span> <span class="number">0</span> &lt;= ni &lt; m <span class="keyword">and</span> <span class="number">0</span> &lt;= nj &lt; n:</span><br><span class="line">                    next_effort = abs(A[ni][nj] - A[i][j])</span><br><span class="line">                    <span class="keyword">if</span> (ni, nj) <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">                        visited[(ni, nj)] = max(next_effort, effort)</span><br><span class="line">                    <span class="keyword">else</span>: </span><br><span class="line">                        <span class="keyword">if</span> visited[(ni, nj)] &gt; next_effort:  <span class="comment"># 曾經發生的路上的最大如果大於effort的話；因為我們要的是 min(max)</span></span><br><span class="line">                            visited[(ni, nj)] = next_effort</span><br><span class="line">                        <span class="keyword">else</span>:</span><br><span class="line">                            <span class="keyword">continue</span></span><br><span class="line">                    heapq.heappush(min_heap, (next_effort, ni, nj))            </span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20220207</span><span class="params">(self, A)</span>:</span></span><br><span class="line">        dire = [(<span class="number">0</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">-1</span>), (<span class="number">-1</span>, <span class="number">0</span>)]</span><br><span class="line">        m, n = len(A), len(A[<span class="number">0</span>])</span><br><span class="line">        <span class="comment"># heap = [(-A[0][0], 0, 0), (-A[m - 1][n - 1], m - 1, n - 1)]   # no need</span></span><br><span class="line">        heap = []</span><br><span class="line">        <span class="comment"># res = sys.maxsize 不需要</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(m):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(n):</span><br><span class="line">                <span class="keyword">if</span> i &lt; m - <span class="number">1</span>:</span><br><span class="line">                    heapq.heappush(heap, (abs(A[i][j] - A[i + <span class="number">1</span>][j]), i, j, i + <span class="number">1</span>, j))</span><br><span class="line">                <span class="keyword">if</span> j &lt; n - <span class="number">1</span>:</span><br><span class="line">                    heapq.heappush(heap, (abs(A[i][j] - A[i][j + <span class="number">1</span>]), i, j, i, j + <span class="number">1</span>))</span><br><span class="line">        <span class="comment"># print(len(heap))</span></span><br><span class="line">        <span class="comment"># print(sorted(heap))</span></span><br><span class="line">        </span><br><span class="line">        uf = UF(m * n)</span><br><span class="line">        seen = set([])</span><br><span class="line">        src = <span class="number">0</span></span><br><span class="line">        dst = (m - <span class="number">1</span>) * n + (n - <span class="number">1</span>)</span><br><span class="line">        res = sys.maxsize</span><br><span class="line">        <span class="keyword">while</span> heap:</span><br><span class="line">            val, i1, j1, i2, j2 = heapq.heappop(heap)</span><br><span class="line">            <span class="comment"># seen.add((i1, j1))</span></span><br><span class="line">            <span class="comment"># seen.add((i2, j2))</span></span><br><span class="line">            a, b = i1 * n + j1, i2 * n + j2</span><br><span class="line">            uf.merge(a, b)</span><br><span class="line">            <span class="comment"># print(val, i1, j1, i2, j2)</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># now = i * n + j</span></span><br><span class="line">            <span class="comment"># for di, dj in dire:</span></span><br><span class="line">            <span class="comment">#     ni, nj = i + di, j + dj</span></span><br><span class="line">            <span class="comment">#     # if 0 &lt;= ni &lt; m and 0 &lt;= nj &lt; n and (ni, nj) not in seen:</span></span><br><span class="line">            <span class="comment">#     if 0 &lt;= ni &lt; m and 0 &lt;= nj &lt; n and (ni, nj) in seen:</span></span><br><span class="line">            <span class="comment">#         nbr = ni * n + nj</span></span><br><span class="line">            <span class="comment">#         uf.merge(now, nbr)</span></span><br><span class="line">            <span class="comment">#         # seen.add((ni, nj))    BUG! shouldn't be here</span></span><br><span class="line">            <span class="comment"># print(uf.parents)</span></span><br><span class="line">            <span class="keyword">if</span> uf.is_connected(src, dst):</span><br><span class="line">                <span class="keyword">return</span> val            </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>





<h2 id="Memo"><a href="#Memo" class="headerlink" title="Memo"></a>Memo</h2><h3 id="329-Longest-Increasing-Path-in-a-Matrix"><a href="#329-Longest-Increasing-Path-in-a-Matrix" class="headerlink" title="329. Longest Increasing Path in a Matrix"></a>329. Longest Increasing Path in a Matrix</h3><p>Given an <code>m x n</code> integers <code>matrix</code>, return <em>the length of the longest increasing path in</em> <code>matrix</code>.</p>
<p>From each cell, you can either move in four directions: left, right, up, or down. You <strong>may not</strong> move <strong>diagonally</strong> or move <strong>outside the boundary</strong> (i.e., wrap-around is not allowed).</p>
<p><strong>Example 1:</strong></p>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h4xctvhrvdj206q06qdfr.jpg" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: matrix &#x3D; [[9,9,4],[6,6,8],[2,1,1]]</span><br><span class="line">Output: 4</span><br><span class="line">Explanation: The longest increasing path is [1, 2, 6, 9].</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h4xctw3izaj2071071t8n.jpg" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: matrix &#x3D; [[3,4,5],[3,2,6],[2,2,1]]</span><br><span class="line">Output: 4</span><br><span class="line">Explanation: The longest increasing path is [3, 4, 5, 6]. Moving diagonally is not allowed.</span><br></pre></td></tr></table></figure>

<p><strong>Example 3:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: matrix &#x3D; [[1]]</span><br><span class="line">Output: 1</span><br></pre></td></tr></table></figure>



<p><strong>Constraints:</strong></p>
<ul>
<li><code>m == matrix.length</code></li>
<li><code>n == matrix[i].length</code></li>
<li><code>1 &lt;= m, n &lt;= 200</code></li>
<li><code>0 &lt;= matrix[i][j] &lt;= 231 - 1</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">DIR = [[<span class="number">-1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">-1</span>]]</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">longestIncreasingPath</span><span class="params">(self, matrix: List[List[int]])</span> -&gt; int:</span></span><br><span class="line">        m, n = len(matrix), len(matrix[<span class="number">0</span>])</span><br><span class="line">        memo = [[<span class="number">-1</span>] * n <span class="keyword">for</span> _ <span class="keyword">in</span> range(m)]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(m):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(n):</span><br><span class="line">                self.dfs(matrix, i, j, memo)</span><br><span class="line">        <span class="keyword">return</span> max(max(row) <span class="keyword">for</span> row <span class="keyword">in</span> memo)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dfs</span><span class="params">(self, matrix, i, j, memo)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> (<span class="number">0</span> &lt;= i &lt; len(matrix)) <span class="keyword">or</span> <span class="keyword">not</span> (<span class="number">0</span> &lt;= j &lt; len(matrix[<span class="number">0</span>])):</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> memo[i][j] &gt; <span class="number">-1</span>:</span><br><span class="line">            <span class="keyword">return</span> memo[i][j]</span><br><span class="line">        </span><br><span class="line">        longest = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> di, dj <span class="keyword">in</span> DIR:</span><br><span class="line">            ni, nj = i + di, j + dj</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> <span class="number">0</span> &lt;= ni &lt; len(matrix) <span class="keyword">and</span> <span class="number">0</span> &lt;= nj &lt; len(matrix[<span class="number">0</span>]) <span class="keyword">and</span> matrix[ni][nj] &gt; matrix[i][j]:</span><br><span class="line">                longest = max(self.dfs(matrix, ni, nj, memo), longest)</span><br><span class="line"></span><br><span class="line">        memo[i][j] = longest + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> memo[i][j]</span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    0   0   2</span></span><br><span class="line"><span class="string">            </span></span><br><span class="line"><span class="string">    2   2   1(1, 2)</span></span><br><span class="line"><span class="string">    3   4   2</span></span><br><span class="line"><span class="string">    '''</span></span><br></pre></td></tr></table></figure>





<h2 id="Shortest-Path"><a href="#Shortest-Path" class="headerlink" title="Shortest Path"></a>Shortest Path</h2><p>1293.</p>
<p>743.</p>
<h3 id="Dijkastra-V-S-A"><a href="#Dijkastra-V-S-A" class="headerlink" title="Dijkastra V.S. A*"></a>Dijkastra V.S. A*</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">networkDelayTime</span><span class="params">(self, times: List[List[int]], n: int, k: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">import</span> heapq</span><br><span class="line">        </span><br><span class="line">        graph = defaultdict(dict)</span><br><span class="line">        <span class="keyword">for</span> i,j,w <span class="keyword">in</span> times:</span><br><span class="line">            graph[i][j] = w</span><br><span class="line">            </span><br><span class="line">        dist = [float(<span class="string">"inf"</span>)]*(n+<span class="number">1</span>)</span><br><span class="line">        dist[k] = <span class="number">0</span></span><br><span class="line">        que = [(<span class="number">0</span>,k)] </span><br><span class="line">        visited = [<span class="literal">False</span>]*(n+<span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> que:</span><br><span class="line">            d, node = heapq.heappop(que)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> visited[node]:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">            visited[node] = <span class="literal">True</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span> child <span class="keyword">in</span> graph[node]:</span><br><span class="line">                <span class="keyword">if</span> graph[node][child] + d &lt; dist[child]:</span><br><span class="line">                    dist[child] = graph[node][child] + d</span><br><span class="line">                    heapq.heappush( que, (dist[child],child) )</span><br><span class="line">                    </span><br><span class="line">        ret = max(dist[<span class="number">1</span>:])</span><br><span class="line">        <span class="keyword">return</span> ret <span class="keyword">if</span> ret!=float(<span class="string">"inf"</span>) <span class="keyword">else</span> <span class="number">-1</span></span><br></pre></td></tr></table></figure>



<h2 id="Rearrange-String-k-Dist"><a href="#Rearrange-String-k-Dist" class="headerlink" title="Rearrange String k Dist"></a>Rearrange String k Dist</h2><h3 id="358-Rearrange-String-k-Distance-Apart"><a href="#358-Rearrange-String-k-Distance-Apart" class="headerlink" title="358. Rearrange String k Distance Apart"></a>358. Rearrange String k Distance Apart</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">rearrangeString</span><span class="params">(self, s: str, k: int)</span> -&gt; str:</span></span><br><span class="line">        <span class="keyword">if</span> k &lt;= <span class="number">1</span> <span class="keyword">or</span> len(s) &lt;= <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> s</span><br><span class="line">        <span class="comment"># return self.sol_w_arr(s, k) # still FAILED</span></span><br><span class="line">        <span class="comment"># return self.solution_0921_A(s, k) # 112ms</span></span><br><span class="line">        <span class="comment"># return self.solution_0921_B(s, k)   # 48ms</span></span><br><span class="line">        <span class="keyword">return</span> self.my_20220726(s, k)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20220726</span><span class="params">(self, s, k)</span>:</span></span><br><span class="line">        n = len(s)</span><br><span class="line">        max_heap = []</span><br><span class="line">        [heapq.heappush(max_heap, (-v, k)) <span class="keyword">for</span> k, v <span class="keyword">in</span> Counter(s).items()]</span><br><span class="line">        <span class="comment"># if -max_heap[0][0] &gt; n // k:</span></span><br><span class="line">        <span class="comment">#     return ''</span></span><br><span class="line">        count = Counter(s)</span><br><span class="line">        maxf = -max_heap[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">if</span> (maxf - <span class="number">1</span>) * k + list(count.values()).count(maxf) &gt; len(s):	<span class="comment"># 最多次就是這個，不然就是 len(tasks), ref to LC621.</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">""</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        res = [<span class="string">''</span>] * n</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, n, k):</span><br><span class="line">            using = []</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(k):</span><br><span class="line">                <span class="keyword">if</span> max_heap:</span><br><span class="line">                    cnt, char = heapq.heappop(max_heap)</span><br><span class="line">                    cnt = abs(cnt)</span><br><span class="line">                    using.append([cnt - <span class="number">1</span>, char])</span><br><span class="line">                    res[i + j] = char</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                </span><br><span class="line">            <span class="keyword">for</span> new_cnt, char <span class="keyword">in</span> using:</span><br><span class="line">                <span class="keyword">if</span> new_cnt &gt; <span class="number">0</span>:</span><br><span class="line">                    heapq.heappush(max_heap, (-new_cnt, char))</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span>.join(res)</span><br></pre></td></tr></table></figure>



<h2 id="Deserialization"><a href="#Deserialization" class="headerlink" title="Deserialization"></a>Deserialization</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode(object):</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.left = None</span></span><br><span class="line"><span class="comment">#         self.right = None</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Codec</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">serialize</span><span class="params">(self, root)</span>:</span></span><br><span class="line">        <span class="string">"""Encodes a tree to a single string.</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        :type root: TreeNode</span></span><br><span class="line"><span class="string">        :rtype: str</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        que = deque([root])</span><br><span class="line">        res = <span class="string">''</span></span><br><span class="line">        <span class="keyword">while</span> que:</span><br><span class="line">            now = que.popleft()</span><br><span class="line">            res += str(now.val) <span class="keyword">if</span> now <span class="keyword">else</span> <span class="string">'#'</span></span><br><span class="line">            res += <span class="string">' '</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> now:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">            que.append(now.left)</span><br><span class="line">            que.append(now.right)</span><br><span class="line">        <span class="comment"># print(res)</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">deserialize</span><span class="params">(self, data)</span>:</span></span><br><span class="line">        <span class="string">"""Decodes your encoded data to tree.</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        :type data: str</span></span><br><span class="line"><span class="string">        :rtype: TreeNode</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># root = TreeNode</span></span><br><span class="line">        vals = data.split(<span class="string">' '</span>)</span><br><span class="line">        nodes = [TreeNode(val) <span class="keyword">if</span> val != <span class="string">'#'</span> <span class="keyword">else</span> <span class="literal">None</span> <span class="keyword">for</span> val <span class="keyword">in</span> vals]</span><br><span class="line">        <span class="comment"># [print(n) for n in nodes]</span></span><br><span class="line">        </span><br><span class="line">        slow, fast = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">        <span class="comment"># print('START!')</span></span><br><span class="line">        <span class="keyword">while</span> fast &lt; len(nodes):</span><br><span class="line">            now = nodes[slow]</span><br><span class="line">            <span class="keyword">if</span> now:</span><br><span class="line">                now.left = nodes[fast]</span><br><span class="line">                <span class="keyword">if</span> fast + <span class="number">1</span> &lt; len(nodes):</span><br><span class="line">                    now.right = nodes[fast + <span class="number">1</span>]</span><br><span class="line">                fast += <span class="number">2</span></span><br><span class="line">            <span class="comment"># print(now, now.left, now.right)</span></span><br><span class="line">            slow += <span class="number">1</span></span><br><span class="line">            <span class="comment"># fast += 2 # BUGG!</span></span><br><span class="line">        <span class="keyword">return</span> nodes[<span class="number">0</span>]</span><br><span class="line">            </span><br><span class="line"><span class="comment"># Your Codec object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"># ser = Codec()</span></span><br><span class="line"><span class="comment"># deser = Codec()</span></span><br><span class="line"><span class="comment"># ans = deser.deserialize(ser.serialize(root))</span></span><br></pre></td></tr></table></figure>



<h2 id="Longest-Cycle-in-a-Graph"><a href="#Longest-Cycle-in-a-Graph" class="headerlink" title="Longest Cycle in a Graph"></a>Longest Cycle in a Graph</h2><h3 id="2360-Longest-Cycle-in-a-Graph"><a href="#2360-Longest-Cycle-in-a-Graph" class="headerlink" title="2360. Longest Cycle in a Graph"></a>2360. Longest Cycle in a Graph</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">longestCycle</span><span class="params">(self, edges: List[int])</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">return</span> self.shangan_lc304(edges)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">shangan_lc304</span><span class="params">(self, edges)</span>:</span></span><br><span class="line">        n = len(edges)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># graph = &#123;&#125;</span></span><br><span class="line">        <span class="comment"># for i in range(n):</span></span><br><span class="line">        <span class="comment">#     graph[i] = []</span></span><br><span class="line">        <span class="comment"># for i in range(n):</span></span><br><span class="line">        <span class="comment">#     graph[i].append(edges[i])</span></span><br><span class="line">            </span><br><span class="line">        time_stamp = [<span class="number">0</span>] * n</span><br><span class="line">        res = <span class="number">-1</span></span><br><span class="line">        cur = <span class="number">1</span>       <span class="comment"># FIX</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):  <span class="comment"># as starting point!</span></span><br><span class="line">            <span class="comment"># cur =     # BUG</span></span><br><span class="line">            <span class="keyword">if</span> time_stamp[i] &gt; <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">                </span><br><span class="line">            j = i</span><br><span class="line">            start = cur   <span class="comment"># FIX</span></span><br><span class="line">            <span class="keyword">while</span> j &gt;= <span class="number">0</span>:</span><br><span class="line">                <span class="comment"># start = cur   # BUGG</span></span><br><span class="line">                <span class="keyword">if</span> time_stamp[j] &gt; <span class="number">0</span>:   <span class="comment"># FOUND a LOOP!</span></span><br><span class="line">                    <span class="keyword">if</span> time_stamp[j] &gt;= start:</span><br><span class="line">                        res = max(res, cur - time_stamp[j])</span><br><span class="line">                        print(cur - time_stamp[j])</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                time_stamp[j] = cur</span><br><span class="line">                j = edges[j]</span><br><span class="line">                cur += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>





<h2 id="Tail-DP"><a href="#Tail-DP" class="headerlink" title="Tail DP"></a>Tail DP</h2><h3 id="2214-Minimum-Health-to-Beat-Game"><a href="#2214-Minimum-Health-to-Beat-Game" class="headerlink" title="2214. Minimum Health to Beat Game"></a>2214. Minimum Health to Beat Game</h3><h5 id="P-S-Best-solution-to-this-problem-is-Greedy-instead-of-this-DP-However-this-DP-brings-valuable-ideas"><a href="#P-S-Best-solution-to-this-problem-is-Greedy-instead-of-this-DP-However-this-DP-brings-valuable-ideas" class="headerlink" title="P.S. Best solution to this problem is Greedy instead of this DP. However, this DP brings valuable ideas"></a>P.S. Best solution to this problem is Greedy instead of this DP. However, this DP brings valuable ideas</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minimumHealth</span><span class="params">(self, damage: List[int], armor: int)</span> -&gt; int:</span></span><br><span class="line">        n = len(damage)</span><br><span class="line">        use = [<span class="number">0</span>] * (n + <span class="number">1</span>)</span><br><span class="line">        no_use = [<span class="number">0</span>] * (n + <span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">        use[n] = <span class="number">1</span></span><br><span class="line">        no_use[n] = <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        use[i]: 第i天開始的時候，那天「會用」armor的情況下，允許的最少Health</span></span><br><span class="line"><span class="string">        no_use[i]: 第i天開始的時候，那天「不會用」armor的情況下，允許的最少Health</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n - <span class="number">1</span>, <span class="number">-1</span>, <span class="number">-1</span>):</span><br><span class="line">            <span class="comment"># use_on_i_day = use[i + 1] + max(damage[i] - armor, 0) # BUG</span></span><br><span class="line">            use_on_i_day = no_use[i + <span class="number">1</span>] + max(damage[i] - armor, <span class="number">0</span>)</span><br><span class="line">            use_before_i_day = use[i + <span class="number">1</span>] + damage[i]</span><br><span class="line">            use[i] = min(use_on_i_day, use_before_i_day)</span><br><span class="line">            no_use[i] = no_use[i + <span class="number">1</span>] + damage[i]</span><br><span class="line">        <span class="keyword">return</span> use[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>





<h2 id="State-DP"><a href="#State-DP" class="headerlink" title="State DP"></a>State DP</h2><h3 id="2222-Number-of-Ways-to-Select-Buildings"><a href="#2222-Number-of-Ways-to-Select-Buildings" class="headerlink" title="2222. Number of Ways to Select Buildings"></a>2222. Number of Ways to Select Buildings</h3><h5 id="P-S-can-also-be-solved-with-L-R-partition-method"><a href="#P-S-can-also-be-solved-with-L-R-partition-method" class="headerlink" title="P.S. can also be solved with L/R partition method"></a>P.S. can also be solved with L/R partition method</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">numberOfWays</span><span class="params">(self, s: str)</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># return self.stateDP_20220815(s) # AC!</span></span><br><span class="line">        <span class="keyword">return</span> self.greedy_20220815(s)  <span class="comment"># AC!</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">greedy_20220815</span><span class="params">(self, s)</span>:</span></span><br><span class="line">        n = len(s)</span><br><span class="line">        left_ones = [<span class="number">0</span>] * n</span><br><span class="line">        left_zeros = [<span class="number">0</span>] * n</span><br><span class="line">        right_ones = [<span class="number">0</span>] * n</span><br><span class="line">        <span class="comment"># cnt = 0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n):</span><br><span class="line">            left_ones[i] = left_ones[i - <span class="number">1</span>] + (s[i - <span class="number">1</span>] == <span class="string">'1'</span>)</span><br><span class="line">            left_zeros[i] = left_zeros[i - <span class="number">1</span>] + (s[i - <span class="number">1</span>] == <span class="string">'0'</span>)</span><br><span class="line">        right_zeros = [<span class="number">0</span>] * n</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n - <span class="number">2</span>, <span class="number">-1</span>, <span class="number">-1</span>):</span><br><span class="line">            right_ones[i] = right_ones[i + <span class="number">1</span>] + (s[i + <span class="number">1</span>] == <span class="string">'1'</span>)</span><br><span class="line">            right_zeros[i] = right_zeros[i + <span class="number">1</span>] + (s[i + <span class="number">1</span>] == <span class="string">'0'</span>)</span><br><span class="line">            </span><br><span class="line">        ans_ones = <span class="number">0</span></span><br><span class="line">        ans_zeros = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n - <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> s[i] == <span class="string">'1'</span>:</span><br><span class="line">                ans_ones += left_zeros[i] * right_zeros[i]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                ans_zeros += left_ones[i] * right_ones[i]</span><br><span class="line">        <span class="keyword">return</span> ans_ones + ans_zeros</span><br><span class="line">                </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">stateDP_20220815</span><span class="params">(self, s)</span>:</span></span><br><span class="line">        n = len(s)</span><br><span class="line">        dp = defaultdict(int)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">if</span> s[i] == <span class="string">'0'</span>:</span><br><span class="line">                dp[<span class="string">'0'</span>] += <span class="number">1</span></span><br><span class="line">                dp[<span class="string">'10'</span>] += dp[<span class="string">'1'</span>]</span><br><span class="line">                dp[<span class="string">'010'</span>] += dp[<span class="string">'01'</span>]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                dp[<span class="string">'1'</span>] += <span class="number">1</span></span><br><span class="line">                dp[<span class="string">'01'</span>] += dp[<span class="string">'0'</span>]</span><br><span class="line">                dp[<span class="string">'101'</span>] += dp[<span class="string">'10'</span>]</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="string">'010'</span>] + dp[<span class="string">'101'</span>]</span><br><span class="line">        <span class="comment"># state DP https://leetcode.com/problems/number-of-ways-to-select-buildings/discuss/1907109/PythonDP-easy-to-understand</span></span><br></pre></td></tr></table></figure>



<h3 id="1048-Longest-String-Chain"><a href="#1048-Longest-String-Chain" class="headerlink" title="1048. Longest String Chain"></a>1048. Longest String Chain</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">return</span> self.my_20220803(sorted(words, key=<span class="keyword">lambda</span> w: len(w)))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_20220803</span><span class="params">(self, words)</span>:</span></span><br><span class="line">    n = len(words)</span><br><span class="line">    <span class="comment"># que = deque([(words[0], 1)])</span></span><br><span class="line">    seen = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(words)):</span><br><span class="line">        word = words[i]</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(word)):</span><br><span class="line">            <span class="comment"># prev_state = word[:i] + word[i+1:]        # BUGGG!</span></span><br><span class="line">            prev_state = word[:j] + word[j+<span class="number">1</span>:]        <span class="comment"># FIX</span></span><br><span class="line">            <span class="comment"># print(word, prev_state)</span></span><br><span class="line">            <span class="keyword">if</span> prev_state <span class="keyword">in</span> seen:</span><br><span class="line">                <span class="comment"># seen[word] = seen[prev_state] + 1     # BUGGG!</span></span><br><span class="line">                seen[word] = max(seen.get(word, <span class="number">0</span>), seen[prev_state] + <span class="number">1</span>)     <span class="comment"># FIX</span></span><br><span class="line">        <span class="keyword">if</span> word <span class="keyword">not</span> <span class="keyword">in</span> seen:</span><br><span class="line">            seen[word] = <span class="number">1</span></span><br><span class="line">    <span class="comment"># print(seen)</span></span><br><span class="line">    <span class="keyword">return</span> max(seen.values())</span><br></pre></td></tr></table></figure>





<h2 id="Weird-DP"><a href="#Weird-DP" class="headerlink" title="Weird DP"></a>Weird DP</h2><h3 id="552-Student-Attendance-Record-II"><a href="#552-Student-Attendance-Record-II" class="headerlink" title="552. Student Attendance Record II"></a>552. Student Attendance Record II</h3><h2 id="Tree-Parent-Path"><a href="#Tree-Parent-Path" class="headerlink" title="Tree Parent Path"></a>Tree Parent Path</h2><h3 id="2385-Amount-of-Time-for-Binary-Tree-to-Be-Infected"><a href="#2385-Amount-of-Time-for-Binary-Tree-to-Be-Infected" class="headerlink" title="2385. Amount of Time for Binary Tree to Be Infected"></a>2385. Amount of Time for Binary Tree to Be Infected</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">amountOfTime</span><span class="params">(self, root: Optional[TreeNode], start: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">return</span> self.my_20220821(root, start)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20220821</span><span class="params">(self, root, start)</span>:</span></span><br><span class="line">        parents = &#123;root:<span class="literal">None</span>&#125;</span><br><span class="line">        ret = [<span class="literal">None</span>]</span><br><span class="line">        self.buildParentAndGetStart(root, start, parents, ret)</span><br><span class="line">        start_node = ret[<span class="number">0</span>]</span><br><span class="line">        <span class="comment"># print(start_node.val)</span></span><br><span class="line">        </span><br><span class="line">        que = deque([start_node])</span><br><span class="line">        visited = set([start_node])</span><br><span class="line">        <span class="comment"># visited[start_node]</span></span><br><span class="line">        steps = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> que:</span><br><span class="line">            size = len(que)</span><br><span class="line">            next_que = deque([])</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> range(size):</span><br><span class="line">                now = que.popleft()</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># 1 path for children</span></span><br><span class="line">                <span class="keyword">for</span> child <span class="keyword">in</span> [now.left, now.right]:</span><br><span class="line">                    <span class="comment"># if child: # BUG!</span></span><br><span class="line">                    <span class="keyword">if</span> child <span class="keyword">and</span> child <span class="keyword">not</span> <span class="keyword">in</span> visited: <span class="comment"># FIX!</span></span><br><span class="line">                        next_que.append(child)</span><br><span class="line">                        visited.add(child)</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># 2 path for parent</span></span><br><span class="line">                par = parents[now]</span><br><span class="line">                <span class="keyword">if</span> par <span class="keyword">and</span> par <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">                    next_que.append(par)</span><br><span class="line">                    visited.add(par)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># [print(x.val) for x in next_que]   #for debug</span></span><br><span class="line">            que = next_que</span><br><span class="line">            steps += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> steps - <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">buildParentAndGetStart</span><span class="params">(self, root, start, parents, ret)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">            <span class="keyword">return</span> </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> root.val == start:</span><br><span class="line">            ret[<span class="number">0</span>] = root</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> child <span class="keyword">in</span> [root.left, root.right]:</span><br><span class="line">            <span class="keyword">if</span> child:</span><br><span class="line">                parents[child] = root</span><br><span class="line">                self.buildParentAndGetStart(child, start, parents, ret)</span><br></pre></td></tr></table></figure>





<h2 id="BT-or-Special-Graph"><a href="#BT-or-Special-Graph" class="headerlink" title="BT or Special Graph"></a>BT or Special Graph</h2><h3 id="2242-Maximum-Score-of-a-Node-Sequence"><a href="#2242-Maximum-Score-of-a-Node-Sequence" class="headerlink" title="2242. Maximum Score of a Node Sequence"></a>2242. Maximum Score of a Node Sequence</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># import heapq</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maximumScore</span><span class="params">(self, scores: List[int], edges: List[List[int]])</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># return self.my_TLE(scores, edges)</span></span><br><span class="line">        <span class="keyword">return</span> self.my_20220830(scores, edges)  <span class="comment"># AC!</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20220830</span><span class="params">(self, scores, edges)</span>:</span></span><br><span class="line">        graph = &#123;&#125;</span><br><span class="line">        n = len(scores)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            graph[i] = []</span><br><span class="line">        <span class="keyword">for</span> a, b <span class="keyword">in</span> edges:</span><br><span class="line">            graph[a].append((scores[b], b))  <span class="comment"># <span class="doctag">TODO:</span> optimize with heap!</span></span><br><span class="line">            graph[b].append((scores[a], a))</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            graph[i].sort(reverse=<span class="literal">True</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># res = 0   # BAD</span></span><br><span class="line">        res = <span class="number">-1</span>   <span class="comment"># FIX</span></span><br><span class="line">        <span class="keyword">for</span> u, v <span class="keyword">in</span> edges:</span><br><span class="line">            <span class="comment"># for u_nbr_score, u_nbr in graph[u]:   # TLE!</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(min(<span class="number">3</span>, len(graph[u]))):  <span class="comment"># FIX!!!</span></span><br><span class="line">                u_nbr_score, u_nbr = graph[u][i]</span><br><span class="line">                <span class="comment"># for v_nbr_score, v_nbr in graph[v]:   # TLE!</span></span><br><span class="line">                <span class="keyword">for</span> j <span class="keyword">in</span> range(min(<span class="number">3</span>, len(graph[v]))):  <span class="comment"># FIX!!!</span></span><br><span class="line">                    v_nbr_score, v_nbr = graph[v][j]</span><br><span class="line">                    <span class="keyword">if</span> v != u_nbr <span class="keyword">and</span> u != v_nbr <span class="keyword">and</span> u_nbr != v_nbr:</span><br><span class="line">                        <span class="comment"># print(u, v, u_nbr, v_nbr)</span></span><br><span class="line">                        now = scores[u] + scores[v] + scores[u_nbr] + scores[v_nbr]</span><br><span class="line">                        res = max(now, res)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_TLE</span><span class="params">(self, scores, edges)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        1 build graph</span></span><br><span class="line"><span class="string">        2 start from every node with for loop, then apply know-down strategy</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        graph = &#123;&#125;</span><br><span class="line">        n = len(scores)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            graph[i] = []</span><br><span class="line">        <span class="keyword">for</span> a, b <span class="keyword">in</span> edges:</span><br><span class="line">            graph[a].append(b)</span><br><span class="line">            graph[b].append(a)</span><br><span class="line">        </span><br><span class="line">        n = len(scores)</span><br><span class="line">        ans = <span class="number">-1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            now = [<span class="number">-1</span>]</span><br><span class="line">            <span class="comment"># self.dfs(graph, i, [], now)   # BUG!, should still need visited</span></span><br><span class="line">            <span class="comment"># self.dfs(graph, scores, i, set(), now)    # WRONG! bottom-up not able to solve this；因為雖然可以把分數往上傳，但是傳上去時，無法知道過來的是不是長度為4這時才傳上來的</span></span><br><span class="line">            <span class="comment"># print(i, now)</span></span><br><span class="line">            self.bt(graph, scores, i, set([i]), scores[i], now)</span><br><span class="line">            ans = max(ans, now[<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>



<h2 id="Bottom-up-FAILED"><a href="#Bottom-up-FAILED" class="headerlink" title="Bottom-up FAILED"></a>Bottom-up FAILED</h2><h3 id="2242-Maximum-Score-of-a-Node-Sequence-↑"><a href="#2242-Maximum-Score-of-a-Node-Sequence-↑" class="headerlink" title="2242. Maximum Score of a Node Sequence ↑"></a>2242. Maximum Score of a Node Sequence ↑</h3><h2 id="Servers"><a href="#Servers" class="headerlink" title="Servers"></a>Servers</h2><h3 id="1606-Find-Servers-That-Handled-Most-Number-of-Requests"><a href="#1606-Find-Servers-That-Handled-Most-Number-of-Requests" class="headerlink" title="1606. Find Servers That Handled Most Number of Requests"></a>1606. Find Servers That Handled Most Number of Requests</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment"># return self.sol_ye15(k, arrival, load)    # SAME as Mine, which helps me to debug</span></span><br><span class="line">    <span class="keyword">return</span> self.my_20220830(k, arrival, load)   <span class="comment"># AC</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_20220830</span><span class="params">(self, k, arrival, load)</span>:</span></span><br><span class="line">    n = len(arrival)    </span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ith request --&gt; record it's ending time</span></span><br><span class="line">    <span class="comment"># time = 1  # no need</span></span><br><span class="line">    idles = SortedList([i <span class="keyword">for</span> i <span class="keyword">in</span> range(k)])   <span class="comment"># idxes</span></span><br><span class="line">    busy = []   <span class="comment"># min_heap; (fin_time, idx)</span></span><br><span class="line">    req = [<span class="number">0</span>] * k</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">        <span class="keyword">while</span> busy <span class="keyword">and</span> busy[<span class="number">0</span>][<span class="number">0</span>] &lt;= arrival[i]:</span><br><span class="line">            _, idx = heapq.heappop(busy)</span><br><span class="line">            <span class="comment"># heapq.heappush(idles, idx)    # BUG</span></span><br><span class="line">            idles.add(idx)  <span class="comment"># FIX!</span></span><br><span class="line">        <span class="comment"># print(busy, idles)</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> idles:</span><br><span class="line">            <span class="keyword">continue</span>    </span><br><span class="line">        <span class="comment"># if idles:</span></span><br><span class="line">        idx = idles.bisect_left(i % k) <span class="comment">#% len(idles)</span></span><br><span class="line">        <span class="comment"># if idx == n:  # BUG!!</span></span><br><span class="line">        <span class="keyword">if</span> idx == len(idles):</span><br><span class="line">            idx = <span class="number">0</span></span><br><span class="line">        <span class="string">""" CRITICAL BUG: idx 跟 i都不是真正在用的server；　在用的是 idles[idx]!!!</span></span><br><span class="line"><span class="string">        # heapq.heappush(busy, (arrival[i] + load[i], i))   # BUG</span></span><br><span class="line"><span class="string">        # heapq.heappush(busy, (arrival[i] + load[i], idx))   # STILL BUG!</span></span><br><span class="line"><span class="string">        # idles.remove(idles[idx])    # CRITICAL!</span></span><br><span class="line"><span class="string">        # req[idx] += 1 # BUGG!</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="string">""" FIX below! """</span></span><br><span class="line">        server = idles[idx]</span><br><span class="line">        heapq.heappush(busy, (arrival[i] + load[i], server))   <span class="comment"># FIX</span></span><br><span class="line">        req[server] += <span class="number">1</span> <span class="comment"># FIXX!</span></span><br><span class="line">        </span><br><span class="line">        idles.pop(idx)    <span class="comment"># CRITICAL!</span></span><br><span class="line">    <span class="comment"># print(req)</span></span><br><span class="line">    max_count = max(req)</span><br><span class="line">    <span class="comment"># print(max_count)</span></span><br><span class="line">    <span class="keyword">return</span> [i <span class="keyword">for</span> i <span class="keyword">in</span> range(k) <span class="keyword">if</span> max_count == req[i]]</span><br></pre></td></tr></table></figure>



<h2 id="Merge-2-Sorted-Intervals"><a href="#Merge-2-Sorted-Intervals" class="headerlink" title="Merge 2 Sorted Intervals"></a>Merge 2 Sorted Intervals</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    @param list1: one of the given list</span></span><br><span class="line"><span class="string">    @param list2: another list</span></span><br><span class="line"><span class="string">    @return: the new sorted list of interval</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mergeTwoInterval</span><span class="params">(self, list1, list2)</span>:</span></span><br><span class="line">        <span class="comment"># write your code here</span></span><br><span class="line">        result = []</span><br><span class="line">        <span class="keyword">if</span> list1 <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">or</span> list2 <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line">        <span class="keyword">if</span> len(list1) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> list2</span><br><span class="line">        <span class="keyword">if</span> len(list2) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> list1</span><br><span class="line">            </span><br><span class="line">        i, j = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; len(list1) <span class="keyword">and</span> j &lt; len(list2):</span><br><span class="line">            <span class="keyword">if</span> list1[i].start &lt;= list2[j].start:</span><br><span class="line">                self.add_to_list(list1[i], result)</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                self.add_to_list(list2[j], result)</span><br><span class="line">                j += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> j &lt; len(list2):</span><br><span class="line">            self.add_to_list(list2[j], result)</span><br><span class="line">            j += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> i &lt; len(list1):</span><br><span class="line">            self.add_to_list(list1[i], result)</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add_to_list</span><span class="params">(self, interval, result)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> len(result) == <span class="number">0</span>:</span><br><span class="line">            result.append(interval)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">            </span><br><span class="line">        <span class="keyword">if</span> interval.start &lt;= result[<span class="number">-1</span>].end:</span><br><span class="line">            result[<span class="number">-1</span>].end = max(result[<span class="number">-1</span>].end, interval.end)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            result.append(interval)</span><br></pre></td></tr></table></figure>



<h2 id="My-Inheritance"><a href="#My-Inheritance" class="headerlink" title="My Inheritance"></a>My Inheritance</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RLEIterator</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, encoding: List[int])</span>:</span></span><br><span class="line">        <span class="comment"># self.obj = RLEIterator_TLE(encoding)</span></span><br><span class="line">        self.obj = RLEIterator_FIX(encoding)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">next</span><span class="params">(self, n: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">return</span> self.obj.next(n)</span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RLEIterator_FIX</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, encoding: List[int])</span>:</span></span><br><span class="line">        self.encoding = encoding</span><br><span class="line">        self.it = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">next</span><span class="params">(self, n: int)</span> -&gt; int:</span></span><br><span class="line">        remaining = n</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(self.it, len(self.encoding), <span class="number">2</span>):</span><br><span class="line">            times, elem = self.encoding[i], self.encoding[i + <span class="number">1</span>]</span><br><span class="line">            <span class="comment"># remaining -= min(times, remaining)</span></span><br><span class="line">            <span class="comment"># if remaining &gt;= times:   # BUGGG</span></span><br><span class="line">            <span class="keyword">if</span> remaining &gt; times:   <span class="comment"># FIX</span></span><br><span class="line">                remaining -= times</span><br><span class="line">                self.encoding[i] = <span class="number">0</span> </span><br><span class="line">                <span class="comment"># return elem</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                self.encoding[i] = times - remaining</span><br><span class="line">                self.it = i</span><br><span class="line">                <span class="keyword">return</span> elem</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        </span><br><span class="line">            </span><br><span class="line">        <span class="comment"># self.idx += n</span></span><br><span class="line">        <span class="comment"># ret = -1</span></span><br><span class="line">        <span class="comment"># if self.idx &lt; len(self.arr):</span></span><br><span class="line">        <span class="comment">#     ret = self.arr[self.idx]</span></span><br><span class="line">        <span class="comment"># return ret</span></span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RLEIterator_TLE</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, encoding: List[int])</span>:</span></span><br><span class="line">        self.arr = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(encoding), <span class="number">2</span>):</span><br><span class="line">            times, elem = encoding[i], encoding[i + <span class="number">1</span>]</span><br><span class="line">            self.arr.extend([elem] * times)</span><br><span class="line">        <span class="comment"># print(self.arr)</span></span><br><span class="line">        self.idx = <span class="number">-1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">next</span><span class="params">(self, n: int)</span> -&gt; int:</span></span><br><span class="line">        self.idx += n</span><br><span class="line">        ret = <span class="number">-1</span></span><br><span class="line">        <span class="keyword">if</span> self.idx &lt; len(self.arr):</span><br><span class="line">            ret = self.arr[self.idx]</span><br><span class="line">        <span class="keyword">return</span> ret</span><br></pre></td></tr></table></figure>



<h2 id="TLE-Hash-solved-by-Rabin-Karp"><a href="#TLE-Hash-solved-by-Rabin-Karp" class="headerlink" title="TLE Hash, solved by Rabin-Karp"></a>TLE Hash, solved by Rabin-Karp</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">differByOne</span><span class="params">(self, dict: List[str])</span> -&gt; bool:</span></span><br><span class="line">        n, m = len(dict), len(dict[<span class="number">0</span>])</span><br><span class="line">        hashes = [<span class="number">0</span>] * n</span><br><span class="line">        MOD = <span class="number">10</span>**<span class="number">11</span> + <span class="number">7</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(m):</span><br><span class="line">                hashes[i] = (<span class="number">26</span> * hashes[i] + (ord(dict[i][j]) - ord(<span class="string">'a'</span>))) % MOD</span><br><span class="line">        </span><br><span class="line">        base = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(m - <span class="number">1</span>, <span class="number">-1</span>, <span class="number">-1</span>):        </span><br><span class="line">            seen = set()</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">                new_h = (hashes[i] - base * (ord(dict[i][j]) - ord(<span class="string">'a'</span>))) % MOD</span><br><span class="line">                <span class="keyword">if</span> new_h <span class="keyword">in</span> seen:</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">                seen.add(new_h)</span><br><span class="line">            base = <span class="number">26</span> * base % MOD</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">      	<span class="comment"># https://leetcode.com/problems/strings-differ-by-one-character/discuss/801825/Python-Clean-set-%2B-string-hashing-solution-from-O(NM2)-to-O(NM)</span></span><br></pre></td></tr></table></figure>



<h2 id="Using-Defaultdict-as-an-Array-alternative"><a href="#Using-Defaultdict-as-an-Array-alternative" class="headerlink" title="Using Defaultdict as an Array alternative"></a>Using Defaultdict as an Array alternative</h2><h3 id="2400-Number-of-Ways-to-Reach-a-Position-After-Exactly-k-Steps"><a href="#2400-Number-of-Ways-to-Reach-a-Position-After-Exactly-k-Steps" class="headerlink" title="2400. Number of Ways to Reach a Position After Exactly k Steps"></a>2400. Number of Ways to Reach a Position After Exactly k Steps</h3><p><em>p.s. compare with Lintcode 1827</em> </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">MOD = <span class="number">10</span> **<span class="number">9</span> + <span class="number">7</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque, defaultdict</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">numberOfWays</span><span class="params">(self, startPos: int, endPos: int, k: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="string">""" </span></span><br><span class="line"><span class="string">        dp[kdx] is a defaultdict --&gt; -10, -9, -1, 0, 1, 2</span></span><br><span class="line"><span class="string">        dp[kdx][j]</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">                    核心就是一个「Pair!」</span></span><br><span class="line"><span class="string">        dp[kdx] --&gt; tuple             (pos, 方案数)  &lt;== 不行！會無法 lookup!</span></span><br><span class="line"><span class="string">                --&gt; defaultdict(int)[pos] --&gt; 方案数</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        dp = &#123;&#125; <span class="comment"># </span></span><br><span class="line">        FAR = startPos + k</span><br><span class="line">        FAR_NEG = startPos - k</span><br><span class="line">        <span class="keyword">for</span> kdx <span class="keyword">in</span> range(k + <span class="number">1</span>):</span><br><span class="line">            dp[kdx] = defaultdict(int)  <span class="comment"># pos --&gt; to 方案數</span></span><br><span class="line">        dp[<span class="number">0</span>][startPos] = <span class="number">1</span> <span class="comment"># dp i j: with i steps out of k steps, at j position</span></span><br><span class="line">        <span class="keyword">for</span> k_id <span class="keyword">in</span> range(<span class="number">1</span>, k + <span class="number">1</span>):</span><br><span class="line">            <span class="comment"># for j in range(FAR_NEG, FAR+1):</span></span><br><span class="line">            start = startPos - k_id</span><br><span class="line">            end = startPos + k_id</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(start, end + <span class="number">1</span>):</span><br><span class="line">                <span class="keyword">if</span> j + <span class="number">1</span> &lt;= FAR:</span><br><span class="line">                    dp[k_id][j] += dp[k_id - <span class="number">1</span>][j + <span class="number">1</span>]</span><br><span class="line">                    dp[k_id][j] %= MOD</span><br><span class="line">                <span class="keyword">if</span> j - <span class="number">1</span> &gt;= FAR_NEG:</span><br><span class="line">                    dp[k_id][j] += dp[k_id - <span class="number">1</span>][j - <span class="number">1</span>]</span><br><span class="line">                    dp[k_id][j] %= MOD</span><br><span class="line">        <span class="keyword">return</span> dp[k][endPos] % MOD</span><br></pre></td></tr></table></figure>



<h2 id="Iterative-SegTree-to-replace-MonoDeque"><a href="#Iterative-SegTree-to-replace-MonoDeque" class="headerlink" title="Iterative SegTree to replace MonoDeque"></a>Iterative SegTree to replace MonoDeque</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SEG</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        self.tree = [<span class="number">0</span>] * n * <span class="number">2</span></span><br><span class="line">        self.n = n</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">build</span><span class="params">(self, arr)</span>:</span></span><br><span class="line">        <span class="comment"># for i in range(self.n-1, -1, -1): # BUG</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(self.n, len(self.tree)):</span><br><span class="line">            self.tree[i] = arr[i - self.n]</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(self.n<span class="number">-1</span>, <span class="number">0</span>, <span class="number">-1</span>): <span class="comment"># FIX</span></span><br><span class="line">            self.tree[i] = max(self.tree[i &lt;&lt; <span class="number">1</span>], self.tree[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>])</span><br><span class="line">            </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(self, left, right)</span>:</span></span><br><span class="line">        l, r = left + self.n, right + self.n</span><br><span class="line">        ret_max = -sys.maxsize</span><br><span class="line">        <span class="keyword">while</span> l &lt; r:</span><br><span class="line">            <span class="keyword">if</span> l &amp; <span class="number">1</span> == <span class="number">1</span>:</span><br><span class="line">                ret_max = max(ret_max, self.tree[l])</span><br><span class="line">                <span class="comment"># l ++ 1    # TYPO</span></span><br><span class="line">                l += <span class="number">1</span></span><br><span class="line">            l &gt;&gt;= <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> r &amp; <span class="number">1</span> == <span class="number">1</span>:</span><br><span class="line">                r -= <span class="number">1</span></span><br><span class="line">                ret_max = max(ret_max, self.tree[r])</span><br><span class="line">            r &gt;&gt;= <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> ret_max</span><br><span class="line">       </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, idx, val)</span>:</span></span><br><span class="line">        i = idx + self.n</span><br><span class="line">        self.tree[i] = val</span><br><span class="line">        <span class="comment"># i = idx   # BUGG!</span></span><br><span class="line">        <span class="comment"># while i &gt; 0:  # BUG</span></span><br><span class="line">        <span class="keyword">while</span> i &gt; <span class="number">1</span>:</span><br><span class="line">            i &gt;&gt;= <span class="number">1</span></span><br><span class="line">            self.tree[i] = max(self.tree[i &lt;&lt; <span class="number">1</span>], self.tree[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>])</span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxSlidingWindow</span><span class="params">(self, nums: List[int], k: int)</span> -&gt; List[int]:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> nums:</span><br><span class="line">            <span class="keyword">return</span> nums</span><br><span class="line">        <span class="keyword">if</span> k == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> nums</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">return</span> self.my_20220921(nums, k)    <span class="comment"># AC with SegTree!  </span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20220921</span><span class="params">(self, nums_orig, k)</span>:</span></span><br><span class="line">        <span class="comment"># print(len(nums_orig), k)</span></span><br><span class="line">        debug = <span class="literal">False</span>	<span class="comment"># set to True also AC!</span></span><br><span class="line">        <span class="keyword">if</span> debug:</span><br><span class="line">            a = len(nums_orig)</span><br><span class="line">            power = math.ceil(math.log(a, <span class="number">2</span>))</span><br><span class="line">            n = <span class="number">1</span> &lt;&lt; power</span><br><span class="line">            nums = nums_orig + [<span class="number">0</span>] * (n - len(nums_orig))</span><br><span class="line">            <span class="comment"># print(nums, power, n, n - len(nums))</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            n = len(nums_orig)</span><br><span class="line">            nums = nums_orig</span><br><span class="line"></span><br><span class="line">        seg = SEG(n)</span><br><span class="line">        <span class="comment"># for i in range(n):    # TLE</span></span><br><span class="line">        <span class="comment">#     seg.update(i, nums[i])</span></span><br><span class="line">        <span class="comment"># print(f'seg tree: &#123;seg.tree&#125;')</span></span><br><span class="line">            </span><br><span class="line">        seg.build(nums)         <span class="comment"># FIX, optimize the build speed</span></span><br><span class="line"></span><br><span class="line">        res = []</span><br><span class="line">        end = min(len(nums_orig), n)</span><br><span class="line">        <span class="keyword">for</span> r <span class="keyword">in</span> range(k, end+<span class="number">1</span>):   <span class="comment"># end: open end</span></span><br><span class="line">            now = seg.query(r-k, r)</span><br><span class="line">            res.append(now)</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>



<h2 id="可撤銷-DSU"><a href="#可撤銷-DSU" class="headerlink" title="可撤銷 DSU"></a>可撤銷 DSU</h2><h3 id="2092-Find-All-People-With-Secret"><a href="#2092-Find-All-People-With-Secret" class="headerlink" title="2092. Find All People With Secret"></a>2092. Find All People With Secret</h3><p>ref: <a href="https://developer.aliyun.com/article/848276" target="_blank" rel="noopener">https://developer.aliyun.com/article/848276</a></p>
<p>ref: <a href="https://ac-mikoto.top/2021/12/16/%E5%8F%AF%E6%92%A4%E9%94%80%E5%B9%B6%E6%9F%A5%E9%9B%86/" target="_blank" rel="noopener">https://ac-mikoto.top/2021/12/16/%E5%8F%AF%E6%92%A4%E9%94%80%E5%B9%B6%E6%9F%A5%E9%9B%86/</a></p>
<h2 id="Max-E"><a href="#Max-E" class="headerlink" title="Max E"></a>Max E</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">帶權無向圖，在「拿掉某個節點的情況後」，求圖的邊的最大權重值為何？</span><br><span class="line"></span><br><span class="line">輸入是 </span><br><span class="line">N nodes</span><br><span class="line">(node1, node2, weight)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">  	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, edges)</span>:</span></span><br><span class="line">      	<span class="comment"># build graph</span></span><br><span class="line">      	<span class="keyword">for</span> </span><br><span class="line">      	  graph = &#123;&#125;        </span><br><span class="line">        <span class="comment"># query 時就是 edges &lt;---- </span></span><br><span class="line">        cache = []</span><br><span class="line">        self.findMax()</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        edges = sorted(edges) by weight, a, b</span><br><span class="line">        		[(<span class="number">8</span>, <span class="number">0</span>, <span class="number">1</span>)]</span><br><span class="line">          		[(<span class="number">8</span>, <span class="number">0</span>, <span class="number">2</span>)]</span><br><span class="line">        		↓	</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findMax</span><span class="params">(self, node)</span>:</span></span><br><span class="line">		self.graph </span><br><span class="line">        For I <span class="keyword">in</span> range(N):</span><br><span class="line">        <span class="comment"># graph[a].append((b, w))</span></span><br><span class="line"></span><br><span class="line">        For I inr ange(N):</span><br><span class="line">        	<span class="keyword">if</span> i != node</span><br><span class="line">            For nbr <span class="keyword">in</span> graph[i]:</span><br><span class="line">              <span class="keyword">if</span> nbr != node</span><br><span class="line">              	<span class="comment"># knock-down strategy        </span></span><br><span class="line">        O(V + E)</span><br><span class="line">        </span><br><span class="line">        <span class="number">2</span>nd version, <span class="keyword">with</span> sorted edges</span><br><span class="line">        </span><br><span class="line">        ret = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> w, a, b <span class="keyword">in</span> edges:</span><br><span class="line">          <span class="keyword">if</span> a != node <span class="keyword">and</span> b!= node:</span><br><span class="line">            ret = w</span><br><span class="line">           	<span class="keyword">break</span></span><br><span class="line">      	<span class="keyword">return</span> ret</span><br><span class="line">      	O(E)  	--&gt;	O(LgE)</span><br><span class="line">        		--&gt; O(V)</span><br><span class="line">        </span><br><span class="line">        <span class="number">3</span> cache</span><br><span class="line">        <span class="keyword">return</span> cache[]</span><br><span class="line">            </span><br><span class="line">Follow-up</span><br></pre></td></tr></table></figure>

<p><a href="https://codeshare.io/6pKd1Y" target="_blank" rel="noopener">https://codeshare.io/6pKd1Y</a></p>
<h2 id="Bisect-in-2D"><a href="#Bisect-in-2D" class="headerlink" title="Bisect in 2D"></a>Bisect in 2D</h2><h3 id="1272-Remove-Interval"><a href="#1272-Remove-Interval" class="headerlink" title="1272. Remove Interval"></a>1272. Remove Interval</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bisect <span class="keyword">import</span> bisect_right</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">removeInterval</span><span class="params">(self, intervals: List[List[int]], toBeRemoved: List[int])</span> -&gt; List[List[int]]:</span></span><br><span class="line">        </span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        s, e = toBeRemoved</span></span><br><span class="line"><span class="string">        1 找最靠近的interval whose endtime &gt; s</span></span><br><span class="line"><span class="string">        2 找最靠近的interval whose starttime &lt; e</span></span><br><span class="line"><span class="string">        3 上述　1、２的閉區間就都是要刪掉的！</span></span><br><span class="line"><span class="string">        O   O   O   X   X   X   O   O</span></span><br><span class="line"><span class="string">                    left        right</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        s, e = toBeRemoved</span><br><span class="line">        left = bisect_right(intervals, s,  key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>])  <span class="comment"># </span></span><br><span class="line">        right = bisect_right(intervals, e,  key=<span class="keyword">lambda</span> x: x[<span class="number">0</span>])</span><br><span class="line">        <span class="comment"># print(left, right)</span></span><br><span class="line">        n = len(intervals)</span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">if</span> i &lt; left <span class="keyword">or</span> i &gt;= right:  <span class="comment"># no overlap!</span></span><br><span class="line">                res.append(intervals[i])</span><br><span class="line">            <span class="keyword">else</span>:   <span class="comment"># has overlap</span></span><br><span class="line">                <span class="keyword">if</span> intervals[i][<span class="number">0</span>] &lt; s:</span><br><span class="line">                    res.append([intervals[i][<span class="number">0</span>], s])</span><br><span class="line">                <span class="keyword">if</span> intervals[i][<span class="number">1</span>] &gt; e:</span><br><span class="line">                    res.append([e, intervals[i][<span class="number">1</span>]])</span><br><span class="line">                <span class="comment"># res.append()</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>





<h2 id="Skyline"><a href="#Skyline" class="headerlink" title="Skyline"></a>Skyline</h2><p>心法：用array幫助取得「前個時間點」的 aggregate 的結果！而不是跟後面的步驟絞在一起做</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getSkyline</span><span class="params">(self, buildings: List[List[int]])</span> -&gt; List[List[int]]:</span>        </span><br><span class="line">        <span class="comment"># return self.my_20221002(buildings)    # AC!</span></span><br><span class="line">        <span class="comment"># return self.my_20221003_BUG(buildings)  # BUG for Case2, 切邊會多紀錄</span></span><br><span class="line">        <span class="keyword">return</span> self.my_20221003_FIX(buildings)  <span class="comment"># AC!</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20221003_FIX</span><span class="params">(self, buildings)</span>:</span></span><br><span class="line">        n = len(buildings)</span><br><span class="line">        diffs = SortedDict([])</span><br><span class="line">        <span class="keyword">for</span> l, r, h <span class="keyword">in</span> buildings:</span><br><span class="line">            <span class="keyword">if</span> l <span class="keyword">not</span> <span class="keyword">in</span> diffs:</span><br><span class="line">                diffs[l] = []</span><br><span class="line">            <span class="keyword">if</span> r <span class="keyword">not</span> <span class="keyword">in</span> diffs:</span><br><span class="line">                diffs[r] = []</span><br><span class="line">            diffs[l].append((h, <span class="number">1</span>))</span><br><span class="line">            diffs[r].append((h, <span class="number">-1</span>))</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># print(diffs)</span></span><br><span class="line">        <span class="comment"># arr = []</span></span><br><span class="line">        ticks = []</span><br><span class="line">        rolling_max = []</span><br><span class="line">        hs = SortedList([<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">for</span> time, items <span class="keyword">in</span> diffs.items():</span><br><span class="line">            <span class="keyword">for</span> h, status <span class="keyword">in</span> items:</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> rolling_max <span class="keyword">or</span> status == <span class="number">1</span>:</span><br><span class="line">                    hs.add(h)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    hs.remove(h)</span><br><span class="line"></span><br><span class="line">            ticks.append(time)</span><br><span class="line">            rolling_max.append(hs[<span class="number">-1</span>])</span><br><span class="line">        <span class="comment"># print(ticks)</span></span><br><span class="line">        <span class="comment"># print(rolling_max)</span></span><br><span class="line">        </span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(ticks)):</span><br><span class="line">            time, high = ticks[i], rolling_max[i]</span><br><span class="line">            <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">                res.append([time, high])</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> high != rolling_max[i - <span class="number">1</span>]:</span><br><span class="line">                    res.append([time, high])</span><br><span class="line">        <span class="keyword">return</span> res    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20221003_BUG</span><span class="params">(self, buildings)</span>:</span></span><br><span class="line">        n = len(buildings)</span><br><span class="line">        diffs = SortedDict([])</span><br><span class="line">        <span class="keyword">for</span> l, r, h <span class="keyword">in</span> buildings:</span><br><span class="line">            <span class="keyword">if</span> l <span class="keyword">not</span> <span class="keyword">in</span> diffs:</span><br><span class="line">                diffs[l] = []</span><br><span class="line">            <span class="keyword">if</span> r <span class="keyword">not</span> <span class="keyword">in</span> diffs:</span><br><span class="line">                diffs[r] = []</span><br><span class="line">            diffs[l].append((h, <span class="number">1</span>))</span><br><span class="line">            diffs[r].append((h, <span class="number">-1</span>))</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># print(diffs)</span></span><br><span class="line">        <span class="comment"># arr = []</span></span><br><span class="line">        ticks = []</span><br><span class="line">        rolling_max = []</span><br><span class="line">        hs = SortedList([<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">for</span> time, items <span class="keyword">in</span> diffs.items():</span><br><span class="line">            <span class="comment"># arr.append((time, *items))</span></span><br><span class="line">            <span class="keyword">for</span> h, status <span class="keyword">in</span> items:</span><br><span class="line">                ticks.append(time)</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> rolling_max:</span><br><span class="line">                    hs.add(h)</span><br><span class="line">                    rolling_max.append(h)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">if</span> status == <span class="number">1</span>:</span><br><span class="line">                        hs.add(h)</span><br><span class="line">                        rolling_max.append(max(rolling_max[<span class="number">-1</span>], h))</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        hs.remove(h)</span><br><span class="line">                        <span class="comment"># rolling_max.append(rolling_max[-1])   # BUG</span></span><br><span class="line">                        rolling_max.append(hs[<span class="number">-1</span>])   <span class="comment"># FIX</span></span><br><span class="line">                        <span class="comment"># rolling_max.append()</span></span><br><span class="line">        <span class="comment"># print(ticks)</span></span><br><span class="line">        <span class="comment"># print(rolling_max)</span></span><br><span class="line">        </span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(ticks)):</span><br><span class="line">            time, high = ticks[i], rolling_max[i]</span><br><span class="line">            <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">                res.append([time, high])</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> high != rolling_max[i - <span class="number">1</span>]:</span><br><span class="line">                    res.append([time, high])</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        BUG for Ex2 -- 切邊會多紀錄！</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        </span><br><span class="line">                </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20221002</span><span class="params">(self, buildings)</span>:</span></span><br><span class="line">        n = len(buildings)</span><br><span class="line">        diffs = SortedDict()    <span class="comment"># time -&gt; heights</span></span><br><span class="line">        <span class="keyword">for</span> l, r, h <span class="keyword">in</span> buildings:</span><br><span class="line">            <span class="keyword">if</span> l <span class="keyword">not</span> <span class="keyword">in</span> diffs:</span><br><span class="line">                <span class="comment"># diffs[l] = SortedList()</span></span><br><span class="line">                diffs[l] = []</span><br><span class="line">            <span class="keyword">if</span> r <span class="keyword">not</span> <span class="keyword">in</span> diffs:</span><br><span class="line">                <span class="comment"># diffs[r] = SortedList()</span></span><br><span class="line">                diffs[r] = []</span><br><span class="line">            <span class="comment"># diffs[l].add(-h)   # 進來時, 要先考慮高的；出去時，先考慮低的</span></span><br><span class="line">            <span class="comment"># diffs[r].add(h)</span></span><br><span class="line">            diffs[l].append(-h)   <span class="comment"># 進來時, 要先考慮高的；出去時，先考慮低的</span></span><br><span class="line">            diffs[r].append(h)</span><br><span class="line">            </span><br><span class="line">        <span class="comment"># print(diffs)</span></span><br><span class="line">        bs = SortedList([<span class="number">0</span>])</span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">for</span> time, heights <span class="keyword">in</span> diffs.items():</span><br><span class="line">            prev_high = bs[<span class="number">-1</span>]</span><br><span class="line">            <span class="comment"># while bs[-1][0] &lt; </span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span> h <span class="keyword">in</span> heights:       <span class="comment"># h 的iteration不需要有序！因為是把這個時間的都全走完！</span></span><br><span class="line">                <span class="comment"># print(time, h)</span></span><br><span class="line">                <span class="keyword">if</span> h &lt; <span class="number">0</span>:</span><br><span class="line">                    <span class="comment"># bs.add((h, time))</span></span><br><span class="line">                    <span class="comment"># bs.add(h) # BUGGG!</span></span><br><span class="line">                    bs.add(-h) <span class="comment"># FIX</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    bs.remove(h)</span><br><span class="line">            <span class="comment"># print(prev_high, bs)</span></span><br><span class="line">            <span class="keyword">if</span> bs[<span class="number">-1</span>] != prev_high:</span><br><span class="line">                <span class="comment"># res.append([time, h])     # BUG</span></span><br><span class="line">                res.append([time, bs[<span class="number">-1</span>]])  <span class="comment"># FIX!!</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>





<h2 id="Cyclic-Sort"><a href="#Cyclic-Sort" class="headerlink" title="Cyclic Sort"></a>Cyclic Sort</h2><p><a href="https://leetcode.com/discuss/study-guide/1902662/cyclic-sort-very-important-and-less-known-pattern" target="_blank" rel="noopener">https://leetcode.com/discuss/study-guide/1902662/cyclic-sort-very-important-and-less-known-pattern</a></p>
<h2 id="Comparator"><a href="#Comparator" class="headerlink" title="Comparator"></a>Comparator</h2><h3 id="692-Top-K-Frequent-Words"><a href="#692-Top-K-Frequent-Words" class="headerlink" title="692. Top K Frequent Words"></a>692. Top K Frequent Words</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"></span><br><span class="line"><span class="comment"># heapq.__lt__ = lambda me, other: (me[0] &lt; other[0]) or ((me[0] == other[0]) and (me[1] &gt; other[1]))</span></span><br><span class="line"><span class="comment"># heapq.__lt__ = lambda me, other: me[1] &gt; other[1]     # 要定義的地方是「類」！！！！</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pair</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, freq, word)</span>:</span></span><br><span class="line">        self.freq, self.word = freq, word</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__lt__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.freq &lt; other.freq <span class="keyword">or</span> self.freq == other.freq <span class="keyword">and</span> self.word &gt; other.word</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">topKFrequent</span><span class="params">(self, words: List[str], k: int)</span> -&gt; List[str]:</span></span><br><span class="line">        counter = Counter(words)</span><br><span class="line">        heap = []</span><br><span class="line">        <span class="keyword">for</span> word, freq <span class="keyword">in</span> counter.items():</span><br><span class="line">            heapq.heappush(heap, Pair(freq, word))  <span class="comment"># freq: small to large; word: large to small</span></span><br><span class="line">            <span class="comment"># heapq.heappush(heap, ())</span></span><br><span class="line">            <span class="keyword">if</span> len(heap) &gt; k:</span><br><span class="line">                heapq.heappop(heap)</span><br><span class="line">        <span class="comment"># print(heap)</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> heap:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        ans = [<span class="string">''</span>] * k</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(k - <span class="number">1</span>, <span class="number">-1</span>, <span class="number">-1</span>):</span><br><span class="line">            <span class="comment"># freq, word = heapq.heappop(heap)</span></span><br><span class="line">            pair = heapq.heappop(heap)</span><br><span class="line">            <span class="comment"># print(freq, word)</span></span><br><span class="line">            <span class="comment"># freq = heapq.heappop(heap)</span></span><br><span class="line">            ans[i] = pair.word</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>





<h2 id="Bit-OPs"><a href="#Bit-OPs" class="headerlink" title="Bit OPs"></a>Bit OPs</h2><h3 id="1239-Maximum-Length-of-a-Concatenated-String-with-Unique-Characters"><a href="#1239-Maximum-Length-of-a-Concatenated-String-with-Unique-Characters" class="headerlink" title="1239. Maximum Length of a Concatenated String with Unique Characters"></a>1239. Maximum Length of a Concatenated String with Unique Characters</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxLength</span><span class="params">(self, arr: List[str])</span> -&gt; int:</span></span><br><span class="line">        arr_masks = []</span><br><span class="line">        <span class="keyword">for</span> s <span class="keyword">in</span> arr:</span><br><span class="line">            mask = <span class="number">0</span></span><br><span class="line">            uniq = <span class="literal">True</span></span><br><span class="line">            <span class="keyword">for</span> c <span class="keyword">in</span> s:</span><br><span class="line">                shift = ord(c) - ord(<span class="string">'a'</span>)</span><br><span class="line">                <span class="keyword">if</span> (<span class="number">1</span> &lt;&lt; shift) &amp; mask == <span class="number">0</span>:</span><br><span class="line">                    mask |= (<span class="number">1</span> &lt;&lt; shift)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    uniq = <span class="literal">False</span></span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">if</span> uniq:</span><br><span class="line">                arr_masks.append(mask)</span><br><span class="line">        <span class="comment"># print(list(map(lambda x: format(x, '032b'), arr_masks)))</span></span><br><span class="line">        </span><br><span class="line">        res = [<span class="number">0</span>]</span><br><span class="line">        mask = <span class="number">0</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">dfs</span><span class="params">(idx, mask, item)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> idx == len(arr_masks):</span><br><span class="line">                <span class="comment"># print(mask)</span></span><br><span class="line">                res[<span class="number">0</span>] = max(mask.bit_count(), res[<span class="number">0</span>])</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> arr_masks[idx] &amp; mask == <span class="number">0</span>:</span><br><span class="line">                <span class="comment"># dfs(idx + 1, arr_masks[idx] &amp; mask, item + [idx])   # TAKE BUGGG!</span></span><br><span class="line">                dfs(idx + <span class="number">1</span>, arr_masks[idx] | mask, item + [idx])   <span class="comment"># TAKE  FIXX!</span></span><br><span class="line">            dfs(idx + <span class="number">1</span>, mask, item)               <span class="comment"># No TAKE</span></span><br><span class="line">                </span><br><span class="line">        dfs(<span class="number">0</span>, <span class="number">0</span>, [])</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> res[<span class="number">0</span>]</span><br><span class="line">            </span><br><span class="line">                </span><br><span class="line">        <span class="string">""" ========================= """</span></span><br><span class="line">        n = len(arr)        <span class="comment"># ALSO AC, ref to lee215</span></span><br><span class="line">        <span class="comment"># res = set([])</span></span><br><span class="line">        <span class="comment"># dp = [set(arr[0])]</span></span><br><span class="line">        dp = [set([])]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            s = arr[i]</span><br><span class="line">            set_s = set(s)</span><br><span class="line">            <span class="keyword">if</span> len(s) != len(set_s):</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">for</span> item <span class="keyword">in</span> dp:</span><br><span class="line">                <span class="keyword">if</span> set_s &amp; item:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                dp.append(item | set_s) <span class="comment"># FIXXX!</span></span><br><span class="line">                <span class="comment"># item |= set_s # BUGGG!</span></span><br><span class="line">            <span class="comment"># dp.append(set_s)  # BUGG</span></span><br><span class="line">        <span class="comment"># print(dp)</span></span><br><span class="line">        <span class="keyword">return</span> max(len(item) <span class="keyword">for</span> item <span class="keyword">in</span> dp)</span><br></pre></td></tr></table></figure>



<h2 id="等差-Seq-DP"><a href="#等差-Seq-DP" class="headerlink" title="等差 Seq. DP"></a>等差 Seq. DP</h2><h3 id="446-Arighmetic-Slices-II-Subsequence"><a href="#446-Arighmetic-Slices-II-Subsequence" class="headerlink" title="446. Arighmetic Slices II - Subsequence"></a>446. Arighmetic Slices II - Subsequence</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">numberOfArithmeticSlices</span><span class="params">(self, nums: List[int])</span> -&gt; int:</span></span><br><span class="line">        n = len(nums)</span><br><span class="line">        dp = [[<span class="number">0</span>] * n <span class="keyword">for</span> _ <span class="keyword">in</span> range(n)]    <span class="comment"># dp[i][j]:以 i, j两位置的值為結尾的等差數列</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        dp[i][j] : 找所有前面的 k</span></span><br><span class="line"><span class="string">        dp[i][j] = </span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        lookup = defaultdict(list)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            lookup[nums[i]].append(i)</span><br><span class="line">        res = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, n):       <span class="comment"># 尚未解決長度大於 3 的</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>, i):</span><br><span class="line">                <span class="comment"># diff = nums[i] - nums[j]</span></span><br><span class="line">                target = nums[j] - (nums[i] - nums[j])</span><br><span class="line">                <span class="comment"># 要想前找存在的k, 使 diff == nums[j] - nums[k]</span></span><br><span class="line">                <span class="keyword">if</span> target <span class="keyword">in</span> lookup:</span><br><span class="line">                    <span class="keyword">for</span> k <span class="keyword">in</span> lookup[target]:</span><br><span class="line">                        <span class="keyword">if</span> k &lt; j:</span><br><span class="line">                            <span class="comment"># dp[i][j] += 1</span></span><br><span class="line">                            dp[i][j] = dp[i][j] + dp[j][k] + <span class="number">1</span></span><br><span class="line">                            <span class="comment"># dp[i][j] += (dp[j][k] + 1)</span></span><br><span class="line">                    res += dp[i][j]</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>



<h1 id="Lee215"><a href="#Lee215" class="headerlink" title="Lee215"></a>Lee215</h1><h2 id="Sum-of-total-strength-of-Wizards"><a href="#Sum-of-total-strength-of-Wizards" class="headerlink" title="Sum of total strength of Wizards"></a><a href="https://youtu.be/IPf4GWc00ro?t=1806" target="_blank" rel="noopener">Sum of total strength of Wizards</a></h2><h4 id="Sum-of-All-Subarr-Sum…-etc"><a href="#Sum-of-All-Subarr-Sum…-etc" class="headerlink" title="Sum of All Subarr Sum… etc"></a>Sum of All Subarr Sum… etc</h4><h2 id="Built-in-Agg-w-Customization"><a href="#Built-in-Agg-w-Customization" class="headerlink" title="Built-in Agg w/ Customization"></a>Built-in Agg w/ Customization</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> max(src.splitlines(), key=<span class="keyword">lambda</span> item: len(item))</span><br></pre></td></tr></table></figure>



<h2 id="To-Improve"><a href="#To-Improve" class="headerlink" title="To Improve"></a>To Improve</h2><p> 2398 - lee215</p>
<p>L6</p>
<p>SVM </p>
<p>overfitting, underfitting</p>
<p>linear regression, resnet, mobilenet, </p>
<p>decision tree, 什么时候overfit</p>
<p>resnet</p>
<p>最近在解的问题</p>
<p>attention – transformer ，segmentation, ML </p>
<p>reinforcement learning</p>
<p>open question, 他們針對這個職位要問的</p>
<p>cllection, sanitycheck , biuld model, reason for this model , loss , performance , input/output</p>
<p>how to train</p>
<p>overfit : solution </p>
<p>JD</p>
<p>15 – to be the best of employer</p>
<p> earn trucst</p>
<p> dive deep</p>
<p>how to solve</p>
<p>STAR 來解！</p>
<p>忙 </p>
<h1 id="BQ"><a href="#BQ" class="headerlink" title="BQ"></a>BQ</h1><p>ask for inclusive</p>
<p><a href="mailto:suewliao@deloitte.com.tw">suewliao@deloitte.com.tw</a></p>
<h1 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">arr = []</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> sys.stdin:</span><br><span class="line">    <span class="comment"># print(line, end="")</span></span><br><span class="line">    arr.append(line.strip().split(<span class="string">'|'</span>))</span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">issue: not single word mapping...</span></span><br><span class="line"><span class="string">    many --&gt; many</span></span><br><span class="line"><span class="string">    many --&gt; 1</span></span><br><span class="line"><span class="string">Notes:</span></span><br><span class="line"><span class="string">1 seems all Rosetta in msg must be provided mapping in subsequence pairs</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getTranslatedSentence</span><span class="params">(self, s, lookup)</span>:</span></span><br><span class="line">        n = len(s)</span><br><span class="line">        i = <span class="number">0</span></span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">while</span> i &lt; n:</span><br><span class="line">            w = <span class="string">''</span></span><br><span class="line">            <span class="keyword">if</span> s[i] == <span class="string">' '</span>:</span><br><span class="line">                res.append(<span class="string">' '</span>)</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">while</span> i &lt; n <span class="keyword">and</span> w.lstrip() <span class="keyword">not</span> <span class="keyword">in</span> lookup:</span><br><span class="line">                w += s[i]</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            res.append(lookup[w])</span><br><span class="line">            <span class="comment"># i += 1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span>.join(res)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment"># s_list = s.split()    # not ok for case3!</span></span><br><span class="line">        <span class="comment"># n = len(s_list)</span></span><br><span class="line">        <span class="comment"># i = 0</span></span><br><span class="line">        <span class="comment"># res = []</span></span><br><span class="line">        <span class="comment"># while i &lt; n:</span></span><br><span class="line">        <span class="comment">#     w = ''</span></span><br><span class="line">        <span class="comment">#     while i &lt; n and w.lstrip() not in lookup:</span></span><br><span class="line">        <span class="comment">#         w += ' ' + s_list[i]</span></span><br><span class="line">        <span class="comment">#         i += 1</span></span><br><span class="line">        <span class="comment">#     res.append(lookup[w.lstrip()])</span></span><br><span class="line">        <span class="comment">#     # i += 1</span></span><br><span class="line">        <span class="comment"># return ' '.join(res)</span></span><br><span class="line"></span><br><span class="line">lookup = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, len(arr)):</span><br><span class="line">    fr, to = arr[i]</span><br><span class="line">    lookup[fr] = to</span><br><span class="line">    </span><br><span class="line"><span class="comment"># print(arr)</span></span><br><span class="line">msg = arr[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line"><span class="comment"># print(lookup)</span></span><br><span class="line"><span class="comment"># print(msg)</span></span><br><span class="line">print(Solution().getTranslatedSentence(msg, lookup))</span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="comment"># import numpy as np</span></span><br><span class="line"><span class="comment"># import pandas as pd</span></span><br><span class="line"><span class="comment"># from sklearn import ...</span></span><br><span class="line"></span><br><span class="line">arr = []</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> sys.stdin:</span><br><span class="line">    <span class="comment"># print(line, end="")</span></span><br><span class="line">    arr.append(line.strip())</span><br><span class="line"><span class="keyword">assert</span>(len(arr) == <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countNumberEmersions</span><span class="params">(self, s)</span>:</span></span><br><span class="line">        n = len(s)</span><br><span class="line">        cnt = <span class="number">0</span></span><br><span class="line">        level = <span class="number">0</span></span><br><span class="line">        prev = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="comment"># if i &gt; 0 and </span></span><br><span class="line">            <span class="keyword">if</span> s[i] == <span class="string">'U'</span>:</span><br><span class="line">                level += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                level -= <span class="number">1</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> level == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">if</span> prev &lt; <span class="number">0</span>:</span><br><span class="line">                    cnt += <span class="number">1</span></span><br><span class="line">            prev = level</span><br><span class="line">        <span class="keyword">return</span> cnt</span><br><span class="line"></span><br><span class="line">s = arr[<span class="number">0</span>]</span><br><span class="line">UD = set([<span class="string">'U'</span>, <span class="string">'D'</span>])</span><br><span class="line"><span class="keyword">assert</span>([x <span class="keyword">in</span> UD <span class="keyword">for</span> x <span class="keyword">in</span> s])</span><br><span class="line">print(Solution().countNumberEmersions(s))</span><br></pre></td></tr></table></figure>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Joe Huang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://yoursite.com/2022/01/31/Algo.%20Ult./my_templates/">http://yoursite.com/2022/01/31/Algo.%20Ult./my_templates/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2022/01/31/Algo.%20Ult./niche/"><i class="fa fa-chevron-left">  </i><span>Algo. Ult./niche</span></a></div><div class="next-post pull-right"><a href="/2022/01/28/MLOps/2022-01-28-Intro%20to%20ML%20Production/"><span>MLOps/2022-01-28-Intro to ML Production</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2023 By Joe Huang</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>