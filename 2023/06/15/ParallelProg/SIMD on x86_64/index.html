<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="ParallelProg/SIMD on x86_64"><meta name="keywords" content=""><meta name="author" content="Joe Huang"><meta name="copyright" content="Joe Huang"><title>ParallelProg/SIMD on x86_64 | Awaken Desparado</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-180692466-1', 'auto');
ga('send', 'pageview');</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 4.2.1"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#SIMD-on-X86-64"><span class="toc-number">1.</span> <span class="toc-text">SIMD on X86_64</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Hardware-Aspects"><span class="toc-number">1.1.</span> <span class="toc-text">Hardware Aspects</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Software-Aspects"><span class="toc-number">1.2.</span> <span class="toc-text">Software Aspects</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AVX512-VS-GPU"><span class="toc-number">1.3.</span> <span class="toc-text">AVX512 VS GPU</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AVX-amp-SSE"><span class="toc-number">1.4.</span> <span class="toc-text">AVX &amp; SSE</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Joe Huang</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">406</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">26</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">73</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Awaken Desparado</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">ParallelProg/SIMD on x86_64</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2023-06-15</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/SIMD/">SIMD</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="SIMD-on-X86-64"><a href="#SIMD-on-X86-64" class="headerlink" title="SIMD on X86_64"></a>SIMD on X86_64</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">/content/drive/MyDrive/mySIMD<span class="comment"># lscpu </span></span><br><span class="line">Architecture:                    x86_64</span><br><span class="line">CPU op-mode(s):                  32-bit, 64-bit</span><br><span class="line">Byte Order:                      Little Endian</span><br><span class="line">Address sizes:                   46 bits physical, 48 bits virtual</span><br><span class="line">CPU(s):                          2</span><br><span class="line">On-line CPU(s) list:             0,1</span><br><span class="line">Thread(s) per core:              2</span><br><span class="line">Core(s) per socket:              1</span><br><span class="line">Socket(s):                       1</span><br><span class="line">NUMA node(s):                    1</span><br><span class="line">Vendor ID:                       GenuineIntel</span><br><span class="line">CPU family:                      6</span><br><span class="line">Model:                           79</span><br><span class="line">Model name:                      Intel(R) Xeon(R) CPU @ 2.20GHz</span><br><span class="line">Stepping:                        0</span><br><span class="line">CPU MHz:                         2199.998</span><br><span class="line">BogoMIPS:                        4399.99</span><br><span class="line">Hypervisor vendor:               KVM</span><br><span class="line">Virtualization <span class="built_in">type</span>:             full</span><br><span class="line">L1d cache:                       32 KiB</span><br><span class="line">L1i cache:                       32 KiB</span><br><span class="line">L2 cache:                        256 KiB</span><br><span class="line">L3 cache:                        55 MiB</span><br><span class="line">NUMA node0 CPU(s):               0,1</span><br><span class="line">Vulnerability Itlb multihit:     Not affected</span><br><span class="line">Vulnerability L1tf:              Mitigation; PTE Inversion</span><br><span class="line">Vulnerability Mds:               Vulnerable; SMT Host state unknown</span><br><span class="line">Vulnerability Meltdown:          Vulnerable</span><br><span class="line">Vulnerability Mmio stale data:   Vulnerable</span><br><span class="line">Vulnerability Retbleed:          Vulnerable</span><br><span class="line">Vulnerability Spec store bypass: Vulnerable</span><br><span class="line">Vulnerability Spectre v1:        Vulnerable: __user pointer sanitization and usercopy </span><br><span class="line">                                 barriers only; no swapgs barriers</span><br><span class="line">Vulnerability Spectre v2:        Vulnerable, IBPB: disabled, STIBP: disabled, PBRSB-eI</span><br><span class="line">                                 BRS: Not affected</span><br><span class="line">Vulnerability Srbds:             Not affected</span><br><span class="line">Vulnerability Tsx async abort:   Vulnerable</span><br><span class="line">Flags:                           fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge </span><br><span class="line">                                 mca cmov pat pse36 clflush mmx fxsr sse sse2 ss ht sy</span><br><span class="line">                                 scall nx pdpe1gb rdtscp lm constant_tsc rep_good nopl</span><br><span class="line">                                  xtopology nonstop_tsc cpuid tsc_known_freq pni pclmu</span><br><span class="line">                                 lqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe p</span><br><span class="line">                                 opcnt aes xsave avx f16c rdrand hypervisor lahf_lm ab</span><br><span class="line">                                 m 3dnowprefetch invpcid_single ssbd ibrs ibpb stibp f</span><br><span class="line">                                 sgsbase tsc_adjust bmi1 hle avx2 smep bmi2 erms invpc</span><br><span class="line">                                 id rtm rdseed adx smap xsaveopt arat md_clear arch_ca</span><br><span class="line">                                 pabilities</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line">~<span class="comment"># gcc -march=native -c -Q --help=target</span></span><br><span class="line">The following options are target specific:</span><br><span class="line">  -m128bit-long-double                  [enabled]</span><br><span class="line">  -m16                                  [disabled]</span><br><span class="line">  -m32                                  [disabled]</span><br><span class="line">  -m3dnow                               [disabled]</span><br><span class="line">  -m3dnowa                              [disabled]</span><br><span class="line">  -m64                                  [enabled]</span><br><span class="line">  -m80387                               [enabled]</span><br><span class="line">  -m8bit-idiv                           [disabled]</span><br><span class="line">  -m96bit-long-double                   [disabled]</span><br><span class="line">  -mabi=                                sysv</span><br><span class="line">  -mabm                                 [enabled]</span><br><span class="line">  -maccumulate-outgoing-args            [disabled]</span><br><span class="line">  -maddress-mode=                       long</span><br><span class="line">  -madx                                 [enabled]</span><br><span class="line">  -maes                                 [enabled]</span><br><span class="line">  -malign-data=                         compat</span><br><span class="line">  -malign-double                        [disabled]</span><br><span class="line">  -malign-functions=                    0</span><br><span class="line">  -malign-jumps=                        0</span><br><span class="line">  -malign-loops=                        0</span><br><span class="line">  -malign-stringops                     [enabled]</span><br><span class="line">  -mandroid                             [disabled]</span><br><span class="line">  -march=                               broadwell</span><br><span class="line">  -masm=                                att</span><br><span class="line">  -mavx                                 [enabled]</span><br><span class="line">  -mavx2                                [enabled]</span><br><span class="line">  -mavx256-split-unaligned-load         [disabled]</span><br><span class="line">  -mavx256-split-unaligned-store        [disabled]</span><br><span class="line">  -mavx5124fmaps                        [disabled]</span><br><span class="line">  -mavx5124vnniw                        [disabled]</span><br><span class="line">  -mavx512bitalg                        [disabled]</span><br><span class="line">  -mavx512bw                            [disabled]</span><br><span class="line">  -mavx512cd                            [disabled]</span><br><span class="line">  -mavx512dq                            [disabled]</span><br><span class="line">  -mavx512er                            [disabled]</span><br><span class="line">  -mavx512f                             [disabled]</span><br><span class="line">  -mavx512ifma                          [disabled]</span><br><span class="line">  -mavx512pf                            [disabled]</span><br><span class="line">  -mavx512vbmi                          [disabled]</span><br><span class="line">  -mavx512vbmi2                         [disabled]</span><br><span class="line">  -mavx512vl                            [disabled]</span><br><span class="line">  -mavx512vnni                          [disabled]</span><br><span class="line">  -mavx512vpopcntdq                     [disabled]</span><br><span class="line">  -mbionic                              [disabled]</span><br><span class="line">  -mbmi                                 [enabled]</span><br><span class="line">  -mbmi2                                [enabled]</span><br><span class="line">  -mbranch-cost=&lt;0,5&gt;                   3</span><br><span class="line">  -mcall-ms2sysv-xlogues                [disabled]</span><br><span class="line">  -mcet-switch                          [disabled]</span><br><span class="line">  -mcld                                 [disabled]</span><br><span class="line">  -mcldemote                            [disabled]</span><br><span class="line">  -mclflushopt                          [disabled]</span><br><span class="line">  -mclwb                                [disabled]</span><br><span class="line">  -mclzero                              [disabled]</span><br><span class="line">  -mcmodel=                             [default]</span><br><span class="line">  -mcpu=                      </span><br><span class="line">  -mcrc32                               [disabled]</span><br><span class="line">  -mcx16                                [enabled]</span><br><span class="line">  -mdispatch-scheduler                  [disabled]</span><br><span class="line">  -mdump-tune-features                  [disabled]</span><br><span class="line">  -mf16c                                [enabled]</span><br><span class="line">  -mfancy-math-387                      [enabled]</span><br><span class="line">  -mfentry                              [disabled]</span><br><span class="line">  -mfentry-name=              </span><br><span class="line">  -mfentry-section=           </span><br><span class="line">  -mfma                                 [enabled]</span><br><span class="line">  -mfma4                                [disabled]</span><br><span class="line">  -mforce-drap                          [disabled]</span><br><span class="line">  -mforce-indirect-call                 [disabled]</span><br><span class="line">  -mfp-ret-in-387                       [enabled]</span><br><span class="line">  -mfpmath=                             sse</span><br><span class="line">  -mfsgsbase                            [enabled]</span><br><span class="line">  -mfunction-return=                    keep</span><br><span class="line">  -mfused-madd                </span><br><span class="line">  -mfxsr                                [enabled]</span><br><span class="line">  -mgeneral-regs-only                   [disabled]</span><br><span class="line">  -mgfni                                [disabled]</span><br><span class="line">  -mglibc                               [enabled]</span><br><span class="line">  -mhard-float                          [enabled]</span><br><span class="line">  -mhle                                 [enabled]</span><br><span class="line">  -miamcu                               [disabled]</span><br><span class="line">  -mieee-fp                             [enabled]</span><br><span class="line">  -mincoming-stack-boundary=            0</span><br><span class="line">  -mindirect-branch-register            [disabled]</span><br><span class="line">  -mindirect-branch=                    keep</span><br><span class="line">  -minline-all-stringops                [disabled]</span><br><span class="line">  -minline-stringops-dynamically        [disabled]</span><br><span class="line">  -minstrument-return=                  none</span><br><span class="line">  -mintel-syntax              </span><br><span class="line">  -mlarge-data-threshold=&lt;number&gt;       65536</span><br><span class="line">  -mlong-double-128                     [disabled]</span><br><span class="line">  -mlong-double-64                      [disabled]</span><br><span class="line">  -mlong-double-80                      [enabled]</span><br><span class="line">  -mlwp                                 [disabled]</span><br><span class="line">  -mlzcnt                               [enabled]</span><br><span class="line">  -mmanual-endbr                        [disabled]</span><br><span class="line">  -mmemcpy-strategy=          </span><br><span class="line">  -mmemset-strategy=          </span><br><span class="line">  -mmitigate-rop                        [disabled]</span><br><span class="line">  -mmmx                                 [enabled]</span><br><span class="line">  -mmovbe                               [enabled]</span><br><span class="line">  -mmovdir64b                           [disabled]</span><br><span class="line">  -mmovdiri                             [disabled]</span><br><span class="line">  -mmpx                                 [disabled]</span><br><span class="line">  -mms-bitfields                        [disabled]</span><br><span class="line">  -mmusl                                [disabled]</span><br><span class="line">  -mmwaitx                              [disabled]</span><br><span class="line">  -mno-align-stringops                  [disabled]</span><br><span class="line">  -mno-default                          [disabled]</span><br><span class="line">  -mno-fancy-math-387                   [disabled]</span><br><span class="line">  -mno-push-args                        [disabled]</span><br><span class="line">  -mno-red-zone                         [disabled]</span><br><span class="line">  -mno-sse4                             [disabled]</span><br><span class="line">  -mnop-mcount                          [disabled]</span><br><span class="line">  -momit-leaf-frame-pointer             [disabled]</span><br><span class="line">  -mpc32                                [disabled]</span><br><span class="line">  -mpc64                                [disabled]</span><br><span class="line">  -mpc80                                [disabled]</span><br><span class="line">  -mpclmul                              [enabled]</span><br><span class="line">  -mpcommit                             [disabled]</span><br><span class="line">  -mpconfig                             [disabled]</span><br><span class="line">  -mpku                                 [disabled]</span><br><span class="line">  -mpopcnt                              [enabled]</span><br><span class="line">  -mprefer-avx128             </span><br><span class="line">  -mprefer-vector-width=                none</span><br><span class="line">  -mpreferred-stack-boundary=           0</span><br><span class="line">  -mprefetchwt1                         [disabled]</span><br><span class="line">  -mprfchw                              [enabled]</span><br><span class="line">  -mptwrite                             [disabled]</span><br><span class="line">  -mpush-args                           [enabled]</span><br><span class="line">  -mrdpid                               [disabled]</span><br><span class="line">  -mrdrnd                               [enabled]</span><br><span class="line">  -mrdseed                              [enabled]</span><br><span class="line">  -mrecip                               [disabled]</span><br><span class="line">  -mrecip=                    </span><br><span class="line">  -mrecord-mcount                       [disabled]</span><br><span class="line">  -mrecord-return                       [disabled]</span><br><span class="line">  -mred-zone                            [enabled]</span><br><span class="line">  -mregparm=                            6</span><br><span class="line">  -mrtd                                 [disabled]</span><br><span class="line">  -mrtm                                 [enabled]</span><br><span class="line">  -msahf                                [enabled]</span><br><span class="line">  -msgx                                 [disabled]</span><br><span class="line">  -msha                                 [disabled]</span><br><span class="line">  -mshstk                               [disabled]</span><br><span class="line">  -mskip-rax-setup                      [disabled]</span><br><span class="line">  -msoft-float                          [disabled]</span><br><span class="line">  -msse                                 [enabled]</span><br><span class="line">  -msse2                                [enabled]</span><br><span class="line">  -msse2avx                             [disabled]</span><br><span class="line">  -msse3                                [enabled]</span><br><span class="line">  -msse4                                [enabled]</span><br><span class="line">  -msse4.1                              [enabled]</span><br><span class="line">  -msse4.2                              [enabled]</span><br><span class="line">  -msse4a                               [disabled]</span><br><span class="line">  -msse5                      </span><br><span class="line">  -msseregparm                          [disabled]</span><br><span class="line">  -mssse3                               [enabled]</span><br><span class="line">  -mstack-arg-probe                     [disabled]</span><br><span class="line">  -mstack-protector-guard-offset= </span><br><span class="line">  -mstack-protector-guard-reg= </span><br><span class="line">  -mstack-protector-guard-symbol= </span><br><span class="line">  -mstack-protector-guard=              tls</span><br><span class="line">  -mstackrealign                        [disabled]</span><br><span class="line">  -mstringop-strategy=                  [default]</span><br><span class="line">  -mstv                                 [enabled]</span><br><span class="line">  -mtbm                                 [disabled]</span><br><span class="line">  -mtls-dialect=                        gnu</span><br><span class="line">  -mtls-direct-seg-refs                 [enabled]</span><br><span class="line">  -mtune-ctrl=                </span><br><span class="line">  -mtune=                               broadwell</span><br><span class="line">  -muclibc                              [disabled]</span><br><span class="line">  -mvaes                                [disabled]</span><br><span class="line">  -mveclibabi=                          [default]</span><br><span class="line">  -mvect8-ret-in-mem                    [disabled]</span><br><span class="line">  -mvpclmulqdq                          [disabled]</span><br><span class="line">  -mvzeroupper                          [enabled]</span><br><span class="line">  -mwaitpkg                             [disabled]</span><br><span class="line">  -mwbnoinvd                            [disabled]</span><br><span class="line">  -mx32                                 [disabled]</span><br><span class="line">  -mxop                                 [disabled]</span><br><span class="line">  -mxsave                               [enabled]</span><br><span class="line">  -mxsavec                              [disabled]</span><br><span class="line">  -mxsaveopt                            [enabled]</span><br><span class="line">  -mxsaves                              [disabled]</span><br><span class="line"></span><br><span class="line">  Known assembler dialects (<span class="keyword">for</span> use with the -masm= option):</span><br><span class="line">    att intel</span><br><span class="line"></span><br><span class="line">  Known ABIs (<span class="keyword">for</span> use with the -mabi= option):</span><br><span class="line">    ms sysv</span><br><span class="line"></span><br><span class="line">  Known code models (<span class="keyword">for</span> use with the -mcmodel= option):</span><br><span class="line">    32 kernel large medium small</span><br><span class="line"></span><br><span class="line">  Valid arguments to -mfpmath=:</span><br><span class="line">    387 387+sse 387,sse both sse sse+387 sse,387</span><br><span class="line"></span><br><span class="line">  Known indirect branch choices (<span class="keyword">for</span> use with the -mindirect-branch=/-mfunction-return= options):</span><br><span class="line">    keep thunk thunk-extern thunk-inline</span><br><span class="line"></span><br><span class="line">  Known choices <span class="keyword">for</span> <span class="built_in">return</span> instrumentation with -minstrument-return=:</span><br><span class="line">    call none nop5</span><br><span class="line"></span><br><span class="line">  Known data alignment choices (<span class="keyword">for</span> use with the -malign-data= option):</span><br><span class="line">    abi cacheline compat</span><br><span class="line"></span><br><span class="line">  Known vectorization library ABIs (<span class="keyword">for</span> use with the -mveclibabi= option):</span><br><span class="line">    acml svml</span><br><span class="line"></span><br><span class="line">  Known address mode (<span class="keyword">for</span> use with the -maddress-mode= option):</span><br><span class="line">    long short</span><br><span class="line"></span><br><span class="line">  Known preferred register vector length (to use with the -mprefer-vector-width= option):</span><br><span class="line">    128 256 512 none</span><br><span class="line"></span><br><span class="line">  Known stack protector guard (<span class="keyword">for</span> use with the -mstack-protector-guard= option):</span><br><span class="line">    global tls</span><br><span class="line"></span><br><span class="line">  Valid arguments to -mstringop-strategy=:</span><br><span class="line">    byte_loop libcall loop rep_4byte rep_8byte rep_byte unrolled_loop vector_loop</span><br><span class="line"></span><br><span class="line">  Known TLS dialects (<span class="keyword">for</span> use with the -mtls-dialect= option):</span><br><span class="line">    gnu gnu2</span><br><span class="line"></span><br><span class="line">  Known valid arguments <span class="keyword">for</span> -march= option:</span><br><span class="line">    i386 i486 i586 pentium lakemont pentium-mmx winchip-c6 winchip2 c3 samuel-2 c3-2 nehemiah c7 esther i686 pentiumpro pentium2 pentium3 pentium3m pentium-m pentium4 pentium4m prescott nocona core2 nehalem corei7 westmere sandybridge corei7-avx ivybridge core-avx-i haswell core-avx2 broadwell skylake skylake-avx512 cannonlake icelake-client icelake-server cascadelake tigerlake bonnell atom silvermont slm goldmont goldmont-plus tremont knl knm intel geode k6 k6-2 k6-3 athlon athlon-tbird athlon-4 athlon-xp athlon-mp x86-64 eden-x2 nano nano-1000 nano-2000 nano-3000 nano-x2 eden-x4 nano-x4 k8 k8-sse3 opteron opteron-sse3 athlon64 athlon64-sse3 athlon-fx amdfam10 barcelona bdver1 bdver2 bdver3 bdver4 znver1 znver2 btver1 btver2 generic native</span><br><span class="line"></span><br><span class="line">  Known valid arguments <span class="keyword">for</span> -mtune= option:</span><br><span class="line">    generic i386 i486 pentium lakemont pentiumpro pentium4 nocona core2 nehalem sandybridge haswell bonnell silvermont goldmont goldmont-plus tremont knl knm skylake skylake-avx512 cannonlake icelake-client icelake-server cascadelake tigerlake intel geode k6 athlon k8 amdfam10 bdver1 bdver2 bdver3 bdver4 btver1 btver2 znver1 znver2</span><br></pre></td></tr></table></figure>





<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">/content/drive/MyDrive/mySIMD#</span><span class="bash"> g++ -o build_vec_avx2 -mavx2 build_vec.cc</span></span><br><span class="line"><span class="meta">/content/drive/MyDrive/mySIMD#</span><span class="bash"> ./build_vec_avx2 </span></span><br><span class="line">v0: [ 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 ]</span><br><span class="line">v1: [ 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 ]</span><br><span class="line">v0 = v0 + 1: [ 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 ]</span><br><span class="line">v1 = v1 + 2: [ 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 ]</span><br><span class="line">v0 = v0 + v1: [ 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 ]</span><br><span class="line">v1 = v0 * v1: [ 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 ]</span><br><span class="line"></span><br><span class="line">v16si a = &#123;0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15&#125;;</span><br><span class="line">v16si b = &#123;0, 2, 4, 6, 8, 1, 3, 5, 7, 9, 10, 11, 12, 13, 14, 15&#125;;</span><br><span class="line">c = a &gt; b: [ 0 0 0 0 0 -1 -1 -1 -1 0 0 0 0 0 0 0 ]</span><br><span class="line">d = (a &gt; b) ? v0 : v1: [ 6 6 6 6 6 3 3 3 3 6 6 6 6 6 6 6 ]</span><br><span class="line"><span class="meta">/content/drive/MyDrive/mySIMD#</span><span class="bash"> g++ -o build_vec_avx512f -mavx512f build_vec.cc</span></span><br><span class="line"><span class="meta">/content/drive/MyDrive/mySIMD#</span><span class="bash"> ./build_vec_avx512f </span></span><br><span class="line">v0: [ 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 ]</span><br><span class="line">v1: [ 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 ]</span><br><span class="line">Illegal instruction (core dumped)</span><br><span class="line"><span class="meta">/content/drive/MyDrive/mySIMD#</span><span class="bash"> </span></span><br><span class="line"></span><br><span class="line">Other options: -mmmx、-msse、-msse2、-msse3、-mssse3、-msse4.1、-msse4.2、-msse4、-mavx、-mavx2、-mavx512f、-mavx512pf、-mavx512er、-mavx512cd、-mavx512vl、-mavx512bw、-mavx512dq、-mavx512ifma、-mavx512vbmi。</span><br></pre></td></tr></table></figure>





<p><a href="https://www.intel.com/content/www/us/en/docs/cpp-compiler/developer-guide-reference/2021-8/intrinsics.html" target="_blank" rel="noopener">Intel Manual</a></p>
<p><img src="https://p.ipic.vip/nblx24.jpg" alt="img"></p>
<h2 id="Hardware-Aspects"><a href="#Hardware-Aspects" class="headerlink" title="Hardware Aspects"></a>Hardware Aspects</h2><p><img src="https://p.ipic.vip/98sfm8.png" alt="image-20230524114039763"></p>
<p><img src="https://p.ipic.vip/0ba5i2.png" alt="image-20230524114127909"></p>
<p><img src="https://p.ipic.vip/4i3ul1.png" alt="image-20230524114230862"></p>
<blockquote>
<p>•性能提升更多依赖体系结构改进<br>•提高流水线效率<br>提高Cache效率<br>向量指令，提高向量长度<br>引入多核<br>以Intel为例<br>MMx 11993<br>MMX (64-bit)<br>wl vector re<br>supports<br>SSE、 SSE2、 (128-bit)<br>indeger ope<br>•<br>AVX. AVx2 (256-bit)<br>AVX-512 (512-bit)<br>ARM Neon指令集<br>当前ARM V8的向量化指令集<br>128-bit向量宽度<br>ARM SVE指令集<br>• ARM下-代向量化指令集<br>向量长度可伸缩，从128-bit 到2048-bit<br>与RISC-V V扩展类似<br>RISC-V ISA指令集架构，<br>精简的基础指令集，RV321 , RV641<br>•扩展指令集<br>• M,A,F,D,QC<br>讨论状态：V，B，J等等<br>RISC-V “V” Vector Extension<br>•当前版本1.0<br><a href="https://github.com/riscv/riscv-V-spec" target="_blank" rel="noopener">https://github.com/riscv/riscv-V-spec</a></p>
</blockquote>
<h2 id="Software-Aspects"><a href="#Software-Aspects" class="headerlink" title="Software Aspects"></a>Software Aspects</h2><p><img src="https://p.ipic.vip/nd1dy4.png" alt="image-20230524114212963"></p>
<p>VS</p>
<h2 id="AVX512-VS-GPU"><a href="#AVX512-VS-GPU" class="headerlink" title="AVX512 VS GPU"></a>AVX512 VS GPU</h2><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>CPU + AVX512</td>
<td>big RAM, low Latency, Cache strong</td>
<td>High Power, Bandwidth low..</td>
</tr>
<tr>
<td>GPU</td>
<td>Scaling! CUDA</td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>Intel want “generalization” + “super high computing power”… many other people instead seek solution in ASIC or more core HW</li>
</ul>
<h2 id="AVX-amp-SSE"><a href="#AVX-amp-SSE" class="headerlink" title="AVX &amp; SSE"></a>AVX &amp; SSE</h2><p><a href="https://www.intel.com/content/www/us/en/docs/intrinsics-guide/index.html#text=_mm256_loadu_pd&amp;ig_expand=4122" target="_blank" rel="noopener">https://www.intel.com/content/www/us/en/docs/intrinsics-guide/index.html#text=_mm256_loadu_pd&amp;ig_expand=4122</a></p>
<p>in 2007, AMD announced SSE5 (previously SSE1~SSE4 all announced by Intel), so in 2008, Intel announced AVX, which owns some more distinct features</p>
<p>1 Float length doubled</p>
<p>2 Support 3OPs instruction for old version SSEs</p>
<p><img src="https://p.ipic.vip/qomm14.png" alt="image-20230606224503357"></p>
<p><img src="https://p.ipic.vip/n6fj6m.png" alt="image-20230606224622809"></p>
<blockquote>
<p>誰是最有效率就是軟件遊戲沒有動力學優化軟體覺得我花費大量的人力物理優化提升30%的性能還不如直接等1年後的我根本就沒有用畫的東西很多錢可能會想和背景新市區有直接等過兩天是一個新的提醒我就可能是目前也不好多錢目前來看他用你</p>
</blockquote>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Joe Huang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://yoursite.com/2023/06/15/ParallelProg/SIMD%20on%20x86_64/">http://yoursite.com/2023/06/15/ParallelProg/SIMD%20on%20x86_64/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2023/06/21/ParallelProg/MyNote%20-%20OpenMP%20Review/"><i class="fa fa-chevron-left">  </i><span>ParallelProg/MyNote - OpenMP Review</span></a></div><div class="next-post pull-right"><a href="/2023/05/29/AI-System/2%20AI%20Compiler/"><span>AI-System/2 AI Compiler</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2024 By Joe Huang</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>