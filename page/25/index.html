<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content=""><meta name="keywords" content=""><meta name="author" content="Joe Huang"><meta name="copyright" content="Joe Huang"><title>Awaken Desparado</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-180692466-1', 'auto');
ga('send', 'pageview');</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 4.2.1"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="false"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Joe Huang</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">406</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">26</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">73</span></a></div></div></div><nav class="no-bg" id="nav"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Awaken Desparado</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="site-info"><div id="site-title">Awaken Desparado</div><div id="site-sub-title"></div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2020/01/23/System-Design/ACE/2021-01-23%20Fandango%20&amp;%20Robinhood/">System-Design/ACE/2021-01-23 Fandango &amp; Robinhood</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-01-23</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/SystemDesign/">SystemDesign</a></span><div class="content"><h1 id="票務系統、Distributed-Transaction"><a href="#票務系統、Distributed-Transaction" class="headerlink" title="票務系統、Distributed Transaction"></a>票務系統、Distributed Transaction</h1><ul>
<li>相似: Ticketmaster、秒殺、Robinhood</li>
<li>DB、不超賣、峰值concurrency</li>
</ul>
<h2 id="Req"><a href="#Req" class="headerlink" title="Req"></a>Req</h2><h3 id="Non-Fn"><a href="#Non-Fn" class="headerlink" title="Non-Fn"></a>Non-Fn</h3><h2 id="Resource-Est"><a href="#Resource-Est" class="headerlink" title="Resource Est."></a>Resource Est.</h2><h2 id="Q1-Sub-Services"><a href="#Q1-Sub-Services" class="headerlink" title="Q1. Sub Services?"></a>Q1. Sub Services?</h2><ul>
<li>Search </li>
<li>Seat</li>
<li>Payment</li>
<li>Waitlist</li>
</ul>
<h2 id="Q2-同場同位不重複賣"><a href="#Q2-同場同位不重複賣" class="headerlink" title="Q2. 同場同位不重複賣?"></a>Q2. 同場同位不重複賣?</h2><p>事務鎖</p>
<h2 id="Q3-怎避免付款後發現選的已賣出"><a href="#Q3-怎避免付款後發現選的已賣出" class="headerlink" title="Q3: 怎避免付款後發現選的已賣出?"></a>Q3: 怎避免付款後發現選的已賣出?</h2><p>選定座位後，預留並作ttl</p>
<h2 id="Storage"><a href="#Storage" class="headerlink" title="Storage"></a>Storage</h2></div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/01/15/Python/2020-01-15-bisect%20in%20python%20/">Python/2020-01-15-bisect in python </a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-01-15</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Python/">Python</a></span><div class="content"><h3 id="Finding-Pos"><a href="#Finding-Pos" class="headerlink" title="Finding Pos"></a>Finding Pos</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bisect</span><br><span class="line"> </span><br><span class="line">a = [<span class="number">1</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">12</span>,<span class="number">15</span>,<span class="number">20</span>]</span><br><span class="line">position = bisect.bisect(a,<span class="number">13</span>)</span><br><span class="line">print(position)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 用可变序列内置的insert方法插入</span></span><br><span class="line">a.insert(position,<span class="number">13</span>)</span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<p>5<br>[1, 4, 6, 8, 12, 13, 15, 20]</p>
<hr>
<h3 id="Insert"><a href="#Insert" class="headerlink" title="Insert"></a>Insert</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bisect</span><br><span class="line"> </span><br><span class="line">a = [<span class="number">1</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">12</span>,<span class="number">15</span>,<span class="number">20</span>]</span><br><span class="line">bisect.insort(a,<span class="number">13</span>)</span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure>

</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/01/15/Python/2020-02-26-HackerRank_practice/">Python/2020-02-26-HackerRank_practice</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-01-15</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Python/">Python</a></span><div class="content"><h2 id="Read-input-from-STDIN-Print-output-to-STDOUT"><a href="#Read-input-from-STDIN-Print-output-to-STDOUT" class="headerlink" title="Read input from STDIN. Print output to STDOUT*"></a>Read input from STDIN. Print output to STDOUT*</h2><p><strong>Sample Input</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">sam 99912222</span><br><span class="line">tom 11122222</span><br><span class="line">harry 12299933</span><br><span class="line">sam</span><br><span class="line">edward</span><br><span class="line">harry</span><br></pre></td></tr></table></figure>

<p><strong>Sample Output</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sam&#x3D;99912222</span><br><span class="line">Not found</span><br><span class="line">harry&#x3D;12299933</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">n = int(input())</span><br><span class="line"></span><br><span class="line">book = [input().split() <span class="keyword">for</span> _ <span class="keyword">in</span> range(n)]  <span class="comment"># [[name1, phone1], [name2, phone2]...]</span></span><br><span class="line"><span class="comment"># print(book)</span></span><br><span class="line">d = &#123;k:v <span class="keyword">for</span> k, v <span class="keyword">in</span> book&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        name = input()</span><br><span class="line">        <span class="comment"># if not name: break</span></span><br><span class="line">        <span class="keyword">if</span> name <span class="keyword">in</span> d:</span><br><span class="line">            print(<span class="string">'&#123;&#125;=&#123;&#125;'</span>.format(name, d[name]))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">'Not found'</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">countApplesAndOranges</span><span class="params">(s, t, a, b, apples, oranges)</span>:</span></span><br><span class="line">    <span class="comment"># print(apples ,oranges)</span></span><br><span class="line">    </span><br><span class="line">    aa = map(<span class="keyword">lambda</span> a, x: a+x, [a]*len(apples), apples)</span><br><span class="line">    oo = map(<span class="keyword">lambda</span> b, x: b+x, [b]*len(oranges), oranges)</span><br><span class="line"></span><br><span class="line">    count_a = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> a <span class="keyword">in</span> aa:</span><br><span class="line">        <span class="keyword">if</span> s &lt;= a &lt;= t:</span><br><span class="line">            count_a += <span class="number">1</span></span><br><span class="line">    print(count_a)</span><br><span class="line">    count_o = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> o <span class="keyword">in</span> oo:</span><br><span class="line">        <span class="keyword">if</span> s &lt;= o &lt;= t:</span><br><span class="line">            count_o += <span class="number">1</span></span><br><span class="line">    print(count_o)</span><br></pre></td></tr></table></figure>



<h3 id="GCD-x-LCM"><a href="#GCD-x-LCM" class="headerlink" title="GCD  x LCM"></a>GCD  x LCM</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/python3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Complete the 'getTotalX' function below.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The function is expected to return an INTEGER.</span></span><br><span class="line"><span class="comment"># The function accepts following parameters:</span></span><br><span class="line"><span class="comment">#  1. INTEGER_ARRAY a</span></span><br><span class="line"><span class="comment">#  2. INTEGER_ARRAY b</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getTotalX</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="comment"># Write your code here</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> a <span class="keyword">or</span> <span class="keyword">not</span> b:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">gcd</span><span class="params">(A)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        12 16 18 40</span></span><br><span class="line"><span class="string">        0   4  6  ４</span></span><br><span class="line"><span class="string">        0.  0. 2  ０</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        <span class="comment"># arr = sorted(A, key=lambda x: x)</span></span><br><span class="line">        <span class="comment"># p = arr[0]</span></span><br><span class="line">        <span class="comment"># while p:</span></span><br><span class="line">        <span class="comment">#     prev_p = p</span></span><br><span class="line">        <span class="comment">#     for j in range(len(arr)):</span></span><br><span class="line">        <span class="comment">#         arr[j] = arr[j] % p</span></span><br><span class="line">        <span class="comment">#     for k in range(len(arr)):</span></span><br><span class="line">        <span class="comment">#         if arr[j] != 0:</span></span><br><span class="line">        <span class="comment">#             p =  arr[j]</span></span><br><span class="line">        <span class="comment">#         if p != prev_p:</span></span><br><span class="line">        <span class="comment">#             break</span></span><br><span class="line">        <span class="comment"># return prev_p</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">find_gcd</span><span class="params">(a, b)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> a &lt; b:</span><br><span class="line">            a, b = b, a</span><br><span class="line">        <span class="keyword">while</span> a:</span><br><span class="line">            <span class="comment"># print("a:&#123;&#125;, b:&#123;&#125;".format(a, b))</span></span><br><span class="line">            r = a % b       <span class="comment"># 20 16</span></span><br><span class="line">            <span class="keyword">if</span> r == <span class="number">0</span>:      <span class="comment"># 4</span></span><br><span class="line">                <span class="keyword">break</span>       </span><br><span class="line">            a, b = b, r                         </span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> b</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">GCD</span><span class="params">(arr)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> len(arr) == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> arr[<span class="number">0</span>]</span><br><span class="line">        gcd = find_gcd(arr[<span class="number">0</span>], arr[<span class="number">1</span>])</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, len(arr)):</span><br><span class="line">            gcd = find_gcd(gcd, arr[i])</span><br><span class="line">        <span class="keyword">return</span> gcd</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">LCM</span><span class="params">(arr)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> len(arr) == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> arr[<span class="number">0</span>]</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">find_lcm</span><span class="params">(a, b)</span>:</span></span><br><span class="line">            gcd = find_gcd(a, b)</span><br><span class="line">            <span class="keyword">return</span> a*b/gcd</span><br><span class="line">        lcm = find_lcm(arr[<span class="number">0</span>], arr[<span class="number">1</span>])</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">2</span>, len(arr)):</span><br><span class="line">            lcm = find_lcm(lcm, arr[j])</span><br><span class="line">        <span class="keyword">return</span> lcm</span><br><span class="line"></span><br><span class="line">    gcd = GCD(b)</span><br><span class="line">    <span class="comment"># print('GCD: &#123;&#125;'.format(gcd))</span></span><br><span class="line">    lcm = LCM(a)</span><br><span class="line">    <span class="comment"># print('LCM: &#123;&#125;'.format(lcm))</span></span><br><span class="line">    n = int(gcd/lcm)</span><br><span class="line">    res = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> range(<span class="number">1</span>, n+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> gcd % (k*lcm) == <span class="number">0</span>:</span><br><span class="line">            res += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    fptr = open(os.environ[<span class="string">'OUTPUT_PATH'</span>], <span class="string">'w'</span>)</span><br><span class="line"></span><br><span class="line">    first_multiple_input = input().rstrip().split()</span><br><span class="line"></span><br><span class="line">    n = int(first_multiple_input[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">    m = int(first_multiple_input[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">    arr = list(map(int, input().rstrip().split()))</span><br><span class="line"></span><br><span class="line">    brr = list(map(int, input().rstrip().split()))</span><br><span class="line"></span><br><span class="line">    total = getTotalX(arr, brr)</span><br><span class="line"></span><br><span class="line">    fptr.write(str(total) + <span class="string">'\n'</span>)</span><br><span class="line"></span><br><span class="line">    fptr.close()</span><br></pre></td></tr></table></figure>



<h3 id="Exceptions-String-to-Integer"><a href="#Exceptions-String-to-Integer" class="headerlink" title="Exceptions - String to Integer"></a><del>Exceptions - String to Integer</del></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">S = input().strip()</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    print(int(S))</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">'Bad String'</span>)</span><br></pre></td></tr></table></figure>



<h3 id="Birthday-Chocolate"><a href="#Birthday-Chocolate" class="headerlink" title="Birthday Chocolate"></a><del>Birthday Chocolate</del></h3><p><strong>Sample Input 0</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">1 2 1 3 2</span><br><span class="line">3 2</span><br></pre></td></tr></table></figure>

<p><strong>Sample Output 0</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">birthday</span><span class="params">(s, d, m)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> s <span class="keyword">or</span> <span class="keyword">not</span> d <span class="keyword">or</span> <span class="keyword">not</span> m:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    j = <span class="number">0</span></span><br><span class="line">    res = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(m<span class="number">-1</span>, len(s)):        <span class="comment"># use m-1 instead of m to solve m==1 case, where the loop isn't gonna entered</span></span><br><span class="line">        <span class="keyword">if</span> sum(s[j:i+<span class="number">1</span>]) == d:</span><br><span class="line">            res += <span class="number">1</span></span><br><span class="line">        j += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    fptr = open(os.environ[<span class="string">'OUTPUT_PATH'</span>], <span class="string">'w'</span>)</span><br><span class="line"></span><br><span class="line">    n = int(input().strip())</span><br><span class="line"></span><br><span class="line">    s = list(map(int, input().rstrip().split()))</span><br><span class="line"></span><br><span class="line">    dm = input().rstrip().split()</span><br><span class="line"></span><br><span class="line">    d = int(dm[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">    m = int(dm[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">    result = birthday(s, d, m)</span><br><span class="line"></span><br><span class="line">    fptr.write(str(result) + <span class="string">'\n'</span>)</span><br><span class="line"></span><br><span class="line">    fptr.close()</span><br></pre></td></tr></table></figure>



<h3 id="DivisorSum"><a href="#DivisorSum" class="headerlink" title="DivisorSum"></a><del>DivisorSum</del></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculator</span><span class="params">(AdvancedArithmetic)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">divisorSum</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        res = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, n+<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> n % j == <span class="number">0</span>:</span><br><span class="line">                res += j</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>



<h3 id="DivisibleSumPair"><a href="#DivisibleSumPair" class="headerlink" title="DivisibleSumPair"></a><del>DivisibleSumPair</del></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">divisibleSumPairs</span><span class="params">(n, k, ar)</span>:</span></span><br><span class="line">    res = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(i+<span class="number">1</span>, n):</span><br><span class="line">            <span class="keyword">if</span> (ar[i] + ar[j]) % k == <span class="number">0</span>:</span><br><span class="line">                res += <span class="number">1</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>



<h3 id="Count-B-Sort-Swapping"><a href="#Count-B-Sort-Swapping" class="headerlink" title="Count B-Sort Swapping"></a><del>Count B-Sort Swapping</del></h3><h3 id="Generics"><a href="#Generics" class="headerlink" title="Generics"></a>Generics</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Printer</span> &lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *    Method Name: printArray</span></span><br><span class="line"><span class="comment">    *    Print each element of the generic array on a new line. Do not return anything.</span></span><br><span class="line"><span class="comment">    *    <span class="doctag">@param</span> A generic array</span></span><br><span class="line"><span class="comment">    **/</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Write your code here</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;E&gt; <span class="function"><span class="keyword">void</span> <span class="title">printArray</span><span class="params">(E[] generic)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(E element : generic) &#123;</span><br><span class="line">            System.out.println(element); </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="BST-Height-according-to-Edges"><a href="#BST-Height-according-to-Edges" class="headerlink" title="BST Height according to Edges"></a><del>BST Height according to Edges</del></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getHeight</span><span class="params">(self,root)</span>:</span></span><br><span class="line">    <span class="comment">#Write your code here</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root.left <span class="keyword">and</span> <span class="keyword">not</span> root.right:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    L = self.getHeight(root.left)</span><br><span class="line">    R = self.getHeight(root.right)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> max(L, R) + <span class="number">1</span></span><br></pre></td></tr></table></figure>



<h3 id="RM-Duplicated-from-Sorted-Linked-List"><a href="#RM-Duplicated-from-Sorted-Linked-List" class="headerlink" title="RM Duplicated from Sorted Linked List"></a>RM Duplicated from Sorted Linked List</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">removeDuplicates</span><span class="params">(self,head)</span>:</span></span><br><span class="line">    <span class="comment">#Write your code here</span></span><br><span class="line">    dummy = Node(<span class="string">"INIT"</span>)</span><br><span class="line">    dummy.next = head</span><br><span class="line">    self.helper(head, dummy)</span><br><span class="line">    <span class="keyword">return</span> dummy.next</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">helper</span><span class="params">(self, root, prev)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">if</span> prev.data == root.data:</span><br><span class="line">        prev.next = root.next</span><br><span class="line">        self.helper(root.next, prev)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        self.helper(root.next, root)</span><br></pre></td></tr></table></figure>



<h3 id="IsPrime-w-Input-Parsing"><a href="#IsPrime-w-Input-Parsing" class="headerlink" title="IsPrime w/ Input() Parsing"></a>IsPrime w/ Input() Parsing</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Enter your code here. Read input from STDIN. Print output to STDOUT</span></span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line">num = int(input().strip())</span><br><span class="line"></span><br><span class="line">arr = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(num):</span><br><span class="line">    arr.append(int(input().strip()))</span><br><span class="line"><span class="comment"># print('arr: &#123;&#125;'.format(arr))</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(self, arr)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(arr)):</span><br><span class="line">            <span class="keyword">if</span> self.isPrime(arr[i]):</span><br><span class="line">                print(<span class="string">'Prime'</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                print(<span class="string">'Not prime'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isPrime</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> n &lt;= <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        end = int(math.sqrt(n)) + <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">2</span>, end):</span><br><span class="line">            <span class="keyword">if</span>  n % j == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure>



<h3 id="Day-26-Nested-Logic"><a href="#Day-26-Nested-Logic" class="headerlink" title="Day 26 - Nested Logic"></a>Day 26 - Nested Logic</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">actual = list(map(int, input().strip().split()))</span><br><span class="line">expect = list(map(int, input().strip().split()))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(self, actual, expect)</span>:</span></span><br><span class="line">        da, ma, ya = actual</span><br><span class="line">        de, me, ye = expect</span><br><span class="line">        <span class="keyword">if</span> ya &lt; ye <span class="keyword">or</span> da &lt;= de <span class="keyword">and</span> ma &lt;= me <span class="keyword">and</span> ya &lt;= ye:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">elif</span> ya &gt; ye:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">10000</span></span><br><span class="line">        <span class="keyword">elif</span> ma &gt; me:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">500</span> * (ma - me) </span><br><span class="line">        <span class="keyword">elif</span> da &gt; de:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">15</span> * (da - de)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    sol = Solution()</span><br><span class="line">    print(sol.foo(actual, expect))</span><br></pre></td></tr></table></figure>



<h3 id="Day-27-Test"><a href="#Day-27-Test" class="headerlink" title="Day 27 - Test"></a>Day 27 - Test</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">minimum_index</span><span class="params">(seq)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> len(seq) == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">"Cannot get the minimum value index from an empty sequence"</span>)</span><br><span class="line">    min_idx = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, len(seq)):</span><br><span class="line">        <span class="keyword">if</span> seq[i] &lt; seq[min_idx]:</span><br><span class="line">            min_idx = i</span><br><span class="line">    <span class="keyword">return</span> min_idx</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestDataEmptyArray</span><span class="params">(object)</span>:</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_array</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="comment"># complete this function</span></span><br><span class="line">        <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestDataUniqueValues</span><span class="params">(object)</span>:</span></span><br><span class="line">    arr = [<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>]</span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_array</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="comment"># complete this function</span></span><br><span class="line">        <span class="keyword">return</span> TestDataUniqueValues.arr</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_expected_result</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="comment"># complete this function</span></span><br><span class="line">        <span class="keyword">return</span> minimum_index(TestDataUniqueValues.arr)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestDataExactlyTwoDifferentMinimums</span><span class="params">(object)</span>:</span></span><br><span class="line">    arr = [<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>]</span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_array</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="comment"># complete this function</span></span><br><span class="line">        <span class="keyword">return</span> TestDataExactlyTwoDifferentMinimums.arr</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_expected_result</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="comment"># complete this function</span></span><br><span class="line">        <span class="keyword">return</span> minimum_index(TestDataExactlyTwoDifferentMinimums.arr)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">TestWithEmptyArray</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        seq = TestDataEmptyArray.get_array()</span><br><span class="line">        result = minimum_index(seq)</span><br><span class="line">    <span class="keyword">except</span> ValueError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">assert</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">TestWithUniqueValues</span><span class="params">()</span>:</span></span><br><span class="line">    seq = TestDataUniqueValues.get_array()</span><br><span class="line">    <span class="keyword">assert</span> len(seq) &gt;= <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">assert</span> len(list(set(seq))) == len(seq)</span><br><span class="line"></span><br><span class="line">    expected_result = TestDataUniqueValues.get_expected_result()</span><br><span class="line">    result = minimum_index(seq)</span><br><span class="line">    <span class="keyword">assert</span> result == expected_result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">TestiWithExactyTwoDifferentMinimums</span><span class="params">()</span>:</span></span><br><span class="line">    seq = TestDataExactlyTwoDifferentMinimums.get_array()</span><br><span class="line">    <span class="keyword">assert</span> len(seq) &gt;= <span class="number">2</span></span><br><span class="line">    tmp = sorted(seq)</span><br><span class="line">    <span class="keyword">assert</span> tmp[<span class="number">0</span>] == tmp[<span class="number">1</span>] <span class="keyword">and</span> (len(tmp) == <span class="number">2</span> <span class="keyword">or</span> tmp[<span class="number">1</span>] &lt; tmp[<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">    expected_result = TestDataExactlyTwoDifferentMinimums.get_expected_result()</span><br><span class="line">    result = minimum_index(seq)</span><br><span class="line">    <span class="keyword">assert</span> result == expected_result</span><br><span class="line"></span><br><span class="line">TestWithEmptyArray()</span><br><span class="line">TestWithUniqueValues()</span><br><span class="line">TestiWithExactyTwoDifferentMinimums()</span><br><span class="line">print(<span class="string">"OK"</span>)</span><br></pre></td></tr></table></figure>



<h3 id="Draw-Book"><a href="#Draw-Book" class="headerlink" title="Draw Book"></a>Draw Book</h3><p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gcx0ix4kyej31in0u0djo.jpg" alt="image-20200317163814705"></p>
<img src="https://tva1.sinaimg.cn/large/00831rSTgy1gcx0kem3spj313w0880tq.jpg" alt="image-20200317163936950" style="zoom:67%;" />



<h3 id="Day-28-RegEX-Pattern"><a href="#Day-28-RegEX-Pattern" class="headerlink" title="Day 28 RegEX, Pattern"></a>Day 28 RegEX, Pattern</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    pattern = re.compile(<span class="string">'@gmail.com$'</span>)</span><br><span class="line"></span><br><span class="line">    N = int(input())</span><br><span class="line">    res = []</span><br><span class="line">    <span class="comment"># heapq.heapify(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> N_itr <span class="keyword">in</span> range(N):</span><br><span class="line">        firstNameEmailID = input().strip().split()</span><br><span class="line"></span><br><span class="line">        firstName = firstNameEmailID[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">        emailID = firstNameEmailID[<span class="number">1</span>]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># if emailID.split('@')[1].split('.')[0] != 'gmail':</span></span><br><span class="line">        <span class="comment">#     continue</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> pattern.search(emailID):</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="comment"># heapq.heappush(res, firstName)</span></span><br><span class="line">        res.append(firstName)</span><br><span class="line">    </span><br><span class="line">    res.sort()</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(len(res)):</span><br><span class="line">        <span class="comment"># print(heapq.heappop(res))</span></span><br><span class="line">        print(res[j])</span><br></pre></td></tr></table></figure>



<h3 id="Level-Order-BFS"><a href="#Level-Order-BFS" class="headerlink" title="Level Order BFS~~"></a>Level Order BFS~~</h3></div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/01/15/System-Design/ACE/2021-01-15%203%20Hacker%20Crawl/">System-Design/ACE/2021-01-15 3 Hacker Crawl</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-01-15</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/SystemDesign/">SystemDesign</a></span><div class="content"><h1 id="Search"><a href="#Search" class="headerlink" title="Search"></a>Search</h1><p>Auto-Complete不在這裡的討論</p>
<h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><ul>
<li>fn req: <ul>
<li>通過關鍵詞快速及時找到相關info<ul>
<li>及時: 如news，時效性很強!</li>
</ul>
</li>
</ul>
</li>
<li>Non-fn req: S, R,A, C, L, E<ul>
<li>高擴展性 – 支持全網索引</li>
<li>低延遲 – 特別是for 核心網站，像是新聞網站就是最好的例子，做索引!</li>
<li>低延遲 – 返回給user結果</li>
<li>高可靠性 – 返回內容與關鍵詞相關</li>
<li>Availability – 在線</li>
<li>一致性 – 還好，沒那麼要求啦</li>
<li>效率: 返回給user結果時，需要高效的data structure &amp; 算法 (不高效: 每次user打了字，當下找，或是未解決不同人打一樣的關鍵詞時)</li>
</ul>
</li>
<li>Non req:<ul>
<li>非英語 (如中文未有自然斷詞)、爬蟲、搜索結果排序(page rank) – 把重要的放前面，狗家的安身立命之本</li>
</ul>
</li>
</ul>
<h4 id="QPS-單機量級"><a href="#QPS-單機量級" class="headerlink" title="QPS 單機量級:"></a>QPS 單機量級:</h4><p>單機下的ram、disk、bandwidth都是影響單機的QPS量級</p>
<p>如果request的需求特高，QPS就會降低的</p>
<ul>
<li>Redis – 只是去拿個key，所以量級很高；低的話也可以降到10~100因為處理的內容相對複雜。。 。</li>
</ul>
<p><strong>==&gt; 不好一概而論</strong></p>
<h2 id="資源"><a href="#資源" class="headerlink" title="資源"></a>資源</h2><ul>
<li>全網 500M網站</li>
</ul>
<h2 id="系統設計圖"><a href="#系統設計圖" class="headerlink" title="系統設計圖"></a>系統設計圖</h2><h3 id="編制索引-amp-查詢索引"><a href="#編制索引-amp-查詢索引" class="headerlink" title="編制索引 &amp; 查詢索引"></a>編制索引 &amp; 查詢索引</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">	H(HTML Store) --&gt; Indexer --&gt; IndexStore[Index Store]</span><br><span class="line">	User(User) --&gt; QueryProcessor[Query Processor] --&gt; IndexStore</span><br></pre></td></tr></table></figure>

<ul>
<li>例子: New York 是 連著的詞組，用戶是不會想拿 New或York單獨自己的東西</li>
</ul>
<h2 id="Indexer"><a href="#Indexer" class="headerlink" title="Indexer"></a>Indexer</h2><h4 id="Mapper-–-給蒐"><a href="#Mapper-–-給蒐" class="headerlink" title="Mapper – 給蒐"></a>Mapper – 給蒐</h4><p>tokenization &amp; stemming </p>
<h4 id="Reducer-–-拉出一串蕉"><a href="#Reducer-–-拉出一串蕉" class="headerlink" title="Reducer – 拉出一串蕉"></a>Reducer – 拉出一串蕉</h4><p>Sort()是為了讓在找交集時的算法表現比較好</p>
<h3 id="Inverted-Index"><a href="#Inverted-Index" class="headerlink" title="Inverted Index"></a>Inverted Index</h3><h5 id="Posting-List"><a href="#Posting-List" class="headerlink" title="Posting List"></a>Posting List</h5><ul>
<li><p>存pos的原因: 詞組 </p>
</li>
<li><p>page ranking不考慮:還得考慮是不是大網站，詞頻是否高這類的，所以在posting list中不考慮</p>
</li>
</ul>
<h3 id="MapReduce"><a href="#MapReduce" class="headerlink" title="MapReduce"></a>MapReduce</h3><p>製作詞頻是經典例子 by DFS</p>
<p>找詞頻也是一樣</p>
<p>master即使down了，也可以透過execution log on GFS recovery回來</p>
<p>User Program不是個服務，就只是deploy上去worker運行而已</p>
<p>執行一部份的task，然後master動態調整兩邊的worker工作能平衡</p>
<p>一個word一個reducer，但一段range是可以分配出去的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Pseudo-code for &quot;inverted index&quot;</span><br></pre></td></tr></table></figure>



<h2 id="Q1-不能直接作inverted-index"><a href="#Q1-不能直接作inverted-index" class="headerlink" title="Q1 不能直接作inverted index"></a>Q1 不能直接作inverted index</h2><ul>
<li>標點、時態、詞性、大小寫、同義詞、帶標點的詞(e.g. o’clock)、詞組(new york)、姓名、mail、stop words。</li>
<li>第二句第一個字跟第一句的尾字被接在一起了…</li>
<li></li>
</ul>
<p>太常見的，就去除，不要占posting list 空間</p>
<p>所以</p>
<ul>
<li>Tokenization</li>
<li>Normalization</li>
<li>Stemming &amp; </li>
</ul>
<h2 id="Q2-多個單詞的搜索"><a href="#Q2-多個單詞的搜索" class="headerlink" title="Q2 多個單詞的搜索?"></a>Q2 多個單詞的搜索?</h2><p>posting list 找交集</p>
<h2 id="Q3-索引實現連續的詞組搜索"><a href="#Q3-索引實現連續的詞組搜索" class="headerlink" title="Q3 索引實現連續的詞組搜索"></a>Q3 索引實現連續的詞組搜索</h2><ul>
<li>posting list放入 pos info</li>
<li>當然有些exception: N<ul>
<li>特定詞作整體index: ew York、Dr. Who</li>
</ul>
</li>
</ul>
<h2 id="Index-Store"><a href="#Index-Store" class="headerlink" title="Index Store"></a>Index Store</h2><ul>
<li>Partition – Document based or Term based?</li>
</ul>
<h2 id="Q4-Posting-Lit-Term-based-or-Document-based-partition"><a href="#Q4-Posting-Lit-Term-based-or-Document-based-partition" class="headerlink" title="Q4 Posting Lit: Term-based or Document-based partition?"></a>Q4 Posting Lit: Term-based or Document-based partition?</h2><ul>
<li><p>Doc: posting lits are smaller, intersections are ok on one partition</p>
</li>
<li><p>Term: only a subset of machine are used for each query</p>
</li>
</ul>
<h2 id="Q5-Posting-List是在RAM還是在-Hard-Disk"><a href="#Q5-Posting-List是在RAM還是在-Hard-Disk" class="headerlink" title="Q5 Posting List是在RAM還是在 Hard Disk?"></a>Q5 Posting List是在RAM還是在 Hard Disk?</h2><ul>
<li>常用的放 RAM</li>
</ul>
<p>RAM為主(Document-partitioned) + Disk為輔(Term-partitioned)</p>
<blockquote>
<p>2-gram不對任意做，只對特定做</p>
<p>Document-based 更平衡些</p>
<p>Doc-based serach: 去所有機器找 word，然後合併</p>
</blockquote>
<h3 id="Posting-List-排序方案"><a href="#Posting-List-排序方案" class="headerlink" title="Posting List 排序方案"></a>Posting List 排序方案</h3><ul>
<li>Doc ID</li>
<li>Term Freq –&gt; </li>
<li>Impact</li>
</ul>
<p>後兩者難再找交集，ID就不是從小到大了，就一會大一會小，就不能在O(N)時間找到他們的交集了；但仍認為是個優化? –&gt; 是在Document based上額外再做一份，當把範圍控得比較小，時間還是可以bounded，然後相關性也是可以增加的，就是不返回</p>
<h2 id="索引更新"><a href="#索引更新" class="headerlink" title="索引更新"></a>索引更新</h2><h3 id="Data-structure"><a href="#Data-structure" class="headerlink" title="Data structure?"></a>Data structure?</h3><h4 id="RAM"><a href="#RAM" class="headerlink" title="RAM"></a>RAM</h4><ol>
<li>Singly Linked List</li>
<li>Variable Length Array (自動擴容) 省pointer 空間</li>
<li>Linked-List of Fixed-size Array (插得快，pointer也不會用得特別多)</li>
</ol>
<h4 id="HD"><a href="#HD" class="headerlink" title="HD"></a>HD</h4><p>Doc Gap : 只紀錄 △</p>
<p>Variable Byte Encoding </p>
<h2 id="硬盤索引更新模式"><a href="#硬盤索引更新模式" class="headerlink" title="硬盤索引更新模式"></a>硬盤索引更新模式</h2><ul>
<li>Rebuild – 出來的效果就是一塊就能拿到，但每次都從0開始去重編，遇到整個internet時工作量過大</li>
<li><strong>間斷合併 Intermittent Merge</strong> – 把一部份寫在ram，要滿時，就跟舊的合併，合併時會找塊連續的空間，然後就保證一次的disk seek，就是一斷時間再寫</li>
<li>Incremental update – 一有機會時，就是用戶返回時，或網站變化時，看情況更新，但可能更新hd的頻率過高，不如intermittent省工作量並省disk seek次數</li>
</ul>
<h2 id="查詢模式"><a href="#查詢模式" class="headerlink" title="查詢模式"></a>查詢模式</h2><ul>
<li>單一關鍵詞<ul>
<li>看LRU Cache</li>
<li>內存索引先找如果足夠多，就先返回了<ol>
<li>智慧排序 posting list</li>
<li>Doc ID 排序 positng list</li>
</ol>
</li>
<li>HD 索引<ol>
<li>ram中尚未合併的索引</li>
<li>智慧排序的posing list</li>
<li>Doc ID 排序的posting list</li>
</ol>
</li>
</ul>
</li>
<li>多個關鍵詞 (AND、OR) apple and iPhone</li>
<li>關鍵詞詞組 “New York”, “Doctor Who”, 拿兩個posting list比較position這類</li>
</ul>
<h2 id="Q6-多個關鍵詞search-AND使用什麼算法"><a href="#Q6-多個關鍵詞search-AND使用什麼算法" class="headerlink" title="Q6 多個關鍵詞search AND使用什麼算法?"></a>Q6 多個關鍵詞search AND使用什麼算法?</h2><ul>
<li>two pointer</li>
<li><strong>skip list</strong> –&gt; 低於 O(N) 完成<ul>
<li>可以時不時查看更遠的是產生在最後的表中</li>
<li>eg 跳一次後，發現新的index比表裡的index還要小，那就說明之前跳的是不用看的 –&gt; 我覺得應該是大</li>
</ul>
</li>
</ul>
<h2 id="Index-DB"><a href="#Index-DB" class="headerlink" title="Index DB"></a>Index DB</h2><p>Redis: key –&gt; Array</p>
<h4 id="RAM-plan"><a href="#RAM-plan" class="headerlink" title="RAM plan:"></a>RAM plan:</h4><p>Redis-like solution: insert不好，後面大家要移；</p>
<h3 id="HD-1"><a href="#HD-1" class="headerlink" title="HD"></a>HD</h3><p>BigTable        # TODO!</p>
<blockquote>
<p>memtable就像是一个对于DB的write-back cache</p>
</blockquote>
<h2 id="APIs"><a href="#APIs" class="headerlink" title="APIs"></a>APIs</h2><h4 id="查詢請求"><a href="#查詢請求" class="headerlink" title="查詢請求"></a>查詢請求</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Request</span><br><span class="line">GET</span><br><span class="line">&#x2F;api&#x2F;v1&#x2F;</span><br></pre></td></tr></table></figure>



<h2 id="擴展性"><a href="#擴展性" class="headerlink" title="擴展性"></a>擴展性</h2><p>服務器 – 1 MapReduce</p>
<p>存儲 – BigTable, Cache, Document-based Partition (&amp; Term-based partition)</p>
<h2 id="容災"><a href="#容災" class="headerlink" title="容災"></a>容災</h2><ul>
<li>服務器 – MapReduce Persistency<ul>
<li>Master、work都可fail，透過gfs裡的intermittent log file找回</li>
</ul>
</li>
</ul>
<h2 id="監控警報"><a href="#監控警報" class="headerlink" title="監控警報"></a>監控警報</h2><ul>
<li>Mapper/Reducer Ratio</li>
<li>Index Freshness</li>
<li>DB Load</li>
<li>Cache Hit Rate</li>
</ul>
<h2 id="Twitter-Hashtag-Search-VS-Google-Search"><a href="#Twitter-Hashtag-Search-VS-Google-Search" class="headerlink" title="Twitter Hashtag Search VS Google Search"></a>Twitter Hashtag Search VS Google Search</h2><table>
<thead>
<tr>
<th></th>
<th>hashtag search</th>
<th>G-Search</th>
</tr>
</thead>
<tbody><tr>
<td>Inverted-Index</td>
<td>only hashtagh (structured)</td>
<td>extract all article’s words</td>
</tr>
<tr>
<td>Storage</td>
<td>RAM</td>
<td>RAM + HD</td>
</tr>
<tr>
<td>Sorting factors</td>
<td>Author + retweet</td>
<td>N/A</td>
</tr>
</tbody></table>
<h2 id="Yelp-Search-VS-Google-Search"><a href="#Yelp-Search-VS-Google-Search" class="headerlink" title="Yelp Search VS Google Search"></a>Yelp Search VS Google Search</h2><table>
<thead>
<tr>
<th></th>
<th>Yelp Search</th>
<th>G-Search</th>
</tr>
</thead>
<tbody><tr>
<td>User input</td>
<td>Geo position + Filter(小孩、停車) + 關鍵詞(Asian Noodle)</td>
<td>關鍵詞</td>
</tr>
</tbody></table>
<h1 id="RESTful-API"><a href="#RESTful-API" class="headerlink" title="RESTful API"></a>RESTful API</h1><p><strong><em>REpresentational State Transfer</em></strong></p>
<ol>
<li>Stateless – 服務器不需要知道我之前問過什麼問題，每次的rest api call都是個單獨的call</li>
<li>Uniform Interface<ol>
<li><strong>資源為核心</strong> – get是get user、resource，往往是用個<strong>名詞 而不是動詞</strong>表述get和post的目標</li>
<li>資源的表現形式 – 可以支持返回的內容是個 json、xml、txt…etc</li>
<li>descriptive info – API call要告訴user how to user this API. when user uses wrong, should be in “help” for User Error</li>
<li>允許返回 link –&gt; 讓user 進一步發送request</li>
</ol>
</li>
</ol>
<h5 id="以資源為核心"><a href="#以資源為核心" class="headerlink" title="以資源為核心"></a>以資源為核心</h5><p> GET /user/123</p>
<h2 id="HTTP-Method"><a href="#HTTP-Method" class="headerlink" title="HTTP Method"></a>HTTP Method</h2><p>GET, POST, PUT, DELETE</p>
<h3 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h3><p>HTTP GET <a href="http://www.appdomain.com/users" target="_blank" rel="noopener">http://www.appdomain.com/users</a></p>
<h5 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h5><p>400 Bad Request</p>
<p>404 Not Found</p>
<h3 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h3><h5 id="NOT-Idempotent-–-gt-call多次新增多個資源"><a href="#NOT-Idempotent-–-gt-call多次新增多個資源" class="headerlink" title="NOT Idempotent –&gt; call多次新增多個資源"></a><strong>NOT Idempotent</strong> –&gt; call多次新增多個資源</h5><p>HTTP POST <a href="http://www.appdomain.com/users" target="_blank" rel="noopener">http://www.appdomain.com/users</a></p>
<p>HTTP POST <a href="http://www.appdomain.com/users/123/accounts" target="_blank" rel="noopener">http://www.appdomain.com/users/123/accounts</a></p>
<h5 id="Response-1"><a href="#Response-1" class="headerlink" title="Response"></a>Response</h5><p>201 Created</p>
<p>200 OK</p>
<p>204 No Content – 不该返回 該返回200</p>
<h3 id="PUT"><a href="#PUT" class="headerlink" title="PUT"></a>PUT</h3><p><strong>Idempotent</strong> </p>
<h5 id="Response-2"><a href="#Response-2" class="headerlink" title="Response"></a>Response</h5><p>Same as POST’s</p>
<h3 id="DELETE"><a href="#DELETE" class="headerlink" title="DELETE"></a>DELETE</h3><h4 id=""><a href="#" class="headerlink" title=""></a></h4><h2 id="Q8-對於資源-users-or-user"><a href="#Q8-對於資源-users-or-user" class="headerlink" title="Q8 對於資源 /users or /user"></a>Q8 對於資源 /users or /user</h2><h2 id="Q9-users-id-email-or-email"><a href="#Q9-users-id-email-or-email" class="headerlink" title="Q9 /users/:id/email or /email"></a>Q9 /users/:id/email or /email</h2><p>email可以獨立user去存在嗎？不行! 所以該前者</p>
<h2 id="Q10"><a href="#Q10" class="headerlink" title="Q10"></a>Q10</h2><p>// TODO</p>
<h2 id="Q11"><a href="#Q11" class="headerlink" title="Q11"></a>Q11</h2><p>// TODO</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/01/15/System-Design/ACE/2021-01-16%204%20Search/">System-Design/ACE/2021-01-16 4 Search</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-01-15</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/SystemDesign/">SystemDesign</a></span><div class="content"><h1 id="Crawl"><a href="#Crawl" class="headerlink" title="Crawl"></a>Crawl</h1><h2 id=""><a href="#" class="headerlink" title=""></a></h2><h2 id="1-2-Req"><a href="#1-2-Req" class="headerlink" title="1.2 Req"></a>1.2 Req</h2><p>|      | Fn Req: crawl all web (for google search)    |<br>|      | Non Fn Req: high extension – support 全網爬 |<br>|      |                                              |</p>
<table>
<thead>
<tr>
<th>Fn Req</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>Non-Fn Requirement</td>
<td>high extension – support 全網爬<br />核心網站要專高效爬取，避免反覆爬相同內容，如動態生出來時<br />高可用，避免死循環或crawl trap<br /></td>
</tr>
<tr>
<td>Non Requirement</td>
<td></td>
</tr>
</tbody></table>
<p>Non-Fn Req多了politeness</p>
<h4 id="Q-瓶頸-–-gt-QPS"><a href="#Q-瓶頸-–-gt-QPS" class="headerlink" title="Q: 瓶頸? –&gt; QPS"></a>Q: 瓶頸? –&gt; QPS</h4><h4 id="Q3-如何實現優先級"><a href="#Q3-如何實現優先級" class="headerlink" title="Q3: 如何實現優先級?"></a>Q3: 如何實現優先級?</h4><p>A: Heap, PQueue</p>
<h4 id="Q4-怎控制爬取同一個網站的freq"><a href="#Q4-怎控制爬取同一個網站的freq" class="headerlink" title="Q4: 怎控制爬取同一個網站的freq?"></a>Q4: 怎控制爬取同一個網站的freq?</h4><p>總不狂轟爛炸爆它吧…</p>
<p>A: Single Host Queue, 同一個domain，和別的網站的是分開的, </p>
<h3 id="URL-Frontier-Design"><a href="#URL-Frontier-Design" class="headerlink" title="URL Frontier Design"></a>URL Frontier Design</h3><p>URL可是從parser來，裡面找到很多的網址，發到了prioritizer，給後端的fetcher跟render</p>
<p>Prioritizer會給每個url打個分，基本先取加上ε隨機性 – 在front queue selector。</p>
<p>back queue是同個domain的，如wikipedia，根據politeness</p>
<h4 id="Q5-有數萬個Single-Host-Queue，怎麼在低於O-N-下找到符合頻率要求的網址"><a href="#Q5-有數萬個Single-Host-Queue，怎麼在低於O-N-下找到符合頻率要求的網址" class="headerlink" title="Q5: 有數萬個Single Host Queue，怎麼在低於O(N)下找到符合頻率要求的網址?"></a>Q5: 有數萬個Single Host Queue，怎麼在低於O(N)下找到符合頻率要求的網址?</h4><p>A: Heap (current_ts + time_gap, queue_id)</p>
<p>爬完後，他知道下次是x秒後；用個 min-heap</p>
</div><hr></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/24/"><i class="fa fa-chevron-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><span class="page-number current">25</span><a class="page-number" href="/page/26/">26</a><span class="space">&hellip;</span><a class="page-number" href="/page/82/">82</a><a class="extend next" rel="next" href="/page/26/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2024 By Joe Huang</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>