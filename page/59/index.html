<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content=""><meta name="keywords" content=""><meta name="author" content="Joe Huang"><meta name="copyright" content="Joe Huang"><title>Awaken Desparado</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-180692466-1', 'auto');
ga('send', 'pageview');</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 4.2.1"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="false"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Joe Huang</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">386</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">26</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">66</span></a></div></div></div><nav class="no-bg" id="nav"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Awaken Desparado</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="site-info"><div id="site-title">Awaken Desparado</div><div id="site-sub-title"></div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2019/08/02/DevOps/2019-08-02-Docker-50/">DevOps/2019-08-02-Docker-50</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-08-02</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/DevOps/">DevOps</a></span><div class="content"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">40mins practices </span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# history</span><br><span class="line">    1  pwd</span><br><span class="line">    2  apt update</span><br><span class="line">    3  apt install docker</span><br><span class="line">    4  apt install docker.io</span><br><span class="line">    5  docker ps</span><br><span class="line">    6  history</span><br><span class="line">    7  docer version</span><br><span class="line">Axxx303j</span><br><span class="line">Detach: CtrlP -&gt; CtrlQ</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -it busybox sleep 10</span><br><span class="line">Unable to find image 'busybox:latest' locally</span><br><span class="line">latest: Pulling from library/busybox</span><br><span class="line">50783e0dfb64: Pull complete</span><br><span class="line">Digest: sha256:53ce9dbb39d7b1f422c137ae9fb81259816c23f556d622a39736ede882579b5d</span><br><span class="line">Status: Downloaded newer image for busybox:latest</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -it busybox sleep 5</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -it busybox sleep 5</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -it ubuntu bash</span><br><span class="line">Unable to find image 'ubuntu:latest' locally</span><br><span class="line">latest: Pulling from library/ubuntu</span><br><span class="line">405f018f9d1d: Pull complete</span><br><span class="line">Digest: sha256:b6b83d3c331794420340093eb706a6f152d9c1fa51b262d9bf34594887c2c7ac</span><br><span class="line">Status: Downloaded newer image for ubuntu:latest</span><br><span class="line">root@753141b94d75:/# hostname</span><br><span class="line">753141b94d75</span><br><span class="line">root@753141b94d75:/#</span><br></pre></td></tr></table></figure>



<h3 id="docker-exec"><a href="#docker-exec" class="headerlink" title="docker exec"></a>docker exec</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it xxxx bash</span><br></pre></td></tr></table></figure>



<h3 id="docker-network"><a href="#docker-network" class="headerlink" title="docker network"></a>docker network</h3><blockquote>
<p><strong>docker network ls</strong> command will list all the networks with network id</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network ls</span><br><span class="line">NETWORK ID     NAME      DRIVER    SCOPE</span><br><span class="line">8719d0b37317   bridge    bridge    local</span><br><span class="line">725e396ecad9   host      host      local</span><br><span class="line">a829f0fd4a99   none      null      local</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network create mynet</span><br><span class="line">37b855bf53deb61c3a70f2ec7642820bbb5b41ac8718894562c447108205af9c</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network ls</span><br><span class="line">NETWORK ID     NAME      DRIVER    SCOPE</span><br><span class="line">8719d0b37317   bridge    bridge    local</span><br><span class="line">725e396ecad9   host      host      local</span><br><span class="line">37b855bf53de   mynet     bridge    local</span><br><span class="line">a829f0fd4a99   none      null      local</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network rm 37b</span><br><span class="line">37b</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network ls</span><br><span class="line">NETWORK ID     NAME      DRIVER    SCOPE</span><br><span class="line">8719d0b37317   bridge    bridge    local</span><br><span class="line">725e396ecad9   host      host      local</span><br><span class="line">a829f0fd4a99   none      null      local</span><br></pre></td></tr></table></figure>



<h3 id="docker-Volume"><a href="#docker-Volume" class="headerlink" title="docker Volume"></a>docker Volume</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker volume ls</span><br><span class="line">DRIVER    VOLUME NAME</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker volume  create myvol</span><br><span class="line">myvol</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker volume ls</span><br><span class="line">DRIVER    VOLUME NAME</span><br><span class="line">local     myvol</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -itd -v myvol:/home ubuntu</span><br><span class="line">5c1703a73220b7c383a75aded1ba80d60c08562edd68a729474ae9aacefbff8b</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED         STATUS         PORTS     NAMES</span><br><span class="line">5c1703a73220   ubuntu    "bash"    8 seconds ago   Up 7 seconds             distracted_kowalevski</span><br><span class="line">6afbb3b42ffe   ubuntu    "bash"    9 minutes ago   Up 9 minutes             competent_archimedes</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker volume rm myvol</span><br><span class="line">Error response from daemon: remove myvol: volume is in use - [5c1703a73220b7c383a75aded1ba80d60c08562edd68a729474ae9aacefbff8b]</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker kill 5c1703a73220</span><br><span class="line">5c1703a73220</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED         STATUS         PORTS     NAMES</span><br><span class="line">6afbb3b42ffe   ubuntu    "bash"    9 minutes ago   Up 9 minutes             competent_archimedes</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND      CREATED          STATUS                        PORTS     NAMES</span><br><span class="line">5c1703a73220   ubuntu    "bash"       46 seconds ago   Exited (137) 10 seconds ago             distracted_kowalevski</span><br><span class="line">6afbb3b42ffe   ubuntu    "bash"       9 minutes ago    Up 9 minutes                            competent_archimedes</span><br><span class="line">7a2d98a947e5   ubuntu    "bash"       14 minutes ago   Exited (137) 10 minutes ago             hardcore_chatelet</span><br><span class="line">052d21d3ee5f   ubuntu    "bash"       14 minutes ago   Exited (0) 14 minutes ago               blissful_roentgen</span><br><span class="line">753141b94d75   ubuntu    "bash"       15 minutes ago   Exited (0) 14 minutes ago               quirky_noyce</span><br><span class="line">06dcacefd87a   busybox   "sleep 5"    15 minutes ago   Exited (0) 15 minutes ago               naughty_chaum</span><br><span class="line">c26d2c98b03b   busybox   "sleep 5"    16 minutes ago   Exited (0) 16 minutes ago               mystifying_fermi</span><br><span class="line">680256a46e0f   busybox   "sleep 10"   16 minutes ago   Exited (0) 16 minutes ago               zen_turing</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker rm 5c1703a73220</span><br><span class="line">5c1703a73220</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker volume rm myvol</span><br><span class="line">myvol</span><br></pre></td></tr></table></figure>



<h3 id="docker-rm-f"><a href="#docker-rm-f" class="headerlink" title="docker rm -f "></a>docker rm -f <container_id></h3><h3 id="docker-cp"><a href="#docker-cp" class="headerlink" title="docker cp"></a>docker cp</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# touch dummy.txt</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -itd ubuntu</span><br><span class="line">b3eedf250d85b8132345f9370ce9c4bbc1e656af364312c3370ae08c0ba35173</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED          STATUS         PORTS     NAMES</span><br><span class="line">b3eedf250d85   ubuntu    "bash"    10 seconds ago   Up 9 seconds             suspicious_antonelli</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker cp dummy.txt b3e:/root/</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker exec -it b3e</span><br><span class="line">"docker exec" requires at least 2 arguments.</span><br><span class="line">See 'docker exec --help'.</span><br><span class="line"></span><br><span class="line">Usage:  docker exec [OPTIONS] CONTAINER COMMAND [ARG...]</span><br><span class="line"></span><br><span class="line">Run a command in a running container</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker exec -it b3e bash</span><br><span class="line">root@b3eedf250d85:/# ls -l /root</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r-- 1 root root 0 Aug  2 07:13 dummy.txt</span><br><span class="line">root@b3eedf250d85:/#</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker cp b3e:/var/log/bootstrap.log ./</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# vi bootstrap.log</span><br></pre></td></tr></table></figure>



<h3 id="docker-exec-1"><a href="#docker-exec-1" class="headerlink" title="docker exec"></a>docker exec</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker exec -d b3e touch /root/test.txt</span><br></pre></td></tr></table></figure>



<h3 id="docker-inspect"><a href="#docker-inspect" class="headerlink" title="docker inspect"></a>docker inspect</h3><ol>
<li><container_id></li>
<li><image_name>

</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker inspect ubuntu</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        "Id": "sha256:27941809078cc9b2802deb2b0bb6feed6c236cde01e487f200e24653533701ee",</span><br><span class="line">        "RepoTags": [</span><br><span class="line">            "ubuntu:latest"</span><br><span class="line">        ],</span><br><span class="line">        "RepoDigests": [</span><br><span class="line">            "ubuntu@sha256:b6b83d3c331794420340093eb706a6f152d9c1fa51b262d9bf34594887c2c7ac"</span><br><span class="line">        ],</span><br><span class="line">        "Parent": "",</span><br><span class="line">        "Comment": "",</span><br><span class="line">        "Created": "2022-06-06T22:21:26.309275979Z",</span><br><span class="line">        "Container": "9d10d71fc8cc81806d2fd79443b0cb3d3fac07aee4fd4e2164d8959fd620ba7e",</span><br><span class="line">        "ContainerConfig": &#123;</span><br><span class="line">            "Hostname": "9d10d71fc8cc",</span><br><span class="line">            "Domainname": "",</span><br><span class="line">            "User": "",</span><br><span class="line">            "AttachStdin": false,</span><br><span class="line">            "AttachStdout": false,</span><br><span class="line">            "AttachStderr": false,</span><br><span class="line">            "Tty": false,</span><br><span class="line">            "OpenStdin": false,</span><br><span class="line">            "StdinOnce": false,</span><br><span class="line">            "Env": [</span><br><span class="line">                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"</span><br><span class="line">            ],</span><br><span class="line">            "Cmd": [</span><br><span class="line">                "/bin/sh",</span><br><span class="line">                "-c",</span><br><span class="line">                "#(nop) ",</span><br><span class="line">                "CMD [\"bash\"]"</span><br><span class="line">            ],</span><br><span class="line">            "Image": "sha256:77be170d4f899ace0ee153facbd195111feabb489dd11cbcdce1f9652fd5befa",</span><br><span class="line">            "Volumes": null,</span><br><span class="line">            "WorkingDir": "",</span><br><span class="line">            "Entrypoint": null,</span><br><span class="line">            "OnBuild": null,</span><br><span class="line">            "Labels": &#123;&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        "DockerVersion": "20.10.12",</span><br><span class="line">        "Author": "",</span><br><span class="line">        "Config": &#123;</span><br><span class="line">            "Hostname": "",</span><br><span class="line">            "Domainname": "",</span><br><span class="line">            "User": "",</span><br><span class="line">            "AttachStdin": false,</span><br><span class="line">            "AttachStdout": false,</span><br><span class="line">            "AttachStderr": false,</span><br><span class="line">            "Tty": false,</span><br><span class="line">            "OpenStdin": false,</span><br><span class="line">            "StdinOnce": false,</span><br><span class="line">            "Env": [</span><br><span class="line">                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"</span><br><span class="line">            ],</span><br><span class="line">            "Cmd": [</span><br><span class="line">                "bash"</span><br><span class="line">            ],</span><br><span class="line">            "Image": "sha256:77be170d4f899ace0ee153facbd195111feabb489dd11cbcdce1f9652fd5befa",</span><br><span class="line">            "Volumes": null,</span><br><span class="line">            "WorkingDir": "",</span><br><span class="line">            "Entrypoint": null,</span><br><span class="line">            "OnBuild": null,</span><br><span class="line">            "Labels": null</span><br><span class="line">        &#125;,</span><br><span class="line">        "Architecture": "amd64",</span><br><span class="line">        "Os": "linux",</span><br><span class="line">        "Size": 77819423,</span><br><span class="line">        "VirtualSize": 77819423,</span><br><span class="line">        "GraphDriver": &#123;</span><br><span class="line">            "Data": &#123;</span><br><span class="line">                "MergedDir": "/var/lib/docker/overlay2/90eeb24f7634763672e8b3ed2df632fd67522b7bb7d311886e1835c2ab959f96/merged",</span><br><span class="line">                "UpperDir": "/var/lib/docker/overlay2/90eeb24f7634763672e8b3ed2df632fd67522b7bb7d311886e1835c2ab959f96/diff",</span><br><span class="line">                "WorkDir": "/var/lib/docker/overlay2/90eeb24f7634763672e8b3ed2df632fd67522b7bb7d311886e1835c2ab959f96/work"</span><br><span class="line">            &#125;,</span><br><span class="line">            "Name": "overlay2"</span><br><span class="line">        &#125;,</span><br><span class="line">        "RootFS": &#123;</span><br><span class="line">            "Type": "layers",</span><br><span class="line">            "Layers": [</span><br><span class="line">                "sha256:a790f937a6aea2600982de54a5fb995c681dd74f26968d6b74286e06839e4fb3"</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        "Metadata": &#123;</span><br><span class="line">            "LastTagTime": "0001-01-01T00:00:00Z"</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>



<h3 id="docker-logs"><a href="#docker-logs" class="headerlink" title="docker logs"></a>docker logs</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker logs 1fdce2600057</span><br><span class="line">/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration</span><br><span class="line">/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/</span><br><span class="line">/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh</span><br><span class="line">10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf</span><br><span class="line">10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf</span><br><span class="line">/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh</span><br><span class="line">/docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh</span><br><span class="line">/docker-entrypoint.sh: Configuration complete; ready for start up</span><br><span class="line">2022/08/02 07:22:47 [notice] 1#1: using the "epoll" event method</span><br><span class="line">2022/08/02 07:22:47 [notice] 1#1: nginx/1.23.1</span><br><span class="line">2022/08/02 07:22:47 [notice] 1#1: built by gcc 10.2.1 20210110 (Debian 10.2.1-6)</span><br><span class="line">2022/08/02 07:22:47 [notice] 1#1: OS: Linux 5.15.0-41-generic</span><br><span class="line">2022/08/02 07:22:47 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576</span><br><span class="line">2022/08/02 07:22:47 [notice] 1#1: start worker processes</span><br><span class="line">2022/08/02 07:22:47 [notice] 1#1: start worker process 31</span><br></pre></td></tr></table></figure>



<h3 id="docker-kill-amp-docker-stop"><a href="#docker-kill-amp-docker-stop" class="headerlink" title="docker kill &amp; docker stop"></a>docker kill &amp; docker stop</h3><h3 id="docker-save-amp-docker-load"><a href="#docker-save-amp-docker-load" class="headerlink" title="docker save &amp; docker load"></a>docker save &amp; docker load</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ot@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker pull httpd</span><br><span class="line">Using default tag: latest</span><br><span class="line">docker save httplatest: Pulling from library/httpd</span><br><span class="line">1efc276f4ff9: Pull complete</span><br><span class="line">aed046121ed8: Pull complete</span><br><span class="line">4340e7be3d7f: Pull complete</span><br><span class="line">80e368ef21fc: Pull complete</span><br><span class="line">80cb79a80bbe: Pull complete</span><br><span class="line">Digest: sha256:6336eb9c57992d3516c34809a652405d1961945171b778de252f14013e4c550d</span><br><span class="line">Status: Downloaded newer image for httpd:latest</span><br><span class="line">docker.io/library/httpd:latest</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker save httpd &gt; httpd.tar</span><br><span class="line"></span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker image load &lt; httpd.tar</span><br><span class="line">Loaded image: httpd:latest</span><br></pre></td></tr></table></figure>



<h3 id="docker-stat"><a href="#docker-stat" class="headerlink" title="docker stat"></a>docker stat</h3><h3 id="docker-top"><a href="#docker-top" class="headerlink" title="docker top"></a>docker top</h3><h3 id="docker-restart"><a href="#docker-restart" class="headerlink" title="docker restart"></a>docker restart</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -itd nginx</span><br><span class="line">e9a702ba20b6c3897cd4e236bc04e72b0935c128b9ede042569e05b9b690c429</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS         PORTS     NAMES</span><br><span class="line">e9a702ba20b6   nginx     "/docker-entrypoint.…"   10 seconds ago   Up 9 seconds   80/tcp    epic_cray</span><br><span class="line">b3eedf250d85   ubuntu    "bash"                   3 hours ago      Up 3 hours               suspicious_antonelli</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker restart e9a</span><br><span class="line">e9a</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS         PORTS     NAMES</span><br><span class="line">e9a702ba20b6   nginx     "/docker-entrypoint.…"   23 seconds ago   Up 3 seconds   80/tcp    epic_cray</span><br><span class="line">b3eedf250d85   ubuntu    "bash"                   3 hours ago      Up 3 hours               suspicious_antonelli</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~#</span><br></pre></td></tr></table></figure>



<h3 id="docker-rename"><a href="#docker-rename" class="headerlink" title="docker rename"></a>docker rename</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">oot@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker rename e9a my_nginx</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED              STATUS          PORTS     NAMES</span><br><span class="line">e9a702ba20b6   nginx     "/docker-entrypoint.…"   About a minute ago   Up 47 seconds   80/tcp    my_nginx</span><br><span class="line">b3eedf250d85   ubuntu    "bash"                   3 hours ago          Up 3 hours                suspicious_antonelli</span><br></pre></td></tr></table></figure>



<h3 id="★docker-expose-port"><a href="#★docker-expose-port" class="headerlink" title="★docker - expose port"></a>★docker - expose port</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -itd nginx</span><br><span class="line">0a5a17ff7d7ff49a6c3a6fae0fc5c1ef6a8a7586381a2a8ed1c310d3c7c158ce</span><br><span class="line">droot@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS                  PORTS     NAMES</span><br><span class="line">0a5a17ff7d7f   nginx     "/docker-entrypoint.…"   2 seconds ago   Up Less than a second   80/tcp    tender_heyrovsky</span><br><span class="line">e9a702ba20b6   nginx     "/docker-entrypoint.…"   2 minutes ago   Up 2 minutes            80/tcp    my_nginx</span><br><span class="line">b3eedf250d85   ubuntu    "bash"                   3 hours ago     Up 3 hours                        suspicious_antonelli</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker expost 80 0a5</span><br><span class="line">docker: 'expost' is not a docker command.</span><br><span class="line">See 'docker --help'</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker expose 80 0a5</span><br><span class="line">docker: 'expose' is not a docker command.</span><br><span class="line">See 'docker --help'</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -itd -p 80:80 nginx</span><br><span class="line">5140dc7221f7bf524e85057ff12d6dcf3b9f1c3f552012e42859c281c8aac413</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                               NAMES</span><br><span class="line">5140dc7221f7   nginx     "/docker-entrypoint.…"   3 seconds ago   Up 2 seconds   0.0.0.0:80-&gt;80/tcp, :::80-&gt;80/tcp   hardcore_chaum</span><br><span class="line">0a5a17ff7d7f   nginx     "/docker-entrypoint.…"   4 minutes ago   Up 4 minutes   80/tcp                              tender_heyrovsky</span><br><span class="line">e9a702ba20b6   nginx     "/docker-entrypoint.…"   7 minutes ago   Up 6 minutes   80/tcp                              my_nginx</span><br><span class="line">b3eedf250d85   ubuntu    "bash"                   3 hours ago     Up 3 hours                                         suspicious_antonelli</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~#</span><br></pre></td></tr></table></figure>

<img src="/Users/joe/Library/Application Support/typora-user-images/image-20220802180001723.png" alt="image-20220802180001723" style="zoom:25%;" />



<h1 id="Docker-Images"><a href="#Docker-Images" class="headerlink" title="Docker Images"></a>Docker Images</h1><h3 id="docker-image-prune"><a href="#docker-image-prune" class="headerlink" title="docker image prune"></a>docker image prune</h3><blockquote>
<p><strong>docker image prune</strong> will remove all unused images from your machine</p>
</blockquote>
<h3 id="docker-history"><a href="#docker-history" class="headerlink" title="docker history"></a>docker history</h3><blockquote>
<p>docker history image_name will print the history related to that image</p>
</blockquote>
<h3 id="★docker-commit"><a href="#★docker-commit" class="headerlink" title="★docker commit"></a>★docker commit</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -itd ubuntu</span><br><span class="line">41a10cc1b7bc85232fe5f519c4db07c5f1b9d6924a1e6ae6616f4e9ae543c97c</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS                               NAMES</span><br><span class="line">41a10cc1b7bc   ubuntu    "bash"                   5 seconds ago    Up 3 seconds                                        keen_fermi</span><br><span class="line">5140dc7221f7   nginx     "/docker-entrypoint.…"   13 minutes ago   Up 13 minutes   0.0.0.0:80-&gt;80/tcp, :::80-&gt;80/tcp   hardcore_chaum</span><br><span class="line">0a5a17ff7d7f   nginx     "/docker-entrypoint.…"   17 minutes ago   Up 17 minutes   80/tcp                              tender_heyrovsky</span><br><span class="line">e9a702ba20b6   nginx     "/docker-entrypoint.…"   20 minutes ago   Up 19 minutes   80/tcp                              my_nginx</span><br><span class="line">b3eedf250d85   ubuntu    "bash"                   3 hours ago      Up 3 hours                                          suspicious_antonelli</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker exec -it 41a bash</span><br><span class="line">root@41a10cc1b7bc:/# apt update</span><br><span class="line">Get:1 http://security.ubuntu.com/ubuntu jammy-security InRelease [110 kB]</span><br><span class="line">Get:2 http://archive.ubuntu.com/ubuntu jammy InRelease [270 kB]</span><br><span class="line">Get:3 http://security.ubuntu.com/ubuntu jammy-security/universe amd64 Packages [119 kB]</span><br><span class="line">Get:4 http://archive.ubuntu.com/ubuntu jammy-updates InRelease [114 kB]</span><br><span class="line">Get:5 http://security.ubuntu.com/ubuntu jammy-security/restricted amd64 Packages [275 kB]</span><br><span class="line">Get:6 http://archive.ubuntu.com/ubuntu jammy-backports InRelease [99.8 kB]</span><br><span class="line">Get:7 http://security.ubuntu.com/ubuntu jammy-security/multiverse amd64 Packages [4648 B]</span><br><span class="line">Get:8 http://security.ubuntu.com/ubuntu jammy-security/main amd64 Packages [303 kB]</span><br><span class="line">Get:9 http://archive.ubuntu.com/ubuntu jammy/universe amd64 Packages [17.5 MB]</span><br><span class="line">Get:10 http://archive.ubuntu.com/ubuntu jammy/main amd64 Packages [1792 kB]</span><br><span class="line">Get:11 http://archive.ubuntu.com/ubuntu jammy/multiverse amd64 Packages [266 kB]</span><br><span class="line">Get:12 http://archive.ubuntu.com/ubuntu jammy/restricted amd64 Packages [164 kB]</span><br><span class="line">Get:13 http://archive.ubuntu.com/ubuntu jammy-updates/restricted amd64 Packages [319 kB]</span><br><span class="line">Get:14 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 Packages [602 kB]</span><br><span class="line">Get:15 http://archive.ubuntu.com/ubuntu jammy-updates/multiverse amd64 Packages [7804 B]</span><br><span class="line">Get:16 http://archive.ubuntu.com/ubuntu jammy-updates/universe amd64 Packages [243 kB]</span><br><span class="line">Get:17 http://archive.ubuntu.com/ubuntu jammy-backports/universe amd64 Packages [5814 B]</span><br><span class="line">Fetched 22.2 MB in 6s (4006 kB/s)</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree... Done</span><br><span class="line">Reading state information... Done</span><br><span class="line">16 packages can be upgraded. Run 'apt list --upgradable' to see them.</span><br><span class="line">root@41a10cc1b7bc:/# apt install apache2</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree... Done</span><br><span class="line">Reading state information... Done</span><br><span class="line">The following additional packages will be installed:</span><br><span class="line">  apache2-bin apache2-data apache2-utils bzip2 ca-certificates file libapr1 libaprutil1 libaprutil1-dbd-sqlite3 libaprutil1-ldap libbrotli1</span><br><span class="line">  libcurl4 libexpat1 libgdbm-compat4 libgdbm6 libicu70 libjansson4 libldap-2.5-0 libldap-common liblua5.3-0 libmagic-mgc libmagic1</span><br><span class="line">  libnghttp2-14 libperl5.34 libpsl5 librtmp1 libsasl2-2 libsasl2-modules libsasl2-modules-db libsqlite3-0 libssh-4 libxml2 mailcap media-types</span><br><span class="line">  mime-support netbase openssl perl perl-modules-5.34 publicsuffix ssl-cert xz-utils</span><br><span class="line">Suggested packages:</span><br><span class="line">  apache2-doc apache2-suexec-pristine | apache2-suexec-custom www-browser ufw bzip2-doc gdbm-l10n libsasl2-modules-gssapi-mit</span><br><span class="line">  | libsasl2-modules-gssapi-heimdal libsasl2-modules-ldap libsasl2-modules-otp libsasl2-modules-sql perl-doc libterm-readline-gnu-perl</span><br><span class="line">  | libterm-readline-perl-perl make libtap-harness-archive-perl</span><br><span class="line">The following NEW packages will be installed:</span><br><span class="line">  apache2 apache2-bin apache2-data apache2-utils bzip2 ca-certificates file libapr1 libaprutil1 libaprutil1-dbd-sqlite3 libaprutil1-ldap</span><br><span class="line">  libbrotli1 libcurl4 libexpat1 libgdbm-compat4 libgdbm6 libicu70 libjansson4 libldap-2.5-0 libldap-common liblua5.3-0 libmagic-mgc libmagic1</span><br><span class="line">  libnghttp2-14 libperl5.34 libpsl5 librtmp1 libsasl2-2 libsasl2-modules libsasl2-modules-db libsqlite3-0 libssh-4 libxml2 mailcap media-types</span><br><span class="line">  mime-support netbase openssl perl perl-modules-5.34 publicsuffix ssl-cert xz-utils</span><br><span class="line">0 upgraded, 43 newly installed, 0 to remove and 16 not upgraded.</span><br><span class="line">Need to get 25.6 MB of archives.</span><br><span class="line">After this operation, 111 MB of additional disk space will be used.</span><br><span class="line">Do you want to continue? [Y/n] Y</span><br><span class="line">Get:1 http://archive.ubuntu.com/ubuntu jammy/main amd64 perl-modules-5.34 all 5.34.0-3ubuntu1 [2975 kB]</span><br><span class="line">Get:2 http://archive.ubuntu.com/ubuntu jammy/main amd64 libgdbm6 amd64 1.23-1 [33.9 kB]</span><br><span class="line">Get:3 http://archive.ubuntu.com/ubuntu jammy/main amd64 libgdbm-compat4 amd64 1.23-1 [6606 B]</span><br><span class="line">Get:4 http://archive.ubuntu.com/ubuntu jammy/main amd64 libperl5.34 amd64 5.34.0-3ubuntu1 [4809 kB]</span><br><span class="line">Get:5 http://archive.ubuntu.com/ubuntu jammy/main amd64 perl amd64 5.34.0-3ubuntu1 [232 kB]</span><br><span class="line">Get:6 http://archive.ubuntu.com/ubuntu jammy/main amd64 libapr1 amd64 1.7.0-8build1 [107 kB]</span><br><span class="line">Get:7 http://archive.ubuntu.com/ubuntu jammy/main amd64 libexpat1 amd64 2.4.7-1 [90.7 kB]</span><br><span class="line">Get:8 http://archive.ubuntu.com/ubuntu jammy/main amd64 libaprutil1 amd64 1.6.1-5ubuntu4 [92.4 kB]</span><br><span class="line">Get:9 http://archive.ubuntu.com/ubuntu jammy/main amd64 libsqlite3-0 amd64 3.37.2-2 [643 kB]</span><br><span class="line">Get:10 http://archive.ubuntu.com/ubuntu jammy/main amd64 libaprutil1-dbd-sqlite3 amd64 1.6.1-5ubuntu4 [11.3 kB]</span><br><span class="line">Get:11 http://archive.ubuntu.com/ubuntu jammy/main amd64 libsasl2-modules-db amd64 2.1.27+dfsg2-3ubuntu1 [20.8 kB]</span><br><span class="line">Get:12 http://archive.ubuntu.com/ubuntu jammy/main amd64 libsasl2-2 amd64 2.1.27+dfsg2-3ubuntu1 [53.9 kB]</span><br><span class="line">Get:13 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libldap-2.5-0 amd64 2.5.12+dfsg-0ubuntu0.22.04.1 [184 kB]</span><br><span class="line">Get:14 http://archive.ubuntu.com/ubuntu jammy/main amd64 libaprutil1-ldap amd64 1.6.1-5ubuntu4 [9162 B]</span><br><span class="line">Get:15 http://archive.ubuntu.com/ubuntu jammy/main amd64 libbrotli1 amd64 1.0.9-2build6 [315 kB]</span><br><span class="line">Get:16 http://archive.ubuntu.com/ubuntu jammy/main amd64 libnghttp2-14 amd64 1.43.0-1build3 [76.3 kB]</span><br><span class="line">Get:17 http://archive.ubuntu.com/ubuntu jammy/main amd64 libpsl5 amd64 0.21.0-1.2build2 [58.4 kB]</span><br><span class="line">Get:18 http://archive.ubuntu.com/ubuntu jammy/main amd64 librtmp1 amd64 2.4+20151223.gitfa8646d.1-2build4 [58.2 kB]</span><br><span class="line">Get:19 http://archive.ubuntu.com/ubuntu jammy/main amd64 libssh-4 amd64 0.9.6-2build1 [184 kB]</span><br><span class="line">Get:20 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libcurl4 amd64 7.81.0-1ubuntu1.3 [290 kB]</span><br><span class="line">Get:21 http://archive.ubuntu.com/ubuntu jammy/main amd64 libjansson4 amd64 2.13.1-1.1build3 [32.4 kB]</span><br><span class="line">Get:22 http://archive.ubuntu.com/ubuntu jammy/main amd64 liblua5.3-0 amd64 5.3.6-1build1 [140 kB]</span><br><span class="line">Get:23 http://archive.ubuntu.com/ubuntu jammy/main amd64 libicu70 amd64 70.1-2 [10.6 MB]</span><br><span class="line">Get:24 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libxml2 amd64 2.9.13+dfsg-1ubuntu0.1 [763 kB]</span><br><span class="line">Get:25 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 apache2-bin amd64 2.4.52-1ubuntu4.1 [1347 kB]</span><br><span class="line">Get:26 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 apache2-data all 2.4.52-1ubuntu4.1 [165 kB]</span><br><span class="line">Get:27 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 apache2-utils amd64 2.4.52-1ubuntu4.1 [89.1 kB]</span><br><span class="line">Get:28 http://archive.ubuntu.com/ubuntu jammy/main amd64 media-types all 7.0.0 [25.5 kB]</span><br><span class="line">Get:29 http://archive.ubuntu.com/ubuntu jammy/main amd64 mailcap all 3.70+nmu1ubuntu1 [23.8 kB]</span><br><span class="line">Get:30 http://archive.ubuntu.com/ubuntu jammy/main amd64 mime-support all 3.66 [3696 B]</span><br><span class="line">Get:31 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 apache2 amd64 2.4.52-1ubuntu4.1 [97.8 kB]</span><br><span class="line">Get:32 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 openssl amd64 3.0.2-0ubuntu1.6 [1184 kB]</span><br><span class="line">Get:33 http://archive.ubuntu.com/ubuntu jammy/main amd64 ca-certificates all 20211016 [148 kB]</span><br><span class="line">Get:34 http://archive.ubuntu.com/ubuntu jammy/main amd64 netbase all 6.3 [12.9 kB]</span><br><span class="line">Get:35 http://archive.ubuntu.com/ubuntu jammy/main amd64 libmagic-mgc amd64 1:5.41-3 [257 kB]</span><br><span class="line">Get:36 http://archive.ubuntu.com/ubuntu jammy/main amd64 libmagic1 amd64 1:5.41-3 [87.2 kB]</span><br><span class="line">Get:37 http://archive.ubuntu.com/ubuntu jammy/main amd64 file amd64 1:5.41-3 [21.5 kB]</span><br><span class="line">Get:38 http://archive.ubuntu.com/ubuntu jammy/main amd64 publicsuffix all 20211207.1025-1 [129 kB]</span><br><span class="line">Get:39 http://archive.ubuntu.com/ubuntu jammy/main amd64 xz-utils amd64 5.2.5-2ubuntu1 [84.8 kB]</span><br><span class="line">Get:40 http://archive.ubuntu.com/ubuntu jammy/main amd64 bzip2 amd64 1.0.8-5build1 [34.8 kB]</span><br><span class="line">Get:41 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libldap-common all 2.5.12+dfsg-0ubuntu0.22.04.1 [16.4 kB]</span><br><span class="line">Get:42 http://archive.ubuntu.com/ubuntu jammy/main amd64 libsasl2-modules amd64 2.1.27+dfsg2-3ubuntu1 [57.5 kB]</span><br><span class="line">Get:43 http://archive.ubuntu.com/ubuntu jammy/main amd64 ssl-cert all 1.1.2 [17.4 kB]</span><br><span class="line">Fetched 25.6 MB in 5s (5294 kB/s)</span><br><span class="line">debconf: delaying package configuration, since apt-utils is not installed</span><br><span class="line">Selecting previously unselected package perl-modules-5.34.</span><br><span class="line">(Reading database ... 4395 files and directories currently installed.)</span><br><span class="line">Preparing to unpack .../00-perl-modules-5.34_5.34.0-3ubuntu1_all.deb ...</span><br><span class="line">Unpacking perl-modules-5.34 (5.34.0-3ubuntu1) ...</span><br><span class="line">Selecting previously unselected package libgdbm6:amd64.</span><br><span class="line">Preparing to unpack .../01-libgdbm6_1.23-1_amd64.deb ...</span><br><span class="line">Unpacking libgdbm6:amd64 (1.23-1) ...</span><br><span class="line">Selecting previously unselected package libgdbm-compat4:amd64.</span><br><span class="line">Preparing to unpack .../02-libgdbm-compat4_1.23-1_amd64.deb ...</span><br><span class="line">Unpacking libgdbm-compat4:amd64 (1.23-1) ...</span><br><span class="line">Selecting previously unselected package libperl5.34:amd64.</span><br><span class="line">Preparing to unpack .../03-libperl5.34_5.34.0-3ubuntu1_amd64.deb ...</span><br><span class="line">Unpacking libperl5.34:amd64 (5.34.0-3ubuntu1) ...</span><br><span class="line">Selecting previously unselected package perl.</span><br><span class="line">Preparing to unpack .../04-perl_5.34.0-3ubuntu1_amd64.deb ...</span><br><span class="line">Unpacking perl (5.34.0-3ubuntu1) ...</span><br><span class="line">Selecting previously unselected package libapr1:amd64.</span><br><span class="line">Preparing to unpack .../05-libapr1_1.7.0-8build1_amd64.deb ...</span><br><span class="line">Unpacking libapr1:amd64 (1.7.0-8build1) ...</span><br><span class="line">Selecting previously unselected package libexpat1:amd64.</span><br><span class="line">Preparing to unpack .../06-libexpat1_2.4.7-1_amd64.deb ...</span><br><span class="line">Unpacking libexpat1:amd64 (2.4.7-1) ...</span><br><span class="line">Selecting previously unselected package libaprutil1:amd64.</span><br><span class="line">Preparing to unpack .../07-libaprutil1_1.6.1-5ubuntu4_amd64.deb ...</span><br><span class="line">Unpacking libaprutil1:amd64 (1.6.1-5ubuntu4) ...</span><br><span class="line">Selecting previously unselected package libsqlite3-0:amd64.</span><br><span class="line">Preparing to unpack .../08-libsqlite3-0_3.37.2-2_amd64.deb ...</span><br><span class="line">Unpacking libsqlite3-0:amd64 (3.37.2-2) ...</span><br><span class="line">Selecting previously unselected package libaprutil1-dbd-sqlite3:amd64.</span><br><span class="line">Preparing to unpack .../09-libaprutil1-dbd-sqlite3_1.6.1-5ubuntu4_amd64.deb ...</span><br><span class="line">Unpacking libaprutil1-dbd-sqlite3:amd64 (1.6.1-5ubuntu4) ...</span><br><span class="line">Selecting previously unselected package libsasl2-modules-db:amd64.</span><br><span class="line">Preparing to unpack .../10-libsasl2-modules-db_2.1.27+dfsg2-3ubuntu1_amd64.deb ...</span><br><span class="line">Unpacking libsasl2-modules-db:amd64 (2.1.27+dfsg2-3ubuntu1) ...</span><br><span class="line">Selecting previously unselected package libsasl2-2:amd64.</span><br><span class="line">Preparing to unpack .../11-libsasl2-2_2.1.27+dfsg2-3ubuntu1_amd64.deb ...</span><br><span class="line">Unpacking libsasl2-2:amd64 (2.1.27+dfsg2-3ubuntu1) ...</span><br><span class="line">Selecting previously unselected package libldap-2.5-0:amd64.</span><br><span class="line">Preparing to unpack .../12-libldap-2.5-0_2.5.12+dfsg-0ubuntu0.22.04.1_amd64.deb ...</span><br><span class="line">Unpacking libldap-2.5-0:amd64 (2.5.12+dfsg-0ubuntu0.22.04.1) ...</span><br><span class="line">Selecting previously unselected package libaprutil1-ldap:amd64.</span><br><span class="line">Preparing to unpack .../13-libaprutil1-ldap_1.6.1-5ubuntu4_amd64.deb ...</span><br><span class="line">Unpacking libaprutil1-ldap:amd64 (1.6.1-5ubuntu4) ...</span><br><span class="line">Selecting previously unselected package libbrotli1:amd64.</span><br><span class="line">Preparing to unpack .../14-libbrotli1_1.0.9-2build6_amd64.deb ...</span><br><span class="line">Unpacking libbrotli1:amd64 (1.0.9-2build6) ...</span><br><span class="line">Selecting previously unselected package libnghttp2-14:amd64.</span><br><span class="line">Preparing to unpack .../15-libnghttp2-14_1.43.0-1build3_amd64.deb ...</span><br><span class="line">Unpacking libnghttp2-14:amd64 (1.43.0-1build3) ...</span><br><span class="line">Selecting previously unselected package libpsl5:amd64.</span><br><span class="line">Preparing to unpack .../16-libpsl5_0.21.0-1.2build2_amd64.deb ...</span><br><span class="line">Unpacking libpsl5:amd64 (0.21.0-1.2build2) ...</span><br><span class="line">Selecting previously unselected package librtmp1:amd64.</span><br><span class="line">Preparing to unpack .../17-librtmp1_2.4+20151223.gitfa8646d.1-2build4_amd64.deb ...</span><br><span class="line">Unpacking librtmp1:amd64 (2.4+20151223.gitfa8646d.1-2build4) ...</span><br><span class="line">Selecting previously unselected package libssh-4:amd64.</span><br><span class="line">Preparing to unpack .../18-libssh-4_0.9.6-2build1_amd64.deb ...</span><br><span class="line">Unpacking libssh-4:amd64 (0.9.6-2build1) ...</span><br><span class="line">Selecting previously unselected package libcurl4:amd64.</span><br><span class="line">Preparing to unpack .../19-libcurl4_7.81.0-1ubuntu1.3_amd64.deb ...</span><br><span class="line">Unpacking libcurl4:amd64 (7.81.0-1ubuntu1.3) ...</span><br><span class="line">Selecting previously unselected package libjansson4:amd64.</span><br><span class="line">Preparing to unpack .../20-libjansson4_2.13.1-1.1build3_amd64.deb ...</span><br><span class="line">Unpacking libjansson4:amd64 (2.13.1-1.1build3) ...</span><br><span class="line">Selecting previously unselected package liblua5.3-0:amd64.</span><br><span class="line">Preparing to unpack .../21-liblua5.3-0_5.3.6-1build1_amd64.deb ...</span><br><span class="line">Unpacking liblua5.3-0:amd64 (5.3.6-1build1) ...</span><br><span class="line">Selecting previously unselected package libicu70:amd64.</span><br><span class="line">Preparing to unpack .../22-libicu70_70.1-2_amd64.deb ...</span><br><span class="line">Unpacking libicu70:amd64 (70.1-2) ...</span><br><span class="line">Selecting previously unselected package libxml2:amd64.</span><br><span class="line">Preparing to unpack .../23-libxml2_2.9.13+dfsg-1ubuntu0.1_amd64.deb ...</span><br><span class="line">Unpacking libxml2:amd64 (2.9.13+dfsg-1ubuntu0.1) ...</span><br><span class="line">Selecting previously unselected package apache2-bin.</span><br><span class="line">Preparing to unpack .../24-apache2-bin_2.4.52-1ubuntu4.1_amd64.deb ...</span><br><span class="line">Unpacking apache2-bin (2.4.52-1ubuntu4.1) ...</span><br><span class="line">Selecting previously unselected package apache2-data.</span><br><span class="line">Preparing to unpack .../25-apache2-data_2.4.52-1ubuntu4.1_all.deb ...</span><br><span class="line">Unpacking apache2-data (2.4.52-1ubuntu4.1) ...</span><br><span class="line">Selecting previously unselected package apache2-utils.</span><br><span class="line">Preparing to unpack .../26-apache2-utils_2.4.52-1ubuntu4.1_amd64.deb ...</span><br><span class="line">Unpacking apache2-utils (2.4.52-1ubuntu4.1) ...</span><br><span class="line">Selecting previously unselected package media-types.</span><br><span class="line">Preparing to unpack .../27-media-types_7.0.0_all.deb ...</span><br><span class="line">Unpacking media-types (7.0.0) ...</span><br><span class="line">Selecting previously unselected package mailcap.</span><br><span class="line">Preparing to unpack .../28-mailcap_3.70+nmu1ubuntu1_all.deb ...</span><br><span class="line">Unpacking mailcap (3.70+nmu1ubuntu1) ...</span><br><span class="line">Selecting previously unselected package mime-support.</span><br><span class="line">Preparing to unpack .../29-mime-support_3.66_all.deb ...</span><br><span class="line">Unpacking mime-support (3.66) ...</span><br><span class="line">Selecting previously unselected package apache2.</span><br><span class="line">Preparing to unpack .../30-apache2_2.4.52-1ubuntu4.1_amd64.deb ...</span><br><span class="line">Unpacking apache2 (2.4.52-1ubuntu4.1) ...</span><br><span class="line">Selecting previously unselected package openssl.</span><br><span class="line">Preparing to unpack .../31-openssl_3.0.2-0ubuntu1.6_amd64.deb ...</span><br><span class="line">Unpacking openssl (3.0.2-0ubuntu1.6) ...</span><br><span class="line">Selecting previously unselected package ca-certificates.</span><br><span class="line">Preparing to unpack .../32-ca-certificates_20211016_all.deb ...</span><br><span class="line">Unpacking ca-certificates (20211016) ...</span><br><span class="line">Selecting previously unselected package netbase.</span><br><span class="line">Preparing to unpack .../33-netbase_6.3_all.deb ...</span><br><span class="line">Unpacking netbase (6.3) ...</span><br><span class="line">Selecting previously unselected package libmagic-mgc.</span><br><span class="line">Preparing to unpack .../34-libmagic-mgc_1%3a5.41-3_amd64.deb ...</span><br><span class="line">Unpacking libmagic-mgc (1:5.41-3) ...</span><br><span class="line">Selecting previously unselected package libmagic1:amd64.</span><br><span class="line">Preparing to unpack .../35-libmagic1_1%3a5.41-3_amd64.deb ...</span><br><span class="line">Unpacking libmagic1:amd64 (1:5.41-3) ...</span><br><span class="line">Selecting previously unselected package file.</span><br><span class="line">Preparing to unpack .../36-file_1%3a5.41-3_amd64.deb ...</span><br><span class="line">Unpacking file (1:5.41-3) ...</span><br><span class="line">Selecting previously unselected package publicsuffix.</span><br><span class="line">Preparing to unpack .../37-publicsuffix_20211207.1025-1_all.deb ...</span><br><span class="line">Unpacking publicsuffix (20211207.1025-1) ...</span><br><span class="line">Selecting previously unselected package xz-utils.</span><br><span class="line">Preparing to unpack .../38-xz-utils_5.2.5-2ubuntu1_amd64.deb ...</span><br><span class="line">Unpacking xz-utils (5.2.5-2ubuntu1) ...</span><br><span class="line">Selecting previously unselected package bzip2.</span><br><span class="line">Preparing to unpack .../39-bzip2_1.0.8-5build1_amd64.deb ...</span><br><span class="line">Unpacking bzip2 (1.0.8-5build1) ...</span><br><span class="line">Selecting previously unselected package libldap-common.</span><br><span class="line">Preparing to unpack .../40-libldap-common_2.5.12+dfsg-0ubuntu0.22.04.1_all.deb ...</span><br><span class="line">Unpacking libldap-common (2.5.12+dfsg-0ubuntu0.22.04.1) ...</span><br><span class="line">Selecting previously unselected package libsasl2-modules:amd64.</span><br><span class="line">Preparing to unpack .../41-libsasl2-modules_2.1.27+dfsg2-3ubuntu1_amd64.deb ...</span><br><span class="line">Unpacking libsasl2-modules:amd64 (2.1.27+dfsg2-3ubuntu1) ...</span><br><span class="line">Selecting previously unselected package ssl-cert.</span><br><span class="line">Preparing to unpack .../42-ssl-cert_1.1.2_all.deb ...</span><br><span class="line">Unpacking ssl-cert (1.1.2) ...</span><br><span class="line">Setting up libexpat1:amd64 (2.4.7-1) ...</span><br><span class="line">Setting up media-types (7.0.0) ...</span><br><span class="line">Setting up libpsl5:amd64 (0.21.0-1.2build2) ...</span><br><span class="line">Setting up libmagic-mgc (1:5.41-3) ...</span><br><span class="line">Setting up libbrotli1:amd64 (1.0.9-2build6) ...</span><br><span class="line">Setting up libsqlite3-0:amd64 (3.37.2-2) ...</span><br><span class="line">Setting up libsasl2-modules:amd64 (2.1.27+dfsg2-3ubuntu1) ...</span><br><span class="line">Setting up libnghttp2-14:amd64 (1.43.0-1build3) ...</span><br><span class="line">Setting up libmagic1:amd64 (1:5.41-3) ...</span><br><span class="line">Setting up libapr1:amd64 (1.7.0-8build1) ...</span><br><span class="line">Setting up file (1:5.41-3) ...</span><br><span class="line">Setting up perl-modules-5.34 (5.34.0-3ubuntu1) ...</span><br><span class="line">Setting up bzip2 (1.0.8-5build1) ...</span><br><span class="line">Setting up libldap-common (2.5.12+dfsg-0ubuntu0.22.04.1) ...</span><br><span class="line">Setting up libjansson4:amd64 (2.13.1-1.1build3) ...</span><br><span class="line">Setting up libsasl2-modules-db:amd64 (2.1.27+dfsg2-3ubuntu1) ...</span><br><span class="line">Setting up librtmp1:amd64 (2.4+20151223.gitfa8646d.1-2build4) ...</span><br><span class="line">Setting up xz-utils (5.2.5-2ubuntu1) ...</span><br><span class="line">update-alternatives: using /usr/bin/xz to provide /usr/bin/lzma (lzma) in auto mode</span><br><span class="line">update-alternatives: warning: skip creation of /usr/share/man/man1/lzma.1.gz because associated file /usr/share/man/man1/xz.1.gz (of link group lzma) doesn't exist</span><br><span class="line">update-alternatives: warning: skip creation of /usr/share/man/man1/unlzma.1.gz because associated file /usr/share/man/man1/unxz.1.gz (of link group lzma) doesn't exist</span><br><span class="line">update-alternatives: warning: skip creation of /usr/share/man/man1/lzcat.1.gz because associated file /usr/share/man/man1/xzcat.1.gz (of link group lzma) doesn't exist</span><br><span class="line">update-alternatives: warning: skip creation of /usr/share/man/man1/lzmore.1.gz because associated file /usr/share/man/man1/xzmore.1.gz (of link group lzma) doesn't exist</span><br><span class="line">update-alternatives: warning: skip creation of /usr/share/man/man1/lzless.1.gz because associated file /usr/share/man/man1/xzless.1.gz (of link group lzma) doesn't exist</span><br><span class="line">update-alternatives: warning: skip creation of /usr/share/man/man1/lzdiff.1.gz because associated file /usr/share/man/man1/xzdiff.1.gz (of link group lzma) doesn't exist</span><br><span class="line">update-alternatives: warning: skip creation of /usr/share/man/man1/lzcmp.1.gz because associated file /usr/share/man/man1/xzcmp.1.gz (of link group lzma) doesn't exist</span><br><span class="line">update-alternatives: warning: skip creation of /usr/share/man/man1/lzgrep.1.gz because associated file /usr/share/man/man1/xzgrep.1.gz (of link group lzma) doesn't exist</span><br><span class="line">update-alternatives: warning: skip creation of /usr/share/man/man1/lzegrep.1.gz because associated file /usr/share/man/man1/xzegrep.1.gz (of link group lzma) doesn't exist</span><br><span class="line">update-alternatives: warning: skip creation of /usr/share/man/man1/lzfgrep.1.gz because associated file /usr/share/man/man1/xzfgrep.1.gz (of link group lzma) doesn't exist</span><br><span class="line">Setting up libsasl2-2:amd64 (2.1.27+dfsg2-3ubuntu1) ...</span><br><span class="line">Setting up libssh-4:amd64 (0.9.6-2build1) ...</span><br><span class="line">Setting up liblua5.3-0:amd64 (5.3.6-1build1) ...</span><br><span class="line">Setting up netbase (6.3) ...</span><br><span class="line">Setting up apache2-data (2.4.52-1ubuntu4.1) ...</span><br><span class="line">Setting up openssl (3.0.2-0ubuntu1.6) ...</span><br><span class="line">Setting up publicsuffix (20211207.1025-1) ...</span><br><span class="line">Setting up libgdbm6:amd64 (1.23-1) ...</span><br><span class="line">Setting up libicu70:amd64 (70.1-2) ...</span><br><span class="line">Setting up libaprutil1:amd64 (1.6.1-5ubuntu4) ...</span><br><span class="line">Setting up libaprutil1-dbd-sqlite3:amd64 (1.6.1-5ubuntu4) ...</span><br><span class="line">Setting up libldap-2.5-0:amd64 (2.5.12+dfsg-0ubuntu0.22.04.1) ...</span><br><span class="line">Setting up ca-certificates (20211016) ...</span><br><span class="line">debconf: unable to initialize frontend: Dialog</span><br><span class="line">debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)</span><br><span class="line">debconf: falling back to frontend: Readline</span><br><span class="line">Updating certificates in /etc/ssl/certs...</span><br><span class="line">127 added, 0 removed; done.</span><br><span class="line">Setting up ssl-cert (1.1.2) ...</span><br><span class="line">debconf: unable to initialize frontend: Dialog</span><br><span class="line">debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)</span><br><span class="line">debconf: falling back to frontend: Readline</span><br><span class="line">Setting up libgdbm-compat4:amd64 (1.23-1) ...</span><br><span class="line">Setting up libcurl4:amd64 (7.81.0-1ubuntu1.3) ...</span><br><span class="line">Setting up libxml2:amd64 (2.9.13+dfsg-1ubuntu0.1) ...</span><br><span class="line">Setting up apache2-utils (2.4.52-1ubuntu4.1) ...</span><br><span class="line">Setting up libperl5.34:amd64 (5.34.0-3ubuntu1) ...</span><br><span class="line">Setting up libaprutil1-ldap:amd64 (1.6.1-5ubuntu4) ...</span><br><span class="line">Setting up perl (5.34.0-3ubuntu1) ...</span><br><span class="line">Setting up mailcap (3.70+nmu1ubuntu1) ...</span><br><span class="line">Setting up mime-support (3.66) ...</span><br><span class="line">Setting up apache2-bin (2.4.52-1ubuntu4.1) ...</span><br><span class="line">Setting up apache2 (2.4.52-1ubuntu4.1) ...</span><br><span class="line">Enabling module mpm_event.</span><br><span class="line">Enabling module authz_core.</span><br><span class="line">Enabling module authz_host.</span><br><span class="line">Enabling module authn_core.</span><br><span class="line">Enabling module auth_basic.</span><br><span class="line">Enabling module access_compat.</span><br><span class="line">Enabling module authn_file.</span><br><span class="line">Enabling module authz_user.</span><br><span class="line">Enabling module alias.</span><br><span class="line">Enabling module dir.</span><br><span class="line">Enabling module autoindex.</span><br><span class="line">Enabling module env.</span><br><span class="line">Enabling module mime.</span><br><span class="line">Enabling module negotiation.</span><br><span class="line">Enabling module setenvif.</span><br><span class="line">Enabling module filter.</span><br><span class="line">Enabling module deflate.</span><br><span class="line">Enabling module status.</span><br><span class="line">Enabling module reqtimeout.</span><br><span class="line">Enabling conf charset.</span><br><span class="line">Enabling conf localized-error-pages.</span><br><span class="line">Enabling conf other-vhosts-access-log.</span><br><span class="line">Enabling conf security.</span><br><span class="line">Enabling conf serve-cgi-bin.</span><br><span class="line">Enabling site 000-default.</span><br><span class="line">invoke-rc.d: could not determine current runlevel</span><br><span class="line">invoke-rc.d: policy-rc.d denied execution of start.</span><br><span class="line">Processing triggers for libc-bin (2.35-0ubuntu3) ...</span><br><span class="line">Processing triggers for ca-certificates (20211016) ...</span><br><span class="line">Updating certificates in /etc/ssl/certs...</span><br><span class="line">0 added, 0 removed; done.</span><br><span class="line">Running hooks in /etc/ca-certificates/update.d...</span><br><span class="line">done.</span><br><span class="line">root@41a10cc1b7bc:/# which apache2</span><br><span class="line">/usr/sbin/apache2</span><br><span class="line">root@41a10cc1b7bc:/# exit</span><br><span class="line">exit</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED              STATUS              PORTS                               NAMES</span><br><span class="line">41a10cc1b7bc   ubuntu    "bash"                   About a minute ago   Up About a minute                                       keen_fermi</span><br><span class="line">5140dc7221f7   nginx     "/docker-entrypoint.…"   14 minutes ago       Up 14 minutes       0.0.0.0:80-&gt;80/tcp, :::80-&gt;80/tcp   hardcore_chaum</span><br><span class="line">0a5a17ff7d7f   nginx     "/docker-entrypoint.…"   18 minutes ago       Up 18 minutes       80/tcp                              tender_heyrovsky</span><br><span class="line">e9a702ba20b6   nginx     "/docker-entrypoint.…"   21 minutes ago       Up 20 minutes       80/tcp                              my_nginx</span><br><span class="line">b3eedf250d85   ubuntu    "bash"                   3 hours ago          Up 3 hours                                              suspicious_antonelli</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker commit 41a10cc1b7bc ubuntuapache2:v1</span><br><span class="line">sha256:d769d651ecaf6b9a8e11720cab2b702411a96d6b9a16e6a4905c8cefea25754d</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker images</span><br><span class="line">REPOSITORY      TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">ubuntuapache2   v1        d769d651ecaf   5 seconds ago   221MB</span><br><span class="line">httpd           latest    f2a976f932ec   6 hours ago     145MB</span><br><span class="line">busybox         latest    7a80323521cc   3 days ago      1.24MB</span><br><span class="line">nginx           latest    670dcc86b69d   13 days ago     142MB</span><br><span class="line">ubuntu          latest    27941809078c   8 weeks ago     77.8MB</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -it ubuntuapache2:v1 bash</span><br><span class="line">root@c7e915d9bbce:/# which apache2</span><br><span class="line">/usr/sbin/apache2</span><br><span class="line">root@c7e915d9bbce:/#</span><br></pre></td></tr></table></figure>



<h1 id="Docker-Network"><a href="#Docker-Network" class="headerlink" title="Docker Network"></a>Docker Network</h1><h3 id="docker-network-inspect-bridge"><a href="#docker-network-inspect-bridge" class="headerlink" title="docker network inspect bridge"></a>docker network inspect bridge</h3><blockquote>
<p><strong>docker network inspect</strong> command will be helpful to inspect docker network</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network inspect bridge</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        "Name": "bridge",</span><br><span class="line">        "Id": "8719d0b37317b859b4d082d7c8f9e162be41445555163b75ef3494952e548ff6",</span><br><span class="line">        "Created": "2022-07-29T02:33:34.787699583Z",</span><br><span class="line">        "Scope": "local",</span><br><span class="line">        "Driver": "bridge",</span><br><span class="line">        "EnableIPv6": false,</span><br><span class="line">        "IPAM": &#123;</span><br><span class="line">            "Driver": "default",</span><br><span class="line">            "Options": null,</span><br><span class="line">            "Config": [</span><br><span class="line">                &#123;</span><br><span class="line">                    "Subnet": "172.17.0.0/16"</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        "Internal": false,</span><br><span class="line">        "Attachable": false,</span><br><span class="line">        "Ingress": false,</span><br><span class="line">        "ConfigFrom": &#123;</span><br><span class="line">            "Network": ""</span><br><span class="line">        &#125;,</span><br><span class="line">        "ConfigOnly": false,</span><br><span class="line">        "Containers": &#123;</span><br><span class="line">            "0a5a17ff7d7ff49a6c3a6fae0fc5c1ef6a8a7586381a2a8ed1c310d3c7c158ce": &#123;</span><br><span class="line">                "Name": "tender_heyrovsky",</span><br><span class="line">                "EndpointID": "ce94b0532d7ed1a3222590c25e388b3001f88f0dc0d1da472c35b4d50269b34a",</span><br><span class="line">                "MacAddress": "02:42:ac:11:00:04",</span><br><span class="line">                "IPv4Address": "172.17.0.4/16",</span><br><span class="line">                "IPv6Address": ""</span><br><span class="line">            &#125;,</span><br><span class="line">            "41a10cc1b7bc85232fe5f519c4db07c5f1b9d6924a1e6ae6616f4e9ae543c97c": &#123;</span><br><span class="line">                "Name": "keen_fermi",</span><br><span class="line">                "EndpointID": "85f719112636e11e14099fb96bf6e686d6c5f24f13ba976a3c9be2affd3a2543",</span><br><span class="line">                "MacAddress": "02:42:ac:11:00:06",</span><br><span class="line">                "IPv4Address": "172.17.0.6/16",</span><br><span class="line">                "IPv6Address": ""</span><br><span class="line">            &#125;,</span><br><span class="line">            "5140dc7221f7bf524e85057ff12d6dcf3b9f1c3f552012e42859c281c8aac413": &#123;</span><br><span class="line">                "Name": "hardcore_chaum",</span><br><span class="line">                "EndpointID": "ec657b04489438ba3b8d5866d72ae687bb35a53ec0e2f1d438cb117bcfd231fe",</span><br><span class="line">                "MacAddress": "02:42:ac:11:00:05",</span><br><span class="line">                "IPv4Address": "172.17.0.5/16",</span><br><span class="line">                "IPv6Address": ""</span><br><span class="line">            &#125;,</span><br><span class="line">            "b3eedf250d85b8132345f9370ce9c4bbc1e656af364312c3370ae08c0ba35173": &#123;</span><br><span class="line">                "Name": "suspicious_antonelli",</span><br><span class="line">                "EndpointID": "659ddf97512879e1cf03e4122573085da40fab2edf9cb5a169197dfe94127550",</span><br><span class="line">                "MacAddress": "02:42:ac:11:00:02",</span><br><span class="line">                "IPv4Address": "172.17.0.2/16",</span><br><span class="line">                "IPv6Address": ""</span><br><span class="line">            &#125;,</span><br><span class="line">            "e9a702ba20b6c3897cd4e236bc04e72b0935c128b9ede042569e05b9b690c429": &#123;</span><br><span class="line">                "Name": "my_nginx",</span><br><span class="line">                "EndpointID": "f1f35dc7ddb18982dc89659466d3d9a7851c8097b1e2d286c96cddb004ad7b90",</span><br><span class="line">                "MacAddress": "02:42:ac:11:00:03",</span><br><span class="line">                "IPv4Address": "172.17.0.3/16",</span><br><span class="line">                "IPv6Address": ""</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        "Options": &#123;</span><br><span class="line">            "com.docker.network.bridge.default_bridge": "true",</span><br><span class="line">            "com.docker.network.bridge.enable_icc": "true",</span><br><span class="line">            "com.docker.network.bridge.enable_ip_masquerade": "true",</span><br><span class="line">            "com.docker.network.bridge.host_binding_ipv4": "0.0.0.0",</span><br><span class="line">            "com.docker.network.bridge.name": "docker0",</span><br><span class="line">            "com.docker.network.driver.mtu": "1500"</span><br><span class="line">        &#125;,</span><br><span class="line">        "Labels": &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>





<h3 id="docker-network-create"><a href="#docker-network-create" class="headerlink" title="docker network create"></a>docker network create</h3><h4 id="attach-amp-disconnect"><a href="#attach-amp-disconnect" class="headerlink" title="attach &amp; disconnect"></a>attach &amp; disconnect</h4><blockquote>
<p><strong>docker network create</strong> command will be used to create new network of type bridge</p>
</blockquote>
<blockquote>
<p>we can define –network while creating new container</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network create mynetwork</span><br><span class="line">7fc52d34b07783ebd4d1132ef27dbe7c0bac71e1e8cc744fbe5d5df2dce2d490</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network ls</span><br><span class="line">NETWORK ID     NAME        DRIVER    SCOPE</span><br><span class="line">8719d0b37317   bridge      bridge    local</span><br><span class="line">725e396ecad9   host        host      local</span><br><span class="line">7fc52d34b077   mynetwork   bridge    local</span><br><span class="line">a829f0fd4a99   none        null      local</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker container run -itd --network=mynetwork ubuntu</span><br><span class="line">1ac570cee7d129aa8e048d937a5e362e0d196dd23f90a4220f46fd43568c278c</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS                               NAMES</span><br><span class="line">1ac570cee7d1   ubuntu    "bash"                   51 seconds ago   Up 50 seconds                                       upbeat_bhaskara</span><br><span class="line">41a10cc1b7bc   ubuntu    "bash"                   13 minutes ago   Up 13 minutes                                       keen_fermi</span><br><span class="line">5140dc7221f7   nginx     "/docker-entrypoint.…"   26 minutes ago   Up 26 minutes   0.0.0.0:80-&gt;80/tcp, :::80-&gt;80/tcp   hardcore_chaum</span><br><span class="line">0a5a17ff7d7f   nginx     "/docker-entrypoint.…"   30 minutes ago   Up 30 minutes   80/tcp                              tender_heyrovsky</span><br><span class="line">e9a702ba20b6   nginx     "/docker-entrypoint.…"   33 minutes ago   Up 32 minutes   80/tcp                              my_nginx</span><br><span class="line">b3eedf250d85   ubuntu    "bash"                   3 hours ago      Up 3 hours                                          suspicious_antonelli</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network disconnect mynetwork 1ac</span><br></pre></td></tr></table></figure>



<h4 id="Host-networks-are-unique-so-we-cannot-create-2-host-networks"><a href="#Host-networks-are-unique-so-we-cannot-create-2-host-networks" class="headerlink" title="Host networks are unique so we cannot create 2 host networks"></a><strong>Host networks are unique so we cannot create 2 host networks</strong></h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network create -d host myhost</span><br><span class="line">Error response from daemon: only one instance of "host" network is allowed</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~#</span><br></pre></td></tr></table></figure>



<h3 id="docker-network-rm"><a href="#docker-network-rm" class="headerlink" title="docker network rm"></a>docker network rm</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network ls</span><br><span class="line">NETWORK ID     NAME        DRIVER    SCOPE</span><br><span class="line">8719d0b37317   bridge      bridge    local</span><br><span class="line">725e396ecad9   host        host      local</span><br><span class="line">7fc52d34b077   mynetwork   bridge    local</span><br><span class="line">a829f0fd4a99   none        null      local</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker network rm mynetwork</span><br><span class="line">mynetwork</span><br></pre></td></tr></table></figure>



<h3 id="docker-network-prune"><a href="#docker-network-prune" class="headerlink" title="docker network prune"></a>docker network prune</h3><h1 id="Docker-Volumes"><a href="#Docker-Volumes" class="headerlink" title="Docker Volumes"></a>Docker Volumes</h1><h3 id="attach"><a href="#attach" class="headerlink" title="attach"></a>attach</h3><blockquote>
<p><strong>Create a new container with “jenkins” image with tag 2.60.2, expose the port 8080:8080 and mount the volume “myvol” which we created in the previous task with path “/var/jenkins_home” from inside the container ?</strong></p>
</blockquote>
<blockquote>
<p>we can use -v to mount volume with the container file path, docker run -v VOLUME:/path/inside/container image</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -itd -p 8080:8080 -v myvol:/var/jenkins_home jenkins:2.60.2</span><br></pre></td></tr></table></figure>



<h3 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h3><blockquote>
<p>we need to remove the container first which was using the volume, then we can remove the volume as well using command <strong>docker volume rm vol_name</strong></p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker kill 5de; docker rm 5de; docker volume rm myvol</span><br><span class="line">5de</span><br><span class="line">5de</span><br><span class="line">myvol</span><br></pre></td></tr></table></figure>



<h3 id="prune"><a href="#prune" class="headerlink" title="prune"></a>prune</h3><blockquote>
<p>rm the volumes that are not used by any container</p>
</blockquote>
<h3 id="bind-mount"><a href="#bind-mount" class="headerlink" title="bind mount"></a>bind mount</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~# docker run -itd -p 8080:8080 -v /tmp:/var/jenkins_home jenkins:2.60.2</span><br><span class="line">5ec47c6b6630d11f0ab25410c9a071e863cbeffa1967493d4227cc0cd6cb8a5d</span><br></pre></td></tr></table></figure>





<h1 id="DockerFile"><a href="#DockerFile" class="headerlink" title="DockerFile"></a>DockerFile</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker# docker images</span><br><span class="line">REPOSITORY      TAG       IMAGE ID       CREATED          SIZE</span><br><span class="line">myubuntuimage   v1        083f997ca0ff   18 seconds ago   77.8MB</span><br><span class="line">ubuntuapache2   v1        d769d651ecaf   49 minutes ago   221MB</span><br><span class="line">httpd           latest    f2a976f932ec   6 hours ago      145MB</span><br><span class="line">busybox         latest    7a80323521cc   3 days ago       1.24MB</span><br><span class="line">nginx           latest    670dcc86b69d   13 days ago      142MB</span><br><span class="line">ubuntu          latest    27941809078c   8 weeks ago      77.8MB</span><br><span class="line">jenkins         2.60.2    112170efb091   4 years ago      810MB</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker# vi Dockerfile</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker# cat Dockerfile</span><br><span class="line">FROM ubuntu</span><br><span class="line">LABEL name="devops"</span><br><span class="line">LABEL email="devops@gmail.com"</span><br><span class="line">RUN date &gt; /tmp/date.txt</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker# docker build -t myubuntuimage:v2 .</span><br><span class="line">Sending build context to Docker daemon  2.048kB</span><br><span class="line">Step 1/4 : FROM ubuntu</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 27941809078c</span></span><br><span class="line">Step 2/4 : LABEL name="devops"</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Using cache</span></span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 169d3013b658</span></span><br><span class="line">Step 3/4 : LABEL email="devops@gmail.com"</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Using cache</span></span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 083f997ca0ff</span></span><br><span class="line">Step 4/4 : RUN date &gt; /tmp/date.txt</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> c97ebb220b58</span></span><br><span class="line">Removing intermediate container c97ebb220b58</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> d28cdf10dd65</span></span><br><span class="line">Successfully built d28cdf10dd65</span><br><span class="line">Successfully tagged myubuntuimage:v2</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker# docker images</span><br><span class="line">REPOSITORY      TAG       IMAGE ID       CREATED              SIZE</span><br><span class="line">myubuntuimage   v2        d28cdf10dd65   24 seconds ago       77.8MB</span><br><span class="line">myubuntuimage   v1        083f997ca0ff   About a minute ago   77.8MB</span><br><span class="line">ubuntuapache2   v1        d769d651ecaf   50 minutes ago       221MB</span><br><span class="line">httpd           latest    f2a976f932ec   6 hours ago          145MB</span><br><span class="line">busybox         latest    7a80323521cc   3 days ago           1.24MB</span><br><span class="line">nginx           latest    670dcc86b69d   13 days ago          142MB</span><br><span class="line">ubuntu          latest    27941809078c   8 weeks ago          77.8MB</span><br><span class="line">jenkins         2.60.2    112170efb091   4 years ago          810MB</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker# docker run -it d28cdf10dd65 bash</span><br><span class="line">root@20ff93dc204f:/# hostname</span><br><span class="line">20ff93dc204f</span><br><span class="line">root@20ff93dc204f:/# cd /tmp/</span><br><span class="line">root@20ff93dc204f:/tmp# ls -l</span><br><span class="line">total 4</span><br><span class="line">-rw-r--r-- 1 root root 29 Aug  2 11:03 date.txt</span><br><span class="line">root@20ff93dc204f:/tmp# cat date.txt</span><br><span class="line">Tue Aug  2 11:03:35 UTC 2022</span><br><span class="line">root@20ff93dc204f:/tmp#</span><br></pre></td></tr></table></figure>



<h2 id="Case7"><a href="#Case7" class="headerlink" title="Case7"></a>Case7</h2><blockquote>
<p><strong>Write a Dockerfile , meet below conditions:</strong></p>
<ul>
<li><strong>Use base Image of Ubuntu</strong></li>
<li><strong>Set Label “name = devops”</strong></li>
<li><strong>Set Environment Variable “pass = mypass”</strong></li>
<li><strong>Build the dockerfile and name your image as myubuntu and version must be 1</strong></li>
</ul>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker#  mkdir d47</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker#  cd d47</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d47# vi Dockerfile</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d47# docker build -t myubuntu:v1 .</span><br><span class="line">Sending build context to Docker daemon  2.048kB</span><br><span class="line">Step 1/3 : FROM ubuntu</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 27941809078c</span></span><br><span class="line">Step 2/3 : LABEL name="devops"</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Using cache</span></span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 169d3013b658</span></span><br><span class="line">Step 3/3 : ENV pass mypass</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> bb62dc8cf111</span></span><br><span class="line">Removing intermediate container bb62dc8cf111</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 643d2a069187</span></span><br><span class="line">Successfully built 643d2a069187</span><br><span class="line">Successfully tagged myubuntu:v1</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d47# cat Dockerfile</span><br><span class="line">FROM ubuntu</span><br><span class="line">LABEL name="devops"</span><br><span class="line">ENV pass mypass</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d47#</span><br></pre></td></tr></table></figure>



<h2 id="Case8"><a href="#Case8" class="headerlink" title="Case8"></a>Case8</h2><blockquote>
<p><strong>Write a Dockerfile , meet below conditions:</strong></p>
<ul>
<li><strong>Use base Image of Ubuntu</strong></li>
<li><strong>Set Label as “name = devops”</strong></li>
<li><strong>Add run command with command “date &gt; /etc/creation_date.txt”</strong></li>
<li><strong>Build the dockerfile and name your image as myubuntu and version must be 2</strong></li>
</ul>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker#  mkdir d48</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker# cd d48</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d48# ls</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d48# vi Dockerfile</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d48# docker build -t mybuntu:v2 .</span><br><span class="line">Sending build context to Docker daemon  2.048kB</span><br><span class="line">Step 1/3 : FROM ubuntu</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 27941809078c</span></span><br><span class="line">Step 2/3 : LABEL name="devops"</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Using cache</span></span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 169d3013b658</span></span><br><span class="line">Step 3/3 : RUN date &gt; /etc/creation_date.txt</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> fc3cf1ec34b0</span></span><br><span class="line">Removing intermediate container fc3cf1ec34b0</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> a7222460443f</span></span><br><span class="line">Successfully built a7222460443f</span><br><span class="line">Successfully tagged mybuntu:v2</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d48# cat Dockerfile</span><br><span class="line">FROM ubuntu</span><br><span class="line">LABEL name="devops"</span><br><span class="line">RUN date &gt; /etc/creation_date.txt</span><br><span class="line"></span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d48#</span><br></pre></td></tr></table></figure>



<h2 id="Case9"><a href="#Case9" class="headerlink" title="Case9"></a>Case9</h2><blockquote>
<p><strong>Write a Dockerfile , meet below conditions:</strong></p>
<ul>
<li><strong>Create empty file “log.txt” on your local machine , where you will create Dockerfile</strong></li>
<li><strong>Use base Image of Ubuntu</strong></li>
<li><strong>Set Label name = devops</strong></li>
<li><strong>COPY log.txt /etc/</strong></li>
<li><strong>Build the dockerfile and name your image as myubuntu and version must be 3</strong></li>
</ul>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d49# docker build -t myubuntu:v3 .</span><br><span class="line">Sending build context to Docker daemon   2.56kB</span><br><span class="line">Step 1/3 : FROM ubuntu</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 27941809078c</span></span><br><span class="line">Step 2/3 : LABEL name="devops"</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Using cache</span></span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 169d3013b658</span></span><br><span class="line">Step 3/3 : COPY log.txt /etc/</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 2b5fff83947c</span></span><br><span class="line">Successfully built 2b5fff83947c</span><br><span class="line">Successfully tagged myubuntu:v3</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d49# cat Dockerfile</span><br><span class="line">FROM ubuntu</span><br><span class="line">LABEL name="devops"</span><br><span class="line">COPY log.txt /etc/</span><br><span class="line"></span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d49#</span><br></pre></td></tr></table></figure>



<h2 id="CaseA"><a href="#CaseA" class="headerlink" title="CaseA"></a>CaseA</h2><blockquote>
<p><strong>Write a Dockerfile , meet below conditions:</strong></p>
<ul>
<li><strong>Use base Image of alpine</strong></li>
<li><strong>Set Label name = devops</strong></li>
<li><strong>CMD [“sleep” , “60”]</strong></li>
<li><strong>Build the dockerfile and name your image as myalpine and version must be 1</strong></li>
</ul>
</blockquote>
<blockquote>
<p>FROM tag is used to define the base image in your Dockerfile</p>
<p>Label add label to docker image as key=value</p>
<p><strong>CMD provides a default executable command for a container</strong></p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d50# docker build -t myalpine:v1 .</span><br><span class="line">Sending build context to Docker daemon  2.048kB</span><br><span class="line">Step 1/3 : FROM alpine</span><br><span class="line">latest: Pulling from library/alpine</span><br><span class="line">530afca65e2e: Pull complete</span><br><span class="line">Digest: sha256:7580ece7963bfa863801466c0a488f11c86f85d9988051a9f9c68cb27f6b7872</span><br><span class="line">Status: Downloaded newer image for alpine:latest</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> d7d3d98c851f</span></span><br><span class="line">Step 2/3 : LABEL name="devops"</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> ef5e70272181</span></span><br><span class="line">Removing intermediate container ef5e70272181</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 63f6ecaa530b</span></span><br><span class="line">Step 3/3 : CMD ["sleep", "60"]</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> 129a0fa644cf</span></span><br><span class="line">Removing intermediate container 129a0fa644cf</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> df58f3a5003a</span></span><br><span class="line">Successfully built df58f3a5003a</span><br><span class="line">Successfully tagged myalpine:v1</span><br><span class="line">root@ubuntu-s-1vcpu-2gb-sgp1-01:~/Docker/d50# cat Dockerfile</span><br><span class="line">FROM alpine</span><br><span class="line">LABEL name="devops"</span><br><span class="line">CMD ["sleep", "60"]</span><br></pre></td></tr></table></figure>



</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/08/01/DevOps/2019-08-01-Rebase/">DevOps/2019-08-01-Rebase</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-08-01</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/DevOps/">DevOps</a></span><div class="content"><p>ref: <a href="https://git-scm.com/book/zh/v2/Git-分支-变基" target="_blank" rel="noopener">https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%8F%98%E5%9F%BA</a></p>
<h2 id="变基"><a href="#变基" class="headerlink" title="变基"></a>变基</h2><p>在 Git 中整合来自不同分支的修改主要有两种方法：<code>merge</code> 以及 <code>rebase</code>。 在本节中我们将学习什么是“变基”，怎样使用“变基”，并将展示该操作的惊艳之处，以及指出在何种情况下你应避免使用它。</p>
<h3 id="变基的基本操作"><a href="#变基的基本操作" class="headerlink" title="变基的基本操作"></a>变基的基本操作</h3><p>请回顾之前在 <a href="https://git-scm.com/book/zh/v2/ch00/r_basic_merging" target="_blank" rel="noopener">分支的合并</a> 中的一个例子，你会看到开发任务分叉到两个不同分支，又各自提交了更新。</p>
<p><img src="https://git-scm.com/book/en/v2/images/basic-rebase-1.png" alt="分叉的提交历史。"></p>
<p>Figure 35. 分叉的提交历史</p>
<p>之前介绍过，整合分支最容易的方法是 <code>merge</code> 命令。 它会把两个分支的最新快照（<code>C3</code> 和 <code>C4</code>）以及二者最近的共同祖先（<code>C2</code>）进行三方合并，合并的结果是生成一个新的快照（并提交）。</p>
<p><img src="https://git-scm.com/book/en/v2/images/basic-rebase-2.png" alt="通过合并操作来整合分叉了的历史。"></p>
<p>Figure 36. 通过合并操作来整合分叉了的历史</p>
<p>其实，还有一种方法：你可以提取在 <code>C4</code> 中引入的补丁和修改，然后在 <code>C3</code> 的基础上应用一次。 在 Git 中，这种操作就叫做 <em>变基</em>。 你可以使用 <code>rebase</code> 命令将提交到某一分支上的所有修改都移至另一分支上，就好像“重新播放”一样。</p>
<p>在上面这个例子中，运行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout experiment</span><br><span class="line">$ git rebase master</span><br><span class="line">First, rewinding head to replay your work on top of it...</span><br><span class="line">Applying: added staged <span class="built_in">command</span></span><br></pre></td></tr></table></figure>

<p>它的原理是首先找到这两个分支（即当前分支 <code>experiment</code>、变基操作的目标基底分支 <code>master</code>）的最近共同祖先 <code>C2</code>，然后对比当前分支相对于该祖先的历次提交，提取相应的修改并存为临时文件，然后将当前分支指向目标基底 <code>C3</code>, 最后以此将之前另存为临时文件的修改依序应用。（译注：写明了 commit id，以便理解，下同）</p>
<p><img src="https://git-scm.com/book/en/v2/images/basic-rebase-3.png" alt="将 `C4` 中的修改变基到 `C3` 上。"></p>
<p>Figure 37. 将 <code>C4</code> 中的修改变基到 <code>C3</code> 上</p>
<p>现在回到 <code>master</code> 分支，进行一次快进合并。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">$ git merge experiment</span><br></pre></td></tr></table></figure>

<p><img src="https://git-scm.com/book/en/v2/images/basic-rebase-4.png" alt="master 分支的快进合并。"></p>
<p>Figure 38. master 分支的快进合并</p>
<p>此时，<code>C4&#39;</code> 指向的快照就和上面使用 <code>merge</code> 命令的例子中 <code>C5</code> 指向的快照一模一样了。 这两种整合方法的最终结果没有任何区别，但是变基使得提交历史更加整洁。 你在查看一个经过变基的分支的历史记录时会发现，尽管实际的开发工作是并行的，但它们看上去就像是串行的一样，提交历史是一条直线没有分叉。</p>
<p>一般我们这样做的目的是为了确保在向远程分支推送时能保持提交历史的整洁——例如向某个其他人维护的项目贡献代码时。 在这种情况下，你首先在自己的分支里进行开发，当开发完成时你需要先将你的代码变基到 <code>origin/master</code> 上，然后再向主项目提交修改。 这样的话，该项目的维护者就不再需要进行整合工作，只需要快进合并便可。</p>
<p>请注意，无论是通过变基，还是通过三方合并，整合的最终结果所指向的快照始终是一样的，只不过提交历史不同罢了。 变基是将一系列提交按照原有次序依次应用到另一分支上，而合并是把最终结果合在一起。</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/07/31/FFmpeg/2019-07-31-ffmepg-cmds-2/">FFmpeg/2019-07-31-ffmepg-cmds-2</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-07-31</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/ffmpeg/">ffmpeg</a></span><div class="content"><p>1.通过ffmpeg对AE直接导出的大文件压缩，(a.mov:16M，a.mp4:2.7M)，(b.mov:13M，a.mp4:1.6M)<br><code>ffmpeg -i a.mov -vcodec png a.mp4</code></p>
<p>2.对模板视频时长进行改变，(a.mp4:2.7M，a_fittime.mp4:2.6M)<br><code>ffmpeg -i a.mp4 -vf setpts=0.96*PTS -vcodec png a_fittime.mp4</code><br>模板6.25秒，素材6秒，经过上面的操作模板变成6.08秒</p>
<p>3.视频叠加，(intro_3_4.mp4:1.1M，a_fit_add.mp4:424k)<br><code>ffmpeg -i intro_3_4.mp4 -i a_fittime.mp4 -filter_complex overlay -strict -2 a_fit_add.mp4</code></p>
<p>4.Preset</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7akqezzvtj30rv0j9dkl.jpg" alt="image"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ffoutputs += <span class="string">"[1:v]scale=if(gt(&#123;0&#125;/iw\, &#123;1&#125;/ih)\, -1\, &#123;0&#125;)"</span> \</span><br><span class="line">                       <span class="string">":if(gt(&#123;0&#125;/iw\, &#123;1&#125;/ih)\, &#123;1&#125;\, -1)[video];"</span>.format(dest_w, dest_h)</span><br></pre></td></tr></table></figure>







<h3 id="Twice-Speed"><a href="#Twice-Speed" class="headerlink" title="Twice Speed"></a>Twice Speed</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> ffmpeg -i input.mkv -an -filter:v <span class="string">"setpts=0.5*PTS"</span> output.mkv</span></span><br></pre></td></tr></table></figure>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/07/27/Algo.%20Ult./SweepLine/">Algo. Ult./SweepLine</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-07-27</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/AlgoUlt/">AlgoUlt.</a></span><div class="content"><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gh183sdp68j30yg0l6tga.jpg" alt="image-20200723212415520"></p>
<ul>
<li>特殊情况一</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gh187qkq9xj318u0k4wie.jpg" alt="image-20200723212802223"></p>
<ul>
<li>特殊情况二</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gh189d2j9ij316o0lowls.jpg" alt="image-20200723212936289"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gh18g8id22j313e0lsq9l.jpg" alt="image-20200723213612332"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gh18hqgd80j31b40s4e03.jpg" alt="image-20200723213731671"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gh1bougq5ij313a0k2k47.jpg" alt="image-20200723232816866"></p>
<ul>
<li><p>Edge Cases</p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gh1bpbkz0kj30oo0eggrg.jpg" alt="image-20200723232845013"></p>
</li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/07/26/Algo.%20Ult./BIT(FenwickTree)%20&amp;%20SegTree%20&amp;%20MST%20&amp;%20UF/">Algo. Ult./BIT(FenwickTree) &amp; SegTree &amp; MST &amp; UF</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-07-26</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/AlgoUlt/">AlgoUlt.</a></span><div class="content"><h1 id="Fenwick-Tree"><a href="#Fenwick-Tree" class="headerlink" title="Fenwick Tree"></a>Fenwick Tree</h1><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggrsh3fq61j31920lm47i.jpg" alt="image-20200715173319551"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggrsp6fuk6j31960mgqeg.jpg" alt="image-20200715174108116"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggrsxs6yawj30y60ge7cg.jpg" alt="image-20200715174924357"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FenwickTree</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        self.sums_ = [<span class="number">0</span>] * (n+<span class="number">1</span>)</span><br><span class="line">        self.n = n</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, i, delta)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; len(self.sums_):</span><br><span class="line">            self.sums_[i] += delta</span><br><span class="line">            i += self._lowbit(i)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(self, i)</span>:</span></span><br><span class="line">        sum_ = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i &gt; <span class="number">0</span>:</span><br><span class="line">            sum_ += self.sums_[i]</span><br><span class="line">            i -= self._lowbit(i)</span><br><span class="line">        <span class="keyword">return</span> sum_</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_lowbit</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> x &amp; -x</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumArray</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, nums: List[int])</span>:</span></span><br><span class="line">        self.nums = nums</span><br><span class="line">        self.tree = FenwickTree(len(nums))</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">            self.tree.update(i+<span class="number">1</span>, nums[i])</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, i: int, val: int)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        self.tree.update(i+<span class="number">1</span>, val - self.nums[i])</span><br><span class="line">        self.nums[i] = val</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sumRange</span><span class="params">(self, i: int, j: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">return</span> self.tree.query(j + <span class="number">1</span>) - self.tree.query(i)</span><br></pre></td></tr></table></figure>



<h2 id="315-Count-of-Smaller-Numbers-After-Self"><a href="#315-Count-of-Smaller-Numbers-After-Self" class="headerlink" title="315.Count of Smaller Numbers After Self"></a>315.Count of Smaller Numbers After Self</h2><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggujdp1o3cj319y0n2k4o.jpg" alt="image-20200718023519761"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggujeh5tfej31ae0ms12c.jpg" alt="image-20200718023609770"></p>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382bwtejxj20sy0q6myy.jpg" alt="image-20200718023824394"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggujh9hnupj30xy0kygz9.jpg" alt="image-20200718023848244"></p>
<h1 id="Segment-Tree"><a href="#Segment-Tree" class="headerlink" title="Segment Tree"></a>Segment Tree</h1><h3 id="Tutorial-1"><a href="#Tutorial-1" class="headerlink" title="Tutorial 1:"></a>Tutorial 1:</h3><ul>
<li>更直觀且容易理解，但就是代碼長</li>
<li>binary tree, balanced, so O(logN); not necessary perfect</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggtajfaf6jj315q0k2ajx.jpg" alt="image-20200717004335838"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggtaogby29j31760l4al7.jpg" alt="image-20200717004840098"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggtazhqyolj31380i210v.jpg" alt="image-20200717005918569"></p>
<h4 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h4><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382cwznscj216m0k8q5v.jpg" alt="image-20200717010205089"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggtbc3bhtbj31720ke13z.jpg" alt="image-20200717011114867"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggtbcsjngrj31840mgwq4.jpg" alt="image-20200717011201336"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggtbh09kqsj317s0mu7gt.jpg" alt="image-20200717011546317"></p>
<h3 id="Tutorial-2"><a href="#Tutorial-2" class="headerlink" title="Tutorial 2:"></a>Tutorial 2:</h3><p><a href="https://leetcode.com/problems/range-sum-query-mutable/discuss/646774/Segment-tree-recursive-iterative-Binary-index-iterative-explained" target="_blank" rel="noopener">https://leetcode.com/problems/range-sum-query-mutable/discuss/646774/Segment-tree-recursive-iterative-Binary-index-iterative-explained</a></p>
<p><a href="https://www.youtube.com/watch?time_continue=2&amp;v=Oq2E2yGadnU&amp;feature=emb_logo" target="_blank" rel="noopener">https://www.youtube.com/watch?time_continue=2&amp;v=Oq2E2yGadnU&amp;feature=emb_logo</a></p>
<img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382c3mf4uj20z80nc76k.jpg" alt="image-20200731220447017" style="zoom:67%;" />

<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ghaib0wwh8j30wc0luaj8.jpg" alt="image-20200731220717640"></p>
<h3 id="Tutorial-3-Lazy-Tag"><a href="#Tutorial-3-Lazy-Tag" class="headerlink" title="Tutorial 3: Lazy Tag"></a>Tutorial 3: Lazy Tag</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCalendarThree</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.seg = collections.defaultdict(int)</span><br><span class="line">        self.lazy = collections.defaultdict(int)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">book</span><span class="params">(self, start, end)</span>:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(s, e, l = <span class="number">0</span>, r = <span class="number">10</span>**<span class="number">9</span>, ID = <span class="number">1</span>)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> r &lt;= s <span class="keyword">or</span> e &lt;= l: <span class="keyword">return</span> </span><br><span class="line">            <span class="keyword">if</span> s &lt;= l &lt; r &lt;= e:</span><br><span class="line">                self.seg[ID] += <span class="number">1</span></span><br><span class="line">                self.lazy[ID] += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                m = (l + r) // <span class="number">2</span></span><br><span class="line">                update(s, e, l, m, <span class="number">2</span> * ID)</span><br><span class="line">                update(s, e, m, r, <span class="number">2</span>*ID+<span class="number">1</span>)</span><br><span class="line">                self.seg[ID] = self.lazy[ID] + max(self.seg[<span class="number">2</span>*ID], self.seg[<span class="number">2</span>*ID+<span class="number">1</span>])</span><br><span class="line">        update(start, end)</span><br><span class="line">        <span class="keyword">return</span> self.seg[<span class="number">1</span>] + self.lazy[<span class="number">1</span>]</span><br></pre></td></tr></table></figure>

<p><a href="https://leetcode.com/problems/my-calendar-iii/discuss/214831/Python-13-Lines-Segment-Tree-with-Lazy-Propagation-O(1)-time" target="_blank" rel="noopener">https://leetcode.com/problems/my-calendar-iii/discuss/214831/Python-13-Lines-Segment-Tree-with-Lazy-Propagation-O(1)-time</a></p>
<h2 id="9P-SegTree"><a href="#9P-SegTree" class="headerlink" title="9P SegTree"></a>9P SegTree</h2><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382c643jyj20ha06pweq.jpg" alt="image-20210310122717309"></p>
<img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382ce6bntj20uk0eemxm.jpg" alt="image-20210311105831208" style="zoom:50%;" />



<h4 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h4><h6 id=""><a href="#" class="headerlink" title=""></a></h6><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382cgjns2j20k00nugmx.jpg" alt="image-20210311111747916" style="zoom:50%;" />

<h4 id="Query"><a href="#Query" class="headerlink" title="Query"></a>Query</h4><p>0-3</p>
<img src="https://tva1.sinaimg.cn/large/008eGmZEgy1goft1ww37bj30m60l60x2.jpg" alt="image-20210311112917349" style="zoom:33%;" />

<h6 id="2-3"><a href="#2-3" class="headerlink" title="2-3"></a>2-3</h6><img src="https://tva1.sinaimg.cn/large/008eGmZEgy1goft01qfv6j30jq0i6q75.jpg" alt="image-20210311112729932" style="zoom: 33%;" />

<h5 id="-1"><a href="#-1" class="headerlink" title=""></a></h5><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382cl74iwj20z20h2q48.jpg" alt="image-20210311113131649" style="zoom: 50%;" />

<p>有可能可以「按需拆」</p>
<img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382d5izkhj21gk0paae8.jpg" alt="image-20210311113433681" style="zoom: 33%;" />

<img src="https://tva1.sinaimg.cn/large/008eGmZEgy1goft7rju6xj30cq0bumyb.jpg" alt="image-20210311113455510" style="zoom: 50%;" />



<ul>
<li>空間：N + Nx(1 + 2 + 4 + … N/4 + N/2 + N)</li>
</ul>
<h2 id="Array-version-Fr-Youtube"><a href="#Array-version-Fr-Youtube" class="headerlink" title="Array version Fr Youtube"></a>Array version Fr Youtube</h2><p>ref; <a href="https://youtu.be/e_bK-dgPvfM?t=555" target="_blank" rel="noopener">https://youtu.be/e_bK-dgPvfM?t=555</a></p>
<p><strong>Pro: able to see the array as a tree after <code>build_tree</code></strong></p>
<iframe src="https://leetcode.com/playground/QAS2H4yZ/shared" frameBorder="0" width="400" height="300"></iframe>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"Hello World!"</span>)</span><br><span class="line">M = <span class="number">1000</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">build_tree</span><span class="params">(arr, start, end, tree, node)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> start == end:</span><br><span class="line">        tree[node] = arr[start]</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    mid = start + (end - start) // <span class="number">2</span></span><br><span class="line">    left_node = node * <span class="number">2</span> + <span class="number">1</span></span><br><span class="line">    right_node = node * <span class="number">2</span> + <span class="number">2</span></span><br><span class="line">    build_tree(arr, start, mid, tree, left_node)</span><br><span class="line">    build_tree(arr, mid+<span class="number">1</span>, end, tree, right_node)</span><br><span class="line">    tree[node] = tree[left_node] + tree[right_node]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update_tree</span><span class="params">(arr, start, end, tree, node, idx, val)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> start == end:</span><br><span class="line">        <span class="comment"># print(node)</span></span><br><span class="line">        tree[node] = val</span><br><span class="line">        arr[idx] = val</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    mid = start + (end - start) // <span class="number">2</span></span><br><span class="line">    left_node = node * <span class="number">2</span> + <span class="number">1</span></span><br><span class="line">    right_node = node * <span class="number">2</span> + <span class="number">2</span></span><br><span class="line">    <span class="keyword">if</span> start &lt;= idx &lt;= mid:</span><br><span class="line">        update_tree(arr, start, mid, tree, left_node, idx, val)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        update_tree(arr, mid+<span class="number">1</span>, end, tree, right_node, idx, val)</span><br><span class="line">    tree[node] = tree[left_node] + tree[right_node]</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">query_tree</span><span class="params">(arr, start, end, tree, node, L, R)</span>:</span></span><br><span class="line">    print(<span class="string">f'start=<span class="subst">&#123;start&#125;</span>, end=<span class="subst">&#123;end&#125;</span>'</span>)</span><br><span class="line">    <span class="keyword">if</span> start == end:</span><br><span class="line">        <span class="keyword">return</span> tree[node]</span><br><span class="line">    <span class="keyword">if</span> L &gt; end <span class="keyword">or</span> R &lt; start:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> start &gt;= L <span class="keyword">and</span> end &lt;= R: <span class="comment"># Further understanding: check with https://youtu.be/e_bK-dgPvfM?t=2714</span></span><br><span class="line">        <span class="keyword">return</span> tree[node]</span><br><span class="line">        </span><br><span class="line">    mid = start + (end - start) // <span class="number">2</span></span><br><span class="line">    left_node = node * <span class="number">2</span> + <span class="number">1</span></span><br><span class="line">    right_node = node * <span class="number">2</span> + <span class="number">2</span></span><br><span class="line">    L_sum = query_tree(arr, start, mid, tree, left_node, L, R)</span><br><span class="line">    R_sum = query_tree(arr, mid+<span class="number">1</span>, end, tree, right_node, L, R)</span><br><span class="line">    <span class="keyword">return</span> L_sum + R_sum</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">arr = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>]</span><br><span class="line">size = len(arr)</span><br><span class="line">tree = [<span class="number">0</span>] * M</span><br><span class="line"></span><br><span class="line">build_tree(arr, <span class="number">0</span>, size<span class="number">-1</span>, tree, <span class="number">0</span>)</span><br><span class="line">print(<span class="string">f'arr: <span class="subst">&#123;arr&#125;</span>'</span>)</span><br><span class="line">print(<span class="string">f'tree: <span class="subst">&#123;tree[:<span class="number">15</span>]&#125;</span>'</span>)</span><br><span class="line"></span><br><span class="line">update_tree(arr, <span class="number">0</span>, size<span class="number">-1</span>, tree, <span class="number">0</span>, <span class="number">4</span>, <span class="number">6</span>)</span><br><span class="line">print(<span class="string">f'arr: <span class="subst">&#123;arr&#125;</span>'</span>)</span><br><span class="line">print(<span class="string">f'tree: <span class="subst">&#123;tree[:<span class="number">15</span>]&#125;</span>'</span>)</span><br><span class="line"></span><br><span class="line">L, R = <span class="number">2</span>, <span class="number">5</span></span><br><span class="line">query_sum = query_tree(arr, <span class="number">0</span>, size<span class="number">-1</span>, tree, <span class="number">0</span>, L, R)</span><br><span class="line">print(<span class="string">f'arr: <span class="subst">&#123;arr&#125;</span>'</span>)</span><br><span class="line">print(<span class="string">f'query_sum [<span class="subst">&#123;L&#125;</span>:<span class="subst">&#123;R&#125;</span>]: <span class="subst">&#123;query_sum&#125;</span>'</span>)</span><br></pre></td></tr></table></figure>





<h1 id="Case"><a href="#Case" class="headerlink" title="Case"></a>Case</h1><h2 id="Range-Sum-Query-w-F-Tree-amp-S-TRee"><a href="#Range-Sum-Query-w-F-Tree-amp-S-TRee" class="headerlink" title="Range Sum Query w/ F-Tree &amp; S-TRee"></a>Range Sum Query w/ F-Tree &amp; S-TRee</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FenwickTree</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        self.sums_ = [<span class="number">0</span>] * (n+<span class="number">1</span>)</span><br><span class="line">        self.n = n</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, i, delta)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; len(self.sums_):</span><br><span class="line">            self.sums_[i] += delta</span><br><span class="line">            i += self._lowbit(i)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(self, i)</span>:</span></span><br><span class="line">        sum_ = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i &gt; <span class="number">0</span>:</span><br><span class="line">            sum_ += self.sums_[i]</span><br><span class="line">            i -= self._lowbit(i)</span><br><span class="line">        <span class="keyword">return</span> sum_</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_lowbit</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> x &amp; -x</span><br><span class="line">    </span><br><span class="line"><span class="comment"># Confirm: index 0 Not Used, right?! </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumArray</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, nums: List[int])</span>:</span></span><br><span class="line">        self.nums = nums</span><br><span class="line">        self.tree = FenwickTree(len(nums))</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">            self.tree.update(i+<span class="number">1</span>, nums[i])</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, i: int, val: int)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        self.tree.update(i+<span class="number">1</span>, val - self.nums[i])</span><br><span class="line">        self.nums[i] = val</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sumRange</span><span class="params">(self, i: int, j: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">return</span> self.tree.query(j + <span class="number">1</span>) - self.tree.query(i)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Your NumArray object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"># obj = NumArray(nums)</span></span><br><span class="line"><span class="comment"># obj.update(i,val)</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SegmentTreeNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, start, end, val, left=None, right=None)</span>:</span></span><br><span class="line">        self.start = start</span><br><span class="line">        self.end = end</span><br><span class="line">        self.mid = start + (end - start) // <span class="number">2</span></span><br><span class="line">        self.val = val</span><br><span class="line">        self.left = left</span><br><span class="line">        self.right = right</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SegTree</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        self.nums = nums</span><br><span class="line">        <span class="keyword">if</span> self.nums:</span><br><span class="line">            self.root = self._buildTree(<span class="number">0</span>, len(nums) - <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, i, val)</span>:</span></span><br><span class="line">        self._updateTree(self.root, i, val)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sumRange</span><span class="params">(self, i, j)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self._sumRange(self.root, i, j)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_buildTree</span><span class="params">(self, start, end)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> start == end: <span class="keyword">return</span> SegmentTreeNode(start, end, self.nums[start])</span><br><span class="line">        mid = start + (end - start) // <span class="number">2</span></span><br><span class="line">        left = self._buildTree(start, mid)</span><br><span class="line">        right = self._buildTree(mid + <span class="number">1</span>, end)</span><br><span class="line">        <span class="keyword">return</span> SegmentTreeNode(start, end, left.val + right.val, left, right)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_updateTree</span><span class="params">(self, root, i, val)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> root.start == i <span class="keyword">and</span> root.end == i:</span><br><span class="line">            root.val = val</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span> i &lt;= root.mid:</span><br><span class="line">            self._updateTree(root.left, i, val)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self._updateTree(root.right, i, val)</span><br><span class="line">        root.val = root.left.val + root.right.val</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_sumRange</span><span class="params">(self, root, i, j)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> root.start == i <span class="keyword">and</span> root.end == j:</span><br><span class="line">            <span class="keyword">return</span> root.val</span><br><span class="line">        <span class="keyword">if</span> j &lt;= root.mid:</span><br><span class="line">            <span class="keyword">return</span> self._sumRange(root.left, i, j)</span><br><span class="line">        <span class="keyword">elif</span> i &gt; root.mid:</span><br><span class="line">            <span class="keyword">return</span> self._sumRange(root.right, i, j)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> self._sumRange(root.left, i, root.mid) + self._sumRange(root.right, root.mid + <span class="number">1</span>, j)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumArray</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="comment"># def __init__(self, nums: List[int]):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        self.tree = SegTree(nums)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, i, val)</span>:</span></span><br><span class="line">        self.tree.update(i, val)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sumRange</span><span class="params">(self, i, j)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.tree.sumRange(i, j)</span><br><span class="line">    <span class="comment"># ref：https://leetcode-cn.com/problems/range-sum-query-mutable/solution/xian-duan-shu-by-a4613565/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Your NumArray object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"># obj = NumArray(nums)</span></span><br><span class="line"><span class="comment"># obj.update(i,val)</span></span><br><span class="line"><span class="comment"># param_2 = obj.sumRange(i,j)</span></span><br></pre></td></tr></table></figure>



<h3 id="Combined"><a href="#Combined" class="headerlink" title="Combined:"></a>Combined:</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SegmentTreeNode</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, start, end, val, left=None, right=None)</span>:</span></span><br><span class="line">        self.start = start</span><br><span class="line">        self.end = end</span><br><span class="line">        self.mid = start + (end - start)//<span class="number">2</span></span><br><span class="line">        self.val = val</span><br><span class="line">        self.left = left</span><br><span class="line">        self.right = right</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SegmentTree</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        self.nums = nums</span><br><span class="line">        <span class="keyword">if</span> self.nums:</span><br><span class="line">            self.root = self._buildTree(<span class="number">0</span>, len(nums) - <span class="number">1</span>)</span><br><span class="line">            </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, i, val)</span>:</span></span><br><span class="line">        self._update(self.root, i, val)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(self, i, j)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self._query(self.root, i, j)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_buildTree</span><span class="params">(self, start, end)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> start == end:</span><br><span class="line">            <span class="keyword">return</span> SegmentTreeNode(start, end, self.nums[start])</span><br><span class="line">        mid = start + (end - start) // <span class="number">2</span></span><br><span class="line">        left = self._buildTree(start, mid)</span><br><span class="line">        right = self._buildTree(mid + <span class="number">1</span>, end)</span><br><span class="line">        <span class="keyword">return</span> SegmentTreeNode(start, end, left.val + right.val, left, right)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_update</span><span class="params">(self, root, i, val)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> root.start == i <span class="keyword">and</span> root.end == i:</span><br><span class="line">            root.val = val</span><br><span class="line">            <span class="keyword">return</span> </span><br><span class="line">        <span class="keyword">if</span> i &lt;= root.mid:</span><br><span class="line">            self._update(root.left, i, val)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self._update(root.right, i, val)</span><br><span class="line">        root.val = root.left.val + root.right.val</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_query</span><span class="params">(self, root, i, j)</span>:</span></span><br><span class="line">        <span class="comment"># print(root.start, root.end, root.mid, i, j)</span></span><br><span class="line">        <span class="keyword">if</span> root.start == i <span class="keyword">and</span> root.end == j:</span><br><span class="line">            <span class="keyword">return</span> root.val</span><br><span class="line">        <span class="keyword">if</span> j &lt;= root.mid:</span><br><span class="line">            <span class="keyword">return</span> self._query(root.left, i, j)</span><br><span class="line">        <span class="keyword">elif</span> i &gt; root.mid:</span><br><span class="line">            <span class="keyword">return</span> self._query(root.right, i, j)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> self._query(root.left , i, root.mid) + self._query(root.right, root.mid + <span class="number">1</span>, j)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FenwickTree</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        self.sums_ = [<span class="number">0</span>] * (n+<span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, i, delta)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; len(self.sums_):</span><br><span class="line">            <span class="comment"># print('in while ', i, delta)</span></span><br><span class="line">            self.sums_[i] += delta</span><br><span class="line">            i += self._lowbit(i)</span><br><span class="line">            <span class="comment"># print('after update: &#123;&#125;'.format(self.sums_))</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(self, i)</span>:</span></span><br><span class="line">        res = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i &gt; <span class="number">0</span>:</span><br><span class="line">            res += self.sums_[i]</span><br><span class="line">            i -= self._lowbit(i)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_lowbit</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> x &amp; (-x)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumArray</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, nums: List[int])</span>:</span></span><br><span class="line">        <span class="string">""" F-Tree """</span></span><br><span class="line">        self.cur_nums = nums</span><br><span class="line">        self.tree = FenwickTree(len(nums))</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">            self.tree.update(i+<span class="number">1</span>, nums[i])</span><br><span class="line">        <span class="comment"># print("INIT: ", self.tree.sums_)</span></span><br><span class="line">        <span class="string">""" S-Tree """</span></span><br><span class="line">        self.seg_tree = SegmentTree(nums)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, i: int, val: int)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">""" F-Tree """</span></span><br><span class="line">        self.tree.update(i + <span class="number">1</span>, val - self.cur_nums[i])</span><br><span class="line">        self.cur_nums[i] = val</span><br><span class="line">        </span><br><span class="line">        <span class="string">""" S-Tree """</span></span><br><span class="line">        self.seg_tree.update(i, val)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sumRange</span><span class="params">(self, i: int, j: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="string">""" F-Tree """</span></span><br><span class="line">        <span class="comment"># print(self.tree.query(j + 1), self.tree.query(i))</span></span><br><span class="line">        <span class="keyword">return</span> self.tree.query(j+<span class="number">1</span>) - self.tree.query(i)</span><br><span class="line">    </span><br><span class="line">        <span class="string">""" S-Tree """</span></span><br><span class="line">        <span class="keyword">return</span> self.seg_tree.query(i, j)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Your NumArray object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"># obj = NumArray(nums)</span></span><br><span class="line"><span class="comment"># obj.update(i,val)</span></span><br><span class="line"><span class="comment"># param_2 = obj.sumRange(i,j)</span></span><br></pre></td></tr></table></figure>



<h1 id="MST"><a href="#MST" class="headerlink" title="MST"></a>MST</h1><p>Usually, turn edge list into adj. list</p>
<ul>
<li>adj matrix: |V| x |V|</li>
<li>adj list: |V| + |E|</li>
<li>edge list: |E|</li>
</ul>
<h2 id="Prim"><a href="#Prim" class="headerlink" title="Prim"></a>Prim</h2><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggrulfnwylj30gk05ujt1.jpg" alt="image-20200715184644350"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggrulc6ffvj30im0b00w3.jpg" alt="image-20200715184636907"></p>
<p>Greedy!</p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggrus16rd6j31dk0ognax.jpg" alt="image-20200715185254214"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggrusiuvkpj31iu0q41gm.jpg" alt="image-20200715185312545"></p>
<h2 id="Kruskal"><a href="#Kruskal" class="headerlink" title="Kruskal"></a>Kruskal</h2><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382cpdw9fj215c0fywg3.jpg" alt="image-20200715230409210"></p>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382csugkgj21b20h0juo.jpg" alt="image-20200715230645534"></p>
<h1 id="Union-Find"><a href="#Union-Find" class="headerlink" title="Union Find"></a>Union Find</h1><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggziztev1mj30tu0fktew.jpg" alt="image-20200722100950385"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggzj0tmac1j30pw0hitdb.jpg" alt="image-20200722101052300"></p>
<ul>
<li>path compression是從 find 出發的，平攤下來是反阿卡曼近乎O(1)</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggzj2pqk5dj30zo0gg7at.jpg" alt="image-20200722101240864"></p>
<ul>
<li>把low rank tree 合併到high rank tree上去, rank是平均長度的概念，這樣在做path compression時的over head比較少</li>
<li>merge by rank 也就是 link by rank</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggzjhmrcp4j30l00ie79r.jpg" alt="image-20200722102700630"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggzji4hnntj30oc0hkq8o.jpg" alt="image-20200722102725831"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UF_w_rank</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        self._parents = [idx <span class="keyword">for</span> idx <span class="keyword">in</span> range(n+<span class="number">1</span>)]</span><br><span class="line">        self._rank = [<span class="number">1</span> <span class="keyword">for</span> idx <span class="keyword">in</span> range(n+<span class="number">1</span>)]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">find</span><span class="params">(self, u)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> u != self._parents[u]:</span><br><span class="line">            self._parents[u] = self.find(self._parents[u])</span><br><span class="line">        <span class="keyword">return</span> self._parents[u]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">union</span><span class="params">(self, u, v)</span>:</span></span><br><span class="line">        pu, pv = self.find(u), self.find(v)</span><br><span class="line">        <span class="keyword">if</span> pu == pv:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="comment"># self._parents[pv] = pu</span></span><br><span class="line">        <span class="comment"># return True</span></span><br><span class="line">        <span class="keyword">if</span> self._rank[u] &gt; self._rank[v]:</span><br><span class="line">            self._parents[pv] = pu</span><br><span class="line">        <span class="keyword">elif</span> self._rank[u] &lt; self._rank[v]:</span><br><span class="line">            self._parents[pu] = pv</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self._parents[pv] = pu</span><br><span class="line">            self._rank[pu] += <span class="number">1</span></span><br><span class="line">            self._rank[pv] += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UF</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        self._parents = [idx <span class="keyword">for</span> idx <span class="keyword">in</span> range(n+<span class="number">1</span>)]</span><br><span class="line">        <span class="comment"># self._rank</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">find</span><span class="params">(self, u)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> u != self._parents[u]:</span><br><span class="line">            self._parents[u] = self.find(self._parents[u])</span><br><span class="line">        <span class="keyword">return</span> self._parents[u]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">union</span><span class="params">(self, u, v)</span>:</span></span><br><span class="line">        pu, pv = self.find(u), self.find(v)</span><br><span class="line">        <span class="keyword">if</span> pu == pv:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        self._parents[pv] = pu</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">areSentencesSimilarTwo</span><span class="params">(self, words1, words2, pairs)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type words1: List[str]</span></span><br><span class="line"><span class="string">        :type words2: List[str]</span></span><br><span class="line"><span class="string">        :type pairs: List[List[str]]</span></span><br><span class="line"><span class="string">        :rtype: bool</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        m, n = len(words1), len(words2)</span><br><span class="line">        <span class="keyword">if</span> m != n <span class="keyword">or</span> <span class="keyword">not</span> pairs:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        uf = UF(len(pairs) * <span class="number">2</span>)</span><br><span class="line">        <span class="comment"># d = collections.defaultdict(int)</span></span><br><span class="line">        d = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> w1, w2 <span class="keyword">in</span> pairs:</span><br><span class="line">            <span class="comment"># w1--&gt; u</span></span><br><span class="line">            <span class="comment"># w2--&gt; v</span></span><br><span class="line">            <span class="comment"># if w1 not in d:</span></span><br><span class="line">            <span class="comment">#     d[w1] = len(d)</span></span><br><span class="line">            u = d[w1] = d.get(w1, len(d))</span><br><span class="line">            v = d[w2] = d.get(w2, len(d))</span><br><span class="line">            <span class="comment"># print(w1,u,w2,v)</span></span><br><span class="line">            uf.union(u, v)</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(m):</span><br><span class="line">            w1, w2 = words1[i], words2[i]</span><br><span class="line">            <span class="keyword">if</span> w1 == w2:    <span class="comment"># may both not in d, but are same</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="comment"># w1--&gt; u</span></span><br><span class="line">            <span class="comment"># w2--&gt; v</span></span><br><span class="line">            <span class="keyword">if</span> w1 <span class="keyword">not</span> <span class="keyword">in</span> d <span class="keyword">or</span> w2 <span class="keyword">not</span> <span class="keyword">in</span> d:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            u, v = d[w1], d[w2]</span><br><span class="line">            <span class="keyword">if</span> uf.find(u) != uf.find(v):</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">BF</span><span class="params">()</span>:</span>       <span class="comment"># Not finished yet</span></span><br><span class="line">        m, n = len(words1), len(words2)</span><br><span class="line">        <span class="keyword">if</span> m != n <span class="keyword">or</span> <span class="keyword">not</span> pairs:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        d = collections.defaultdict(set)</span><br><span class="line">        <span class="keyword">for</span> u, v <span class="keyword">in</span> range(pairs):</span><br><span class="line">            d[u].add(v)</span><br><span class="line">            d[v].add(u)</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(m):</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> self.is_similar(words1[i], words2[i], d):</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_similar</span><span class="params">(self, w1, w2, d)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> w1 <span class="keyword">not</span> <span class="keyword">in</span> d <span class="keyword">and</span> w2 <span class="keyword">not</span> <span class="keyword">in</span> d:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">if</span> w1 <span class="keyword">in</span> d:</span><br><span class="line">            <span class="keyword">return</span> self.is_similar( w2)</span><br><span class="line">            <span class="comment"># ==&gt; many expansion!</span></span><br><span class="line">        <span class="keyword">if</span> w2 <span class="keyword">in</span> d <span class="keyword">and</span> w1 <span class="keyword">in</span> d[w2]:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">""" LC 323 """</span></span><br><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DSU</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="comment"># self.parents = [i for i in range(len(nums))]    # <span class="doctag">TODO:</span> mapping, here I assume it continous first</span></span><br><span class="line">        self.parents = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> n <span class="keyword">in</span> nums:</span><br><span class="line">            self.parents[n] = n <span class="comment"># 動態加呢 ?!　有這樣的題？</span></span><br><span class="line">        self.ranks = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> n <span class="keyword">in</span> nums:</span><br><span class="line">            self.ranks[n] = <span class="number">1</span></span><br><span class="line">            </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">find</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> self.parents[x] != x:</span><br><span class="line">            self.parents[x] = self.find(self.parents[x])    <span class="comment"># set my grandpa as my parent</span></span><br><span class="line">        <span class="keyword">return</span> self.parents[x]</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">union</span><span class="params">(self, x, y)</span>:</span></span><br><span class="line">        <span class="comment"># print(x, y)</span></span><br><span class="line">        <span class="comment"># px, py = self.parents[x], self.parents[y] # BUG... XD</span></span><br><span class="line">                                                  <span class="comment"># CAUGHT by CASE↓</span></span><br><span class="line">                                                    <span class="comment"># 4</span></span><br><span class="line">                                                    <span class="comment"># [[1,2],[0,1],[0,2]]</span></span><br><span class="line">        px, py = self.find(x), self.find(y)</span><br><span class="line">        <span class="keyword">if</span> px != py:</span><br><span class="line">            <span class="comment"># self.parents[y] = px      # BAD... CAUGHT by CASE↓; 怎麼記case或形象好？</span></span><br><span class="line">                                            <span class="comment"># FAILED at: </span></span><br><span class="line">                                                <span class="comment"># 5</span></span><br><span class="line">                                                <span class="comment"># [[0,1],[2,1],[2,0]]; I return 2</span></span><br><span class="line">                                                    <span class="comment"># REASON:</span></span><br><span class="line">                                                    <span class="comment"># 0 &lt;- 1        parents:    0  0   2</span></span><br><span class="line">                                                    <span class="comment"># 2 &lt;- 0 &lt;- 1   parents:    0</span></span><br><span class="line">                                            <span class="comment"># THOUGH PASS at:</span></span><br><span class="line">                                                <span class="comment"># 5</span></span><br><span class="line">                                                <span class="comment"># [[1,2],[0,1],[0,2]]; I return 3</span></span><br><span class="line">            self.parents[py] = px       </span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">union_w_rank</span><span class="params">(self, x, y)</span>:</span></span><br><span class="line">        px, py = self.find(x), self.find(y)</span><br><span class="line">        <span class="keyword">if</span> px != py:</span><br><span class="line">            rx, ry = self.ranks[x], self.ranks[y]</span><br><span class="line">            <span class="keyword">if</span> rx &gt; ry:</span><br><span class="line">                self.parents[py] = px</span><br><span class="line">            <span class="keyword">elif</span> rx &lt; ry:</span><br><span class="line">                self.parents[px] = py</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                self.parents[px] = py</span><br><span class="line">                self.ranks[py] += <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span>    </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countComponents</span><span class="params">(self, n: int, edges: List[List[int]])</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># return self.my_20210505(n, edges)   # AC     問題：dsu裡面的東西有沒有必要是全部的members?    </span></span><br><span class="line">        <span class="comment"># return self.my_20210505_B(n, edges)   # AC；　↑　不必然, 只塞了邊的點，孤立的點就沒放進去DSU</span></span><br><span class="line">        <span class="comment"># return self.my_20210505_C(n, edges) # AC;    正的算，看最後有幾個代表，ps,一開始有把所有點都先弄出來</span></span><br><span class="line">        <span class="comment"># return self.my_20210505_D(n, edges) # AC     正的算，但一開始只把edge上看到的端點放進去，後面在找代表的點的時候要是發現沒在 uf裡，就知道它是個孤立點</span></span><br><span class="line">        <span class="comment"># return self.my_20210505_E(n, edges) # DFS AC</span></span><br><span class="line">        <span class="keyword">return</span> self.my_20210505_F(n, edges) <span class="comment"># BFS   AC</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20210505_E</span><span class="params">(self, n, edges)</span>:</span></span><br><span class="line">        visited = set([])</span><br><span class="line">        outs = collections.defaultdict(list)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(edges)):</span><br><span class="line">            e0, e1 = edges[i]</span><br><span class="line">            outs[e0].append(e1)</span><br><span class="line">            outs[e1].append(e0)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># print(outs)</span></span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">if</span> i <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">                self.my_20210505_dfs(i, <span class="number">0</span>, outs, visited)</span><br><span class="line">                <span class="comment"># visited.add(i)</span></span><br><span class="line">                count += <span class="number">1</span></span><br><span class="line">            <span class="comment"># print(i, count)</span></span><br><span class="line">        <span class="keyword">return</span> count</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20210505_dfs</span><span class="params">(self, now, idx, outs, visited)</span>:</span></span><br><span class="line">        visited.add(now)</span><br><span class="line">        <span class="keyword">for</span> nbr <span class="keyword">in</span> outs[now]:</span><br><span class="line">            <span class="comment"># if now not in visited:    BUG</span></span><br><span class="line">            <span class="keyword">if</span> nbr <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">                self.my_20210505_dfs(nbr, idx + <span class="number">1</span>, outs, visited)    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20210505_F</span><span class="params">(self, n, edges)</span>:</span></span><br><span class="line">        visited = set([])</span><br><span class="line">        outs = collections.defaultdict(list)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(edges)):</span><br><span class="line">            e0, e1 = edges[i]</span><br><span class="line">            outs[e0].append(e1)</span><br><span class="line">            outs[e1].append(e0)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># print(outs)</span></span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">if</span> i <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">                <span class="comment"># DO BFS</span></span><br><span class="line">                Q = collections.deque([])</span><br><span class="line">                Q.append(i)</span><br><span class="line">                visited.add(i)</span><br><span class="line">                <span class="keyword">while</span> Q:</span><br><span class="line">                    now = Q.popleft()</span><br><span class="line">                    <span class="keyword">for</span> nbr <span class="keyword">in</span> outs[now]:</span><br><span class="line">                        <span class="keyword">if</span> nbr <span class="keyword">not</span> <span class="keyword">in</span> visited:  <span class="comment"># Don't forget!!!</span></span><br><span class="line">                            Q.append(nbr)</span><br><span class="line">                            visited.add(nbr)</span><br><span class="line">                <span class="comment"># END BFS</span></span><br><span class="line">                count += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> count</span><br><span class="line">    </span><br><span class="line">        </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20210505_D</span><span class="params">(self, n, edges)</span>:</span></span><br><span class="line">        all_nodes = set([])       <span class="comment"># 這不是真正的all_nodes了，只是 all_edge_nodes</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(edges)):</span><br><span class="line">            fr, to = edges[i]</span><br><span class="line">            all_nodes.add(fr)</span><br><span class="line">            all_nodes.add(to)</span><br><span class="line"></span><br><span class="line">        uf = DSU(all_nodes)    <span class="comment"># always have to put all members into DSU first?!</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(edges)):</span><br><span class="line">            <span class="comment"># print(i)</span></span><br><span class="line">            fr, to = edges[i]</span><br><span class="line">            uf.union(fr, to)   <span class="comment"># should seperate this LOGICS! NOT Here            </span></span><br><span class="line">            <span class="comment"># uf.union_w_rank(fr, to)   # should seperate this LOGICS! NOT Here</span></span><br><span class="line">                </span><br><span class="line">        res = set()</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                res.add(uf.find(i))</span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                res.add(i)</span><br><span class="line">        <span class="keyword">return</span> len(res)        </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20210505_C</span><span class="params">(self, n, edges)</span>:</span></span><br><span class="line">        all_nodes = []</span><br><span class="line">        [all_nodes.append(i) <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line">        </span><br><span class="line">        uf = DSU(all_nodes)    <span class="comment"># always have to put all members into DSU first?!</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(edges)):</span><br><span class="line">            <span class="comment"># print(i)</span></span><br><span class="line">            fr, to = edges[i]</span><br><span class="line">            uf.union(fr, to)   <span class="comment"># should seperate this LOGICS! NOT Here            </span></span><br><span class="line">            <span class="comment"># uf.union_w_rank(fr, to)   # should seperate this LOGICS! NOT Here</span></span><br><span class="line">                </span><br><span class="line">        res = set()</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            res.add(uf.find(i))</span><br><span class="line">        <span class="keyword">return</span> len(res)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20210505_B</span><span class="params">(self, n, edges)</span>:</span></span><br><span class="line">        all_nodes = set([])       <span class="comment"># 這不是真正的all_nodes了，只是 all_edge_nodes</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(edges)):</span><br><span class="line">            fr, to = edges[i]</span><br><span class="line">            all_nodes.add(fr)</span><br><span class="line">            all_nodes.add(to)</span><br><span class="line"></span><br><span class="line">        dsu = DSU(all_nodes)    <span class="comment"># always have to put all members into DSU first?!</span></span><br><span class="line">        union_count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(edges)):</span><br><span class="line">            <span class="comment"># print(i)</span></span><br><span class="line">            fr, to = edges[i]</span><br><span class="line">            <span class="keyword">if</span> dsu.union_w_rank(fr, to):</span><br><span class="line">                union_count += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> n - union_count</span><br><span class="line">        <span class="comment"># return len(all_nodes) - union_count</span></span><br><span class="line">        </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20210505</span><span class="params">(self, n, edges)</span>:</span></span><br><span class="line">        <span class="comment"># max_num = 0</span></span><br><span class="line">        <span class="comment"># for i in range(n):</span></span><br><span class="line">        <span class="comment">#     fr, to = edges[i]</span></span><br><span class="line">        <span class="comment">#     max_num = max(max_num, fr, to)</span></span><br><span class="line">        <span class="comment"># all_nodes = []</span></span><br><span class="line">        <span class="comment"># [all_nodes.append(i) for i in range(max_num)]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># all_nodes = set([])       # BUG, if any one node is not list in edges</span></span><br><span class="line">        <span class="comment"># for i in range(len(edges)):</span></span><br><span class="line">        <span class="comment">#     fr, to = edges[i]</span></span><br><span class="line">        <span class="comment">#     all_nodes.add(fr)</span></span><br><span class="line">        <span class="comment">#     all_nodes.add(to)</span></span><br><span class="line">        all_nodes = []</span><br><span class="line">        [all_nodes.append(i) <span class="keyword">for</span> i <span class="keyword">in</span> range(n)] <span class="comment"># 一定這樣先把all_nodes生出來先嗎？</span></span><br><span class="line">        <span class="comment"># print(all_nodes)</span></span><br><span class="line">        <span class="comment"># assume there's not repeated connections in edges</span></span><br><span class="line">        <span class="comment"># return len(all_nodes) - n     # WRONG, 要是邊在已連著的同個島的兩點了，就不該再被減去，不然就多減了</span></span><br><span class="line">        </span><br><span class="line">        dsu = DSU(all_nodes)    <span class="comment"># always have to put all members into DSU first?!</span></span><br><span class="line">        union_count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(edges)):</span><br><span class="line">            <span class="comment"># print(i)</span></span><br><span class="line">            fr, to = edges[i]</span><br><span class="line">            <span class="keyword">if</span> dsu.union_w_rank(fr, to):   <span class="comment"># should seperate this LOGICS! NOT Here</span></span><br><span class="line">                union_count += <span class="number">1</span>      <span class="comment"># 不是在這裡作這個判斷的</span></span><br><span class="line">                                    <span class="comment"># 不不不，其實可以過；但要是 union像剛剛那樣寫了，</span></span><br><span class="line">                                    <span class="comment"># 可能要自圓的話就得下面再作一次所有人的find的判斷 (?!) --&gt; DISCUSS</span></span><br><span class="line">        <span class="comment"># print('union_count: ', union_count)</span></span><br><span class="line">        <span class="keyword">return</span> len(all_nodes) - union_count</span><br></pre></td></tr></table></figure>



</div><hr></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/58/"><i class="fa fa-chevron-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/58/">58</a><span class="page-number current">59</span><a class="page-number" href="/page/60/">60</a><span class="space">&hellip;</span><a class="page-number" href="/page/78/">78</a><a class="extend next" rel="next" href="/page/60/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2023 By Joe Huang</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>