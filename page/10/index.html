<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content=""><meta name="keywords" content=""><meta name="author" content="Joe Huang"><meta name="copyright" content="Joe Huang"><title>Awaken Desparado</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-180692466-1', 'auto');
ga('send', 'pageview');</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 4.2.1"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="false"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Joe Huang</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">382</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">25</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">65</span></a></div></div></div><nav class="no-bg" id="nav"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Awaken Desparado</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="site-info"><div id="site-title">Awaken Desparado</div><div id="site-sub-title"></div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2020/10/23/BigData_java/2020-10-23%20Kafka%20Infrastructure%20&amp;%20Details/">BigData_java/2020-10-23 Kafka Infrastructure &amp; Details</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-10-23</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/BigData-java/">BigData_java</a></span><div class="content"><h2 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka"></a>Kafka</h2><h3 id="My-Installation"><a href="#My-Installation" class="headerlink" title="My Installation"></a>My Installation</h3><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">10882* brew cask install java</span><br><span class="line">10885* /bin/bash -c <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)</span>"</span>\n</span><br><span class="line">10886* <span class="built_in">echo</span> <span class="string">'PATH="/usr/local/bin:$PATH"'</span> &gt;&gt; ~/.bash_profile</span><br><span class="line">10896* brew cask install homebrew/cask-versions/adoptopenjdk8</span><br><span class="line">10897* brew install kafka</span><br><span class="line">10904* java -version</span><br><span class="line">10905* vim /usr/<span class="built_in">local</span>/etc/kafka/server.properties		↓ </span><br><span class="line">															uncomment <span class="string">"listeners=PLAINTEXT://:9092"</span></span><br></pre></td></tr></table></figure>



<h3 id="Servers-of-Zookeeper-amp-Kafka"><a href="#Servers-of-Zookeeper-amp-Kafka" class="headerlink" title="Servers of Zookeeper &amp; Kafka"></a>Servers of Zookeeper &amp; Kafka</h3><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">10906* zookeeper-server-start /usr/<span class="built_in">local</span>/etc/kafka/zookeeper.properties</span><br><span class="line">10907* kafka-server-start /usr/<span class="built_in">local</span>/etc/kafka/server.properties</span><br></pre></td></tr></table></figure>

<img src="https://tva1.sinaimg.cn/large/0081Kckwgy1gjzkxdfcs3j31xk0ng7dc.jpg" alt="image-20201023211741754" style="zoom:67%;" />



<h3 id="Topics"><a href="#Topics" class="headerlink" title="Topics"></a>Topics</h3><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">10909* kafka-topics --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic <span class="built_in">test</span></span><br><span class="line">	&gt;&gt; Created topic <span class="built_in">test</span>.</span><br><span class="line">	</span><br><span class="line">10911* kafka-topics --list --bootstrap-server localhost:9092</span><br><span class="line">	&gt;&gt; <span class="built_in">test</span></span><br><span class="line">	</span><br><span class="line">10913* kafka-topics --describe --topic <span class="built_in">test</span> --bootstrap-server localhost:9092</span><br><span class="line">	&gt;&gt; Topic: <span class="built_in">test</span>	PartitionCount: 1	ReplicationFactor: 1	Configs: segment.bytes=1073741824</span><br><span class="line">					Topic: <span class="built_in">test</span>	Partition: 0	Leader: 0	Replicas: 0	Isr: 0</span><br><span class="line"></span><br><span class="line">10914* kafka-run-class kafka.tools.GetOffsetShell --broker-list localhost:9092 --topic <span class="built_in">test</span></span><br><span class="line">	&gt;&gt; <span class="built_in">test</span>:0:0</span><br></pre></td></tr></table></figure>



<h3 id="Producer-amp-Consumer"><a href="#Producer-amp-Consumer" class="headerlink" title="Producer &amp; Consumer"></a>Producer &amp; Consumer</h3><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">10915* kafka-console-producer --broker-list localhost:9092 --topic <span class="built_in">test</span></span><br><span class="line">10916* kafka-console-consumer --bootstrap-server localhost:9092 --topic <span class="built_in">test</span></span><br><span class="line">10918* kafka-console-consumer --bootstrap-server localhost:9092 --topic <span class="built_in">test</span> --from-beginning</span><br></pre></td></tr></table></figure>

<img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h38a1fowkwj220m0n2n1g.jpg" alt="image-20201023212415260" style="zoom:67%;" />





<h2 id="Maven-Proj"><a href="#Maven-Proj" class="headerlink" title="Maven Proj"></a>Maven Proj</h2><ul>
<li>⌘ + N – Generate</li>
</ul>
<img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h38a1i4boaj21870u0dlv.jpg" alt="image-20201024003840912" style="zoom:50%;" />





<h3 id=""><a href="#" class="headerlink" title=""></a></h3></div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/10/23/BigData_python/2020-10-23%20pyspark%20w:%20Clickhouse/">BigData_python/2020-10-23 pyspark w: Clickhouse</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-10-23</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/BigData-python/">BigData_python</a></span><div class="content"><h2 id="PySpark-Clickhouse"><a href="#PySpark-Clickhouse" class="headerlink" title="PySpark + Clickhouse"></a>PySpark + Clickhouse</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># import pandas as pd</span></span><br><span class="line"><span class="comment"># import numpy as np</span></span><br><span class="line"><span class="comment"># import json</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pyspark.sql <span class="keyword">import</span> SparkSession</span><br><span class="line"><span class="keyword">from</span> pyspark.sql <span class="keyword">import</span> functions <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">from</span> pyspark.sql <span class="keyword">import</span> types <span class="keyword">as</span> T</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">query_clickhouse_by_spark</span><span class="params">(spark)</span>:</span></span><br><span class="line">    <span class="comment"># customSchema = T.StructType([</span></span><br><span class="line">    <span class="comment">#     T.StructField("customerId", T.IntegerType(), True),</span></span><br><span class="line">    <span class="comment">#     T.StructField("titleId", T.IntegerType(), True),</span></span><br><span class="line">    <span class="comment">#     T.StructField("freq", T.FloatType(), True),</span></span><br><span class="line">    <span class="comment">#     # T.StructField("timestamp", T.LongType(), True),</span></span><br><span class="line">    <span class="comment"># ])</span></span><br><span class="line">    query = <span class="string">""" </span></span><br><span class="line"><span class="string">            WITH</span></span><br><span class="line"><span class="string">                toDate('2022-02-21') AS date,</span></span><br><span class="line"><span class="string">                INTERVAL 1 WEEK AS interval_week</span></span><br><span class="line"><span class="string">            SELECT</span></span><br><span class="line"><span class="string">                * except(imported, campaign_id_valid) from analytics.^_____^y_002 -- (select * except(imported, campaign_id_valid) from analytics.orders_events_002 )-- analytics.orders_events_002 </span></span><br><span class="line"><span class="string">            WHERE</span></span><br><span class="line"><span class="string">                toDate(updated_at) &gt;= date </span></span><br><span class="line"><span class="string">                AND toDate(updated_at) &lt;= toStartOfDay(date + INTERVAL 0 DAY)</span></span><br><span class="line"><span class="string">            """</span></span><br><span class="line">    raw_df = spark.read \</span><br><span class="line">        .format(<span class="string">"jdbc"</span>) \</span><br><span class="line">        .option(<span class="string">"url"</span>, <span class="string">"jdbc:clickhouse://clickhouse-prod.internal.^___________^Y.com:8123"</span>) \</span><br><span class="line">        .option(<span class="string">"query"</span>, <span class="string">"SELECT version()"</span>) \</span><br><span class="line">        .option(<span class="string">"password"</span>, <span class="string">"Y^____________^Y"</span>) \</span><br><span class="line">        .load()</span><br><span class="line">        <span class="comment"># .option("driver", "ru.yandex.clickhouse.ClickHouseDriver") \</span></span><br><span class="line">    raw_df.printSchema()</span><br><span class="line">    raw_df.show(<span class="number">1</span>, <span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># df = spark.read.csv('./resources/freqs.csv', header=True, schema=customSchema)</span></span><br><span class="line">    <span class="keyword">return</span> raw_df</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_dataset_by_spark</span><span class="params">(spark)</span>:</span></span><br><span class="line">    customSchema = T.StructType([</span><br><span class="line">        T.StructField(<span class="string">"customerId"</span>, T.IntegerType(), <span class="literal">True</span>),</span><br><span class="line">        T.StructField(<span class="string">"titleId"</span>, T.IntegerType(), <span class="literal">True</span>),</span><br><span class="line">        T.StructField(<span class="string">"freq"</span>, T.FloatType(), <span class="literal">True</span>),</span><br><span class="line">        <span class="comment"># T.StructField("timestamp", T.LongType(), True),</span></span><br><span class="line">    ])</span><br><span class="line"></span><br><span class="line">    df = spark.read.csv(<span class="string">'./resources/freqs.csv'</span>, header=<span class="literal">True</span>, schema=customSchema)</span><br><span class="line">    <span class="keyword">return</span> df</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_hi</span><span class="params">(name)</span>:</span></span><br><span class="line">    <span class="comment"># Use a breakpoint in the code line below to debug your script.</span></span><br><span class="line">    print(<span class="string">f'Hi, <span class="subst">&#123;name&#125;</span>'</span>)  <span class="comment"># Press ⌘F8 to toggle the breakpoint.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Press the green button in the gutter to run the script.</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    print_hi(<span class="string">'PyCharm'</span>)</span><br><span class="line">    <span class="comment"># findspark.init()</span></span><br><span class="line">    <span class="comment"># myjar = "/home/ec2-user/code/train-recsys/clickhouse-jdbc-0.3.1.jar"</span></span><br><span class="line">    <span class="comment"># myjar = './clickhouse-native-jdbc-shaded.jar'</span></span><br><span class="line">    myjar = <span class="string">"/home/ec2-user/clickhouse-jdbc-0.3.2-patch7-all.jar"</span></span><br><span class="line">    spark = SparkSession \</span><br><span class="line">        .builder \</span><br><span class="line">        .master(<span class="string">'local'</span>) \</span><br><span class="line">        .appName(<span class="string">"PySpark ALS"</span>) \</span><br><span class="line">        .config(<span class="string">"spark.jars"</span>, myjar) \</span><br><span class="line">        .config(<span class="string">"spark.executor.extraClassPath"</span>, myjar) \</span><br><span class="line">        .config(<span class="string">"spark.executor.extraLibrary"</span>, myjar) \</span><br><span class="line">        .config(<span class="string">"spark.driver.extraClassPath"</span>, myjar) \</span><br><span class="line">        .getOrCreate()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># sc = spark.sparkContext</span></span><br><span class="line">    <span class="comment"># df = load_dataset_by_spark(spark)</span></span><br><span class="line">    df = query_clickhouse_by_spark(spark)</span><br><span class="line">    df.show(<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># See PyCharm help at https://www.jetbrains.com/help/pycharm/</span></span><br><span class="line"><span class="comment"># JAVA_HOME installation: https://bhargavamin.com/how-to-do/setting-up-java-environment-variable-on-ec2/</span></span><br><span class="line"><span class="comment">#</span></span><br></pre></td></tr></table></figure>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/10/23/BigData_java/Kafka/2020-10-23%20Kafka%20Intro/">BigData_java/Kafka/2020-10-23 Kafka Intro</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-10-23</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Kafka/">Kafka</a></span><div class="content"><h1 id="Kafka-Intro"><a href="#Kafka-Intro" class="headerlink" title="Kafka Intro"></a>Kafka Intro</h1><ul>
<li>Distributed</li>
<li>pub/sub<ul>
<li>Diff topics according to diff messages’ types</li>
</ul>
</li>
<li>MQ</li>
</ul>
<p>Event Steraming</p>
<p><img src="https://p.ipic.vip/mfg6e4.png" alt="image-20230503165108117"></p>
<p>Cache、消峰、解耦、異步通訊</p>
<p><img src="https://p.ipic.vip/20uv24.png" alt="image-20230503170257560"></p>
<p><img src="https://p.ipic.vip/s5tjxb.png" alt="image-20230503170437019"></p>
<h1 id="基礎架構"><a href="#基礎架構" class="headerlink" title="基礎架構"></a>基礎架構</h1><p>發送時是發到某個topic</p>
<ul>
<li><code>topic</code></li>
<li><code>分區(partition)</code> for 分佈式，作法是一個topic被分為多個partitions，就可以分到多台電腦的資源了;  一台的時候受限的是帶寬–12.5MBytes/sec</li>
<li>消費的人也拆開了分為多個，共同在一個group內作併發 (默認自己一個人是一個組，然後會擔保不會重覆)</li>
<li>有用<code>副本(replica)</code>作容錯</li>
</ul>
<p><img src="https://p.ipic.vip/ju1a7n.png" alt="image-20230503171543880"></p>
<p><img src="https://p.ipic.vip/5bjpav.png" alt="image-20230503171635183"></p>
<p><img src="https://p.ipic.vip/pndo8q.png" alt="image-20230503171840722"></p>
<p><img src="https://p.ipic.vip/ztuxib.png" alt="image-20230503172039395"></p>
<p>★只有涉及到副本的時候才會有「主從」問題；要是說分區０跟分區１兩個是不互影響的獨立的不會說「主從」</p>
<h1 id="搭集群"><a href="#搭集群" class="headerlink" title="搭集群"></a>搭集群</h1><p>msk 幫做完的事：在每台機器上會有quorumpeermain ，然後一般是可以用jps看jvm跑的服務</p>
<p>kafkaServer.out、server.log可看到錯誤</p>
<p><img src="https://p.ipic.vip/kn2xtr.png" alt="image-20230503210412545"></p>
<p>改分區跟刪topic細節</p>
<p><img src="https://p.ipic.vip/tiuhdf.png" alt="image-20230503211707348"></p>
<p><img src="https://p.ipic.vip/iecvkr.png" alt="image-20230503211828677"></p>
<p>　</p>
<p>ref: <a href="https://www.bilibili.com/video/BV1Wv4y1m7m6?p=3&vd_source=a446d08c42a016c121a1c8007fc3ce42" target="_blank" rel="noopener">2.消息队列的功能介绍_哔哩哔哩_bilibili</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/10/22/Algo.%20Ult./note/">Algo. Ult./note</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-10-22</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Languages/">Languages</a></span><div class="content"><h4 id="Hard-to-solve"><a href="#Hard-to-solve" class="headerlink" title="Hard, to solve:"></a>Hard, to solve:</h4><pre><code>- 301.remove-invalidparantheses TLE for enumeration w/ backtracking, 
- 140.word-break-ii a)MLE w/ case &quot;a&quot;*n &amp; b)Trie method (Trie not faster for single query, but for multi query in 472.)
- SegmentTree
- BinaryIndexedTree
- Letter Combinatino of A Phone Number</code></pre><table>
<thead>
<tr>
<th></th>
<th>Python3</th>
<th>Cpp</th>
<th>JS</th>
<th>Java</th>
<th>Scala</th>
</tr>
</thead>
<tbody><tr>
<td><strong>dict</strong></td>
<td></td>
<td>include <unordered_map>, //Similar to defaultdict() in python3</td>
<td></td>
<td></td>
<td>import scala.collection.mutable.HashMap</td>
</tr>
<tr>
<td></td>
<td>d = {}</td>
<td>unordered_map&lt;Node*&gt; d;</td>
<td>d = {}; new Map();</td>
<td>Map&lt;Node, Node&gt; visited = new HashMap();</td>
<td>var lookup = new HashMap<a href="">Int, Int</a></td>
</tr>
<tr>
<td></td>
<td>d[k] = v;</td>
<td>d[k] = v;</td>
<td>d[k]=v; map.<strong>set</strong>(0,1)</td>
<td>visited.<strong>put</strong>(k, v)</td>
<td>lookup.put(nums(i), i)</td>
</tr>
<tr>
<td></td>
<td>d[k]; d.get(k,0)</td>
<td>d[k];</td>
<td>d[k]; map.get(k)</td>
<td>visited.get(cur_O)</td>
<td></td>
</tr>
<tr>
<td></td>
<td>k not in d</td>
<td>(d.find(k)==d.end())</td>
<td>!(nbr_O.val in visited)</td>
<td>!visited.containsKey(nbr_O)</td>
<td></td>
</tr>
<tr>
<td></td>
<td>k in d</td>
<td>(d.find(k)!=d.end())</td>
<td>nbr_O.val in visited; (map.<strong>has</strong>(sum-k))</td>
<td>visited.<strong>containsKey</strong>(nbr_O)</td>
<td>lookup.contains(diff)</td>
</tr>
<tr>
<td></td>
<td>del d[k]</td>
<td>d.<strong>erase</strong>(key)</td>
<td>this.d.<strong>delete</strong>(key);</td>
<td>this.d.<strong>remove</strong>(key);</td>
<td></td>
</tr>
<tr>
<td></td>
<td>len(d)</td>
<td>size()</td>
<td>d.<strong>size</strong></td>
<td>d.size()</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>d.empty()  //true; false</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>NotOK</td>
<td></td>
<td></td>
<td>{k:v} in Initialization</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Special APIs</td>
<td></td>
<td>reserve(capacity)</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Iterate</td>
<td>for k in d.keys():</td>
<td>for (auto k: d)</td>
<td>for (var key in dict){}</td>
<td>for(char c:  ransomNote.toCharArray()) {</td>
<td>for (i &lt;- 0 until n)</td>
</tr>
<tr>
<td><strong>Ordered_dict</strong></td>
<td>self.od.popitem(last=False)<br /><a href="https://www.pythonf.cn/read/89970" target="_blank" rel="noopener">https://www.pythonf.cn/read/89970</a><br /><a href="https://gist.github.com/joequery/12332f410a05e6c7c949" target="_blank" rel="noopener">https://gist.github.com/joequery/12332f410a05e6c7c949</a></td>
<td></td>
<td>d = new Map(); APIs↑↑ //ref: <a href="https://stackoverflow.com/questions/2798893/ordered-hash-in-javascript" target="_blank" rel="noopener">https://stackoverflow.com/questions/2798893/ordered-hash-in-javascript</a></td>
<td>LinkedHashMap&lt;Integer, Integer&gt; d;<br />this.d = new LinkedHashMap&lt;&gt;();</td>
<td></td>
</tr>
<tr>
<td></td>
<td>first = next(iter(self.od))</td>
<td></td>
<td></td>
<td>Integer first = this.d.keySet().iterator().next();</td>
<td></td>
</tr>
<tr>
<td><strong>queue</strong></td>
<td>from collections import deque</td>
<td>include  <deque></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>deque();</td>
<td>deque&lt;Node*&gt;</td>
<td>let Q = [];</td>
<td>Queue<Node> Q = new LinkedList(); //LinkedList<Node> Q = new LinkedList<Node>(); //雙向</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Q.append(cur); v=Q.popleft()</td>
<td>Q.push_back(cur); v=Q.front(),Q.pop_front()</td>
<td>Q.push(cur); v=Q.shift(); // O(n)</td>
<td>Q.add(nbr_O);//Q.push(nbr_O); Q.poll();</td>
<td></td>
</tr>
<tr>
<td></td>
<td>while d</td>
<td>while (!Q.empty())</td>
<td>while (Q.length != 0)</td>
<td>while (!Q.isEmpty())</td>
<td></td>
</tr>
<tr>
<td><strong>deque</strong></td>
<td></td>
<td></td>
<td></td>
<td>ArrayDeque雙向實現了DEque的interface</td>
<td></td>
</tr>
<tr>
<td><strong>vector</strong></td>
<td></td>
<td>include <vector></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>self.res = []</td>
<td>vector&lt;vector<int>&gt; result;</td>
<td>res = [];</td>
<td>List&lt;List<Integer>&gt; res = new ArrayList&lt;List<Integer>&gt;();</td>
<td></td>
</tr>
<tr>
<td></td>
<td>item.append(nums[idx])</td>
<td>item.push_back(nums[idx]);</td>
<td>item.push(nums[idx]);</td>
<td>item.add(nums[idx]);</td>
<td></td>
</tr>
<tr>
<td></td>
<td>item.pop()</td>
<td>item.pop_back();</td>
<td>item.pop();</td>
<td>item.remove(item.size()-1);</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>l.length; // 注意！跟dict不同，這邊是 length</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>for</td>
<td>for (<strong><em>let</em></strong> i=0; i&lt;l.length; i++)</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>Array</strong></td>
<td>l = [False] * 3</td>
<td>vector<bool> dp(3, false);</td>
<td>const dp = new Array(3).fill(false);</td>
<td>List<Boolean> dp = new ArrayList(Collections.nCopies(s.length(), false));</td>
<td>return Array(lookup(diff), i)</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td>int[] nums;, nums.length</td>
<td></td>
</tr>
<tr>
<td><strong>Doublely LinkedList</strong></td>
<td></td>
<td><strong>std::list</strong><br /><strong>List</strong> stores elements at non contiguous memory location i.e. it internally uses a doubly linked list i.e.</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>back(); front();</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>pop_back(); pop_front();</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>db_ll.erase(d[key])</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>APIs</strong></td>
<td>from collections import Counter<br />Counter(l)</td>
<td>X</td>
<td>_.countBy(l)</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td></td>
<td>max</td>
<td>max</td>
<td>Math.max</td>
<td>Math.max</td>
<td></td>
</tr>
<tr>
<td><strong>String</strong></td>
<td>len(s)</td>
<td>s.length()</td>
<td>s.length</td>
<td>s.length()</td>
<td></td>
</tr>
<tr>
<td></td>
<td>s[i]</td>
<td>s[i]</td>
<td>s[i]</td>
<td>s.charAt(i)</td>
<td></td>
</tr>
<tr>
<td></td>
<td>s[3:5]</td>
<td>token = s.substr(start, i-start+1);</td>
<td>s.slice(3, 5);</td>
<td>s.substring(start, i+1);</td>
<td></td>
</tr>
<tr>
<td><strong>Set</strong></td>
<td>ws = set(wD)</td>
<td>unordered_set<string> ws;<br/>        <br/>        for (auto s: wordDict){<br/>            ws.insert(s);<br/>        }</td>
<td>let ws = new Set(wD)</td>
<td>HashSet<String> ws = new HashSet(wordDict);</td>
<td></td>
</tr>
<tr>
<td></td>
<td>token in ws</td>
<td>ws.find(token) != ws.end()</td>
<td>ws.has(token)</td>
<td>ws.contains(token)</td>
<td></td>
</tr>
<tr>
<td><strong>MAX</strong></td>
<td>float(‘-inf’)</td>
<td>INT_MIN;</td>
<td>-Number.MAX_VALUE;</td>
<td>Integer.MIN_VALUE;</td>
<td></td>
</tr>
<tr>
<td><strong>2D Init</strong></td>
<td>[[0 for j in range(n)] for i in range(m)]</td>
<td></td>
<td></td>
<td>[…Array(3)].map(x=&gt;Array(5).fill(0))</td>
<td></td>
</tr>
<tr>
<td><strong>1D sort</strong></td>
<td>l.sort(reverse=True)</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>Node</strong></td>
<td>if not head</td>
<td>if (!head); if (nullputr == head)</td>
<td>if (!root); if (head == null)</td>
<td>if (head == null)</td>
<td></td>
</tr>
</tbody></table>
<h2 id="Special-issues"><a href="#Special-issues" class="headerlink" title="Special issues:"></a>Special issues:</h2><ul>
<li>Java &amp; js</li>
<li><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gegmwb46qaj312a0u0qb1.jpg" alt="image-20200504191823941" style="zoom:67%;" />





</li>
</ul>
<h2 id="Python3-lt"><a href="#Python3-lt" class="headerlink" title="Python3 lt"></a>Python3 <strong>lt</strong></h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TreeNode.__lt__ = <span class="keyword">lambda</span> me, other: me.val &lt; other.val</span><br></pre></td></tr></table></figure>

<p>e.g. in LC-1305</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">TreeNode.__lt__ = <span class="keyword">lambda</span> me, other: me.val &lt; other.val	<span class="comment"># for the "sort!"</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getAllElements</span><span class="params">(self, root1: TreeNode, root2: TreeNode)</span> -&gt; List[int]:</span></span><br><span class="line">        <span class="keyword">return</span> self.my_20220125(root1, root2)   <span class="comment"># AC</span></span><br><span class="line">        <span class="keyword">return</span> self.my_20220125_B(root1, root2) <span class="comment"># AC</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20220125_B</span><span class="params">(self, root1, root2)</span>:</span></span><br><span class="line">        all_nodes1 = self.in_order(root1)</span><br><span class="line">        all_nodes2 = self.in_order(root2)</span><br><span class="line">        i = j = <span class="number">0</span></span><br><span class="line">        m, n = len(all_nodes1), len(all_nodes2)</span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">while</span> i &lt; m <span class="keyword">or</span> j &lt; n:</span><br><span class="line">            a = b = sys.maxsize</span><br><span class="line">            <span class="keyword">if</span> i &lt; m:</span><br><span class="line">                a = all_nodes1[i].val</span><br><span class="line">            <span class="keyword">if</span> j &lt; n:</span><br><span class="line">                b = all_nodes2[j].val</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> a &lt;= b:</span><br><span class="line">                res.append(a)</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                res.append(b)</span><br><span class="line">                j += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">                </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">in_order</span><span class="params">(self, root)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        </span><br><span class="line">        stack = []</span><br><span class="line">        cur = root</span><br><span class="line">        <span class="keyword">while</span> cur:</span><br><span class="line">            stack.append(cur)</span><br><span class="line">            cur = cur.left</span><br><span class="line">        </span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">while</span> stack:</span><br><span class="line">            now = stack.pop()</span><br><span class="line">            res.append(now)</span><br><span class="line">            cur = now.right</span><br><span class="line">            <span class="keyword">while</span> cur:</span><br><span class="line">                stack.append(cur)</span><br><span class="line">                cur = cur.left</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20220125</span><span class="params">(self, root1, root2)</span>:</span></span><br><span class="line">        all_nodes1 = self.get_all_nodes(root1)</span><br><span class="line">        all_nodes2 = self.get_all_nodes(root2)</span><br><span class="line">        <span class="comment"># print(all_nodes1, all_nodes2)</span></span><br><span class="line">        all_nodes1.extend(all_nodes2)</span><br><span class="line">        all_nodes1.sort()</span><br><span class="line">        <span class="keyword">return</span> [n.val <span class="keyword">for</span> n <span class="keyword">in</span> all_nodes1]</span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">return</span> sorted([node.val <span class="keyword">for</span> node <span class="keyword">in</span> all_nodes1])</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_all_nodes</span><span class="params">(self, root)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        cur = root</span><br><span class="line">        stack = [cur]</span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">while</span> stack:</span><br><span class="line">            now = stack.pop()</span><br><span class="line">            res.append(now)</span><br><span class="line">            <span class="keyword">for</span> child <span class="keyword">in</span> [now.right, now.left]:</span><br><span class="line">                <span class="keyword">if</span> child:</span><br><span class="line">                    stack.append(child)</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>



<h3 id="Lintcode-391"><a href="#Lintcode-391" class="headerlink" title="Lintcode 391"></a>Lintcode 391</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Interval.__lt__ = <span class="keyword">lambda</span> self, other: self.end &lt; other.end </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    @param airplanes: An interval array</span></span><br><span class="line"><span class="string">    @return: Count of airplanes are in the sky.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countOfAirplanes</span><span class="params">(self, airplanes)</span>:</span></span><br><span class="line">        <span class="comment"># write your code here</span></span><br><span class="line">        <span class="comment"># return self.my_20211111(airplanes)  # AC</span></span><br><span class="line">        <span class="comment"># return self.my_20211111_B(airplanes)    # AC</span></span><br><span class="line">        <span class="comment"># return self.my_20211111_C(airplanes)    # AC</span></span><br><span class="line">        <span class="keyword">return</span> self.my_20220802(airplanes)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20220802</span><span class="params">(self, airplanes)</span>:</span></span><br><span class="line">        <span class="comment"># airplanes.sort(key=lambda x: x[0])</span></span><br><span class="line">        airplanes.sort(key=<span class="keyword">lambda</span> x: x.start)</span><br><span class="line">        n = len(airplanes)</span><br><span class="line">        landing_times = []</span><br><span class="line">        cnt = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="comment"># if not landing_times or landing_times[-1] &gt; airplanes[i].end: # BUGGG!</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> landing_times <span class="keyword">or</span> landing_times[<span class="number">0</span>] &gt; airplanes[i].start: <span class="comment"># FIX!</span></span><br><span class="line">                <span class="comment"># landing_times.append(airplanes[i].end)</span></span><br><span class="line">                heapq.heappush(landing_times, airplanes[i].end)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                heapq.heappush(landing_times, airplanes[i].end)</span><br><span class="line">                heapq.heappop(landing_times)</span><br><span class="line">            cnt = max(cnt, len(landing_times))</span><br><span class="line">        <span class="keyword">return</span> cnt</span><br></pre></td></tr></table></figure>

</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/10/22/RecSys/1%20RecSys%20Architec/">RecSys/1 RecSys Architec</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-10-22</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/RecSys/">RecSys</a></span><div class="content"><p>根據用戶的歷史info &amp; 行為，作推薦他感興趣的內容</p>
<h3 id="Behaviour-based"><a href="#Behaviour-based" class="headerlink" title="Behaviour-based"></a>Behaviour-based</h3><p>CF</p>
<h3 id="Content-based"><a href="#Content-based" class="headerlink" title="Content-based"></a>Content-based</h3><p>w/ tag</p>
<h3 id="The-Solution-to"><a href="#The-Solution-to" class="headerlink" title="The Solution to"></a>The Solution to</h3><ol>
<li>info overload</li>
<li>The long tail module</li>
<li>user’s experience</li>
</ol>
<h3 id="Steps"><a href="#Steps" class="headerlink" title="Steps"></a>Steps</h3><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h39vuja9y4j21au0ly42y.jpg" alt="image-20220616103733395" style="zoom:50%;" />

<h5 id="Recall"><a href="#Recall" class="headerlink" title="Recall"></a>Recall</h5><p>Quick – 50ms ~ 300ms</p>
<ul>
<li>CF</li>
<li>Content-based</li>
<li>Graph</li>
<li>Hot</li>
<li>New</li>
</ul>
<h5 id="Sorting-by-prob"><a href="#Sorting-by-prob" class="headerlink" title="Sorting (by prob. )"></a>Sorting (by prob. )</h5><ul>
<li>Binary<ul>
<li>LR</li>
<li>GBDT</li>
<li>DNN</li>
<li>Wide&amp;Deep (Ggl’s)</li>
</ul>
</li>
</ul>
<h5 id="Adjustment"><a href="#Adjustment" class="headerlink" title="Adjustment"></a>Adjustment</h5><ul>
<li>de-dup<ul>
<li>Bought</li>
<li>off-lien</li>
</ul>
</li>
<li>Hot</li>
<li>Pagination</li>
<li>Merge id w/ other features</li>
</ul>
<h5 id=""><a href="#" class="headerlink" title=""></a></h5><h3 id="Recall-paths"><a href="#Recall-paths" class="headerlink" title="Recall paths"></a>Recall paths</h3><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h03rtgepfkj20y60k276u.jpg" alt="image-20220309174342268" style="zoom:50%;" />



<h5 id="i2i"><a href="#i2i" class="headerlink" title="i2i"></a>i2i</h5><p>easiest</p>
<h5 id="-1"><a href="#-1" class="headerlink" title=""></a></h5><h2 id="Netflix-case"><a href="#Netflix-case" class="headerlink" title="Netflix case"></a>Netflix case</h2><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h38ahu0y4jj20to0vm0wc.jpg" alt="image-20220309174643100" style="zoom: 67%;" />







<img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h39vwj45zrj21850u0tbz.jpg" alt="image-20220616103931346" style="zoom:67%;" />
</div><hr></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/9/"><i class="fa fa-chevron-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/77/">77</a><a class="extend next" rel="next" href="/page/11/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2023 By Joe Huang</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>