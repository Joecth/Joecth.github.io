<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content=""><meta name="keywords" content=""><meta name="author" content="Joe Huang"><meta name="copyright" content="Joe Huang"><title>Awaken Desparado</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-180692466-1', 'auto');
ga('send', 'pageview');</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 4.2.1"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="false"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Joe Huang</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">385</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">26</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">66</span></a></div></div></div><nav class="no-bg" id="nav"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Awaken Desparado</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="site-info"><div id="site-title">Awaken Desparado</div><div id="site-sub-title"></div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2019/09/25/Algo.%20Ult./HeapSort/">Algo. Ult./HeapSort</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-09-25</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/AlgoUlt/">AlgoUlt.</a></span><div class="content"><h1 id="HeapSort"><a href="#HeapSort" class="headerlink" title="HeapSort"></a>HeapSort</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"Hello World!"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sift_down</span><span class="params">(tree, n, node)</span>:</span>   <span class="comment"># cross check: https://youtu.be/j-DqQcNPGbE?t=1157</span></span><br><span class="line">    <span class="comment"># print(node)</span></span><br><span class="line">    left_node = node * <span class="number">2</span> + <span class="number">1</span></span><br><span class="line">    right_node = node * <span class="number">2</span> + <span class="number">2</span></span><br><span class="line">    node_of_max = node</span><br><span class="line">    <span class="keyword">if</span> left_node &lt; n <span class="keyword">and</span> tree[left_node] &gt; tree[node_of_max]:</span><br><span class="line">        node_of_max = left_node</span><br><span class="line">    <span class="keyword">if</span> right_node &lt; n <span class="keyword">and</span> tree[right_node] &gt; tree[node_of_max]:</span><br><span class="line">        node_of_max = right_node</span><br><span class="line">    <span class="keyword">if</span> node_of_max != node:</span><br><span class="line">        tree[node], tree[node_of_max] = tree[node_of_max], tree[node]</span><br><span class="line">        sift_down(tree, n, node_of_max)</span><br><span class="line">    </span><br><span class="line">        </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">build_heap</span><span class="params">(tree, n)</span>:</span>    <span class="comment"># cross check: https://youtu.be/j-DqQcNPGbE?t=1336</span></span><br><span class="line">    last_node = n - <span class="number">1</span></span><br><span class="line">    parent = (last_node - <span class="number">1</span>) // <span class="number">2</span></span><br><span class="line">    i = parent</span><br><span class="line">    <span class="keyword">while</span> i &gt;= <span class="number">0</span>:</span><br><span class="line">        sift_down(tree, n, i)</span><br><span class="line">        i -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">heap_sort</span><span class="params">(tree, n)</span>:</span>     <span class="comment"># ref to : https://youtu.be/j-DqQcNPGbE?t=1601</span></span><br><span class="line">                                <span class="comment"># 2) sift_down's name: https://rust-algo.club/sorting/heapsort/</span></span><br><span class="line">    build_heap(tree, n)</span><br><span class="line">    i = n - <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> i &gt;= <span class="number">0</span>:</span><br><span class="line">        tree[i], tree[<span class="number">0</span>] = tree[<span class="number">0</span>], tree[i]</span><br><span class="line">        sift_down(tree, i, <span class="number">0</span>)</span><br><span class="line">        i -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">arr = [<span class="number">4</span>, <span class="number">10</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">n = len(arr)</span><br><span class="line">print(<span class="string">f'arr original: <span class="subst">&#123;arr&#125;</span>'</span>)</span><br><span class="line"><span class="comment"># sift_down(arr, 0, n-1, 0)</span></span><br><span class="line">sift_down(arr, n, <span class="number">0</span>)</span><br><span class="line">print(<span class="string">f'arr after sift_down: <span class="subst">&#123;arr&#125;</span>'</span>)</span><br><span class="line"></span><br><span class="line">arr2 = [<span class="number">2</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">10</span>, <span class="number">4</span>]</span><br><span class="line">print(<span class="string">f'arr2 original (A BETTER CASE): <span class="subst">&#123;arr2&#125;</span>'</span>)</span><br><span class="line">build_heap(arr2, len(arr2))</span><br><span class="line">print(<span class="string">f'arr2 after build_heap: <span class="subst">&#123;arr2&#125;</span>'</span>)</span><br><span class="line"></span><br><span class="line">arr2 = [<span class="number">2</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">10</span>, <span class="number">4</span>]</span><br><span class="line">heap_sort(arr2, len(arr2))</span><br><span class="line">print(<span class="string">f'arr2 after heap_sort: <span class="subst">&#123;arr2&#125;</span>'</span>)</span><br></pre></td></tr></table></figure></div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/09/25/Algo.%20Ult./Trie%20Topics-2/">Algo. Ult./Trie Topics-2</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-09-25</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/AlgoUlt/">AlgoUlt.</a></span><div class="content"><h2 id="333-·-Identifying-Strings"><a href="#333-·-Identifying-Strings" class="headerlink" title="333 · Identifying Strings"></a>333 · Identifying Strings</h2><p>Given n character strings containing only lower case letters, find the minimum prefix strings that can identify each string.<br>That is, the minimum prefix string Ap which identifies string A will not be a prefix string of other n-1 character strings.</p>
<h4 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Input:["aaa","bbc","bcd"]</span><br><span class="line">Output:["a","bb","bc"]</span><br><span class="line">Explanation:"a" is only the profix of "aaa".</span><br><span class="line">"bb" is only the profix of "bbc".</span><br><span class="line">"bc" is only the profix of "bcd".</span><br></pre></td></tr></table></figure>

<h4 id="My-Sol"><a href="#My-Sol" class="headerlink" title="My Sol"></a>My Sol</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TrieNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.children = &#123;&#125;</span><br><span class="line">        self.is_end = <span class="literal">False</span></span><br><span class="line">        self.word_cnt = <span class="number">0</span></span><br><span class="line">        self.word_list = []</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Trie</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.root = TrieNode()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(self, word)</span>:</span></span><br><span class="line">        cur = self.root</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(word)):</span><br><span class="line">            <span class="keyword">if</span> word[i] <span class="keyword">not</span> <span class="keyword">in</span> cur.children:</span><br><span class="line">                cur.children[word[i]] = TrieNode()</span><br><span class="line">            cur = cur.children[word[i]]</span><br><span class="line">            cur.word_cnt += <span class="number">1</span></span><br><span class="line">        cur.is_end = <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, word)</span>:</span></span><br><span class="line">        cur = self.root</span><br><span class="line">        n = len(word)</span><br><span class="line">        prefix = <span class="string">''</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            prefix += word[i]</span><br><span class="line">            <span class="keyword">if</span> cur.children[word[i]].word_cnt == <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">return</span> prefix</span><br><span class="line">            cur = cur.children[word[i]]</span><br><span class="line">        <span class="keyword">return</span> word</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> (</span><br><span class="line">    List,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    @param string_array: a string array</span></span><br><span class="line"><span class="string">    @return: return every strings'short peifix</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">short_perfix</span><span class="params">(self, string_array: List[str])</span> -&gt; List[str]:</span></span><br><span class="line">        <span class="comment"># write your code here</span></span><br><span class="line">        <span class="comment"># return self.my_20220222(string_array) # w/ Hash</span></span><br><span class="line">        <span class="keyword">return</span> self.my_20220223(string_array)   <span class="comment"># w/ Trie</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20220223</span><span class="params">(self, string_array)</span>:</span></span><br><span class="line">        n = len(string_array)</span><br><span class="line">        trie = Trie()</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            trie.add(string_array[i])</span><br><span class="line">        </span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            tmp = trie.get(string_array[i])</span><br><span class="line">            res.append(tmp)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20220222</span><span class="params">(self, string_array)</span>:</span></span><br><span class="line">        n = len(string_array)</span><br><span class="line">        prefix2cnt = &#123;&#125;</span><br><span class="line">        <span class="comment"># prefix2word = &#123;&#125;</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            word = string_array[i]</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(len(word)):</span><br><span class="line">                token = word[:j+<span class="number">1</span>]</span><br><span class="line">                prefix2cnt[token] = prefix2cnt.get(token, <span class="number">0</span>) + <span class="number">1</span></span><br><span class="line">                <span class="comment"># prefix2word</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># processed_word = &#123;&#125;</span></span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            word = string_array[i]</span><br><span class="line">            <span class="comment"># for j in range(len(word)):</span></span><br><span class="line">            j = <span class="number">0</span></span><br><span class="line">            <span class="keyword">while</span> j &lt; len(word):</span><br><span class="line">                token = word[:j+<span class="number">1</span>]</span><br><span class="line">                <span class="keyword">if</span> prefix2cnt[token] &gt; <span class="number">1</span>:</span><br><span class="line">                    j += <span class="number">1</span></span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    res.append(token)</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">if</span> j == len(word):      <span class="comment"># !!! CAUTIOUS!</span></span><br><span class="line">                res.append(word)</span><br><span class="line">                </span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/09/25/Algo.%20Ult./Trie%20Topics/">Algo. Ult./Trie Topics</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-09-25</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/AlgoUlt/">AlgoUlt.</a></span><div class="content"><h2 id="208-Trie-I"><a href="#208-Trie-I" class="headerlink" title="208 Trie I"></a>208 Trie I</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TrieNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.children = collections.defaultdict(TrieNode)</span><br><span class="line">        self.is_end = <span class="literal">False</span></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Trie</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Initialize your data structure here.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        self.root = TrieNode()</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">insert</span><span class="params">(self, word: str)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Inserts a word into the trie.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        cur = self.root</span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> word:</span><br><span class="line">            cur = cur.children[c]</span><br><span class="line">        cur.is_end = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">search</span><span class="params">(self, word: str)</span> -&gt; bool:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Returns if the word is in the trie.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        cur = self.root</span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> word:</span><br><span class="line">            <span class="keyword">if</span> c <span class="keyword">not</span> <span class="keyword">in</span> cur.children:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            cur = cur.children[c]</span><br><span class="line">        <span class="keyword">return</span> cur.is_end</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">startsWith</span><span class="params">(self, prefix: str)</span> -&gt; bool:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Returns if there is any word in the trie that starts with the given prefix.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        cur = self.root</span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> prefix:</span><br><span class="line">            <span class="keyword">if</span> c <span class="keyword">not</span> <span class="keyword">in</span> cur.children:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            cur = cur.children[c]</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">      </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 1804 Trie II</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">​```python</span><br><span class="line">lass TrieNode:</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.children = [<span class="literal">None</span>] * <span class="number">26</span></span><br><span class="line">        <span class="comment"># self.is_end = False</span></span><br><span class="line">        self.word_count = <span class="number">0</span></span><br><span class="line">        self.child_count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Trie</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.root = TrieNode()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">insert</span><span class="params">(self, word: str)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="comment"># root = self.root</span></span><br><span class="line">        cur = self.root</span><br><span class="line">        idx = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> idx &lt; len(word):</span><br><span class="line">            pos = ord(word[idx]) - ord(<span class="string">'a'</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> cur.children[pos]:</span><br><span class="line">                cur.children[pos] = TrieNode()</span><br><span class="line">            cur.child_count += <span class="number">1</span>    <span class="comment"># ！！！！ REMEMBER!!!</span></span><br><span class="line">            cur = cur.children[pos]</span><br><span class="line">            idx += <span class="number">1</span></span><br><span class="line">        <span class="comment"># cur = cur</span></span><br><span class="line">        cur.word_count += <span class="number">1</span></span><br><span class="line">        cur.child_count += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countWordsEqualTo</span><span class="params">(self, word: str)</span> -&gt; int:</span></span><br><span class="line">        cur = self.root</span><br><span class="line">        idx = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> idx &lt; len(word):</span><br><span class="line">            pos = ord(word[idx]) - ord(<span class="string">'a'</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> cur.children[pos]:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">            cur = cur.children[pos]</span><br><span class="line">            idx += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> cur.word_count</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countWordsStartingWith</span><span class="params">(self, prefix: str)</span> -&gt; int:</span></span><br><span class="line">        idx = <span class="number">0</span></span><br><span class="line">        cur = self.root</span><br><span class="line">        <span class="keyword">while</span> idx &lt; len(prefix):</span><br><span class="line">            pos = ord(prefix[idx]) - ord(<span class="string">'a'</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> cur.children[pos]:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">            cur = cur.children[pos]</span><br><span class="line">            idx += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> cur.child_count</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">erase</span><span class="params">(self, word: str)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        cur = self.root</span><br><span class="line">        idx = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> idx &lt; len(word):</span><br><span class="line">            pos = ord(word[idx]) - ord(<span class="string">'a'</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> cur.children[pos]:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">            cur.child_count -= <span class="number">1</span></span><br><span class="line">            cur = cur.children[pos]</span><br><span class="line">            idx += <span class="number">1</span></span><br><span class="line">        cur.word_count -= <span class="number">1</span></span><br><span class="line">        cur.child_count -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 559 Trie Service</span></span><br><span class="line"></span><br><span class="line">Build tries <span class="keyword">from</span> a list of &lt;word, freq&gt; pairs. Save top <span class="number">10</span> <span class="keyword">for</span> each node.</span><br><span class="line"></span><br><span class="line"><span class="comment">### Example</span></span><br><span class="line"></span><br><span class="line">**Example1**</span><br><span class="line"></span><br><span class="line"><span class="comment">## 1268. Search Suggestions System</span></span><br></pre></td></tr></table></figure>
<p>Input:<br> &lt;”abc”, 2&gt;<br> &lt;”ac”, 4&gt;<br> &lt;”ab”, 9&gt;<br>Output:&lt;a[9,4,2]&lt;b[9,2]&lt;c[2]&lt;&gt;&gt;c[4]&lt;&gt;&gt;&gt;<br>Explanation:<br>            Root<br>             /<br>           a(9,4,2)<br>          /    <br>        b(9,2) c(4)<br>       /<br>     c(2)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**Example2**</span><br></pre></td></tr></table></figure>
<p>Input:<br>&lt;”a”, 10&gt;<br>&lt;”c”, 41&gt;<br>&lt;”b”, 50&gt;<br>&lt;”abc”, 5&gt;<br>Output: &lt;a[10,5]&lt;b[5]&lt;c[5]&lt;&gt;&gt;&gt;b[50]&lt;&gt;c[41]&lt;&gt;&gt;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">​&#96;&#96;&#96;python</span><br><span class="line">Serialize and deserialize a trie (prefix tree, search on internet for more details).</span><br><span class="line"></span><br><span class="line">You can specify your own serialization algorithm, the online judge only cares about whether you can successfully deserialize the output from your own serialize function.</span><br><span class="line"></span><br><span class="line">You only need to implement these two functions serialize and deserialize. We will run the following code snippet</span><br><span class="line"></span><br><span class="line">str &#x3D; serialize(old_trie)</span><br><span class="line">&#x2F;&#x2F; str can be any string used to represent this tree</span><br><span class="line">new_trie &#x3D; deserialize(str)</span><br><span class="line">&#x2F;&#x2F; The new tree should be identical to the old one</span><br><span class="line">Example</span><br><span class="line">Example 1</span><br><span class="line"></span><br><span class="line">Input: &lt;a&lt;b&lt;e&lt;&gt;&gt;c&lt;&gt;d&lt;f&lt;&gt;&gt;&gt;&gt;</span><br><span class="line">Output: &lt;a&lt;b&lt;e&lt;&gt;&gt;c&lt;&gt;d&lt;f&lt;&gt;&gt;&gt;&gt;</span><br><span class="line">Explanation:</span><br><span class="line">The trie is look like this.</span><br><span class="line">     root</span><br><span class="line">      &#x2F;</span><br><span class="line">     a</span><br><span class="line">   &#x2F; | \</span><br><span class="line">  b  c  d</span><br><span class="line"> &#x2F;       \</span><br><span class="line">e         f</span><br><span class="line">Example 2</span><br><span class="line"></span><br><span class="line">Input: &lt;a&lt;&gt;&gt;</span><br><span class="line">Output: &lt;a&lt;&gt;&gt;</span><br><span class="line">Notice</span><br><span class="line">You don&#39;t have to serialize like the test data, you can design your own format.</span><br></pre></td></tr></table></figure>



<h2 id="527-Trie-Serialization"><a href="#527-Trie-Serialization" class="headerlink" title="527 Trie Serialization"></a>527 Trie Serialization</h2><p>Serialize and deserialize a trie (prefix tree, search on internet for more details).</p>
<p>You can specify your own serialization algorithm, the online judge only cares about whether you can successfully deserialize the output from your own serialize function.</p>
<p>You only need to implement these two functions <code>serialize</code> and <code>deserialize</code>. We will run the following code snippet</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str = serialize(old_trie)</span><br><span class="line"><span class="comment">// str can be any string used to represent this tree</span></span><br><span class="line">new_trie = deserialize(str)</span><br><span class="line"><span class="comment">// The new tree should be identical to the old one</span></span><br></pre></td></tr></table></figure>

<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><p><strong>Example 1</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Input: &lt;a&lt;b&lt;e&lt;&gt;&gt;c&lt;&gt;d&lt;f&lt;&gt;&gt;&gt;&gt;</span><br><span class="line">Output: &lt;a&lt;b&lt;e&lt;&gt;&gt;c&lt;&gt;d&lt;f&lt;&gt;&gt;&gt;&gt;</span><br><span class="line">Explanation:</span><br><span class="line">The trie is look like this.</span><br><span class="line">     root</span><br><span class="line">      &#x2F;</span><br><span class="line">     a</span><br><span class="line">   &#x2F; | \</span><br><span class="line">  b  c  d</span><br><span class="line"> &#x2F;       \</span><br><span class="line">e         f</span><br></pre></td></tr></table></figure>

<p><strong>Example 2</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: &lt;a&lt;&gt;&gt;</span><br><span class="line">Output: &lt;a&lt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Notice"><a href="#Notice" class="headerlink" title="Notice"></a>Notice</h3><p>You don’t have to serialize like the test data, you can design your own format.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">Definition of TrieNode:</span></span><br><span class="line"><span class="string">class TrieNode:</span></span><br><span class="line"><span class="string">    def __init__(self):</span></span><br><span class="line"><span class="string">        # &lt;key, value&gt;: &lt;Character, TrieNode&gt;</span></span><br><span class="line"><span class="string">        self.children = collections.OrderedDict()</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    @param root: An object of TrieNode, denote the root of the trie.</span></span><br><span class="line"><span class="string">    This method will be invoked first, you should design your own algorithm </span></span><br><span class="line"><span class="string">    to serialize a trie which denote by a root node to a string which</span></span><br><span class="line"><span class="string">    can be easily deserialized by your own "deserialize" method later.</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">serialize</span><span class="params">(self, root)</span>:</span></span><br><span class="line">        <span class="comment"># Write your code here</span></span><br><span class="line">        <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">""</span></span><br><span class="line"></span><br><span class="line">        data = <span class="string">""</span></span><br><span class="line">        <span class="keyword">for</span> key, value <span class="keyword">in</span> root.children.items():</span><br><span class="line">            data += key + self.serialize(value)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"&lt;%s&gt;"</span> % data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    @param data: A string serialized by your serialize method.</span></span><br><span class="line"><span class="string">    This method will be invoked second, the argument data is what exactly</span></span><br><span class="line"><span class="string">    you serialized at method "serialize", that means the data is not given by</span></span><br><span class="line"><span class="string">    system, it's given by your own serialize method. So the format of data is</span></span><br><span class="line"><span class="string">    designed by yourself, and deserialize it here as you serialize it in </span></span><br><span class="line"><span class="string">    "serialize" method.</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">deserialize</span><span class="params">(self, data)</span>:</span></span><br><span class="line">        <span class="comment"># Write your code here</span></span><br><span class="line">        <span class="keyword">if</span> data <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">or</span> len(data) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        root = TrieNode()</span><br><span class="line">        current = root</span><br><span class="line">        path =[]</span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> data:</span><br><span class="line">            <span class="keyword">if</span> c == <span class="string">'&lt;'</span>:</span><br><span class="line">                path.append(current)</span><br><span class="line">            <span class="keyword">elif</span> c == <span class="string">'&gt;'</span>:</span><br><span class="line">                path.pop()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                current = TrieNode()</span><br><span class="line">                <span class="keyword">if</span> len(path) == <span class="number">0</span>:</span><br><span class="line">                    <span class="keyword">print</span> c, path</span><br><span class="line">                path[<span class="number">-1</span>].children[c] = current</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> root</span><br></pre></td></tr></table></figure>



<h2 id="745-Prefix-amp-Suffix-Search"><a href="#745-Prefix-amp-Suffix-Search" class="headerlink" title="745 Prefix &amp; Suffix Search"></a>745 Prefix &amp; Suffix Search</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TrieNode_TLE</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># self.children = collections.defaultdict(dict())</span></span><br><span class="line">        <span class="comment"># self.children = collections.defaultdict(TrieNode())   # BUGGG</span></span><br><span class="line">        self.children = collections.defaultdict(TrieNode)   <span class="comment"># fixed!</span></span><br><span class="line">        self.is_end = <span class="literal">False</span></span><br><span class="line">        self.members = []</span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WordFilter</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, words: List[str])</span>:</span></span><br><span class="line">        self.root = TrieNode()</span><br><span class="line">        self.root_suffix = TrieNode()</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(words)):</span><br><span class="line">            <span class="comment"># n = len(words[i])</span></span><br><span class="line">            self.add(words[i], i)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(self, word, member_id)</span>:</span></span><br><span class="line">        root = self.root        <span class="comment"># <span class="doctag">TODO:</span> wrapped into API</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(word)):</span><br><span class="line">            <span class="comment"># root.members.append(member_id)</span></span><br><span class="line">            root = root.children[word[i]]</span><br><span class="line">            root.members.append(member_id)</span><br><span class="line">        root.is_end = <span class="literal">True</span></span><br><span class="line">        </span><br><span class="line">        root = self.root_suffix</span><br><span class="line">        rev = word[::<span class="number">-1</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(rev)):</span><br><span class="line">            <span class="comment"># root.members.append(member_id)</span></span><br><span class="line">            root = root.children[rev[i]]</span><br><span class="line">            root.members.append(member_id)</span><br><span class="line">        root.is_end = <span class="literal">True</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">starts_with</span><span class="params">(self, prefix, seq)</span>:</span> <span class="comment"># seq == -1 means we want suffix</span></span><br><span class="line">        root = self.root</span><br><span class="line">        <span class="keyword">if</span> seq == <span class="number">-1</span>:</span><br><span class="line">            root = self.root_suffix</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(prefix)):</span><br><span class="line">            <span class="keyword">if</span> prefix[i] <span class="keyword">not</span> <span class="keyword">in</span> root.children:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">            root = root.children[prefix[i]]</span><br><span class="line">        <span class="comment"># print(root.children)</span></span><br><span class="line">        <span class="keyword">return</span> root.members</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(self, prefix: str, suffix: str)</span> -&gt; int:</span></span><br><span class="line">        members = self.starts_with(prefix, <span class="number">1</span>)</span><br><span class="line">        members_suffix = self.starts_with(suffix[::<span class="number">-1</span>], <span class="number">-1</span>)</span><br><span class="line">        <span class="comment"># print(members, members_suffix)</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> members <span class="keyword">or</span> <span class="keyword">not</span> members_suffix:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        i, j = len(members) - <span class="number">1</span>, len(members_suffix) - <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> i &gt;= <span class="number">0</span> <span class="keyword">and</span> j &gt;= <span class="number">0</span>:</span><br><span class="line">            <span class="comment"># print(i, j)</span></span><br><span class="line">            <span class="keyword">if</span> members[i] == members_suffix[j]:</span><br><span class="line">                <span class="keyword">return</span> members[i]</span><br><span class="line">            <span class="keyword">elif</span> members[i] &gt; members_suffix[j]:</span><br><span class="line">                i -= <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                j -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Your WordFilter object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"># obj = WordFilter(words)</span></span><br><span class="line"><span class="comment"># param_1 = obj.f(prefix,suffix)</span></span><br></pre></td></tr></table></figure>



<p>[“WordFilter”,”f”,”f”,”f”,”f”,”f”,”f”,”f”,”f”,”f”,”f”]<br>[[[“cabaabaaaa”,”ccbcababac”,”bacaabccba”,”bcbbcbacaa”,”abcaccbcaa”,”accabaccaa”,”cabcbbbcca”,”ababccabcb”,”caccbbcbab”,”bccbacbcba”]],[“bccbacbcba”,”a”],[“ab”,”abcaccbcaa”],[“a”,”aa”],[“cabaaba”,”abaaaa”],[“cacc”,”accbbcbab”],[“ccbcab”,”bac”],[“bac”,”cba”],[“ac”,”accabaccaa”],[“bcbb”,”aa”],[“ccbca”,”cbcababac”]]</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/09/25/FFmpeg/2019-09-25-ffmepg-cmd-3-I-frame-extraction/">FFmpeg/2019-09-25-ffmepg-cmd-3-I-frame-extraction</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-09-25</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/ffmpeg/">ffmpeg</a></span><div class="content"><h3 id="I-frame-extraction"><a href="#I-frame-extraction" class="headerlink" title="I-frame extraction"></a>I-frame extraction</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i vn_hflip.mp4 -vf select=<span class="string">'eq(pict_type\,I)'</span> -vsync 2 -s 1280*720 -f image2 keyframe-%03d.jpeg</span><br></pre></td></tr></table></figure>

<p>-vf:是一个命令行，表示过滤图形的描述。选择过滤器select会选择帧进行输出：pict_type和对应的类型:PICT_TYPE_I 表示是I帧，即关键帧；<br>-vsync 2:阻止每个关键帧产生多余的拷贝；<br>-f image2 name_%02d.jpeg:将视频帧写入到图片中，样式的格式一般是: “%d” 或者 “%0Nd”</p>
<h3 id="Index-of-I-frame"><a href="#Index-of-I-frame" class="headerlink" title="Index of I-frame"></a>Index of I-frame</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffprobe -i vn_hflip.mp4 -select_streams v -show_frames -show_entries frame=pict_type -of csv | grep -n I | cut -d <span class="string">':'</span> -f 1 &gt; frame_index.txt</span><br></pre></td></tr></table></figure>



<h3 id="Relates-the-twos"><a href="#Relates-the-twos" class="headerlink" title="Relates the twos"></a>Relates the twos</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls -1 keyframe*.jpeg &gt; keyframe.txt</span><br><span class="line">paste frame_index.txt  keyframe.txt&gt; result.txt</span><br></pre></td></tr></table></figure>

<p>(joe_py36)<br>~/workspace/exp/FFmpeg_<br>☺  more result.txt<br>☺  more result.txt<br>1       keyframe-01.jpeg<br>3       keyframe-02.jpeg<br>16      keyframe-03.jpeg<br>25      keyframe-04.jpeg<br>30      keyframe-05.jpeg<br>46      keyframe-06.jpeg<br>55      keyframe-07.jpeg<br>59      keyframe-08.jpeg<br>70      keyframe-09.jpeg<br>83      keyframe-10.jpeg<br>100     keyframe-11.jpeg<br>116     keyframe-12.jpeg</p>
<h3 id="翻译ffmpeg-all文档（40），多媒体滤镜"><a href="#翻译ffmpeg-all文档（40），多媒体滤镜" class="headerlink" title="翻译ffmpeg-all文档（40），多媒体滤镜"></a><a href="http://blog.chinaunix.net/uid-10062010-id-5137275.html" target="_blank" rel="noopener">翻译ffmpeg-all文档（40），多媒体滤镜</a></h3><p><a href="http://blog.chinaunix.net/uid-10062010-id-5137275.html" target="_blank" rel="noopener">http://blog.chinaunix.net/uid-10062010-id-5137275.html</a></p>
<p>Ref: <a href="https://superuser.com/questions/885452/extracting-the-index-of-key-frames-from-a-video-using-ffmpeg" target="_blank" rel="noopener">https://superuser.com/questions/885452/extracting-the-index-of-key-frames-from-a-video-using-ffmpeg</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/09/16/DP%20Ult./DP-1-Intro/">DP Ult./DP-1-Intro</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-09-16</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/DP-Ult/">DP Ult.</a></span><div class="content"><h1 id="My"><a href="#My" class="headerlink" title="My"></a>My</h1><h2 id="House-Robber"><a href="#House-Robber" class="headerlink" title="House Robber"></a>House Robber</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">rob</span><span class="params">(self, nums: List[int])</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> nums : <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> len(nums) == <span class="number">1</span>: <span class="keyword">return</span> nums[<span class="number">0</span>]</span><br><span class="line">        <span class="comment"># return self.O_1(nums)</span></span><br><span class="line">        <span class="keyword">return</span> self.O_SeqDP_2xN(nums)</span><br><span class="line">        <span class="keyword">return</span> self.O_SeqDP_2x1_arr(nums)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">O_SeqDP_2x1_arr</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        n = len(nums)</span><br><span class="line">        </span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        dp[0]: no-rob</span></span><br><span class="line"><span class="string">        dp[1]: rob</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        dp = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>)]</span><br><span class="line">        dp[<span class="number">1</span>] = nums[<span class="number">0</span>]</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, n):</span><br><span class="line">            prev_norob = dp[<span class="number">0</span>]</span><br><span class="line">            dp[<span class="number">0</span>] = max(dp[<span class="number">0</span>], dp[<span class="number">1</span>])</span><br><span class="line">            dp[<span class="number">1</span>] = prev_norob + nums[j]</span><br><span class="line">            <span class="comment"># print(dp)</span></span><br><span class="line">        <span class="keyword">return</span> max(dp)</span><br><span class="line">        </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">O_SeqDP_2x1</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        n = len(nums)</span><br><span class="line">        norob = <span class="number">0</span></span><br><span class="line">        rob = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(n):</span><br><span class="line">            prev_norob = norob</span><br><span class="line">            norob = max(norob, rob)</span><br><span class="line">            rob = prev_norob + nums[j]</span><br><span class="line">        <span class="keyword">return</span> max(norob, rob)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">O_SeqDP_2xN</span><span class="params">(self, nums)</span>:</span>    <span class="comment"># ==&gt; 3xN</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        # dp[0][j] up to jth house, no-rob, max profit</span></span><br><span class="line"><span class="string">        # dp[1][j] up to jth house, rob, max profit</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        n = len(nums)</span><br><span class="line">        dp = [[<span class="number">0</span>] * n <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>)]</span><br><span class="line">        <span class="comment"># print(dp)</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(n):</span><br><span class="line">            dp[<span class="number">0</span>][j] = max(dp[<span class="number">0</span>][j<span class="number">-1</span>], dp[<span class="number">1</span>][j<span class="number">-1</span>])</span><br><span class="line">            dp[<span class="number">1</span>][j] = dp[<span class="number">0</span>][j<span class="number">-1</span>] + nums[j]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># print(dp[-1])</span></span><br><span class="line">        <span class="keyword">return</span> max(dp[<span class="number">-1</span>])  <span class="comment"># 肯定至少要抢一天</span></span><br><span class="line">        <span class="keyword">return</span> max(dp[:][<span class="number">-1</span>])</span><br><span class="line">        <span class="keyword">return</span> max(dp[<span class="number">0</span>][<span class="number">-1</span>], dp[<span class="number">1</span>][<span class="number">-1</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">O_1</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        n = len(nums)</span><br><span class="line">                </span><br><span class="line">        dp = [nums[<span class="number">0</span>], max(nums[<span class="number">0</span>], nums[<span class="number">1</span>]), <span class="number">0</span>]</span><br><span class="line">        <span class="keyword">if</span> n == <span class="number">0</span>: </span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">elif</span> n &lt;= <span class="number">2</span>:</span><br><span class="line">            <span class="keyword">return</span> dp[n<span class="number">-1</span>]</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, n):</span><br><span class="line">            dp[i%<span class="number">3</span>] = max(dp[(i<span class="number">-2</span>)%<span class="number">3</span>]+nums[i], dp[(i<span class="number">-1</span>)%<span class="number">3</span>])</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> dp[(n<span class="number">-1</span>)%<span class="number">3</span>]</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">O_N</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        n = len(nums)</span><br><span class="line">        <span class="keyword">if</span> n == <span class="number">0</span>: <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">elif</span> n == <span class="number">1</span>: <span class="keyword">return</span> nums[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">elif</span> n == <span class="number">2</span>: <span class="keyword">return</span> max(nums[<span class="number">0</span>],           nums[<span class="number">1</span>])</span><br><span class="line">        <span class="keyword">elif</span> n == <span class="number">3</span>: <span class="keyword">return</span> max(nums[<span class="number">0</span>] + nums[<span class="number">2</span>], nums[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># up to ith house, maximum $ I can get</span></span><br><span class="line">        dp = [<span class="number">0</span>] * len(nums)</span><br><span class="line">        dp[<span class="number">0</span>] = nums[<span class="number">0</span>]</span><br><span class="line">        dp[<span class="number">1</span>] = max(nums[<span class="number">0</span>], nums[<span class="number">1</span>])</span><br><span class="line">        <span class="comment"># dp[2] = max(dp[0] + nums[2], dp[1]) </span></span><br><span class="line">                    </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, len(nums)):</span><br><span class="line">            dp[i] = max(dp[i<span class="number">-2</span>] + nums[i], dp[i<span class="number">-1</span>])</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">-1</span>]</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">rob_old</span><span class="params">(self, nums: List[int])</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> nums:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> len(nums) == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> nums[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">if</span> len(nums) == <span class="number">2</span>:</span><br><span class="line">            <span class="keyword">return</span> max(nums[<span class="number">0</span>], nums[<span class="number">1</span>])</span><br><span class="line">        <span class="keyword">if</span> len(nums) == <span class="number">3</span>:</span><br><span class="line">            <span class="keyword">return</span> max(nums[<span class="number">0</span>]+ nums[<span class="number">2</span>], nums[<span class="number">1</span>]) </span><br><span class="line">        </span><br><span class="line">        dp = [<span class="number">0</span>] * len(nums)</span><br><span class="line">        dp[<span class="number">0</span>] = nums[<span class="number">0</span>]</span><br><span class="line">        dp[<span class="number">1</span>] = max(dp[<span class="number">0</span>], nums[<span class="number">1</span>])</span><br><span class="line">        dp[<span class="number">2</span>] = max(dp[<span class="number">0</span>]+ nums[<span class="number">2</span>], dp[<span class="number">1</span>])</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>, len(nums)):</span><br><span class="line">            dp[i] = max(dp[i<span class="number">-2</span>]+nums[i], dp[i<span class="number">-1</span>])</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">return</span> dp[i]</span><br></pre></td></tr></table></figure>



<h1 id="概念們"><a href="#概念們" class="headerlink" title="概念們"></a>概念們</h1><h3 id="Q-金字塔"><a href="#Q-金字塔" class="headerlink" title="Q: 金字塔"></a>Q: 金字塔</h3><h5 id="給你下面的數字金字塔-你需要從頂部走到底部-在這個過程中你途徑的數字之和最大是多少"><a href="#給你下面的數字金字塔-你需要從頂部走到底部-在這個過程中你途徑的數字之和最大是多少" class="headerlink" title="給你下面的數字金字塔, 你需要從頂部走到底部, 在這個過程中你途徑的數字之和最大是多少?"></a>給你下面的數字金字塔, 你需要從頂部走到底部, 在這個過程中你途徑的數字之和最大是多少?</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">        7 </span><br><span class="line">       &#x2F; \</span><br><span class="line">      3   8</span><br><span class="line">     &#x2F; \ &#x2F; \</span><br><span class="line">    8   1   0 </span><br><span class="line">   &#x2F; \ &#x2F; \ &#x2F; \</span><br><span class="line">  2   7   4   4</span><br><span class="line"> &#x2F; \ &#x2F; \ &#x2F; \ &#x2F; \  </span><br><span class="line">4   5   2   6   5</span><br></pre></td></tr></table></figure>

<ul>
<li>如何編程實現？(假設N為金字塔的層數)<ul>
<li><input checked="" disabled="" type="checkbox"> Recursion - 遍歷所有的路徑，找出最大值，時間複雜度 O(2^N)</li>
<li><input disabled="" type="checkbox"> Greedy - 每次都走更大的點，時間複雜度 O(N^2)</li>
<li><input checked="" disabled="" type="checkbox"> DP- O(N^2)</li>
</ul>
</li>
</ul>
<h3 id="Q-2D-Matrix"><a href="#Q-2D-Matrix" class="headerlink" title="Q: 2D Matrix"></a>Q: 2D Matrix</h3><h5 id="給定一個矩陣網路，機器人左上走到右下不可退，哪個時間更少時間？"><a href="#給定一個矩陣網路，機器人左上走到右下不可退，哪個時間更少時間？" class="headerlink" title="給定一個矩陣網路，機器人左上走到右下不可退，哪個時間更少時間？"></a>給定一個矩陣網路，機器人左上走到右下不可退，哪個時間更少時間？</h5><ul>
<li><input checked="" disabled="" type="checkbox"> 求有多少種方式可以走到右下角 ==&gt; 如果用DP，可以把指數複雜度變polynomial!</li>
<li><input disabled="" type="checkbox"> 輸出所有走到右下角的路徑</li>
<li><input disabled="" type="checkbox"> 需要花費同樣的時間</li>
</ul>
<h3 id="Q-經典背包"><a href="#Q-經典背包" class="headerlink" title="Q: 經典背包"></a>Q: 經典背包</h3><h5 id="有一些物品，每個有一定的重量和價值。給一個背包，它的裝載重量有限。我應該用什麼策略裝物品才能拿走最大的總價值？"><a href="#有一些物品，每個有一定的重量和價值。給一個背包，它的裝載重量有限。我應該用什麼策略裝物品才能拿走最大的總價值？" class="headerlink" title="有一些物品，每個有一定的重量和價值。給一個背包，它的裝載重量有限。我應該用什麼策略裝物品才能拿走最大的總價值？"></a>有一些物品，每個有一定的重量和價值。給一個背包，它的裝載重量有限。我應該用什麼策略裝物品才能拿走最大的總價值？</h5><ul>
<li><input disabled="" type="checkbox"> 按照價值從大到小排序，能拿就拿</li>
<li><input disabled="" type="checkbox"> 按照重量從大到小排序，能拿就拿</li>
<li><input disabled="" type="checkbox"> 計算每個物品的性價比，按照性價比從大到小排序，能拿就拿</li>
<li><input checked="" disabled="" type="checkbox"> 以上都不對</li>
</ul>
<blockquote>
<p>这是很经典的一类动态规划问题, 资源分配型的背包问题. 对于ABC选项我们可以举一个例子看看。<br>A.我们一个背包装载重量是10，有三个物品，重量分别为5、4、7，价值分别为6、4、9，按照我们的策略先拿价值高的物品，拿了第三个物品后，我们的背包就无法在放入其他物品了。但是我们可以发现如果我们拿第一个和第二个物品，我们可以获得更大的价值。同理也可以举出先拿价值小的策略的反例。<br>B.我们一个背包装载重量是10，有三个物品，重量分别为9、4、3，价值分别为1、5、10，按照我们的策略先拿重量高的物品，拿了第一个物品后，我们的背包就无法在放入其他物品了。但是我们可以发现如果我们拿第二个和第三个物品，我们可以获得更大的价值。同理也可以举出先拿重量小的策略的反例。<br>有同学就会有疑问了，我们为什么不按照性价比来拿呢，那么我们来看一下C选项，如果我们一个背包装载重量是10，有三个物品，重量分别为9、4、6，价值分别为20、8、13，我们按照性价比排序，性价比最高的是第一个物品，我们按照策略先拿第一个物品，然后背包不能放入其他物品，其实我们可以发现二三两个物品的价值是超过第一个物品的，我们可以获得更大的价值。同理也可以举出先拿价值小的策略的反例。<br>这样一个问题，贪心求的只是局部最优解，这一题中无法得到全局最优解，所以我们需要用到动态规划。动态规划的做法我们会在后面的章节讲到，准备感受动态规划的魅力吧!</p>
</blockquote>
<h2 id="What"><a href="#What" class="headerlink" title="What ?"></a>What ?</h2><ul>
<li><p>一般就是给個「最優解」或是「方式數」</p>
</li>
<li><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gj0xwpxfnvj30ss0hqgv5.jpg" alt="image-20200923221204941" style="zoom:50%;" />



</li>
</ul>
<h3 id="Q-Coins-Change"><a href="#Q-Coins-Change" class="headerlink" title="Q: Coins Change"></a>Q: Coins Change</h3><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gj0yex7hc4j314c0kkwx4.jpg" alt="image-20200923222934441" style="zoom:50%;" />



<h4 id="DFS-–-爆棧"><a href="#DFS-–-爆棧" class="headerlink" title="DFS – 爆棧"></a>DFS – 爆棧</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">coinChange</span><span class="params">(self, coins: List[int], amount: int)</span> -&gt; int:</span></span><br><span class="line">        self.coins = coins</span><br><span class="line">        <span class="comment"># return self.helper_dfs_0923(coins, amount)</span></span><br><span class="line">        ans = self.helper_dfs_0923(amount) <span class="comment"># TLE on lintcode, but 2000ms AC here</span></span><br><span class="line">        <span class="keyword">return</span> ans <span class="keyword">if</span> ans != sys.maxsize <span class="keyword">else</span> <span class="number">-1</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># @lru_cache</span></span><br><span class="line">    <span class="comment"># def helper_dfs_0923(self, coins, amount):</span></span><br><span class="line"><span class="meta">    @lru_cache(maxsize=None)    # ==&gt; 只給到996次, 爆棧</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">helper_dfs_0923</span><span class="params">(self, amount)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> amount == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        res = sys.maxsize</span><br><span class="line">        <span class="keyword">for</span> coin <span class="keyword">in</span> self.coins:</span><br><span class="line">            <span class="keyword">if</span> amount &gt;= coin:</span><br><span class="line">                <span class="comment"># res = min(self.helper_dfs_0923(coins, amount-coin) + 1, res)</span></span><br><span class="line">                res = min(self.helper_dfs_0923(amount-coin) + <span class="number">1</span>, res)</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>



<h4 id="DP"><a href="#DP" class="headerlink" title="DP"></a>DP</h4><h5 id="成份一-確定狀態"><a href="#成份一-確定狀態" class="headerlink" title="成份一: 確定狀態"></a>成份一: 確定狀態</h5><ul>
<li>最後一步！</li>
<li>子問題！</li>
</ul>
<h5 id="成份二-轉移方程"><a href="#成份二-轉移方程" class="headerlink" title="成份二: 轉移方程"></a>成份二: 轉移方程</h5><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gj10x9gsptj315a0eq7fn.jpg" alt="image-20200923235619275" style="zoom:50%;" />



<h5 id="成份三-初始條件-0時候-amp-邊界情況-上下都不越界"><a href="#成份三-初始條件-0時候-amp-邊界情況-上下都不越界" class="headerlink" title="成份三: 初始條件(0時候) &amp; 邊界情況 (上下都不越界)"></a>成份三: 初始條件(0時候) &amp; 邊界情況 (上下都不越界)</h5><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gj11jg15bnj30ze0gwdpz.jpg" alt="image-20200924001745796"></p>
<h5 id="成份四-計算順序？"><a href="#成份四-計算順序？" class="headerlink" title="成份四: 計算順序？"></a>成份四: 計算順序？</h5><ul>
<li>小到大 &gt; 大到小，一般情況</li>
<li>原則: 當要算左邊時，右邊都已經算過了! </li>
</ul>
<img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gj11llf83aj314k0c8dkx.jpg" alt="image-20200924001950739" style="zoom:50%;" />

<img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gj11n8e6kbj310q0ikjw8.jpg" alt="image-20200924002125288" style="zoom:50%;" />

<ul>
<li><p>多快? ==&gt; 27* 3</p>
<p>任何一個狀態只算了一次！</p>
<p>![image-20200924092101595](/Users/joe/Library/Application Support/typora-user-images/image-20200924092101595.png)</p>
</li>
</ul>
<h5 id="Coding"><a href="#Coding" class="headerlink" title="Coding!"></a>Coding!</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">coinChange</span><span class="params">(self, coins, amount)</span>:</span></span><br><span class="line">    <span class="comment"># write your code here</span></span><br><span class="line">    self.coins = coins</span><br><span class="line">    <span class="comment"># return self.helper_dfs_0923(coins, amount)</span></span><br><span class="line">    <span class="comment"># return self.helper_dfs_0923(amount) # TLE</span></span><br><span class="line">    <span class="keyword">return</span> self.helper_dp_0923(coins, amount)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">helper_dp_0923</span><span class="params">(self, A, M)</span>:</span></span><br><span class="line">    f = [<span class="number">0</span>] * (M+<span class="number">1</span>)</span><br><span class="line">    n = len(A)</span><br><span class="line">    f[<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, M+<span class="number">1</span>):</span><br><span class="line">        f[i] = sys.maxsize</span><br><span class="line">        <span class="comment"># last coin A[j]</span></span><br><span class="line">        <span class="comment"># f[i] = min&#123;f[i-A[0)+1, ....,f[i-A[n-1]]+1&#125;</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>, n):</span><br><span class="line">            <span class="keyword">if</span> i &gt;= A[j] <span class="keyword">and</span> f[i-A[j]] != sys.maxsize:</span><br><span class="line">                f[i] = min(f[i-A[j]] + <span class="number">1</span>, f[i])</span><br><span class="line">        <span class="comment"># print(f)</span></span><br><span class="line">    <span class="keyword">if</span> f[M] == sys.maxsize:</span><br><span class="line">        f[M] = <span class="number">-1</span></span><br><span class="line">    <span class="keyword">return</span> f[M]</span><br></pre></td></tr></table></figure>





<p>Onsite</p>
<h2 id="計數型DP"><a href="#計數型DP" class="headerlink" title="計數型DP"></a>計數型DP</h2><h3 id="Q-機器人走路-–-再聊加法原理"><a href="#Q-機器人走路-–-再聊加法原理" class="headerlink" title="Q: 機器人走路 – 再聊加法原理"></a>Q: 機器人走路 – 再聊加法原理</h3><ul>
<li>確定狀態<ul>
<li>最後一步<ul>
<li>無論機器人用何方式到達右下角，總有最後挪動一步:<ul>
<li>右</li>
<li>下</li>
</ul>
</li>
<li>就加法原理，原則為，當計數型DP時，常使用此思維<ul>
<li>無重覆</li>
<li>無遺漏</li>
</ul>
</li>
</ul>
</li>
<li>子問題!</li>
</ul>
</li>
<li>轉移方程<ul>
<li>上面來跟左邊來</li>
</ul>
</li>
<li>初始條件和邊界情況<ul>
<li>f 0 0 = 1</li>
<li>i==0時和j==0時只有單邊來</li>
</ul>
</li>
<li>計算順序<ul>
<li>是因為「現在要算的需要之前的」</li>
</ul>
</li>
</ul>
<h2 id="存在型DP"><a href="#存在型DP" class="headerlink" title="存在型DP"></a>存在型DP</h2><h3 id="116-Jump-Game"><a href="#116-Jump-Game" class="headerlink" title="116 Jump Game"></a>116 Jump Game</h3><p>青蛙從0跳到最後一塊石頭</p>
<ol>
<li><p>確定狀態</p>
<ul>
<li><p>要可以到i ==&gt; f[j] 表示青蛙能否跳到石頭 j</p>
</li>
<li><p>子問題 ↑</p>
</li>
</ul>
</li>
</ol>
<ol start="2">
<li><p>設 f[i] 表示青蛙能不能跳到石頭 j </p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gj1zoga968j311w0fsago.jpg" alt="image-20200924195854904"></p>
</li>
</ol>
<ul>
<li><p>最值型</p>
<ul>
<li>Min &amp; Max</li>
</ul>
</li>
<li><p>計數型</p>
<ul>
<li>+</li>
</ul>
</li>
<li><p>存在型 (可行性型)</p>
<ul>
<li>Or , And</li>
</ul>
</li>
</ul>
<ol start="3">
<li><p>初始條件和邊界情況</p>
<ul>
<li><p>初始條件: f[0] = True，因為一開始就在這</p>
</li>
<li><p>邊界問題:  沒有</p>
</li>
</ul>
</li>
</ol>
<ol start="4">
<li><p>計算順序</p>
<ul>
<li>小到大，左到右</li>
<li>時間複雜度: O(N^2) ==&gt; <strong>又要枚舉 j,  又要枚舉 i</strong> </li>
<li><img src="/Users/joe/Library/Application Support/typora-user-images/image-20200924200323268.png" alt="image-20200924200323268" style="zoom:50%;" />

</li>
</ul>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">canJump</span><span class="params">(self, A)</span>:</span></span><br><span class="line">    <span class="comment"># write your code here</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    1 final step </span></span><br><span class="line"><span class="string">        fr prev loc i, and i + A[i] &gt;= X</span></span><br><span class="line"><span class="string">      so, sub-problem</span></span><br><span class="line"><span class="string">      </span></span><br><span class="line"><span class="string">    2 transition fn: f[j] = OR(f[i] and i+A[i] &gt;= j)</span></span><br><span class="line"><span class="string">    3 boundary: f[0] = True, no OOR</span></span><br><span class="line"><span class="string">    4 -&gt;</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    </span><br><span class="line">    n = len(A)</span><br><span class="line">    f = [<span class="literal">False</span>] * n</span><br><span class="line">    f[<span class="number">0</span>] = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, n):</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(j):</span><br><span class="line">            <span class="comment"># f[j] = </span></span><br><span class="line">            <span class="keyword">if</span> f[i] <span class="keyword">and</span> i + A[i] &gt;= j:</span><br><span class="line">                f[j] = <span class="literal">True</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">return</span> f[<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>



<h2 id="DP時間複雜度關聯性"><a href="#DP時間複雜度關聯性" class="headerlink" title="DP時間複雜度關聯性"></a>DP時間複雜度關聯性</h2><ol>
<li><p>狀態的數量</p>
</li>
<li><p>初始態邊界的數量</p>
<blockquote>
<p>通常来说, 动态规划的时间复杂度 = 状态数 * 状态转移代价。<br>计算顺序是从前往后或者从后往前并不会影响动态规划的时间复杂度，但是在某些情况下会影响计算结果的正确性，初始态边界的数量只会影响初始化时间复杂度，而这一部分的时间复杂度是很低的，所以一般情况下动态规划的时间复杂度不会考虑这一部分。</p>
</blockquote>
</li>
</ol>
<h2 id="Sum-Up"><a href="#Sum-Up" class="headerlink" title="Sum Up"></a>Sum Up</h2><ol>
<li><p>確定狀態</p>
<ul>
<li>最後一步</li>
<li>子問題</li>
</ul>
</li>
<li><p>轉移方程</p>
<ul>
<li>最值 min, max</li>
<li>方案數 +</li>
<li>可行數 or, and</li>
</ul>
</li>
<li><p>初始條件和邊界情況</p>
<ul>
<li>細心、考慮周全</li>
</ul>
</li>
<li><p>計算順序</p>
<ul>
<li>利用之前的計算結果</li>
</ul>
</li>
</ol>
<h2 id="FQA"><a href="#FQA" class="headerlink" title="FQA"></a>FQA</h2><ul>
<li><p>涵蓋所有動規考題</p>
<ul>
<li>是</li>
</ul>
</li>
<li><p>常見動規類型</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> <strong>座標型 20% – 機器人走路</strong></li>
<li><input disabled="" type="checkbox"> <strong>序列型 20% – f[1] 也是有兩個，但如果說「前幾個」就好思考</strong></li>
<li><input disabled="" type="checkbox"> <strong>划分型 20%</strong></li>
<li><input disabled="" type="checkbox"> <strong>區間型 15%</strong></li>
<li><input checked="" disabled="" type="checkbox"> 背包型 10%</li>
<li><input checked="" disabled="" type="checkbox"> 最長序列型 5%</li>
<li><input disabled="" type="checkbox"> 博奕型 5%</li>
<li><input disabled="" type="checkbox"> 綜合型 5%<ul>
<li>區間博奕</li>
</ul>
</li>
</ul>
</li>
<li><p>時、空優化</p>
<ul>
<li>滾動</li>
<li>如何降維</li>
</ul>
</li>
<li><p>DP</p>
<ul>
<li>打印路徑</li>
</ul>
</li>
<li><p>變種突破</p>
</li>
<li><p>不知道就是不知道了很難臨時搞</p>
</li>
</ul>
<img src="/Users/joe/Library/Application Support/typora-user-images/image-20200924215239461.png" alt="image-20200924215239461" style="zoom:50%;" />



<h3 id="Q-金字塔-–-解"><a href="#Q-金字塔-–-解" class="headerlink" title="Q: 金字塔 – 解"></a>Q: 金字塔 – 解</h3><p>在金字塔的頂端，每次都可以選擇往左下或右下走，每次</p>
<p>比dfs 高效很多!!!</p>
<ul>
<li><p>DFS – 有三條路徑可以走到 7 ，當金字塔更大，要走下去路徑數就是個指數級別增加，取決於路徑數，–&gt; 指數級別  –&gt; 2^N</p>
</li>
<li><p>DP – 把子問題的狀態保存下來了! 防多次的遍歷，跟狀態數相關，這邊就是點的個數，兩個for遍歷所有狀態，把轉移方程填到for循環裡計算，<br>兩個for外計算答案 –&gt; NxN</p>
<p>並沒有所有路徑都走一遍，但卻計算了所有的<strong>可能性</strong>；已經保存了最優解，用來去更新 7 、跟-2的最優解；<br><strong>把局部的最優解放到了子問題所代表的狀態上面，用狀態代表路徑他們的最優解，然後我們不斷進行轉移</strong></p>
</li>
</ul>
<h5 id="Steps"><a href="#Steps" class="headerlink" title="Steps"></a>Steps</h5><ol>
<li><p>dp[i, j] = 走到 i, j這點時的最大財富值</p>
</li>
<li><p>金字塔col不清晰。斜著來, 通过一個節點寫出<br><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gj23jf7sgtj310w0ik11x.jpg" alt="image-20200924221230404"></p>
</li>
</ol>
<ol start="3">
<li><p>初始化，這題比較easy – dp[1, 1] = 3</p>
<p>當下標不合法，就是不取!</p>
</li>
<li><p>最後就是第四層找一個</p>
</li>
</ol>
<img src="/Users/joe/Library/Application Support/typora-user-images/image-20200924222442700.png" alt="image-20200924222442700" style="zoom:50%;" />



<h2 id="Maximum-Product-Subarray"><a href="#Maximum-Product-Subarray" class="headerlink" title="Maximum Product Subarray"></a>Maximum Product Subarray</h2><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gj38ydsqp5j312a0eqjzf.jpg" alt="image-20200925220522498" style="zoom:50%;" />

</div><hr></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/54/"><i class="fa fa-chevron-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/54/">54</a><span class="page-number current">55</span><a class="page-number" href="/page/56/">56</a><span class="space">&hellip;</span><a class="page-number" href="/page/77/">77</a><a class="extend next" rel="next" href="/page/56/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2023 By Joe Huang</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>