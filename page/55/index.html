<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content=""><meta name="keywords" content=""><meta name="author" content="Joe Huang"><meta name="copyright" content="Joe Huang"><title>Awaken Desparado</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-180692466-1', 'auto');
ga('send', 'pageview');</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 4.2.1"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="false"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Joe Huang</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">363</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">25</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">60</span></a></div></div></div><nav class="no-bg" id="nav"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Awaken Desparado</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="site-info"><div id="site-title">Awaken Desparado</div><div id="site-sub-title"></div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2019/07/26/Algo.%20Ult./BIT(FenwickTree)%20&amp;%20SegTree%20&amp;%20MST%20&amp;%20UF/">Algo. Ult./BIT(FenwickTree) &amp; SegTree &amp; MST &amp; UF</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-07-26</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/AlgoUlt/">AlgoUlt.</a></span><div class="content"><h1 id="Fenwick-Tree"><a href="#Fenwick-Tree" class="headerlink" title="Fenwick Tree"></a>Fenwick Tree</h1><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggrsh3fq61j31920lm47i.jpg" alt="image-20200715173319551"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggrsp6fuk6j31960mgqeg.jpg" alt="image-20200715174108116"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggrsxs6yawj30y60ge7cg.jpg" alt="image-20200715174924357"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FenwickTree</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        self.sums_ = [<span class="number">0</span>] * (n+<span class="number">1</span>)</span><br><span class="line">        self.n = n</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, i, delta)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; len(self.sums_):</span><br><span class="line">            self.sums_[i] += delta</span><br><span class="line">            i += self._lowbit(i)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(self, i)</span>:</span></span><br><span class="line">        sum_ = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i &gt; <span class="number">0</span>:</span><br><span class="line">            sum_ += self.sums_[i]</span><br><span class="line">            i -= self._lowbit(i)</span><br><span class="line">        <span class="keyword">return</span> sum_</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_lowbit</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> x &amp; -x</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumArray</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, nums: List[int])</span>:</span></span><br><span class="line">        self.nums = nums</span><br><span class="line">        self.tree = FenwickTree(len(nums))</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">            self.tree.update(i+<span class="number">1</span>, nums[i])</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, i: int, val: int)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        self.tree.update(i+<span class="number">1</span>, val - self.nums[i])</span><br><span class="line">        self.nums[i] = val</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sumRange</span><span class="params">(self, i: int, j: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">return</span> self.tree.query(j + <span class="number">1</span>) - self.tree.query(i)</span><br></pre></td></tr></table></figure>



<h2 id="315-Count-of-Smaller-Numbers-After-Self"><a href="#315-Count-of-Smaller-Numbers-After-Self" class="headerlink" title="315.Count of Smaller Numbers After Self"></a>315.Count of Smaller Numbers After Self</h2><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggujdp1o3cj319y0n2k4o.jpg" alt="image-20200718023519761"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggujeh5tfej31ae0ms12c.jpg" alt="image-20200718023609770"></p>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382bwtejxj20sy0q6myy.jpg" alt="image-20200718023824394"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggujh9hnupj30xy0kygz9.jpg" alt="image-20200718023848244"></p>
<h1 id="Segment-Tree"><a href="#Segment-Tree" class="headerlink" title="Segment Tree"></a>Segment Tree</h1><h3 id="Tutorial-1"><a href="#Tutorial-1" class="headerlink" title="Tutorial 1:"></a>Tutorial 1:</h3><ul>
<li>更直觀且容易理解，但就是代碼長</li>
<li>binary tree, balanced, so O(logN); not necessary perfect</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggtajfaf6jj315q0k2ajx.jpg" alt="image-20200717004335838"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggtaogby29j31760l4al7.jpg" alt="image-20200717004840098"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggtazhqyolj31380i210v.jpg" alt="image-20200717005918569"></p>
<h4 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h4><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382cwznscj216m0k8q5v.jpg" alt="image-20200717010205089"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggtbc3bhtbj31720ke13z.jpg" alt="image-20200717011114867"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggtbcsjngrj31840mgwq4.jpg" alt="image-20200717011201336"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggtbh09kqsj317s0mu7gt.jpg" alt="image-20200717011546317"></p>
<h3 id="Tutorial-2"><a href="#Tutorial-2" class="headerlink" title="Tutorial 2:"></a>Tutorial 2:</h3><p><a href="https://leetcode.com/problems/range-sum-query-mutable/discuss/646774/Segment-tree-recursive-iterative-Binary-index-iterative-explained" target="_blank" rel="noopener">https://leetcode.com/problems/range-sum-query-mutable/discuss/646774/Segment-tree-recursive-iterative-Binary-index-iterative-explained</a></p>
<p><a href="https://www.youtube.com/watch?time_continue=2&amp;v=Oq2E2yGadnU&amp;feature=emb_logo" target="_blank" rel="noopener">https://www.youtube.com/watch?time_continue=2&amp;v=Oq2E2yGadnU&amp;feature=emb_logo</a></p>
<img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382c3mf4uj20z80nc76k.jpg" alt="image-20200731220447017" style="zoom:67%;" />

<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ghaib0wwh8j30wc0luaj8.jpg" alt="image-20200731220717640"></p>
<h2 id="9P-SegTree"><a href="#9P-SegTree" class="headerlink" title="9P SegTree"></a>9P SegTree</h2><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382c643jyj20ha06pweq.jpg" alt="image-20210310122717309"></p>
<img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382ce6bntj20uk0eemxm.jpg" alt="image-20210311105831208" style="zoom:50%;" />



<h4 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h4><h6 id=""><a href="#" class="headerlink" title=""></a></h6><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382cgjns2j20k00nugmx.jpg" alt="image-20210311111747916" style="zoom:50%;" />

<h4 id="Query"><a href="#Query" class="headerlink" title="Query"></a>Query</h4><p>0-3</p>
<img src="https://tva1.sinaimg.cn/large/008eGmZEgy1goft1ww37bj30m60l60x2.jpg" alt="image-20210311112917349" style="zoom:33%;" />

<h6 id="2-3"><a href="#2-3" class="headerlink" title="2-3"></a>2-3</h6><img src="https://tva1.sinaimg.cn/large/008eGmZEgy1goft01qfv6j30jq0i6q75.jpg" alt="image-20210311112729932" style="zoom: 33%;" />

<h5 id="-1"><a href="#-1" class="headerlink" title=""></a></h5><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382cl74iwj20z20h2q48.jpg" alt="image-20210311113131649" style="zoom: 50%;" />

<p>有可能可以「按需拆」</p>
<img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382d5izkhj21gk0paae8.jpg" alt="image-20210311113433681" style="zoom: 33%;" />

<img src="https://tva1.sinaimg.cn/large/008eGmZEgy1goft7rju6xj30cq0bumyb.jpg" alt="image-20210311113455510" style="zoom: 50%;" />



<ul>
<li>空間：N + Nx(1 + 2 + 4 + … N/4 + N/2 + N)</li>
</ul>
<h2 id="Array-version-Fr-Youtube"><a href="#Array-version-Fr-Youtube" class="headerlink" title="Array version Fr Youtube"></a>Array version Fr Youtube</h2><p>ref; <a href="https://youtu.be/e_bK-dgPvfM?t=555" target="_blank" rel="noopener">https://youtu.be/e_bK-dgPvfM?t=555</a></p>
<p><strong>Pro: able to see the array as a tree after ` build_tree</strong></p>
<h1 id="Case"><a href="#Case" class="headerlink" title="Case"></a>Case</h1><h2 id="Range-Sum-Query-w-F-Tree-amp-S-TRee"><a href="#Range-Sum-Query-w-F-Tree-amp-S-TRee" class="headerlink" title="Range Sum Query w/ F-Tree &amp; S-TRee"></a>Range Sum Query w/ F-Tree &amp; S-TRee</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FenwickTree</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        self.sums_ = [<span class="number">0</span>] * (n+<span class="number">1</span>)</span><br><span class="line">        self.n = n</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, i, delta)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; len(self.sums_):</span><br><span class="line">            self.sums_[i] += delta</span><br><span class="line">            i += self._lowbit(i)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(self, i)</span>:</span></span><br><span class="line">        sum_ = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i &gt; <span class="number">0</span>:</span><br><span class="line">            sum_ += self.sums_[i]</span><br><span class="line">            i -= self._lowbit(i)</span><br><span class="line">        <span class="keyword">return</span> sum_</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_lowbit</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> x &amp; -x</span><br><span class="line">    </span><br><span class="line"><span class="comment"># Confirm: index 0 Not Used, right?! </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumArray</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, nums: List[int])</span>:</span></span><br><span class="line">        self.nums = nums</span><br><span class="line">        self.tree = FenwickTree(len(nums))</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">            self.tree.update(i+<span class="number">1</span>, nums[i])</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, i: int, val: int)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        self.tree.update(i+<span class="number">1</span>, val - self.nums[i])</span><br><span class="line">        self.nums[i] = val</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sumRange</span><span class="params">(self, i: int, j: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">return</span> self.tree.query(j + <span class="number">1</span>) - self.tree.query(i)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Your NumArray object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"># obj = NumArray(nums)</span></span><br><span class="line"><span class="comment"># obj.update(i,val)</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SegmentTreeNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, start, end, val, left=None, right=None)</span>:</span></span><br><span class="line">        self.start = start</span><br><span class="line">        self.end = end</span><br><span class="line">        self.mid = start + (end - start) // <span class="number">2</span></span><br><span class="line">        self.val = val</span><br><span class="line">        self.left = left</span><br><span class="line">        self.right = right</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SegTree</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        self.nums = nums</span><br><span class="line">        <span class="keyword">if</span> self.nums:</span><br><span class="line">            self.root = self._buildTree(<span class="number">0</span>, len(nums) - <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, i, val)</span>:</span></span><br><span class="line">        self._updateTree(self.root, i, val)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sumRange</span><span class="params">(self, i, j)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self._sumRange(self.root, i, j)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_buildTree</span><span class="params">(self, start, end)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> start == end: <span class="keyword">return</span> SegmentTreeNode(start, end, self.nums[start])</span><br><span class="line">        mid = start + (end - start) // <span class="number">2</span></span><br><span class="line">        left = self._buildTree(start, mid)</span><br><span class="line">        right = self._buildTree(mid + <span class="number">1</span>, end)</span><br><span class="line">        <span class="keyword">return</span> SegmentTreeNode(start, end, left.val + right.val, left, right)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_updateTree</span><span class="params">(self, root, i, val)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> root.start == i <span class="keyword">and</span> root.end == i:</span><br><span class="line">            root.val = val</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span> i &lt;= root.mid:</span><br><span class="line">            self._updateTree(root.left, i, val)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self._updateTree(root.right, i, val)</span><br><span class="line">        root.val = root.left.val + root.right.val</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_sumRange</span><span class="params">(self, root, i, j)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> root.start == i <span class="keyword">and</span> root.end == j:</span><br><span class="line">            <span class="keyword">return</span> root.val</span><br><span class="line">        <span class="keyword">if</span> j &lt;= root.mid:</span><br><span class="line">            <span class="keyword">return</span> self._sumRange(root.left, i, j)</span><br><span class="line">        <span class="keyword">elif</span> i &gt; root.mid:</span><br><span class="line">            <span class="keyword">return</span> self._sumRange(root.right, i, j)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> self._sumRange(root.left, i, root.mid) + self._sumRange(root.right, root.mid + <span class="number">1</span>, j)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumArray</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="comment"># def __init__(self, nums: List[int]):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        self.tree = SegTree(nums)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, i, val)</span>:</span></span><br><span class="line">        self.tree.update(i, val)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sumRange</span><span class="params">(self, i, j)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.tree.sumRange(i, j)</span><br><span class="line">    <span class="comment"># ref：https://leetcode-cn.com/problems/range-sum-query-mutable/solution/xian-duan-shu-by-a4613565/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Your NumArray object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"># obj = NumArray(nums)</span></span><br><span class="line"><span class="comment"># obj.update(i,val)</span></span><br><span class="line"><span class="comment"># param_2 = obj.sumRange(i,j)</span></span><br></pre></td></tr></table></figure>



<h3 id="Combined"><a href="#Combined" class="headerlink" title="Combined:"></a>Combined:</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SegmentTreeNode</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, start, end, val, left=None, right=None)</span>:</span></span><br><span class="line">        self.start = start</span><br><span class="line">        self.end = end</span><br><span class="line">        self.mid = start + (end - start)//<span class="number">2</span></span><br><span class="line">        self.val = val</span><br><span class="line">        self.left = left</span><br><span class="line">        self.right = right</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SegmentTree</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        self.nums = nums</span><br><span class="line">        <span class="keyword">if</span> self.nums:</span><br><span class="line">            self.root = self._buildTree(<span class="number">0</span>, len(nums) - <span class="number">1</span>)</span><br><span class="line">            </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, i, val)</span>:</span></span><br><span class="line">        self._update(self.root, i, val)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(self, i, j)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self._query(self.root, i, j)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_buildTree</span><span class="params">(self, start, end)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> start == end:</span><br><span class="line">            <span class="keyword">return</span> SegmentTreeNode(start, end, self.nums[start])</span><br><span class="line">        mid = start + (end - start) // <span class="number">2</span></span><br><span class="line">        left = self._buildTree(start, mid)</span><br><span class="line">        right = self._buildTree(mid + <span class="number">1</span>, end)</span><br><span class="line">        <span class="keyword">return</span> SegmentTreeNode(start, end, left.val + right.val, left, right)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_update</span><span class="params">(self, root, i, val)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> root.start == i <span class="keyword">and</span> root.end == i:</span><br><span class="line">            root.val = val</span><br><span class="line">            <span class="keyword">return</span> </span><br><span class="line">        <span class="keyword">if</span> i &lt;= root.mid:</span><br><span class="line">            self._update(root.left, i, val)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self._update(root.right, i, val)</span><br><span class="line">        root.val = root.left.val + root.right.val</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_query</span><span class="params">(self, root, i, j)</span>:</span></span><br><span class="line">        <span class="comment"># print(root.start, root.end, root.mid, i, j)</span></span><br><span class="line">        <span class="keyword">if</span> root.start == i <span class="keyword">and</span> root.end == j:</span><br><span class="line">            <span class="keyword">return</span> root.val</span><br><span class="line">        <span class="keyword">if</span> j &lt;= root.mid:</span><br><span class="line">            <span class="keyword">return</span> self._query(root.left, i, j)</span><br><span class="line">        <span class="keyword">elif</span> i &gt; root.mid:</span><br><span class="line">            <span class="keyword">return</span> self._query(root.right, i, j)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> self._query(root.left , i, root.mid) + self._query(root.right, root.mid + <span class="number">1</span>, j)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FenwickTree</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        self.sums_ = [<span class="number">0</span>] * (n+<span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, i, delta)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; len(self.sums_):</span><br><span class="line">            <span class="comment"># print('in while ', i, delta)</span></span><br><span class="line">            self.sums_[i] += delta</span><br><span class="line">            i += self._lowbit(i)</span><br><span class="line">            <span class="comment"># print('after update: &#123;&#125;'.format(self.sums_))</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(self, i)</span>:</span></span><br><span class="line">        res = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i &gt; <span class="number">0</span>:</span><br><span class="line">            res += self.sums_[i]</span><br><span class="line">            i -= self._lowbit(i)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_lowbit</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> x &amp; (-x)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumArray</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, nums: List[int])</span>:</span></span><br><span class="line">        <span class="string">""" F-Tree """</span></span><br><span class="line">        self.cur_nums = nums</span><br><span class="line">        self.tree = FenwickTree(len(nums))</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">            self.tree.update(i+<span class="number">1</span>, nums[i])</span><br><span class="line">        <span class="comment"># print("INIT: ", self.tree.sums_)</span></span><br><span class="line">        <span class="string">""" S-Tree """</span></span><br><span class="line">        self.seg_tree = SegmentTree(nums)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, i: int, val: int)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">""" F-Tree """</span></span><br><span class="line">        self.tree.update(i + <span class="number">1</span>, val - self.cur_nums[i])</span><br><span class="line">        self.cur_nums[i] = val</span><br><span class="line">        </span><br><span class="line">        <span class="string">""" S-Tree """</span></span><br><span class="line">        self.seg_tree.update(i, val)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sumRange</span><span class="params">(self, i: int, j: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="string">""" F-Tree """</span></span><br><span class="line">        <span class="comment"># print(self.tree.query(j + 1), self.tree.query(i))</span></span><br><span class="line">        <span class="keyword">return</span> self.tree.query(j+<span class="number">1</span>) - self.tree.query(i)</span><br><span class="line">    </span><br><span class="line">        <span class="string">""" S-Tree """</span></span><br><span class="line">        <span class="keyword">return</span> self.seg_tree.query(i, j)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Your NumArray object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"># obj = NumArray(nums)</span></span><br><span class="line"><span class="comment"># obj.update(i,val)</span></span><br><span class="line"><span class="comment"># param_2 = obj.sumRange(i,j)</span></span><br></pre></td></tr></table></figure>



<h1 id="MST"><a href="#MST" class="headerlink" title="MST"></a>MST</h1><p>Usually, turn edge list into adj. list</p>
<ul>
<li>adj matrix: |V| x |V|</li>
<li>adj list: |V| + |E|</li>
<li>edge list: |E|</li>
</ul>
<h2 id="Prim"><a href="#Prim" class="headerlink" title="Prim"></a>Prim</h2><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggrulfnwylj30gk05ujt1.jpg" alt="image-20200715184644350"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggrulc6ffvj30im0b00w3.jpg" alt="image-20200715184636907"></p>
<p>Greedy!</p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggrus16rd6j31dk0ognax.jpg" alt="image-20200715185254214"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggrusiuvkpj31iu0q41gm.jpg" alt="image-20200715185312545"></p>
<h2 id="Kruskal"><a href="#Kruskal" class="headerlink" title="Kruskal"></a>Kruskal</h2><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382cpdw9fj215c0fywg3.jpg" alt="image-20200715230409210"></p>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382csugkgj21b20h0juo.jpg" alt="image-20200715230645534"></p>
<h1 id="Union-Find"><a href="#Union-Find" class="headerlink" title="Union Find"></a>Union Find</h1><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggziztev1mj30tu0fktew.jpg" alt="image-20200722100950385"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggzj0tmac1j30pw0hitdb.jpg" alt="image-20200722101052300"></p>
<ul>
<li>path compression是從 find 出發的，平攤下來是反阿卡曼近乎O(1)</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggzj2pqk5dj30zo0gg7at.jpg" alt="image-20200722101240864"></p>
<ul>
<li>把low rank tree 合併到high rank tree上去, rank是平均長度的概念，這樣在做path compression時的over head比較少</li>
<li>merge by rank 也就是 link by rank</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggzjhmrcp4j30l00ie79r.jpg" alt="image-20200722102700630"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggzji4hnntj30oc0hkq8o.jpg" alt="image-20200722102725831"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UF_w_rank</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        self._parents = [idx <span class="keyword">for</span> idx <span class="keyword">in</span> range(n+<span class="number">1</span>)]</span><br><span class="line">        self._rank = [<span class="number">1</span> <span class="keyword">for</span> idx <span class="keyword">in</span> range(n+<span class="number">1</span>)]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">find</span><span class="params">(self, u)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> u != self._parents[u]:</span><br><span class="line">            self._parents[u] = self.find(self._parents[u])</span><br><span class="line">        <span class="keyword">return</span> self._parents[u]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">union</span><span class="params">(self, u, v)</span>:</span></span><br><span class="line">        pu, pv = self.find(u), self.find(v)</span><br><span class="line">        <span class="keyword">if</span> pu == pv:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="comment"># self._parents[pv] = pu</span></span><br><span class="line">        <span class="comment"># return True</span></span><br><span class="line">        <span class="keyword">if</span> self._rank[u] &gt; self._rank[v]:</span><br><span class="line">            self._parents[pv] = pu</span><br><span class="line">        <span class="keyword">elif</span> self._rank[u] &lt; self._rank[v]:</span><br><span class="line">            self._parents[pu] = pv</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self._parents[pv] = pu</span><br><span class="line">            self._rank[pu] += <span class="number">1</span></span><br><span class="line">            self._rank[pv] += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UF</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        self._parents = [idx <span class="keyword">for</span> idx <span class="keyword">in</span> range(n+<span class="number">1</span>)]</span><br><span class="line">        <span class="comment"># self._rank</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">find</span><span class="params">(self, u)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> u != self._parents[u]:</span><br><span class="line">            self._parents[u] = self.find(self._parents[u])</span><br><span class="line">        <span class="keyword">return</span> self._parents[u]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">union</span><span class="params">(self, u, v)</span>:</span></span><br><span class="line">        pu, pv = self.find(u), self.find(v)</span><br><span class="line">        <span class="keyword">if</span> pu == pv:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        self._parents[pv] = pu</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">areSentencesSimilarTwo</span><span class="params">(self, words1, words2, pairs)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type words1: List[str]</span></span><br><span class="line"><span class="string">        :type words2: List[str]</span></span><br><span class="line"><span class="string">        :type pairs: List[List[str]]</span></span><br><span class="line"><span class="string">        :rtype: bool</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        m, n = len(words1), len(words2)</span><br><span class="line">        <span class="keyword">if</span> m != n <span class="keyword">or</span> <span class="keyword">not</span> pairs:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        uf = UF(len(pairs) * <span class="number">2</span>)</span><br><span class="line">        <span class="comment"># d = collections.defaultdict(int)</span></span><br><span class="line">        d = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> w1, w2 <span class="keyword">in</span> pairs:</span><br><span class="line">            <span class="comment"># w1--&gt; u</span></span><br><span class="line">            <span class="comment"># w2--&gt; v</span></span><br><span class="line">            <span class="comment"># if w1 not in d:</span></span><br><span class="line">            <span class="comment">#     d[w1] = len(d)</span></span><br><span class="line">            u = d[w1] = d.get(w1, len(d))</span><br><span class="line">            v = d[w2] = d.get(w2, len(d))</span><br><span class="line">            <span class="comment"># print(w1,u,w2,v)</span></span><br><span class="line">            uf.union(u, v)</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(m):</span><br><span class="line">            w1, w2 = words1[i], words2[i]</span><br><span class="line">            <span class="keyword">if</span> w1 == w2:    <span class="comment"># may both not in d, but are same</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="comment"># w1--&gt; u</span></span><br><span class="line">            <span class="comment"># w2--&gt; v</span></span><br><span class="line">            <span class="keyword">if</span> w1 <span class="keyword">not</span> <span class="keyword">in</span> d <span class="keyword">or</span> w2 <span class="keyword">not</span> <span class="keyword">in</span> d:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            u, v = d[w1], d[w2]</span><br><span class="line">            <span class="keyword">if</span> uf.find(u) != uf.find(v):</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">BF</span><span class="params">()</span>:</span>       <span class="comment"># Not finished yet</span></span><br><span class="line">        m, n = len(words1), len(words2)</span><br><span class="line">        <span class="keyword">if</span> m != n <span class="keyword">or</span> <span class="keyword">not</span> pairs:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        d = collections.defaultdict(set)</span><br><span class="line">        <span class="keyword">for</span> u, v <span class="keyword">in</span> range(pairs):</span><br><span class="line">            d[u].add(v)</span><br><span class="line">            d[v].add(u)</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(m):</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> self.is_similar(words1[i], words2[i], d):</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_similar</span><span class="params">(self, w1, w2, d)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> w1 <span class="keyword">not</span> <span class="keyword">in</span> d <span class="keyword">and</span> w2 <span class="keyword">not</span> <span class="keyword">in</span> d:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">if</span> w1 <span class="keyword">in</span> d:</span><br><span class="line">            <span class="keyword">return</span> self.is_similar( w2)</span><br><span class="line">            <span class="comment"># ==&gt; many expansion!</span></span><br><span class="line">        <span class="keyword">if</span> w2 <span class="keyword">in</span> d <span class="keyword">and</span> w1 <span class="keyword">in</span> d[w2]:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">""" LC 323 """</span></span><br><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DSU</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="comment"># self.parents = [i for i in range(len(nums))]    # <span class="doctag">TODO:</span> mapping, here I assume it continous first</span></span><br><span class="line">        self.parents = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> n <span class="keyword">in</span> nums:</span><br><span class="line">            self.parents[n] = n <span class="comment"># 動態加呢 ?!　有這樣的題？</span></span><br><span class="line">        self.ranks = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> n <span class="keyword">in</span> nums:</span><br><span class="line">            self.ranks[n] = <span class="number">1</span></span><br><span class="line">            </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">find</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> self.parents[x] != x:</span><br><span class="line">            self.parents[x] = self.find(self.parents[x])    <span class="comment"># set my grandpa as my parent</span></span><br><span class="line">        <span class="keyword">return</span> self.parents[x]</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">union</span><span class="params">(self, x, y)</span>:</span></span><br><span class="line">        <span class="comment"># print(x, y)</span></span><br><span class="line">        <span class="comment"># px, py = self.parents[x], self.parents[y] # BUG... XD</span></span><br><span class="line">                                                  <span class="comment"># CAUGHT by CASE↓</span></span><br><span class="line">                                                    <span class="comment"># 4</span></span><br><span class="line">                                                    <span class="comment"># [[1,2],[0,1],[0,2]]</span></span><br><span class="line">        px, py = self.find(x), self.find(y)</span><br><span class="line">        <span class="keyword">if</span> px != py:</span><br><span class="line">            <span class="comment"># self.parents[y] = px      # BAD... CAUGHT by CASE↓; 怎麼記case或形象好？</span></span><br><span class="line">                                            <span class="comment"># FAILED at: </span></span><br><span class="line">                                                <span class="comment"># 5</span></span><br><span class="line">                                                <span class="comment"># [[0,1],[2,1],[2,0]]; I return 2</span></span><br><span class="line">                                                    <span class="comment"># REASON:</span></span><br><span class="line">                                                    <span class="comment"># 0 &lt;- 1        parents:    0  0   2</span></span><br><span class="line">                                                    <span class="comment"># 2 &lt;- 0 &lt;- 1   parents:    0</span></span><br><span class="line">                                            <span class="comment"># THOUGH PASS at:</span></span><br><span class="line">                                                <span class="comment"># 5</span></span><br><span class="line">                                                <span class="comment"># [[1,2],[0,1],[0,2]]; I return 3</span></span><br><span class="line">            self.parents[py] = px       </span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">union_w_rank</span><span class="params">(self, x, y)</span>:</span></span><br><span class="line">        px, py = self.find(x), self.find(y)</span><br><span class="line">        <span class="keyword">if</span> px != py:</span><br><span class="line">            rx, ry = self.ranks[x], self.ranks[y]</span><br><span class="line">            <span class="keyword">if</span> rx &gt; ry:</span><br><span class="line">                self.parents[py] = px</span><br><span class="line">            <span class="keyword">elif</span> rx &lt; ry:</span><br><span class="line">                self.parents[px] = py</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                self.parents[px] = py</span><br><span class="line">                self.ranks[py] += <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span>    </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countComponents</span><span class="params">(self, n: int, edges: List[List[int]])</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># return self.my_20210505(n, edges)   # AC     問題：dsu裡面的東西有沒有必要是全部的members?    </span></span><br><span class="line">        <span class="comment"># return self.my_20210505_B(n, edges)   # AC；　↑　不必然, 只塞了邊的點，孤立的點就沒放進去DSU</span></span><br><span class="line">        <span class="comment"># return self.my_20210505_C(n, edges) # AC;    正的算，看最後有幾個代表，ps,一開始有把所有點都先弄出來</span></span><br><span class="line">        <span class="comment"># return self.my_20210505_D(n, edges) # AC     正的算，但一開始只把edge上看到的端點放進去，後面在找代表的點的時候要是發現沒在 uf裡，就知道它是個孤立點</span></span><br><span class="line">        <span class="comment"># return self.my_20210505_E(n, edges) # DFS AC</span></span><br><span class="line">        <span class="keyword">return</span> self.my_20210505_F(n, edges) <span class="comment"># BFS   AC</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20210505_E</span><span class="params">(self, n, edges)</span>:</span></span><br><span class="line">        visited = set([])</span><br><span class="line">        outs = collections.defaultdict(list)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(edges)):</span><br><span class="line">            e0, e1 = edges[i]</span><br><span class="line">            outs[e0].append(e1)</span><br><span class="line">            outs[e1].append(e0)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># print(outs)</span></span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">if</span> i <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">                self.my_20210505_dfs(i, <span class="number">0</span>, outs, visited)</span><br><span class="line">                <span class="comment"># visited.add(i)</span></span><br><span class="line">                count += <span class="number">1</span></span><br><span class="line">            <span class="comment"># print(i, count)</span></span><br><span class="line">        <span class="keyword">return</span> count</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20210505_dfs</span><span class="params">(self, now, idx, outs, visited)</span>:</span></span><br><span class="line">        visited.add(now)</span><br><span class="line">        <span class="keyword">for</span> nbr <span class="keyword">in</span> outs[now]:</span><br><span class="line">            <span class="comment"># if now not in visited:    BUG</span></span><br><span class="line">            <span class="keyword">if</span> nbr <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">                self.my_20210505_dfs(nbr, idx + <span class="number">1</span>, outs, visited)    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20210505_F</span><span class="params">(self, n, edges)</span>:</span></span><br><span class="line">        visited = set([])</span><br><span class="line">        outs = collections.defaultdict(list)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(edges)):</span><br><span class="line">            e0, e1 = edges[i]</span><br><span class="line">            outs[e0].append(e1)</span><br><span class="line">            outs[e1].append(e0)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># print(outs)</span></span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">if</span> i <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">                <span class="comment"># DO BFS</span></span><br><span class="line">                Q = collections.deque([])</span><br><span class="line">                Q.append(i)</span><br><span class="line">                visited.add(i)</span><br><span class="line">                <span class="keyword">while</span> Q:</span><br><span class="line">                    now = Q.popleft()</span><br><span class="line">                    <span class="keyword">for</span> nbr <span class="keyword">in</span> outs[now]:</span><br><span class="line">                        <span class="keyword">if</span> nbr <span class="keyword">not</span> <span class="keyword">in</span> visited:  <span class="comment"># Don't forget!!!</span></span><br><span class="line">                            Q.append(nbr)</span><br><span class="line">                            visited.add(nbr)</span><br><span class="line">                <span class="comment"># END BFS</span></span><br><span class="line">                count += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> count</span><br><span class="line">    </span><br><span class="line">        </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20210505_D</span><span class="params">(self, n, edges)</span>:</span></span><br><span class="line">        all_nodes = set([])       <span class="comment"># 這不是真正的all_nodes了，只是 all_edge_nodes</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(edges)):</span><br><span class="line">            fr, to = edges[i]</span><br><span class="line">            all_nodes.add(fr)</span><br><span class="line">            all_nodes.add(to)</span><br><span class="line"></span><br><span class="line">        uf = DSU(all_nodes)    <span class="comment"># always have to put all members into DSU first?!</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(edges)):</span><br><span class="line">            <span class="comment"># print(i)</span></span><br><span class="line">            fr, to = edges[i]</span><br><span class="line">            uf.union(fr, to)   <span class="comment"># should seperate this LOGICS! NOT Here            </span></span><br><span class="line">            <span class="comment"># uf.union_w_rank(fr, to)   # should seperate this LOGICS! NOT Here</span></span><br><span class="line">                </span><br><span class="line">        res = set()</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                res.add(uf.find(i))</span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                res.add(i)</span><br><span class="line">        <span class="keyword">return</span> len(res)        </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20210505_C</span><span class="params">(self, n, edges)</span>:</span></span><br><span class="line">        all_nodes = []</span><br><span class="line">        [all_nodes.append(i) <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line">        </span><br><span class="line">        uf = DSU(all_nodes)    <span class="comment"># always have to put all members into DSU first?!</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(edges)):</span><br><span class="line">            <span class="comment"># print(i)</span></span><br><span class="line">            fr, to = edges[i]</span><br><span class="line">            uf.union(fr, to)   <span class="comment"># should seperate this LOGICS! NOT Here            </span></span><br><span class="line">            <span class="comment"># uf.union_w_rank(fr, to)   # should seperate this LOGICS! NOT Here</span></span><br><span class="line">                </span><br><span class="line">        res = set()</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            res.add(uf.find(i))</span><br><span class="line">        <span class="keyword">return</span> len(res)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20210505_B</span><span class="params">(self, n, edges)</span>:</span></span><br><span class="line">        all_nodes = set([])       <span class="comment"># 這不是真正的all_nodes了，只是 all_edge_nodes</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(edges)):</span><br><span class="line">            fr, to = edges[i]</span><br><span class="line">            all_nodes.add(fr)</span><br><span class="line">            all_nodes.add(to)</span><br><span class="line"></span><br><span class="line">        dsu = DSU(all_nodes)    <span class="comment"># always have to put all members into DSU first?!</span></span><br><span class="line">        union_count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(edges)):</span><br><span class="line">            <span class="comment"># print(i)</span></span><br><span class="line">            fr, to = edges[i]</span><br><span class="line">            <span class="keyword">if</span> dsu.union_w_rank(fr, to):</span><br><span class="line">                union_count += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> n - union_count</span><br><span class="line">        <span class="comment"># return len(all_nodes) - union_count</span></span><br><span class="line">        </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20210505</span><span class="params">(self, n, edges)</span>:</span></span><br><span class="line">        <span class="comment"># max_num = 0</span></span><br><span class="line">        <span class="comment"># for i in range(n):</span></span><br><span class="line">        <span class="comment">#     fr, to = edges[i]</span></span><br><span class="line">        <span class="comment">#     max_num = max(max_num, fr, to)</span></span><br><span class="line">        <span class="comment"># all_nodes = []</span></span><br><span class="line">        <span class="comment"># [all_nodes.append(i) for i in range(max_num)]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># all_nodes = set([])       # BUG, if any one node is not list in edges</span></span><br><span class="line">        <span class="comment"># for i in range(len(edges)):</span></span><br><span class="line">        <span class="comment">#     fr, to = edges[i]</span></span><br><span class="line">        <span class="comment">#     all_nodes.add(fr)</span></span><br><span class="line">        <span class="comment">#     all_nodes.add(to)</span></span><br><span class="line">        all_nodes = []</span><br><span class="line">        [all_nodes.append(i) <span class="keyword">for</span> i <span class="keyword">in</span> range(n)] <span class="comment"># 一定這樣先把all_nodes生出來先嗎？</span></span><br><span class="line">        <span class="comment"># print(all_nodes)</span></span><br><span class="line">        <span class="comment"># assume there's not repeated connections in edges</span></span><br><span class="line">        <span class="comment"># return len(all_nodes) - n     # WRONG, 要是邊在已連著的同個島的兩點了，就不該再被減去，不然就多減了</span></span><br><span class="line">        </span><br><span class="line">        dsu = DSU(all_nodes)    <span class="comment"># always have to put all members into DSU first?!</span></span><br><span class="line">        union_count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(edges)):</span><br><span class="line">            <span class="comment"># print(i)</span></span><br><span class="line">            fr, to = edges[i]</span><br><span class="line">            <span class="keyword">if</span> dsu.union_w_rank(fr, to):   <span class="comment"># should seperate this LOGICS! NOT Here</span></span><br><span class="line">                union_count += <span class="number">1</span>      <span class="comment"># 不是在這裡作這個判斷的</span></span><br><span class="line">                                    <span class="comment"># 不不不，其實可以過；但要是 union像剛剛那樣寫了，</span></span><br><span class="line">                                    <span class="comment"># 可能要自圓的話就得下面再作一次所有人的find的判斷 (?!) --&gt; DISCUSS</span></span><br><span class="line">        <span class="comment"># print('union_count: ', union_count)</span></span><br><span class="line">        <span class="keyword">return</span> len(all_nodes) - union_count</span><br></pre></td></tr></table></figure>



</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/07/26/Algo.%20Ult./BiBFS-arrangement/">Algo. Ult./BiBFS-arrangement</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-07-26</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/AlgoUlt/">AlgoUlt.</a></span><div class="content"><h1 id="Bi-BFS"><a href="#Bi-BFS" class="headerlink" title="Bi-BFS"></a>Bi-BFS</h1><h3 id="LC1197-Minimum-Knight-Moves"><a href="#LC1197-Minimum-Knight-Moves" class="headerlink" title="LC1197 Minimum Knight Moves"></a>LC1197 Minimum Knight Moves</h3><p>In an <strong>infinite</strong> chess board with coordinates from <code>-infinity</code> to <code>+infinity</code>, you have a <strong>knight</strong> at square <code>[0, 0]</code>.</p>
<p>A knight has 8 possible moves it can make, as illustrated below. Each move is two squares in a cardinal direction, then one square in an orthogonal direction.</p>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h2ufl4y2kzj20ba0ba3yu.jpg" alt="img"></p>
<p>Return <em>the minimum number of steps needed to move the knight to the square</em> <code>[x, y]</code>. It is guaranteed the answer exists.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: x &#x3D; 2, y &#x3D; 1</span><br><span class="line">Output: 1</span><br><span class="line">Explanation: [0, 0] → [2, 1]</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: x &#x3D; 5, y &#x3D; 5</span><br><span class="line">Output: 4</span><br><span class="line">Explanation: [0, 0] → [2, 1] → [4, 2] → [3, 4] → [5, 5]</span><br></pre></td></tr></table></figure>



<p><strong>Constraints:</strong></p>
<ul>
<li><code>-300 &lt;= x, y &lt;= 300</code></li>
<li><code>0 &lt;= |x| + |y| &lt;= 300</code></li>
</ul>
<h4 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">DIRECTIONS = [</span><br><span class="line">                [<span class="number">1</span>, <span class="number">2</span>], [<span class="number">1</span>, <span class="number">-2</span>], [<span class="number">-1</span>, <span class="number">2</span>], [<span class="number">-1</span>, <span class="number">-2</span>],</span><br><span class="line">                [<span class="number">2</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">-1</span>], [<span class="number">-2</span>, <span class="number">1</span>], [<span class="number">-2</span>, <span class="number">-1</span>],</span><br><span class="line">               ]</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minKnightMoves</span><span class="params">(self, x: int, y: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># return self.my_20220602(x, y) # AC</span></span><br><span class="line">        <span class="keyword">return</span> self.my_20220602B(x, y)  <span class="comment"># AC</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20220602B</span><span class="params">(self, x, y)</span>:</span></span><br><span class="line">        que = deque([(<span class="number">0</span>, <span class="number">0</span>)])</span><br><span class="line">        <span class="comment"># visited = &#123;(0, 0): 0&#125;</span></span><br><span class="line">        visited = set([(<span class="number">0</span>, <span class="number">0</span>)])</span><br><span class="line">        back_que = deque([(x, y)])</span><br><span class="line">        back_visited = set([(x, y)])</span><br><span class="line">        steps = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> que:</span><br><span class="line">            <span class="keyword">if</span> len(que) &gt; len(back_que):</span><br><span class="line">                que, back_que = back_que, que</span><br><span class="line">                visited, back_visited = back_visited, visited</span><br><span class="line">                </span><br><span class="line">            len_que = len(que)</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> range(len_que):</span><br><span class="line">                i, j = que.popleft()</span><br><span class="line">                <span class="comment"># if (i, j) == (x, y):</span></span><br><span class="line">                <span class="comment">#     return steps</span></span><br><span class="line">                <span class="keyword">if</span> (i, j) <span class="keyword">in</span> back_visited:</span><br><span class="line">                    <span class="keyword">return</span> steps</span><br><span class="line">                <span class="keyword">for</span> di, dj <span class="keyword">in</span> DIRECTIONS:</span><br><span class="line">                    ni, nj = i + di, j + dj</span><br><span class="line">                    <span class="comment"># if 0 &lt;= ni &lt; </span></span><br><span class="line">                    <span class="keyword">if</span> (ni, nj) <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">                        que.append((ni, nj))</span><br><span class="line">                        visited.add((ni, nj))</span><br><span class="line">            steps += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20220602</span><span class="params">(self, x, y)</span>:</span></span><br><span class="line">        que = deque([(<span class="number">0</span>, <span class="number">0</span>)])</span><br><span class="line">        visited = set([(<span class="number">0</span>, <span class="number">0</span>)])</span><br><span class="line">        <span class="comment"># visited[(0, 0)] =</span></span><br><span class="line">        steps = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> que:</span><br><span class="line">            len_que = len(que)</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> range(len_que):</span><br><span class="line">                i, j = que.popleft()</span><br><span class="line">                <span class="keyword">if</span> (i, j) == (x, y):</span><br><span class="line">                    <span class="keyword">return</span> steps</span><br><span class="line">                <span class="keyword">for</span> di, dj <span class="keyword">in</span> DIRECTIONS:</span><br><span class="line">                    ni, nj = i + di, j + dj</span><br><span class="line">                    <span class="comment"># if 0 &lt;= ni &lt; </span></span><br><span class="line">                    <span class="keyword">if</span> (ni, nj) <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">                        que.append((ni, nj))</span><br><span class="line">                        visited.add((ni, nj))   <span class="comment"># important!</span></span><br><span class="line">            steps += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br></pre></td></tr></table></figure>





<h3 id="LC1345-Jump-Game-IV"><a href="#LC1345-Jump-Game-IV" class="headerlink" title="LC1345 Jump Game IV"></a>LC1345 Jump Game IV</h3><p>Beside word ladder II, there’s interesting pattern of Bi-BFS in LC1345</p>
<p>Instead of just using ‘steps as a set’, I prefer to use a dictionay to remember the steps of each index. </p>
<p>And I fix it to AC. </p>
<h5 id="Special-Take-away"><a href="#Special-Take-away" class="headerlink" title="Special Take away:"></a>Special Take away:</h5><blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> len(Q) &gt; len(back_Q):</span><br><span class="line">    Q, back_Q = back_Q, Q</span><br><span class="line">    visited, visited_back = visited_back, visited</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="Code-1"><a href="#Code-1" class="headerlink" title="Code"></a>Code</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"><span class="keyword">from</span> sortedcontainers <span class="keyword">import</span> SortedDict</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minJumps</span><span class="params">(self, arr: List[int])</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># return self.my_20220114(arr)	# AC</span></span><br><span class="line">        <span class="keyword">return</span> self.my_20220114_opt_bibfs(arr)	<span class="comment"># AC</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20220114_opt_bibfs</span><span class="params">(self, arr)</span>:</span></span><br><span class="line">        n = len(arr)</span><br><span class="line">        <span class="keyword">if</span> n &lt;= <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        mapping = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> i, val <span class="keyword">in</span> enumerate(arr):</span><br><span class="line">            <span class="comment"># mapping[val] = mapping.get(val, []) + [i] # 這行導致不 AC - . -... 無言啦!, 下面fix</span></span><br><span class="line">            <span class="keyword">if</span> val <span class="keyword">in</span> mapping:</span><br><span class="line">                mapping[val].append(i)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                mapping[val] = [i]</span><br><span class="line">            </span><br><span class="line">        <span class="comment"># print(mapping)</span></span><br><span class="line">        Q = deque([<span class="number">0</span>])</span><br><span class="line">        back_Q = deque([n - <span class="number">1</span>])</span><br><span class="line">        visited = SortedDict([])</span><br><span class="line">        visited[<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">        <span class="comment"># visited[n - 1] = 0</span></span><br><span class="line">        visited_back = SortedDict([])</span><br><span class="line">        visited_back[n - <span class="number">1</span>] = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> Q:</span><br><span class="line">            <span class="keyword">if</span> len(Q) &gt; len(back_Q):</span><br><span class="line">                Q, back_Q = back_Q, Q</span><br><span class="line">                visited, visited_back = visited_back, visited</span><br><span class="line">                </span><br><span class="line">            next_Q = deque([])</span><br><span class="line">            len_Q = len(Q)</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> range(len_Q):</span><br><span class="line">                now = Q.popleft()</span><br><span class="line">                <span class="comment"># fly first!</span></span><br><span class="line">                <span class="keyword">for</span> nxt <span class="keyword">in</span> mapping[arr[now]]:</span><br><span class="line">                    <span class="comment"># if nxt in back_Q:</span></span><br><span class="line">                    <span class="keyword">if</span> nxt <span class="keyword">in</span> visited_back:</span><br><span class="line">                        <span class="comment"># return visited.get(nxt, 0) * 2 + 1    # BUG</span></span><br><span class="line">                        <span class="keyword">return</span> visited.get(now, <span class="number">0</span>) + <span class="number">1</span> + visited_back.get(nxt, <span class="number">0</span>)   <span class="comment"># BUG</span></span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">not</span> (<span class="number">0</span> &lt;= nxt &lt;= n - <span class="number">1</span>):</span><br><span class="line">                        <span class="keyword">continue</span></span><br><span class="line">                    <span class="keyword">if</span> nxt <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">                        <span class="comment"># visited[nxt] = min(visited[now], visited.get(nxt, n))</span></span><br><span class="line">                        visited[nxt] = min(visited[now] + <span class="number">1</span>, visited.get(nxt, n))</span><br><span class="line">                        next_Q.append(nxt)</span><br><span class="line">                </span><br><span class="line">                mapping[arr[now]].clear()</span><br><span class="line">                <span class="comment"># then step one or -1                </span></span><br><span class="line">                <span class="keyword">for</span> delta <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">-1</span>]:</span><br><span class="line">                    <span class="comment"># if nxt in back_Q:</span></span><br><span class="line">                    nxt = now + delta</span><br><span class="line">                    <span class="keyword">if</span> nxt <span class="keyword">in</span> visited_back:</span><br><span class="line">                        <span class="keyword">return</span> visited.get(now, <span class="number">0</span>) + <span class="number">1</span> + visited_back.get(nxt, <span class="number">0</span>) <span class="comment"># BUG</span></span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">not</span> (<span class="number">0</span> &lt;= nxt &lt;= n - <span class="number">1</span>):</span><br><span class="line">                        <span class="keyword">continue</span></span><br><span class="line">                    visited[nxt] = min(visited[now] + <span class="number">1</span>, visited.get(nxt, n))</span><br><span class="line">                    <span class="keyword">if</span> visited[nxt] == visited[now] + <span class="number">1</span>:</span><br><span class="line">                        next_Q.append(nxt)</span><br><span class="line">            Q = next_Q</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        <span class="comment"># return visited[n - 1]</span></span><br><span class="line">        <span class="comment">#     print(next_Q)</span></span><br><span class="line">        <span class="comment">#     print(visited)</span></span><br><span class="line">        <span class="comment"># print(visited)</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_20220114</span><span class="params">(self, arr)</span>:</span></span><br><span class="line">        n = len(arr)</span><br><span class="line">        mapping = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> i, val <span class="keyword">in</span> enumerate(arr):</span><br><span class="line">            <span class="comment"># mapping[val] = mapping.get(val, []) + [i] # 這行導致不 AC - . -... 無言啦!, 下面fix</span></span><br><span class="line">            <span class="keyword">if</span> val <span class="keyword">in</span> mapping:</span><br><span class="line">                mapping[val].append(i)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                mapping[val] = [i]</span><br><span class="line">            </span><br><span class="line">        <span class="comment"># print(mapping)</span></span><br><span class="line">        Q = deque([<span class="number">0</span>])</span><br><span class="line">        visited = SortedDict([])</span><br><span class="line">        visited[<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> Q:</span><br><span class="line">            next_Q = deque([])</span><br><span class="line">            len_Q = len(Q)</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> range(len_Q):</span><br><span class="line">                now = Q.popleft()</span><br><span class="line">                <span class="keyword">if</span> now == n - <span class="number">1</span>:            <span class="comment"># early return, still TLE... </span></span><br><span class="line">                    <span class="keyword">return</span> visited[now]</span><br><span class="line">                <span class="comment"># fly first!</span></span><br><span class="line">                <span class="keyword">for</span> nxt <span class="keyword">in</span> mapping[arr[now]]:</span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">not</span> (<span class="number">0</span> &lt;= nxt &lt;= n - <span class="number">1</span>):</span><br><span class="line">                        <span class="keyword">continue</span></span><br><span class="line">                    <span class="keyword">if</span> nxt <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">                        <span class="comment"># visited[nxt] = min(visited[now], visited.get(nxt, n))</span></span><br><span class="line">                        visited[nxt] = min(visited[now] + <span class="number">1</span>, visited.get(nxt, n))</span><br><span class="line">                        next_Q.append(nxt)</span><br><span class="line">                </span><br><span class="line">                mapping[arr[now]].clear()</span><br><span class="line">                <span class="comment"># then step one or -1                </span></span><br><span class="line">                <span class="keyword">for</span> delta <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">-1</span>]:</span><br><span class="line">                    nxt = now + delta</span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">not</span> (<span class="number">0</span> &lt;= nxt &lt;= n - <span class="number">1</span>):</span><br><span class="line">                        <span class="keyword">continue</span></span><br><span class="line">                    visited[nxt] = min(visited[now] + <span class="number">1</span>, visited.get(nxt, n))</span><br><span class="line">                    <span class="keyword">if</span> visited[nxt] == visited[now] + <span class="number">1</span>:</span><br><span class="line">                        next_Q.append(nxt)</span><br><span class="line">            Q = next_Q</span><br><span class="line">        <span class="keyword">return</span> visited[n - <span class="number">1</span>]</span><br><span class="line">        <span class="comment">#     print(next_Q)</span></span><br><span class="line">        <span class="comment">#     print(visited)</span></span><br><span class="line">        <span class="comment"># print(visited)</span></span><br></pre></td></tr></table></figure>



</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/07/07/Front-End/2019-07-07-front-end%20rendering/">Front-End Rendering!</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-07-07</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Front-End-Rendering/">Front-End-Rendering</a></span><div class="content"><h3 id="Front-End-Rendering"><a href="#Front-End-Rendering" class="headerlink" title="Front-End Rendering"></a>Front-End Rendering</h3><ul>
<li>图片：裁剪，模糊，亮度，对比度，阴影，灰度，色相旋转，反转，透明度，饱和度，褐色<br><a href="https://www.runoob.com/cssref/css3-pr-filter.html" target="_blank" rel="noopener">https://www.runoob.com/cssref/css3-pr-filter.html</a><br><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6nijqvpwvj31410kzgxe.jpg" alt="image-20190904152108270"></li>
</ul>
<ul>
<li><p>文字：模糊，阴影，透明度，发光，渐变</p>
<p><a href="https://codepen.io/wuyeguangming/pen/jONaWXr" target="_blank" rel="noopener">https://codepen.io/wuyeguangming/pen/jONaWXr</a></p>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6nibg1wusj31kz0u0aua.jpg" alt=""></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6nij8edvlj31kc0u0nb7.jpg" alt="image-20190904152348021"></p>
<ul>
<li><p>动效：位移，缩放，旋转，渐变<br><a href="https://animejs.com/" target="_blank" rel="noopener">https://animejs.com/</a></p>
</li>
<li><p>物理引擎：重力、碰撞、摩擦、阻力、惯性等<br><a href="http://brm.io/matter-js/" target="_blank" rel="noopener">http://brm.io/matter-js/</a></p>
</li>
<li><p>视差效果引擎：近大远小<br><a href="http://matthew.wagerfield.com/parallax/" target="_blank" rel="noopener">http://matthew.wagerfield.com/parallax/</a></p>
</li>
<li><p>3d<br><a href="https://threejs.org/examples/#webgl_animation_multiple" target="_blank" rel="noopener">https://threejs.org/examples/#webgl_animation_multiple</a></p>
</li>
<li><p>建模<br><a href="https://www.mixamo.com/#/" target="_blank" rel="noopener">https://www.mixamo.com/#/</a></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6nijxu7ahj31l00u04qp.jpg" alt="image-20190904151945987"></p>
</li>
</ul>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://animejs.com/" target="_blank" rel="noopener">https://animejs.com/</a><br><a href="http://svgjs.com/" target="_blank" rel="noopener">http://svgjs.com</a><br><a href="https://daneden.github.io/animate.css/" target="_blank" rel="noopener">https://daneden.github.io/animate.css/</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/07/04/Stat./Stat-MIT-1/">Stat./Stat-MIT-1</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-07-04</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Stat/">Stat.</a></span><div class="content"><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggf86b3wa1j30fa08qadz.jpg" alt="image-20200704204407394"></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/07/03/Algo.%20Ult./DP_appendix_2&amp;3/">Algo. Ult./DP_appendix_2&amp;3</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-07-03</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/AlgoUlt/">AlgoUlt.</a></span><div class="content"><ol>
<li>2^n ==&gt; n^2</li>
<li>無循環依賴、無序應該不是；但無序的也可能是就是背包型</li>
</ol>
<h1 id="DP-appendix-2"><a href="#DP-appendix-2" class="headerlink" title="DP appendix 2"></a>DP appendix 2</h1><h2 id="1147-工作安排"><a href="#1147-工作安排" class="headerlink" title="1147. 工作安排"></a>1147. 工作安排</h2><ul>
<li><p>求「價值最大」＝＝＞ 最優值</p>
</li>
<li><p>每天要決定是L or H or X</p>
</li>
<li><p>跟 house Robber 像, 但多了一個狀態「選擇難or易」</p>
</li>
<li><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>L</td>
<td><strong>4</strong></td>
<td>2</td>
<td>3</td>
<td><strong>7</strong></td>
</tr>
<tr>
<td>R</td>
<td>3</td>
<td>5</td>
<td><strong>6</strong></td>
<td>9</td>
</tr>
</tbody></table>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gge244w23tj31100icwo7.jpg" alt="image-20200703202854308"></p>
<ul>
<li><p>坐標型DP</p>
</li>
<li><p>簡化後可以是「令dp[i] 表前i周可完成的最大價值」，狀態轉移方程：</p>
<ul>
<li>dp[i] = max(dp[i-1] + low[i], dp[i-2] + high[i])</li>
</ul>
</li>
<li><p>初始化：</p>
<ul>
<li>dp[0] = low[0]</li>
<li><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gge29kbm7ej30o20gc7a0.jpg" alt="image-20200703203413184"></li>
</ul>
</li>
<li><p>什麼情況不是返回 dp[n-1]? </p>
<ul>
<li>當價值有可能有負數的時候</li>
<li>因為i已經假設第i天有做事</li>
<li>可以透過進行拓維解決、加個「不做事」的維度</li>
</ul>
</li>
<li><p>滾動優化，一起模 3</p>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gge37afck7j30o20fujyz.jpg" alt="image-20200703210638577"></p>
<h2 id="77-LCS-最長公共子序列"><a href="#77-LCS-最長公共子序列" class="headerlink" title="77.LCS 最長公共子序列"></a>77.LCS 最長公共子序列</h2><ul>
<li><p>LCS</p>
</li>
<li><p>LIS</p>
</li>
<li><p>LCA</p>
</li>
<li><p>TSP</p>
</li>
<li><p>2^N, N位，用DP降到 N^2</p>
</li>
<li><p>给两個字串的，為「匹配型動規」</p>
<ul>
<li>LCS</li>
<li>Edit Distance</li>
<li>Interleaving Substring</li>
<li>Wildcard Matching</li>
<li>Regular Expression Matching</li>
</ul>
</li>
<li><p><strong>dp[i] [j] 表 A的前i元素與 B的前i元素的最長LCS長度</strong></p>
</li>
<li><p>N個字符，有N個不同前綴 X ==&gt; N+1才對</p>
<ul>
<li>還有空串！空串是任意串的前綴；如空arr是任何arr的前綴</li>
</ul>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gge2qhuja2j30uy0dcdlf.jpg" alt="image-20200703205030160"></p>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382efnpfij20lc0gwjsp.jpg" alt="image-20200703205331747"></p>
<img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gge2upqxmhj30ug0dyn2t.jpg" alt="image-20200703205433751" style="zoom:67%;" />



<ul>
<li>初始的邊上是0</li>
<li>如果是edit distance 的化 邊邊應該是 i或j的值</li>
<li>大問題依賴小問題</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gge2y33wrrj30zk0fun6b.jpg" alt="image-20200703205747834"></p>
<p>​        ＆interleaving</p>
<ul>
<li><p>区间型是小依賴大</p>
<ul>
<li>i倒過來，j正過去</li>
<li>Stone Game</li>
</ul>
</li>
<li><p>滚動數組 一起模 2 即可，如下，依賴得少才好滾</p>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gge35k1lo6j30ue0k6n6u.jpg" alt="image-20200703210458738"></p>
<h2 id="76-最長上升子序列-LIS"><a href="#76-最長上升子序列-LIS" class="headerlink" title="76.最長上升子序列 LIS"></a>76.最長上升子序列 LIS</h2><ul>
<li><p>subsequcne </p>
</li>
<li><p>longest ==&gt; 動規</p>
</li>
<li><p><strong>不能交換順序，是有序的！</strong>；背包可以交換，只是一個集合，是可換序的特例DP解法</p>
</li>
<li><p>dp[i] 的定義？</p>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gge3e6f2hjj316k0noqd4.jpg" alt="image-20200703211312555"></p>
<ul>
<li>A為何錯？<ul>
<li>下面這個５就拼不上了</li>
</ul>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gge3i4pr9tj30m00ee77s.jpg" alt="image-20200703211703227"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gge3jg7ltkj30mk0daadf.jpg" alt="image-20200703211820236"></p>
<ul>
<li>初始狀態 dp[i] = 1<ul>
<li>是说，「每個數就選它自己而已」，都以自己開始、結尾</li>
<li><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gge3nfsgvcj30pu0cmgnv.jpg" alt="image-20200703212210255" style="zoom:50%;" /></li>
<li>只初始化dp[0] 是不夠的，這也是座標型，就是看怎麼跳</li>
<li>這不一定要從0這個位置開始選，每個數都可能成為起點</li>
</ul>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gge3lszejnj30o60gin3h.jpg" alt="image-20200703212036165"></p>
<ul>
<li>O(N^2)</li>
<li></li>
</ul>
<img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gge3q1olo0j30iu0ccgq6.jpg" alt="image-20200703212440013" style="zoom:50%;" />



<h2 id="91-最小調整代價"><a href="#91-最小調整代價" class="headerlink" title="91.最小調整代價"></a>91.最小調整代價</h2><ul>
<li><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gge3wmh1s6j311e0gg7b5.jpg" alt="image-20200703213059015"></p>
</li>
<li><h2 id="轉移方程"><a href="#轉移方程" class="headerlink" title="轉移方程"></a>轉移方程</h2></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gge3z3x4h4j30qc0j2q62.jpg" alt="image-20200703213322963"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gge41on9x5j30og0b878b.jpg" alt="image-20200703213551446"></p>
<ul>
<li><p>200^3 </p>
</li>
<li><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gge42dgrt1j30sg0hiwjo.jpg" alt="image-20200703213631392"></p>
</li>
<li><p>滾動數組：第一維模2就完成</p>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gge4349ar1j30qe0o27gl.jpg" alt="image-20200703213714291"></p>
<ul>
<li>動規類型<ul>
<li><strong>座標型</strong>: Triangle, Unique Path, Jump Game</li>
<li><strong>前綴型</strong><ul>
<li>匹配型: LIS, Wildcard Matching</li>
<li>划分型: Word Break</li>
</ul>
</li>
<li><strong>區間型</strong>: Stone Game</li>
<li><strong>背包</strong>: Backpack 系列</li>
<li>博奕型: Coins in a Line</li>
<li>狀態壓縮型: TSP(Traveling Salesman Problem)</li>
<li>樹型: Binary Tree Maximum Path Sum</li>
<li>圖型: (面試基本沒考過) NOI</li>
<li>on lintcode</li>
</ul>
</li>
</ul>
<h1 id="DP-appendix-3"><a href="#DP-appendix-3" class="headerlink" title="DP  appendix 3"></a>DP  appendix 3</h1><h2 id="1018-香檳塔"><a href="#1018-香檳塔" class="headerlink" title="1018.香檳塔"></a>1018.香檳塔</h2><ul>
<li><p>類似題: 座標型動規，有座標的info在</p>
</li>
<li><p>similar to Triangle</p>
<img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382ejyexij20uo0bujsn.jpg" alt="image-20200712201733032" style="zoom:33%;" />
</li>
<li></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggogsiqo19j30zu0isna9.jpg" alt="image-20200712203228254"></p>
<ul>
<li>空間優化，模2</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggogt1pj5uj31020iqna9.jpg" alt="image-20200712203258726"></p>
<h2 id="200-最長回文子串"><a href="#200-最長回文子串" class="headerlink" title="200.最長回文子串"></a>200.最長回文子串</h2><ul>
<li>Manacher’s 馬拉車算法， O(N)</li>
<li>背向雙針 O(Nx(2N-1))</li>
<li>動規: 區間型動規，子串、子數組</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggoh1mpbr3j30yu0a8tam.jpg" alt="image-20200712204113836"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggoh39walhj30tw0cwgnx.jpg" alt="image-20200712204248042"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggoh41ojf1j31ak0l0tlc.jpg" alt="image-20200712204333437"></p>
<ul>
<li><p>是否可用滾動優化？可</p>
</li>
<li><p>石子Stone Game合并不能滚動，因為最後還是模N</p>
</li>
</ul>
<h2 id="119-編輯距離"><a href="#119-編輯距離" class="headerlink" title="119.編輯距離"></a>119.編輯距離</h2><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggohyaoonzj30ze0j2aen.jpg" alt="image-20200712211236545" style="zoom: 50%;" />

<ul>
<li>匹配型動規</li>
<li>dp[i] [j] </li>
</ul>
<img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggohzectnqj314w09gwgk.jpg" alt="image-20200712211341183" style="zoom:67%;" />

<img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggoi0wqzwfj311w0bqq60.jpg" alt="image-20200712211508710" style="zoom:50%;" />

<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggoi5ch6tej312a0ho7an.jpg" alt="image-20200712211920952"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggoi5ub3nxj31780lq7gi.jpg" alt="image-20200712211952831"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggoi7241kbj30z80ky4c5.jpg" alt="image-20200712212103748"></p>
<img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382eo5gkpj214w0g4acx.jpg" alt="image-20200712212200733" style="zoom: 33%;" />

<ul>
<li>能滾嗎？<ul>
<li>模2可滚，初始化不能放一开始了，得一邊dp一邊初始</li>
</ul>
</li>
</ul>
<h2 id="1565-飛行棋"><a href="#1565-飛行棋" class="headerlink" title="1565.飛行棋"></a>1565.飛行棋</h2><ul>
<li>如果可以往前跳又可以往後跳，就沒有方向性了，就不能動規了</li>
<li>不會往前飛，就是不能循環依賴 ==&gt; Topological Sort 檢測圖裡有沒有循環依賴的關係</li>
</ul>
<img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h382erxt9ij20to0ewabh.jpg" alt="image-20200712213048000" style="zoom:33%;" />

<ul>
<li>座標型，1D座標動規，用傳送門還有dice跳</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggoijyw55aj30ti0aiq6i.jpg" alt="image-20200712213327557"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggoimjyqkuj30uo0han4n.jpg" alt="image-20200712213554267"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggoinaj186j30u00hewhe.jpg" alt="image-20200712213639171"></p>
</div><hr></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/54/"><i class="fa fa-chevron-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/54/">54</a><span class="page-number current">55</span><a class="page-number" href="/page/56/">56</a><span class="space">&hellip;</span><a class="page-number" href="/page/73/">73</a><a class="extend next" rel="next" href="/page/56/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2022 By Joe Huang</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>