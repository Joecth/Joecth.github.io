<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content=""><meta name="keywords" content=""><meta name="author" content="Joe Huang"><meta name="copyright" content="Joe Huang"><title>Awaken Desparado</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-180692466-1', 'auto');
ga('send', 'pageview');</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 4.1.1"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="false"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Joe Huang</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">298</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">25</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">45</span></a></div></div></div><nav class="no-bg" id="nav"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Awaken Desparado</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="site-info"><div id="site-title">Awaken Desparado</div><div id="site-sub-title"></div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2018/05/04/DevOps/2018-05-04-tmux/">DevOps/2018-05-04-tmux</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-05-04</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/DevOps/">DevOps</a></span><div class="content"><h3 id="tmux"><a href="#tmux" class="headerlink" title="tmux"></a>tmux</h3><h3 id="Concepts"><a href="#Concepts" class="headerlink" title="Concepts"></a>Concepts</h3><p>前置键: ctrl-b</p>
<p><code>C-</code> 指的是 Ctrl + 某個鍵一起按 <code>M-</code> 則是 <code>Alt</code> 或 <code>Option</code>和某個鍵一起按。</p>
<p>水平切割則是 <code>C-b &quot;</code></p>
<p>移动所在视窗使用 <code>C-b</code> 搭配方向鍵</p>
<h3 id="Main-Manipulations-within-Session"><a href="#Main-Manipulations-within-Session" class="headerlink" title="Main Manipulations within Session"></a>Main Manipulations within Session</h3><p>關閉視窗區塊只需要使用 <code>C-d</code> (注意，這不是detach，而是直接真的關了)</p>
<ul>
<li><code>C-b c</code> 建立一個新視窗</li>
<li><code>C-b p</code> 上一個視窗</li>
<li><code>C-b n</code> 下一個視窗</li>
<li><code>C-b &lt;number&gt;</code> 依照編號直接切換（編號顯示於狀態列）</li>
</ul>
<h3 id="Detach-amp-Attach"><a href="#Detach-amp-Attach" class="headerlink" title="Detach &amp; Attach"></a>Detach &amp; Attach</h3><p>如果完成工作，要 detach 只需要 <code>C-b d</code>，又或者 <code>C-b D</code> 可以選擇要從那個 <code>session</code> 離開。</p>
<ul>
<li>tmux attach -t 0</li>
</ul>
<p>賦予每個 session 一個有意義的名稱</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> tmux new -s database</span></span><br></pre></td></tr></table></figure>

<p>修改名稱</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> tmux rename-session -t 0 database</span></span><br></pre></td></tr></table></figure>

<p>之後當我們要在重新連回該 session 時，只要使用該名稱即可</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tmux attach -t database</span><br></pre></td></tr></table></figure>



<p>優點：</p>
<p>點出幾個 <code>tmux</code> 的優點：</p>
<ul>
<li>session 的保留：attach 和 detach 協助我們在不同情境和遠端連線的情況下切換。</li>
<li>跨平台：我們可以在 Mac 底下使用，也可以在 Linux 環境下使用，甚至遠端伺服器或 Raspberry Pi，BeagleBones 等等都可以使用一樣的東西。</li>
<li>客製化：我們可以去自訂 tmux 的環境設定並且可以和不同平台環境同步</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新增</span></span><br><span class="line">$ tmux</span><br><span class="line"><span class="comment"># OR</span></span><br><span class="line">$ tmux new -s &lt;your_session_name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># session 列表</span></span><br><span class="line">$ tmux ls</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新連線 session</span></span><br><span class="line">$ tmux a -t 0</span><br><span class="line"><span class="comment"># OR</span></span><br><span class="line">$ tmux a -t &lt;session_name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 刪除 session</span></span><br><span class="line">$ tmux <span class="built_in">kill</span>-session -t 0</span><br><span class="line"><span class="comment"># OR</span></span><br><span class="line">$ tmux <span class="built_in">kill</span>-session -t &lt;session_name&gt;</span><br><span class="line"><span class="comment"># OR</span></span><br><span class="line">$ tmux <span class="built_in">kill</span>-session -a <span class="comment"># 全部</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 刪除 tmux server</span></span><br><span class="line">$ tmux <span class="built_in">kill</span>-server</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新命名 session</span></span><br><span class="line">$ tmux rename-session -t 0 &lt;new_session_name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 快捷鍵/視窗管理</span></span><br><span class="line"><span class="comment"># C-b ? Help</span></span><br><span class="line"><span class="comment"># C-b c 新增視窗</span></span><br><span class="line"><span class="comment"># C-b， 視窗命名</span></span><br><span class="line"><span class="comment"># C-b w 視窗列表</span></span><br><span class="line"><span class="comment"># C-b f 尋找視窗</span></span><br><span class="line"><span class="comment"># C-b &amp; 刪除視窗</span></span><br><span class="line"><span class="comment"># C-b % 垂直分割區塊</span></span><br><span class="line"><span class="comment"># C-b “ 水平分割區塊</span></span><br><span class="line"><span class="comment"># C-b &lt;方向鍵&gt;</span></span><br><span class="line"><span class="comment"># C-b p 上一個視窗</span></span><br><span class="line"><span class="comment"># C-b n 下一個視窗</span></span><br><span class="line"><span class="comment"># C-b &lt;number&gt; 依照編號直接切換（編號顯示於狀態列）</span></span><br><span class="line"><span class="comment"># C-b d 離開 session</span></span><br><span class="line"><span class="comment"># C-b x 關閉 Pane</span></span><br><span class="line"><span class="comment"># C-d   關閉 Pane</span></span><br><span class="line"><span class="comment"># C-b z 讓一個 Pane 變成全螢幕，在輸入一次則回到剛剛的尺寸</span></span><br></pre></td></tr></table></figure>



<h3 id="參考資源"><a href="#參考資源" class="headerlink" title="參考資源:"></a>參考資源:</h3><p><a href="https://www.hamvocke.com/blog/a-quick-and-easy-guide-to-tmux/" target="_blank" rel="noopener">A Quick and Easy Guide to tmux</a></p>
<p><a href="https://andyyou.github.io/2017/11/27/tmux-notes/" target="_blank" rel="noopener">tmux 快速入門筆記</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/03/02/DevOps/2018-03-02%20MT%20Life/">DevOps/2018-03-02 MT Life</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-03-02</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/DevOps/">DevOps</a></span><div class="content"><p>ref: <a href="https://blog.csdn.net/weixin_35813749/article/details/53609014" target="_blank" rel="noopener">https://blog.csdn.net/weixin_35813749/article/details/53609014</a></p>
<p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gcfplio1rtj30go07y409.jpg" alt="这里写图片描述"></p>
<h3 id="Sleep-vs-Wait"><a href="#Sleep-vs-Wait" class="headerlink" title="Sleep() vs Wait()"></a>Sleep() vs Wait()</h3><p>接著回到「題目」，問題是這樣的：sleep() 和 wait() 有什麼區別？這題我們可以簡單這樣回答，如下：<br>第一點，「sleep()」是 Thread 的方法，而「wait()」是 Object 的方法。<br>第二點，「sleep()」在釋放「CPU 資源時」不會同時釋放「鎖」，但「wait()」會。<br>第三點，「sleep()」一定要設定「最大時間參數」，而「wait()」不用，但「sleep()」不用經「notify()」或「notifyAll()」喚醒，但「wait()」要。</p>
<h3 id="Exception-vs-Error"><a href="#Exception-vs-Error" class="headerlink" title="Exception vs Error"></a>Exception vs Error</h3><p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gcftqaw3whj318g0keq8a.jpg" alt="img"></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/02/14/C++/2018-02-14-Dynamic%20vs%20Static%20Binding/">C++/2018-02-14-Dynamic vs Static Binding</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-02-14</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/C/">C++</a></span><div class="content"><p>Ref: <a href="http://notes.maxwi.com/3516/08/19/static-dynamic-binding/" target="_blank" rel="noopener">http://notes.maxwi.com/3516/08/19/static-dynamic-binding/</a></p>
<ul>
<li>静态类型：就是对象声明时采用的类型，一旦确定就无法更改，编译期已经确定</li>
<li>动态类型：通常是指一个指针或引用在调用时所指向的类型，可以理解为赋值号右侧对象的类型（当然采用直接赋值就是括号中的对象的类型），可以在运行时更改，在运行期决定</li>
<li>静态绑定（static binding）：又名前期绑定（early binding），绑定的是对象的静态类型，发生在编译期，即程序编译完成后就已经确定</li>
<li>动态绑定（dynamic binding）：又名后期绑定（late binding），绑定的是对象的动态类型，发生在运行期，即在运行期由当前的动态类型决定所需要调用的函数或属性</li>
</ul>
<p>可以简单理解为，通常我们定义的非虚函数都是静态绑定，即静态类型与动态类型都指同一种类型，在编译期就已经确定，那么运行时调用的函数也就是相应类型对象的函数。<br>而虚函数可以发生动态绑定，即在运行时，根据指针或引用所指对象的类型来决定调用相应的虚函数。如当定义父类的指针，指向派生类的对象时，该指针的动态类型与静态类型就不一致,<br>动态类型即派生类，静态类型为父类，那么在使用此指针在运行时调用虚函数时会首先调用动态类型对象（即派生类对象）的虚函数，如果动态类型中没有重写（override）该虚函数，<br>则调用的还是基类中的虚函数。<br>举例说明：<br>所有的讲解都是注释中，请认真阅读每一句注释</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(<span class="keyword">void</span>)</span>  <span class="comment">//普通的非虚函数，只能静态绑定</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"A::func"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">vfunc1</span><span class="params">()</span>   <span class="comment">//虚函数，可以在运行时，根据动态类型不同而发生动态绑定</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"A::vfunc1"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">vfunc2</span><span class="params">(<span class="keyword">int</span> i = <span class="number">2</span>)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"A::vfunc2: "</span> &lt;&lt; i &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> :</span> <span class="keyword">public</span> A &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"B::func"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">vfunc1</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"B::vfunc1"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">vfunc2</span><span class="params">(<span class="keyword">int</span> i = <span class="number">5</span>)</span>  <span class="comment">//注意B改变了继承而来的虚函数的默认参数</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"B::vfunc2: "</span> &lt;&lt; i &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> :</span> <span class="keyword">public</span> B &#123;  <span class="comment">//注意C继承自B而不是A</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    B* pb = <span class="keyword">new</span> B();  <span class="comment">//pb的静态类型即是它声明的类型B，动态类型是它指向的类型B，即动态类型与静态类型一致</span></span><br><span class="line">    C* pc = <span class="keyword">new</span> C(); <span class="comment">//pc的静态类型与动态类型一致</span></span><br><span class="line">    A* pa = pc;   <span class="comment">//pa的静态类型是A，动态类型是C</span></span><br><span class="line">    pa = pb; <span class="comment">//将pa的动态类型改为B</span></span><br><span class="line">    B *pbnull = <span class="literal">nullptr</span>;  <span class="comment">//定义B指向空指针，它将在编译期发生静态绑定</span></span><br><span class="line">    pa-&gt;func();  <span class="comment">//A::func，虽然pa的静态类型与动态类型不一样，但func是不是虚函数，只有在通过指针或引用调用虚函数时，才会有运行时发生动态绑定，即pa优先调用其动态类型中的虚函数，所以此时pa只能调用它自己的func</span></span><br><span class="line">    pa-&gt;vfunc1(); <span class="comment">//B::vfunc1，此时pa发生了动态绑定，即调用它动态类型B的虚函数vfunc1</span></span><br><span class="line">    pb-&gt;func(); <span class="comment">//B::func，pb的func将隐藏继承自A中的函数func，所有非虚函数的调用都由静态类型决定，即编译期就已经确定了</span></span><br><span class="line">    pb-&gt;vfunc2(); <span class="comment">//B::vfunc2:5，pb正常通过静态绑定调用自己的函数vfunc2</span></span><br><span class="line">    pa-&gt;vfunc2(); <span class="comment">//B::vfunc2:2，发现pa此时动态绑定调用的是类型B的成员函数，但形参去是A自己的形参，因为C++为了执行效率，缺省参数值都是静态绑定的，所以永远不要重新定义一个继承而来的virtual函数的缺省参数值</span></span><br><span class="line">    pc-&gt;func(); <span class="comment">//B::func，pc正常的静态绑定，调用继承自B的函数func</span></span><br><span class="line">    pa = pc;  <span class="comment">//将pa的动态类型改为pc</span></span><br><span class="line">    pa-&gt;vfunc1();  <span class="comment">//B::vfunc1，此时pa实际上发生了动态绑定，被动态绑定到pc，将调用其动态类型C中的虚函数，但由于C中没有重写继承自B的虚函数，所以只能调用其父类B中的虚函数，注意不是A中的</span></span><br><span class="line">    pbnull-&gt;func();  <span class="comment">//B::func，虽然pbnull此时指向的是空指针，但其静态绑定是在编译期确定的，也就是说编译完成之后，pbnull就已经存在pbnull-&gt;func()的调用了。</span></span><br><span class="line">    <span class="comment">// pbnull-&gt;vfunc1(); //编译没有问题，但将发生运行时错误，linux下运行报错为Segmentation fault。因为在运行时发生动态绑定时，pbnull是指向空指针的，显然空指针不属于任何类型，pbnull也就无法正常绑定。之所以编译器无法检查到这类问题应该就是动态导致用户可以随时将pbnull绑定到一个其派生类的对象上</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//释放动态内存</span></span><br><span class="line">    <span class="keyword">delete</span> pb;</span><br><span class="line">    <span class="keyword">delete</span> pc;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的注释中已经讲解的非常清楚了，最后两句指向空指针的类对象也可以调用其静态绑定的函数需要特别注意，这是一种极不推荐的做法</p>
<p>注意</p>
<ul>
<li>永远不要重新定义继承而来的非虚函数，这样的函数由对象声明时的静太类型确定，没有多态性，将给程序留下不可预知的隐患</li>
<li>永远不要重新定义一个继承而来的虚函数的缺省参数值，因为缺省参数值都是静态绑定的。</li>
<li>接口基类不应该有非虚函数，即全部使用纯虚函数</li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/02/13/C++/2018-02-13-LRU/">C++/2018-02-13-LRU</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-02-13</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Data-Structures/">Data-Structures</a></span><div class="content"><p>Ref: <a href="https://zhuanlan.zhihu.com/p/34133067" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/34133067</a></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8ws3vt2ygj30k00fcdg0.jpg" alt="img"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8ws3t9yfrj30k00agt96.jpg" alt="img"></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/01/16/Python/2018-01-16-Sorting%20&amp;%20Searching%20Rearrangement/">Python/2018-01-16-Sorting &amp; Searching Rearrangement</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-01-16</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Python/">Python</a></span><div class="content"><h3 id="I-Sort"><a href="#I-Sort" class="headerlink" title="I-Sort"></a>I-Sort</h3><p>Used when playing pokers</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">arr</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, len(A)):</span><br><span class="line">  val = A[i]</span><br><span class="line">  j = i<span class="number">-1</span></span><br><span class="line">  <span class="keyword">while</span> j&gt;=<span class="number">0</span> <span class="keyword">and</span> A[j]&gt;val:</span><br><span class="line">    A[j+<span class="number">1</span>] = A[j]</span><br><span class="line">    j -= <span class="number">1</span></span><br><span class="line">  A[j+<span class="number">1</span>] = val</span><br></pre></td></tr></table></figure>

<p>O(n), O(n^2) Worst when inversed sorted.</p>
<h3 id="B-Sort"><a href="#B-Sort" class="headerlink" title="B-Sort"></a>B-Sort</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">b_sort</span><span class="params">(A=[<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>])</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(A)):</span><br><span class="line">        swapped = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>, len(A)-i<span class="number">-1</span>):</span><br><span class="line">            <span class="keyword">if</span> A[j] &gt; A[j+<span class="number">1</span>]:</span><br><span class="line">                <span class="comment"># A[j] = A[j+1]</span></span><br><span class="line">                A[j], A[j+<span class="number">1</span>] = A[j+<span class="number">1</span>], A[j]</span><br><span class="line">                swapped = <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line">        <span class="keyword">if</span> swapped == <span class="literal">False</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">b_sort() </span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">final_count = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, n):</span><br><span class="line">    round_count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>, n-i<span class="number">-1</span>):</span><br><span class="line">        <span class="keyword">if</span> a[j] &gt; a[j+<span class="number">1</span>]:</span><br><span class="line">            round_count += <span class="number">1</span></span><br><span class="line">            a[j], a[j+<span class="number">1</span>] = a[j+<span class="number">1</span>], a[j]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> round_count == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    final_count += round_count</span><br></pre></td></tr></table></figure>

<p>O(n), O(n^2) Worst when inversed sorted.</p>
<h3 id="S-Sort"><a href="#S-Sort" class="headerlink" title="S-Sort"></a>S-Sort</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(A)):</span><br><span class="line">  min_idx = i</span><br><span class="line">  <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, len(A)):</span><br><span class="line">    <span class="keyword">if</span> A[j] &lt; A[min_idx]:</span><br><span class="line">      min_idx = j</span><br><span class="line">  A[i], A[min_idx] = A[min_idx], A[i]</span><br></pre></td></tr></table></figure>

<p>O(n^2), O(n^2)</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayoeij9eoj31620h8wpf.jpg" alt="image-20200116202922983"></p>
<h3 id="H-sort-Heap-sort"><a href="#H-sort-Heap-sort" class="headerlink" title="H-sort, Heap-sort"></a>H-sort, Heap-sort</h3><h4 id="Fina-Style-fr-G4G"><a href="#Fina-Style-fr-G4G" class="headerlink" title="Fina Style, fr, G4G"></a>Fina Style, fr, G4G</h4><p><a href="https://www.youtube.com/watch?v=JSmFZMJURug" target="_blank" rel="noopener">https://www.youtube.com/watch?v=JSmFZMJURug</a></p>
<p><a href="https://www.bilibili.com/video/av18980178/" target="_blank" rel="noopener">https://www.bilibili.com/video/av18980178/</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python program for implementation of heap Sort </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># To heapify subtree rooted at index i. </span></span><br><span class="line"><span class="comment"># n is size of heap </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">heapify</span><span class="params">(arr, n, i)</span>:</span> </span><br><span class="line">    largest = i <span class="comment"># Initialize largest as root </span></span><br><span class="line">    l = <span class="number">2</span> * i + <span class="number">1</span>     <span class="comment"># left = 2*i + 1 </span></span><br><span class="line">    r = <span class="number">2</span> * i + <span class="number">2</span>     <span class="comment"># right = 2*i + 2 </span></span><br><span class="line">  </span><br><span class="line">    <span class="comment"># See if left child of root exists and is </span></span><br><span class="line">    <span class="comment"># greater than root </span></span><br><span class="line">    <span class="keyword">if</span> l &lt; n <span class="keyword">and</span> arr[i] &lt; arr[l]: </span><br><span class="line">        largest = l </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># See if right child of root exists and is </span></span><br><span class="line">    <span class="comment"># greater than root </span></span><br><span class="line">    <span class="keyword">if</span> r &lt; n <span class="keyword">and</span> arr[largest] &lt; arr[r]: </span><br><span class="line">        largest = r </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># Change root, if needed </span></span><br><span class="line">    <span class="keyword">if</span> largest != i: </span><br><span class="line">        arr[i],arr[largest] = arr[largest],arr[i] <span class="comment"># swap </span></span><br><span class="line">  </span><br><span class="line">        <span class="comment"># Heapify the root. </span></span><br><span class="line">        heapify(arr, n, largest) </span><br><span class="line">  </span><br><span class="line"><span class="comment"># The main function to sort an array of given size </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">heapSort</span><span class="params">(arr)</span>:</span> </span><br><span class="line">    n = len(arr) </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># Build a maxheap. </span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n, <span class="number">-1</span>, <span class="number">-1</span>): </span><br><span class="line">        heapify(arr, n, i) </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># One by one extract elements </span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n<span class="number">-1</span>, <span class="number">0</span>, <span class="number">-1</span>): </span><br><span class="line">        arr[i], arr[<span class="number">0</span>] = arr[<span class="number">0</span>], arr[i] <span class="comment"># swap </span></span><br><span class="line">        heapify(arr, i, <span class="number">0</span>) </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Driver code to test above </span></span><br><span class="line">arr = [ <span class="number">12</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>] </span><br><span class="line">heapSort(arr) </span><br><span class="line">n = len(arr) </span><br><span class="line"><span class="keyword">print</span> (<span class="string">"Sorted array is"</span>) </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(n): </span><br><span class="line">    <span class="keyword">print</span> (<span class="string">"%d"</span> %arr[i]), </span><br><span class="line"><span class="comment"># This code is contributed by Mohit Kumra</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayphqqjdqj311w0tkgso.jpg" alt="image-20200116210706828"></p>
<hr>
<h3 id="Heap"><a href="#Heap" class="headerlink" title="Heap"></a>Heap</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinHeap</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.heapList = [<span class="number">0</span>]</span><br><span class="line">        self.currentSize = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">percUp</span><span class="params">(self,i)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> i // <span class="number">2</span> &gt; <span class="number">0</span>:</span><br><span class="line">          <span class="keyword">if</span> self.heapList[i] &lt; self.heapList[i // <span class="number">2</span>]:</span><br><span class="line">             tmp = self.heapList[i // <span class="number">2</span>]</span><br><span class="line">             self.heapList[i // <span class="number">2</span>] = self.heapList[i]</span><br><span class="line">             self.heapList[i] = tmp</span><br><span class="line">          i = i // <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">insert</span><span class="params">(self,k)</span>:</span></span><br><span class="line">      self.heapList.append(k)</span><br><span class="line">      self.currentSize = self.currentSize + <span class="number">1</span></span><br><span class="line">      self.percUp(self.currentSize)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">percDown</span><span class="params">(self,i)</span>:</span></span><br><span class="line">      <span class="keyword">while</span> (i * <span class="number">2</span>) &lt;= self.currentSize:</span><br><span class="line">          mc = self.minChild(i)</span><br><span class="line">          <span class="keyword">if</span> self.heapList[i] &gt; self.heapList[mc]:</span><br><span class="line">              tmp = self.heapList[i]</span><br><span class="line">              self.heapList[i] = self.heapList[mc]</span><br><span class="line">              self.heapList[mc] = tmp</span><br><span class="line">          i = mc</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minChild</span><span class="params">(self,i)</span>:</span></span><br><span class="line">      <span class="keyword">if</span> i * <span class="number">2</span> + <span class="number">1</span> &gt; self.currentSize:</span><br><span class="line">          <span class="keyword">return</span> i * <span class="number">2</span></span><br><span class="line">      <span class="keyword">else</span>:</span><br><span class="line">          <span class="keyword">if</span> self.heapList[i*<span class="number">2</span>] &lt; self.heapList[i*<span class="number">2</span>+<span class="number">1</span>]:</span><br><span class="line">              <span class="keyword">return</span> i * <span class="number">2</span></span><br><span class="line">          <span class="keyword">else</span>:</span><br><span class="line">              <span class="keyword">return</span> i * <span class="number">2</span> + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">delMin</span><span class="params">(self)</span>:</span></span><br><span class="line">      retval = self.heapList[<span class="number">1</span>]</span><br><span class="line">      self.heapList[<span class="number">1</span>] = self.heapList[self.currentSize]</span><br><span class="line">      self.currentSize = self.currentSize - <span class="number">1</span></span><br><span class="line">      self.heapList.pop()</span><br><span class="line">      self.percDown(<span class="number">1</span>)</span><br><span class="line">      <span class="keyword">return</span> retval</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">buildHeap</span><span class="params">(self,alist)</span>:</span></span><br><span class="line">      i = len(alist) // <span class="number">2</span></span><br><span class="line">      self.currentSize = len(alist)</span><br><span class="line">      self.heapList = [<span class="number">0</span>] + alist[:]</span><br><span class="line">      <span class="keyword">while</span> (i &gt; <span class="number">0</span>):</span><br><span class="line">          self.percDown(i)</span><br><span class="line">          i = i - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">bh = BinHeap()</span><br><span class="line">bh.buildHeap([<span class="number">9</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line">print(bh.delMin())</span><br><span class="line">print(bh.delMin())</span><br><span class="line">print(bh.delMin())</span><br><span class="line">print(bh.delMin())</span><br><span class="line">print(bh.delMin())</span><br></pre></td></tr></table></figure>

<p>copied fr: <a href="https://runestone.academy/runestone/books/published/pythonds/Trees/BinaryHeapImplementation.html" target="_blank" rel="noopener">https://runestone.academy/runestone/books/published/pythonds/Trees/BinaryHeapImplementation.html</a></p>
<p>Also, </p>
<ol>
<li><a href="https://alrightchiu.github.io/SecondRound/comparison-sort-heap-sortdui-ji-pai-xu-fa.html" target="_blank" rel="noopener">https://alrightchiu.github.io/SecondRound/comparison-sort-heap-sortdui-ji-pai-xu-fa.html</a></li>
<li><a href="https://blog.csdn.net/lighthear/article/details/79945528" target="_blank" rel="noopener">https://blog.csdn.net/lighthear/article/details/79945528</a></li>
</ol>
<h3 id="Priority-Queu"><a href="#Priority-Queu" class="headerlink" title="Priority Queu"></a>Priority Queu</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Abstract &amp; Encapsulate</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PriorityQueue</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, cmp = lambda x, y: x &gt; y)</span>:</span></span><br><span class="line">        self.container = []</span><br><span class="line">        self.getKey = functools.cmp_to_key(</span><br><span class="line">            <span class="keyword">lambda</span> x, y: <span class="number">-1</span> <span class="keyword">if</span> cmp(x, y) <span class="keyword">else</span> <span class="number">1</span> <span class="keyword">if</span> cmp(y, x) <span class="keyword">else</span> <span class="number">0</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">push</span><span class="params">(self, item)</span>:</span></span><br><span class="line">        heapq.heappush(self.container, (self.getKey(item), item))</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pop</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> heapq.heappop(self.container)[<span class="number">1</span>]</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># 使用样例 1</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------------------------</span></span><br><span class="line">pq = PriorityQueue()</span><br><span class="line"> </span><br><span class="line">pq.push(<span class="number">1</span>)</span><br><span class="line">pq.push(<span class="number">2</span>)</span><br><span class="line">pq.push(<span class="number">3</span>)</span><br><span class="line"> </span><br><span class="line">print(pq.pop())</span><br><span class="line">print(pq.pop())</span><br><span class="line">print(pq.pop())</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># 使用样例 2</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------------------------</span></span><br><span class="line">pq = PriorityQueue(<span class="keyword">lambda</span> x, y: x[<span class="number">0</span>] &lt; y[<span class="number">0</span>])</span><br><span class="line"> </span><br><span class="line">pq.push((<span class="number">4</span>, <span class="number">3</span>))</span><br><span class="line">pq.push((<span class="number">3</span>, <span class="number">2</span>))</span><br><span class="line">pq.push((<span class="number">2</span>, <span class="number">1</span>))</span><br><span class="line"> </span><br><span class="line">print(pq.pop())</span><br><span class="line">print(pq.pop())</span><br><span class="line">print(pq.pop())</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line"><span class="comment"># (2, 1)</span></span><br><span class="line"><span class="comment"># (3, 2)</span></span><br><span class="line"><span class="comment"># (4, 3)</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># 使用样例 3</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------------------------</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x, y, z)</span>:</span></span><br><span class="line">        self.x = x</span><br><span class="line">        self.y = y</span><br><span class="line">        self.z = z</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> str(self.__dict__)</span><br><span class="line"> </span><br><span class="line">pq = PriorityQueue(<span class="keyword">lambda</span> l, r: l.y &gt; r.y <span class="keyword">if</span> l.x == r.x <span class="keyword">else</span> l.x &lt; r.x)</span><br><span class="line"> </span><br><span class="line">pq.push(Point(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line">pq.push(Point(<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>))</span><br><span class="line">pq.push(Point(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>))</span><br><span class="line"> </span><br><span class="line">print(pq.pop())</span><br><span class="line">print(pq.pop())</span><br><span class="line">print(pq.pop())</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line"><span class="comment"># &#123;'x': 1, 'y': 2, 'z': 3&#125;</span></span><br><span class="line"><span class="comment"># &#123;'x': 4, 'y': 5, 'z': 6&#125;</span></span><br><span class="line"><span class="comment"># &#123;'x': 4, 'y': 3, 'z': 2&#125;</span></span><br></pre></td></tr></table></figure>



<h3 id="Q-Sort"><a href="#Q-Sort" class="headerlink" title="Q-Sort"></a>Q-Sort</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This function takes last element as pivot, places </span></span><br><span class="line"><span class="comment"># the pivot element at its correct position in sorted </span></span><br><span class="line"><span class="comment"># array, and places all smaller (smaller than pivot) </span></span><br><span class="line"><span class="comment"># to left of pivot and all greater elements to right </span></span><br><span class="line"><span class="comment"># of pivot </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">partition</span><span class="params">(arr,low,high)</span>:</span> </span><br><span class="line">    i = ( low<span class="number">-1</span> )         <span class="comment"># index of smaller element </span></span><br><span class="line">    pivot = arr[high]     <span class="comment"># pivot </span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(low , high): </span><br><span class="line">  </span><br><span class="line">        <span class="comment"># If current element is smaller than or </span></span><br><span class="line">        <span class="comment"># equal to pivot </span></span><br><span class="line">        <span class="keyword">if</span>   arr[j] &lt;= pivot: </span><br><span class="line">          </span><br><span class="line">            <span class="comment"># increment index of smaller element </span></span><br><span class="line">            i = i+<span class="number">1</span> </span><br><span class="line">            arr[i],arr[j] = arr[j],arr[i] </span><br><span class="line">  </span><br><span class="line">    arr[i+<span class="number">1</span>],arr[high] = arr[high],arr[i+<span class="number">1</span>] </span><br><span class="line">    <span class="keyword">return</span> ( i+<span class="number">1</span> ) </span><br><span class="line">  </span><br><span class="line"><span class="comment"># The main function that implements QuickSort </span></span><br><span class="line"><span class="comment"># arr[] --&gt; Array to be sorted, </span></span><br><span class="line"><span class="comment"># low  --&gt; Starting index, </span></span><br><span class="line"><span class="comment"># high  --&gt; Ending index </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># Function to do Quick sort </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">quickSort</span><span class="params">(arr,low,high)</span>:</span> </span><br><span class="line">    <span class="keyword">if</span> low &lt; high: </span><br><span class="line">  </span><br><span class="line">        <span class="comment"># pi is partitioning index, arr[p] is now </span></span><br><span class="line">        <span class="comment"># at right place </span></span><br><span class="line">        pi = partition(arr,low,high) </span><br><span class="line">  </span><br><span class="line">        <span class="comment"># Separately sort elements before </span></span><br><span class="line">        <span class="comment"># partition and after partition </span></span><br><span class="line">        quickSort(arr, low, pi<span class="number">-1</span>) </span><br><span class="line">        quickSort(arr, pi+<span class="number">1</span>, high)</span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">data = [<span class="number">89</span>, <span class="number">34</span>, <span class="number">23</span>, <span class="number">78</span>, <span class="number">67</span>, <span class="number">100</span>, <span class="number">66</span>, <span class="number">29</span>, <span class="number">79</span>, <span class="number">55</span>, <span class="number">78</span>, <span class="number">88</span>, <span class="number">92</span>, <span class="number">96</span>, <span class="number">96</span>, <span class="number">23</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">quicksort</span><span class="params">(data, left, right)</span>:</span> <span class="comment"># 輸入資料，和從兩邊開始的位置</span></span><br><span class="line">    <span class="keyword">if</span> left &gt;= right :            <span class="comment"># 如果左邊大於右邊，就跳出function</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    i = left                      <span class="comment"># 左邊的代理人</span></span><br><span class="line">    j = right                     <span class="comment"># 右邊的代理人</span></span><br><span class="line">    key = data[left]                 <span class="comment"># 基準點</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> i != j:                  </span><br><span class="line">        <span class="keyword">while</span> data[j] &gt; key <span class="keyword">and</span> i &lt; j:   <span class="comment"># 從右邊開始找，找比基準點小的值</span></span><br><span class="line">            j -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> data[i] &lt;= key <span class="keyword">and</span> i &lt; j:  <span class="comment"># 從左邊開始找，找比基準點大的值</span></span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> i &lt; j:                        <span class="comment"># 當左右代理人沒有相遇時，互換值</span></span><br><span class="line">            data[i], data[j] = data[j], data[i] </span><br><span class="line"></span><br><span class="line">    <span class="comment"># 將基準點歸換至代理人相遇點</span></span><br><span class="line">    data[left] = data[i] </span><br><span class="line">    data[i] = key</span><br><span class="line"></span><br><span class="line">    quicksort(data, left, i<span class="number">-1</span>)   <span class="comment"># 繼續處理較小部分的子循環</span></span><br><span class="line">    quicksort(data, i+<span class="number">1</span>, right)  <span class="comment"># 繼續處理較大部分的子循環</span></span><br><span class="line"></span><br><span class="line">quicksort(data, <span class="number">0</span>, len(data)<span class="number">-1</span>)</span><br><span class="line">print(data)</span><br></pre></td></tr></table></figure>



<h4 id="Final-Style-Small-to-Large"><a href="#Final-Style-Small-to-Large" class="headerlink" title="Final Style: Small to Large"></a>Final Style: Small to Large</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Q_Sort</span><span class="params">(self, nums, left, right)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> left &gt; right:</span><br><span class="line">        <span class="keyword">return</span> </span><br><span class="line">        </span><br><span class="line">    pivot = nums[left]</span><br><span class="line">    i, j = left, right</span><br><span class="line">    <span class="keyword">while</span> i &lt;= j:</span><br><span class="line">        <span class="keyword">while</span> i &lt;= j <span class="keyword">and</span> nums[i] &lt; pivot:</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> i &lt;= j <span class="keyword">and</span> nums[j] &gt; pivot:</span><br><span class="line">            j -= <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> i &lt;= j:</span><br><span class="line">            nums[i], nums[j] = nums[j], nums[i]</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">            j -= <span class="number">1</span></span><br><span class="line">    <span class="comment"># print(i, j)</span></span><br><span class="line">    self.Q_Sort(nums, left, j)</span><br><span class="line">    self.Q_Sort(nums, i, right)</span><br></pre></td></tr></table></figure>



<h3 id="Q-Select"><a href="#Q-Select" class="headerlink" title="Q-Select"></a>Q-Select</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">kClosest</span><span class="params">(self, points: <span class="string">'List[List[int]]'</span>, K: <span class="string">'int'</span>)</span> -&gt; 'List[List[int]]':</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Time complexity : O(N)</span></span><br><span class="line">        <span class="comment"># Space complexity : O(1)</span></span><br><span class="line">        </span><br><span class="line">        dist = <span class="keyword">lambda</span> x : points[x][<span class="number">0</span>]**<span class="number">2</span> + points[x][<span class="number">1</span>]**<span class="number">2</span></span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">quickselect</span><span class="params">(l, r, K)</span>:</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">while</span> l &lt; r :</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># To avoid the worst case</span></span><br><span class="line">                i = random.randint(l, r)</span><br><span class="line">                points[i], points[l] = points[l], points[i]</span><br><span class="line">                </span><br><span class="line">                mid = partition(l, r)</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> K &gt; mid :</span><br><span class="line">                    l = mid+<span class="number">1</span></span><br><span class="line">                <span class="keyword">elif</span> K &lt; mid :</span><br><span class="line">                    r = mid<span class="number">-1</span></span><br><span class="line">                <span class="keyword">else</span> :</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">            </span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">partition</span><span class="params">(l, r)</span>:</span></span><br><span class="line">            </span><br><span class="line">            i = l <span class="comment"># start index</span></span><br><span class="line">            pivot = dist(i)</span><br><span class="line">            </span><br><span class="line">            l += <span class="number">1</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">while</span> <span class="literal">True</span> :</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">while</span> l&lt;r <span class="keyword">and</span> dist(l)&lt;pivot:</span><br><span class="line">                    l+=<span class="number">1</span></span><br><span class="line">                    </span><br><span class="line">                <span class="keyword">while</span> l&lt;=r <span class="keyword">and</span> dist(r)&gt;=pivot:</span><br><span class="line">                    r-=<span class="number">1</span></span><br><span class="line">                    </span><br><span class="line">                <span class="keyword">if</span> l&gt;=r:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                </span><br><span class="line">                points[l], points[r] = points[r], points[l]</span><br><span class="line">                </span><br><span class="line">            points[r], points[i] = points[i], points[r]</span><br><span class="line">            <span class="keyword">return</span> r</span><br><span class="line">            </span><br><span class="line">        quickselect(<span class="number">0</span>, len(points)<span class="number">-1</span>, K)</span><br><span class="line">        <span class="keyword">return</span> points[:K]</span><br></pre></td></tr></table></figure>

<p>The worst-case time taken by a randomized quick-select is not O(n). It is O(n^2).<br>{The worst case is when you want to select the minimum element and your pivot at every stage happens to be the last element in the list at that stage.Comment if you didn’t get this.}</p>
<p>However the expected time taken by a randomized quick-select is O(n).<br>I hope you understand the difference.</p>
<p>4.7k views · <a href="https://www.quora.com/How-is-time-taken-by-a-randomized-quick-select-algorithm-in-O-n#" target="_blank" rel="noopener">View Upvoters</a></p>
<h4 id="Q-Select-Recursive-K-largest"><a href="#Q-Select-Recursive-K-largest" class="headerlink" title="Q-Select Recursive, K largest"></a>Q-Select Recursive, K largest</h4><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggis7t29ubj30q00e03zo.jpg" alt="image-20200707211441434"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggis76piakj30ni0kygrn.jpg" alt="image-20200707223346040"></p>
<h5 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">kthLargestElement</span><span class="params">(self, n, nums)</span>:</span></span><br><span class="line">    <span class="comment"># write your code here</span></span><br><span class="line">    <span class="keyword">return</span> self.Q_select(nums, <span class="number">0</span>, len(nums)<span class="number">-1</span>, n)</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Q_select</span><span class="params">(self, nums, left, right, k)</span>:</span></span><br><span class="line">    pivot = nums[left]</span><br><span class="line">    i, j = left, right</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> i &lt;= j:    </span><br><span class="line">        <span class="keyword">while</span> i &lt;= j <span class="keyword">and</span> nums[i] &gt; pivot:</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> i &lt;= j <span class="keyword">and</span> nums[j] &lt; pivot:</span><br><span class="line">            j -= <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> i &lt;= j:</span><br><span class="line">            tmp = nums[i]</span><br><span class="line">            nums[i] = nums[j]</span><br><span class="line">            nums[j] = tmp</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">            j -= <span class="number">1</span></span><br><span class="line">    <span class="comment"># print(nums)</span></span><br><span class="line">    <span class="comment"># if k &lt;= j:</span></span><br><span class="line">    <span class="keyword">if</span> left + k - <span class="number">1</span> &lt;= j:</span><br><span class="line">        <span class="keyword">return</span> self.Q_select(nums, left, j, k)</span><br><span class="line">    <span class="comment"># if k &gt;= i:</span></span><br><span class="line">    <span class="keyword">if</span> left + k - <span class="number">1</span> &gt;= i:</span><br><span class="line">        <span class="keyword">return</span> self.Q_select(nums, i, right, k-(i-left))</span><br><span class="line">    <span class="keyword">return</span> nums[j+<span class="number">1</span>]</span><br></pre></td></tr></table></figure>



<h4 id="Median"><a href="#Median" class="headerlink" title="Median"></a>Median</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    @param nums: A list of integers</span></span><br><span class="line"><span class="string">    @return: An integer denotes the middle number of the array</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">median</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="comment"># write your code here</span></span><br><span class="line">        n = len(nums)</span><br><span class="line">        k = <span class="number">0</span></span><br><span class="line">        <span class="comment"># if n % 2 == 1:</span></span><br><span class="line">        <span class="comment">#     k = n//2 + 1</span></span><br><span class="line">        <span class="comment"># else:</span></span><br><span class="line">        <span class="comment">#     k = n//2 + 1</span></span><br><span class="line">        k = n//<span class="number">2</span> + <span class="number">1</span>    <span class="comment"># Since I make it in DECENDING order</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> self.Q_select(nums, <span class="number">0</span>, n<span class="number">-1</span>, k)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Q_select</span><span class="params">(self, nums, left, right, k)</span>:</span></span><br><span class="line">        pivot = nums[left]</span><br><span class="line">        i, j = left, right</span><br><span class="line">        <span class="keyword">while</span> i &lt;= j:</span><br><span class="line">            <span class="keyword">while</span> i &lt;= j <span class="keyword">and</span> nums[i] &gt; pivot:</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> j &lt;= j <span class="keyword">and</span> nums[j] &lt; pivot:</span><br><span class="line">                j -= <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> i &lt;= j:</span><br><span class="line">                nums[i], nums[j] = nums[j], nums[i]</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">                j -= <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        offset_id = left + k - <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> offset_id &lt;= j:</span><br><span class="line">            <span class="keyword">return</span> self.Q_select(nums, left, j, k)</span><br><span class="line">        <span class="keyword">if</span> offset_id &gt;= i:</span><br><span class="line">            <span class="keyword">return</span> self.Q_select(nums, i, right, k-(i-left))</span><br><span class="line">        <span class="keyword">return</span> nums[j+<span class="number">1</span>]</span><br></pre></td></tr></table></figure>







<h3 id="M-Sort"><a href="#M-Sort" class="headerlink" title="M-Sort"></a>M-Sort</h3><p>Nxlg(N), where lg(N) is height</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python program for implementation of MergeSort </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mergeSort</span><span class="params">(arr)</span>:</span> </span><br><span class="line">    <span class="keyword">if</span> len(arr) &gt;<span class="number">1</span>: </span><br><span class="line">        mid = len(arr)//<span class="number">2</span> <span class="comment">#Finding the mid of the array </span></span><br><span class="line">        L = arr[:mid] <span class="comment"># Dividing the array elements  </span></span><br><span class="line">        R = arr[mid:] <span class="comment"># into 2 halves </span></span><br><span class="line">  </span><br><span class="line">        mergeSort(L) <span class="comment"># Sorting the first half </span></span><br><span class="line">        mergeSort(R) <span class="comment"># Sorting the second half </span></span><br><span class="line">  </span><br><span class="line">        i = j = k = <span class="number">0</span></span><br><span class="line">          </span><br><span class="line">        <span class="comment"># Copy data to temp arrays L[] and R[] </span></span><br><span class="line">        <span class="keyword">while</span> i &lt; len(L) <span class="keyword">and</span> j &lt; len(R): </span><br><span class="line">            <span class="keyword">if</span> L[i] &lt; R[j]: </span><br><span class="line">                arr[k] = L[i] </span><br><span class="line">                i+=<span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>: </span><br><span class="line">                arr[k] = R[j] </span><br><span class="line">                j+=<span class="number">1</span></span><br><span class="line">            k+=<span class="number">1</span></span><br><span class="line">          </span><br><span class="line">        <span class="comment"># Checking if any element was left </span></span><br><span class="line">        <span class="keyword">while</span> i &lt; len(L): </span><br><span class="line">            arr[k] = L[i] </span><br><span class="line">            i+=<span class="number">1</span></span><br><span class="line">            k+=<span class="number">1</span></span><br><span class="line">          </span><br><span class="line">        <span class="keyword">while</span> j &lt; len(R): </span><br><span class="line">            arr[k] = R[j] </span><br><span class="line">            j+=<span class="number">1</span></span><br><span class="line">            k+=<span class="number">1</span></span><br></pre></td></tr></table></figure>



<h4 id="Final-Style-more-record-of-mine-on-464"><a href="#Final-Style-more-record-of-mine-on-464" class="headerlink" title="Final Style, more record of mine on 464"></a>Final Style, more record of mine on 464</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">    <span class="string">""" M Sort """</span></span><br><span class="line">    temp = [<span class="number">0</span>] * len(A)</span><br><span class="line">    self.M_Sort(A, <span class="number">0</span>, len(A)<span class="number">-1</span>, temp)</span><br><span class="line">    <span class="keyword">return</span> A</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">M_Sort</span><span class="params">(self, nums, left, right, temp)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> left &gt;= right:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    mid = left + (right - left)//<span class="number">2</span></span><br><span class="line">    self.M_Sort(nums, left, mid, temp)</span><br><span class="line">    self.M_Sort(nums, mid+<span class="number">1</span>, right, temp)</span><br><span class="line">    </span><br><span class="line">    i, j = left, mid+<span class="number">1</span></span><br><span class="line">    <span class="comment"># k = 0</span></span><br><span class="line">    k = left    <span class="comment"># CRITICAL</span></span><br><span class="line">    <span class="keyword">while</span> i &lt;= mid <span class="keyword">and</span> j &lt;= right:</span><br><span class="line">        <span class="keyword">if</span> nums[i] &lt;= nums[j]:</span><br><span class="line">            temp[k] = nums[i]</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            temp[k] = nums[j]</span><br><span class="line">            j += <span class="number">1</span></span><br><span class="line">        k += <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> i &lt;= mid:</span><br><span class="line">        temp[k] = nums[i]</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">        k += <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> j &lt;= right:</span><br><span class="line">        temp[k] = nums[j]</span><br><span class="line">        j += <span class="number">1</span></span><br><span class="line">        k += <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> idx <span class="keyword">in</span> range(left, right+<span class="number">1</span>):</span><br><span class="line">        nums[idx] = temp[idx]</span><br></pre></td></tr></table></figure>



<h4 id="Reverse-Pairs"><a href="#Reverse-Pairs" class="headerlink" title="Reverse Pairs"></a>Reverse Pairs</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">reversePairs</span><span class="params">(self, A)</span>:</span></span><br><span class="line">    <span class="comment"># Write your code here</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> A:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    temp = [<span class="number">0</span>] * len(A)</span><br><span class="line">    <span class="keyword">return</span> self.M_Sort(A, <span class="number">0</span>, len(A)<span class="number">-1</span>, temp)</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">M_Sort</span><span class="params">(self, nums, left, right, temp)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> left &gt;= right:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">    mid = left + (right - left)//<span class="number">2</span></span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    count += self.M_Sort(nums, left, mid, temp)</span><br><span class="line">    count += self.M_Sort(nums, mid+<span class="number">1</span>, right, temp)</span><br><span class="line">    </span><br><span class="line">    i, j = left, mid + <span class="number">1</span></span><br><span class="line">    k = left</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> i &lt;= mid <span class="keyword">and</span> j &lt;= right:</span><br><span class="line">        <span class="keyword">if</span> nums[i] &lt;= nums[j]:</span><br><span class="line">        <span class="comment"># if nums[i] &lt; nums[j]:</span></span><br><span class="line">            temp[k] = nums[i]</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            temp[k] = nums[j]</span><br><span class="line">            j += <span class="number">1</span></span><br><span class="line">            count += mid + <span class="number">1</span> - i</span><br><span class="line">        k += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">while</span> i &lt;= mid:</span><br><span class="line">        temp[k] = nums[i]</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">        k += <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> j &lt;= right:</span><br><span class="line">        temp[k] = nums[j]</span><br><span class="line">        j += <span class="number">1</span></span><br><span class="line">        k += <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(left, right+<span class="number">1</span>):</span><br><span class="line">        nums[i] = temp[i]    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> count</span><br></pre></td></tr></table></figure>



<h3 id="Cyclic-Sort"><a href="#Cyclic-Sort" class="headerlink" title="Cyclic-Sort"></a>Cyclic-Sort</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">firstMissingPositive</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> nums:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        <span class="comment"># return self.BF(nums)</span></span><br><span class="line">        <span class="comment"># return self.helper_FAILED(nums)   # FAILED w/ N space</span></span><br><span class="line">        <span class="keyword">return</span> self.helper_cyclic_sort(nums)    <span class="comment"># STILL BUGGY, fixed.... &gt;&lt;</span></span><br><span class="line">        <span class="keyword">return</span> self.O_1_Hashing(nums)</span><br><span class="line">        <span class="keyword">return</span> self.sol_magic(nums)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sol_magic</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        nums.append(<span class="number">0</span>)</span><br><span class="line">        n = len(nums)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)): <span class="comment">#delete those useless elements</span></span><br><span class="line">            <span class="keyword">if</span> nums[i]&lt;<span class="number">0</span> <span class="keyword">or</span> nums[i]&gt;=n:</span><br><span class="line">                nums[i]=<span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)): <span class="comment">#use the index as the hash to record the frequency of each number</span></span><br><span class="line">            nums[nums[i]%n]+=n</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,len(nums)):</span><br><span class="line">            <span class="keyword">if</span> nums[i]/n==<span class="number">0</span>:</span><br><span class="line">                <span class="keyword">return</span> i</span><br><span class="line">        <span class="keyword">return</span> n</span><br><span class="line">      <span class="comment"># re: https://leetcode.com/problems/first-missing-positive/discuss/17080/Python-O(1)-space-O(n)-time-solution-with-explanation</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">helper_cyclic_sort</span><span class="params">(self, nums)</span>:</span>  <span class="comment"># 原地一直换直到找到自己</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        1 2 0 </span></span><br><span class="line"><span class="string">            i = 0: 2 1 0 =&gt; 0 1 2, j=0</span></span><br><span class="line"><span class="string">            i = 1: 0 1 2, j=1</span></span><br><span class="line"><span class="string">            i = 2: 0 1 2, j=2</span></span><br><span class="line"><span class="string">                        return j + 1 == 3</span></span><br><span class="line"><span class="string">            </span></span><br><span class="line"><span class="string">        3 4 -1 1 </span></span><br><span class="line"><span class="string">            i = 0: 1 4 -1 3 =&gt; 4 1 -1 3 ==&gt; OOR, j stand still</span></span><br><span class="line"><span class="string">            i = 1: 4 1 -1 3, j=1</span></span><br><span class="line"><span class="string">            i = 2: 4 1 -1 3, j stand still</span></span><br><span class="line"><span class="string">            i = 3: 4 1 -1 3            </span></span><br><span class="line"><span class="string">                        ==&gt; X! nums[] == -1, return 2  </span></span><br><span class="line"><span class="string">                        return j + 1 == 2</span></span><br><span class="line"><span class="string">                    </span></span><br><span class="line"><span class="string">        7 8 9 11 12 </span></span><br><span class="line"><span class="string">            i = 0: 7 8 9 11 12 =&gt; OOR, so, j stand still</span></span><br><span class="line"><span class="string">            i = 1: 7 8 9 11 12 =&gt; OOR, so, j stand still</span></span><br><span class="line"><span class="string">            i = 2: 7 8 9 11 12 =&gt; OOR, so, j stand still</span></span><br><span class="line"><span class="string">            i = 3: 7 8 9 11 12 =&gt; OOR, so, j stand still</span></span><br><span class="line"><span class="string">            i = 4: 7 8 9 11 12 =&gt; OOR, so, j stand still</span></span><br><span class="line"><span class="string">                        return j + 1 == 1</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        n = len(nums)</span><br><span class="line">        j = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n):</span><br><span class="line">            <span class="keyword">if</span> nums[i] &lt; <span class="number">0</span> <span class="keyword">or</span> nums[i] &gt; n:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            end = nums[i]<span class="number">-1</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># while nums[i] != nums[end]: #==&gt; TLE</span></span><br><span class="line">            <span class="keyword">while</span> nums[i] &gt; <span class="number">0</span> <span class="keyword">and</span> nums[i] &lt;= n <span class="keyword">and</span> nums[i] != nums[end]:</span><br><span class="line">                <span class="comment"># swap(nums, to, i)</span></span><br><span class="line">                nums[end], nums[i] = nums[i], nums[end]</span><br><span class="line">                end = nums[i] - <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">if</span> nums[i] != i+<span class="number">1</span>:</span><br><span class="line">                <span class="keyword">return</span> i+<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> n+<span class="number">1</span></span><br><span class="line"><span class="comment">#             while i != nums[i-1]:</span></span><br><span class="line"><span class="comment">#                 pos = nums[i-1]</span></span><br><span class="line"><span class="comment">#                 nums[i-1], nums[pos] = nums[pos], nums[i-1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#             # if i == nums[i-1]:</span></span><br><span class="line"><span class="comment">#             #     nums[i-1] = -1</span></span><br><span class="line"><span class="comment">#         i = 0</span></span><br><span class="line"><span class="comment">#         for i in range(0, n):</span></span><br><span class="line"><span class="comment">#             # if i != nums[i-1]:</span></span><br><span class="line"><span class="comment">#             if i+1 != nums[i]:</span></span><br><span class="line"><span class="comment">#                 return i+1 # if nums[i] != 1 else 2</span></span><br><span class="line"><span class="comment">#         return i + 1 if len(nums) &gt; 1 else 2</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">O_1_Hashing</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        3,4,-1,1    2</span></span><br><span class="line"><span class="string">        1,-1,3,4</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        f==hash : "nums[i]"" ==&gt; should be at pos of "nums[i]-1"</span></span><br><span class="line"><span class="string">                    1               0</span></span><br><span class="line"><span class="string">                    3               2</span></span><br><span class="line"><span class="string">                    4               3</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        n = len(nums)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="comment"># idx = nums[i]-1  BUGGY!!! INFINITE LOOP</span></span><br><span class="line">            <span class="comment"># while nums[i] &gt; 0 and nums[i] &lt;= n and nums[i] != nums[idx]:</span></span><br><span class="line">            <span class="keyword">while</span> nums[i] &gt; <span class="number">0</span> <span class="keyword">and</span> nums[i] &lt;= n <span class="keyword">and</span> nums[i] != nums[nums[i]<span class="number">-1</span>]:            </span><br><span class="line">                <span class="comment"># print(nums)</span></span><br><span class="line">                self.swap(nums, nums[i]<span class="number">-1</span>, i) <span class="comment"># stores nums[i] to nums[idx]</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">if</span> nums[i] != i+<span class="number">1</span>:  <span class="comment"># 3 should be at pos 2</span></span><br><span class="line">                <span class="keyword">return</span> i+<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> n+<span class="number">1</span>  <span class="comment"># also satisfy []</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">swap</span><span class="params">(self, nums, to, fr)</span>:</span></span><br><span class="line">        nums[to], nums[fr] = nums[fr], nums[to]</span><br><span class="line">    </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">helper_FAILED</span><span class="params">(self, nums)</span>:</span>  <span class="comment"># FAILED w/ N space</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        1 2 0 =&gt; 2 1 0 memo[2] =&gt; 2 1 0 memo[2]</span></span><br><span class="line"><span class="string">              =&gt; 0 1 2 memo[2]</span></span><br><span class="line"><span class="string">              =&gt; since 2 in memo, thus return i+1 == 3</span></span><br><span class="line"><span class="string">                        </span></span><br><span class="line"><span class="string">        3 4 -1 1 ==&gt; 1 4 -1 3 memo [1]</span></span><br><span class="line"><span class="string">                 ==&gt; when i == 1, notice 4 OOR</span></span><br><span class="line"><span class="string">                 ==&gt; check 1 in memo (start fr cur i)</span></span><br><span class="line"><span class="string">                 ==&gt; check 2 not in memo</span></span><br><span class="line"><span class="string">                                ==&gt; return 2</span></span><br><span class="line"><span class="string">                    </span></span><br><span class="line"><span class="string">        7 8 9 11 12 </span></span><br><span class="line"><span class="string">                ==&gt; when i == 0, notcie 7 OOR</span></span><br><span class="line"><span class="string">                ==&gt; check 0 not in memo (start fr cur i)</span></span><br><span class="line"><span class="string">                    is 0 valiid? No!</span></span><br><span class="line"><span class="string">                ==&gt; check 1 not in memo</span></span><br><span class="line"><span class="string">                                ==&gt; return 1</span></span><br><span class="line"><span class="string">                WRONG!</span></span><br><span class="line"><span class="string">                FAILED if 7 8 9 1 12</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        memo = set(nums)    <span class="comment"># ==&gt; O(N) space for checking!</span></span><br><span class="line">        n = len(nums)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">            <span class="keyword">if</span> nums[i] != i:</span><br><span class="line">                <span class="keyword">if</span> nums[i] &lt; n:</span><br><span class="line">                    nums[i], nums[nums[i]] = nums[nums[i]], nums[i]</span><br><span class="line">                    memo.add(nums[i])</span><br><span class="line">                <span class="keyword">else</span>:   <span class="comment"># OOR</span></span><br><span class="line">                    j = i</span><br><span class="line">                    <span class="comment"># if j in memo:</span></span><br><span class="line">                    <span class="comment">#     j += 1</span></span><br><span class="line">                    <span class="keyword">while</span> j <span class="keyword">in</span> memo:</span><br><span class="line">                        j += <span class="number">1</span></span><br><span class="line">                    <span class="keyword">return</span> j+<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> nums[i] + <span class="number">1</span></span><br><span class="line">                    </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">BF</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        nums.sort()     <span class="comment"># NxLog(N)</span></span><br><span class="line">        max_ = nums[<span class="number">-1</span>]</span><br><span class="line">        prev = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> n <span class="keyword">in</span> nums:</span><br><span class="line">            <span class="keyword">if</span> n &lt;= <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">if</span> n - prev &gt; <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">return</span> prev + <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                prev = n</span><br><span class="line">        <span class="keyword">return</span> prev+<span class="number">1</span></span><br></pre></td></tr></table></figure>



<h3 id="Rehash"><a href="#Rehash" class="headerlink" title="Rehash"></a>Rehash</h3><blockquote>
<p>1)<img src="https://tva1.sinaimg.cn/large/00831rSTgy1gcsoq9faroj30z80kadlq.jpg" alt="img"></p>
</blockquote>
<p>fr: <a href="https://blog.csdn.net/dalong3976/article/details/83934609" target="_blank" rel="noopener">https://blog.csdn.net/dalong3976/article/details/83934609</a></p>
<blockquote>
<p> HashMap的容量为什么是2的n次幂，和这个(n - 1) &amp; hash的计算方法有着千丝万缕的关系，符号&amp;是按位与的计算，这是位运算，计算机能直接运算，特别高效，按位与&amp;的计算方法是，只有当对应位置的数据都为1时，运算结果也为1，当HashMap的容量是2的n次幂时，(n-1)的2进制也就是1111111***111这样形式的，这样与添加元素的hash值进行位运算时，能够充分的散列，使得添加的元素均匀分布在HashMap的每个位置上，减少hash碰撞，下面举例进行说明。</p>
<p>  当HashMap的容量是16时，它的二进制是10000，(n-1)的二进制是01111，与hash值得计算结果如下：</p>
<p>上面四种情况我们可以看出，不同的hash值，和(n-1)进行位运算后，能够得出不同的值，使得添加的元素能够均匀分布在集合中不同的位置上，避免hash碰撞。</p>
<p>  下面就来看一下HashMap的容量不是2的n次幂的情况，当容量为10时，二进制为01010，(n-1)的二进制是01001，向里面添加同样的元素，结果为：</p>
<p>可以看出，有三个不同的元素进过&amp;运算得出了同样的结果，严重的hash碰撞了。</p>
<p>终上所述，HashMap计算添加元素的位置时，使用的位运算，这是特别高效的运算；另外，HashMap的初始容量是2的n次幂，扩容也是2倍的形式进行扩容，是因为容量是2的n次幂，可以使得添加的元素均匀分布在HashMap中的数组上，减少hash碰撞，避免形成链表的结构，使得查询效率降低！<br>————————————————<br>版权声明：本文为CSDN博主「猿人小郑」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href="https://blog.csdn.net/Apeopl/article/details/88935422" target="_blank" rel="noopener">https://blog.csdn.net/Apeopl/article/details/88935422</a></p>
</blockquote>
<p>fr: <a href="https://blog.csdn.net/Apeopl/article/details/88935422?depth_1-utm_source=distribute.pc_relevant.none-task&amp;utm_source=distribute.pc_relevant.none-task" target="_blank" rel="noopener">https://blog.csdn.net/Apeopl/article/details/88935422?depth_1-utm_source=distribute.pc_relevant.none-task&amp;utm_source=distribute.pc_relevant.none-task</a></p>
<h2 id="B-Search-left"><a href="#B-Search-left" class="headerlink" title="B-Search-left"></a>B-Search-left</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">b_search_left</span><span class="params">(self, intervals, target)</span>:</span></span><br><span class="line">     start, end = <span class="number">0</span>, len(intervals) - <span class="number">1</span></span><br><span class="line">     <span class="keyword">while</span> start + <span class="number">1</span> &lt; end:</span><br><span class="line">         mid = start + (end - start) // <span class="number">2</span></span><br><span class="line">         <span class="keyword">if</span> intervals[mid].start &lt;= target:</span><br><span class="line">             end = mid</span><br><span class="line">         <span class="keyword">else</span>:</span><br><span class="line">             start = mid</span><br><span class="line">     <span class="comment"># Cases assistance:</span></span><br><span class="line">     <span class="comment"># 1 1 1 1 3, 2</span></span><br><span class="line">     <span class="comment">#       s e     return e</span></span><br><span class="line">     <span class="comment"># 2 2 2 2 3, 2</span></span><br><span class="line">     <span class="comment"># s e           return s</span></span><br><span class="line">     <span class="comment"># 1 3 3 3 3, 2  </span></span><br><span class="line">     <span class="comment"># s e           return e</span></span><br><span class="line">     <span class="keyword">if</span> intervals[start].start == target:</span><br><span class="line">         <span class="keyword">return</span> start</span><br><span class="line">     <span class="keyword">else</span>:</span><br><span class="line">         <span class="keyword">return</span> end</span><br><span class="line">       </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">helper3</span><span class="params">(self, intervals, newInterval)</span>:</span></span><br><span class="line">     <span class="string">"""</span></span><br><span class="line"><span class="string">     1. 找到這個 newInterval 該插進去的位置</span></span><br><span class="line"><span class="string">     2. 然後做一般的 interval merge就ok啦!</span></span><br><span class="line"><span class="string">     """</span></span><br><span class="line">     <span class="comment"># for i in range() </span></span><br><span class="line">     n = len(intervals)</span><br><span class="line">     target = newInterval.start</span><br><span class="line">     pos = <span class="number">0</span> <span class="comment"># insert position</span></span><br><span class="line">     <span class="comment"># pos = self.b_search()   # ==&gt; pos to insert, also </span></span><br><span class="line">         <span class="comment"># means amount &lt;= ME            ==&gt; bisect_right()</span></span><br><span class="line">         <span class="comment"># 用    amount &lt;  ME 也可以啦   ==&gt; bisect_left() ==&gt; 這個比較好 implement</span></span><br><span class="line">     <span class="comment"># pos = self.bisect_left(intervals, target) # 這是類，不能這樣塞! </span></span><br><span class="line">     pos = self.b_search_left(intervals, target)</span><br><span class="line">     </span><br><span class="line">     <span class="comment"># 重組一個新的 intervals, 叫 arr, O(N)</span></span><br><span class="line">     arr = []</span><br><span class="line">     <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>, pos):</span><br><span class="line">         arr.append(intervals[j])    <span class="comment"># 如果可block copy可更快</span></span><br><span class="line">     arr.append(newInterval)</span><br><span class="line">     <span class="comment"># for j in range(pos+1, n):</span></span><br><span class="line">     <span class="keyword">for</span> j <span class="keyword">in</span> range(pos, n):</span><br><span class="line">         arr.append(intervals[j])</span><br><span class="line">     <span class="comment"># print([(tmp.start, tmp.end) for tmp in arr])</span></span><br><span class="line">     </span><br><span class="line">     <span class="comment"># intervals.sort(key=lambda x: x.start)   # O(NLogN) 這樣上面的就都不用做了</span></span><br><span class="line">     res = [arr[<span class="number">0</span>]]</span><br><span class="line">     <span class="keyword">for</span> idx <span class="keyword">in</span> range(len(arr)):</span><br><span class="line">         prev, now = res[<span class="number">-1</span>], arr[idx]</span><br><span class="line">         <span class="keyword">if</span> res[<span class="number">-1</span>].end &lt; now.start:</span><br><span class="line">             res.append(now)</span><br><span class="line">         <span class="keyword">else</span>:</span><br><span class="line">             res[<span class="number">-1</span>].end = max(res[<span class="number">-1</span>].end, now.end)</span><br><span class="line">     <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>







<h2 id="B-Search-right"><a href="#B-Search-right" class="headerlink" title="B-Search-right"></a>B-Search-right</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">b_search_right</span><span class="params">(self, intervals, target)</span>:</span></span><br><span class="line">    start, end = <span class="number">0</span>, len(intervals) - <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> start + <span class="number">1</span> &lt; end:</span><br><span class="line">        mid = start + (end - start) // <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> intervals[mid].start &lt; target:</span><br><span class="line">            end = mid</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            start = mid</span><br><span class="line">    <span class="comment"># Cases assistance:</span></span><br><span class="line">    <span class="comment"># 1 1 1 1 3, 2</span></span><br><span class="line">    <span class="comment">#       s e     return e</span></span><br><span class="line">    <span class="comment"># 2 2 2 2 3, 2</span></span><br><span class="line">    <span class="comment">#       s e     return e</span></span><br><span class="line">    <span class="comment"># 1 1 1 1 2, 2</span></span><br><span class="line">    <span class="comment">#       s e     return e</span></span><br><span class="line">    <span class="comment"># 1 1 1 1 1, 2</span></span><br><span class="line">    <span class="comment">#       s e     return e + 1</span></span><br><span class="line">    <span class="comment"># 1 3 3 3 3, 2  </span></span><br><span class="line">    <span class="comment"># s e           return e</span></span><br><span class="line">    <span class="comment"># 3 3 3 3 3, 2</span></span><br><span class="line">    <span class="comment"># s e           return s</span></span><br><span class="line">    <span class="keyword">if</span> intervals[end].start &lt; target:</span><br><span class="line">        <span class="keyword">return</span> end + <span class="number">1</span></span><br><span class="line">    <span class="comment"># else:     # WRONG!!!</span></span><br><span class="line">    <span class="comment">#     return end</span></span><br><span class="line">    <span class="keyword">if</span> intervals[start].start &gt; target:</span><br><span class="line">        <span class="keyword">return</span> start</span><br><span class="line">    <span class="keyword">return</span> end</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">helper3</span><span class="params">(self, intervals, newInterval)</span>:</span></span><br><span class="line">      <span class="string">"""</span></span><br><span class="line"><span class="string">      1. 找到這個 newInterval 該插進去的位置</span></span><br><span class="line"><span class="string">      2. 然後做一般的 interval merge就ok啦!</span></span><br><span class="line"><span class="string">      """</span></span><br><span class="line">      <span class="comment"># for i in range() </span></span><br><span class="line">      n = len(intervals)</span><br><span class="line">      target = newInterval.start</span><br><span class="line">      pos = <span class="number">0</span> <span class="comment"># insert position</span></span><br><span class="line">      <span class="comment"># pos = self.b_search()   # ==&gt; pos to insert, also </span></span><br><span class="line">          <span class="comment"># means amount &lt;= ME            ==&gt; bisect_right()</span></span><br><span class="line">          <span class="comment"># 用    amount &lt;  ME 也可以啦   ==&gt; bisect_left() ==&gt; 這個比較好 implement</span></span><br><span class="line">          </span><br><span class="line">      <span class="comment"># pos = self.bisect_left(intervals, target) # 這是類，不能這樣塞! </span></span><br><span class="line">      pos = self.b_search_right(intervals, target)</span><br><span class="line">      <span class="comment"># pos = self.b_search_left(intervals, target)</span></span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">      <span class="comment"># 重組一個新的 intervals, 叫 arr, O(N)</span></span><br><span class="line">      arr = []</span><br><span class="line">      <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>, pos):</span><br><span class="line">          arr.append(intervals[j])    <span class="comment"># 如果可block copy可更快</span></span><br><span class="line">      arr.append(newInterval)</span><br><span class="line">      <span class="comment"># for j in range(pos+1, n):</span></span><br><span class="line">      <span class="keyword">for</span> j <span class="keyword">in</span> range(pos, n):</span><br><span class="line">          arr.append(intervals[j])</span><br><span class="line">      <span class="comment"># print([(tmp.start, tmp.end) for tmp in arr])</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment"># intervals.sort(key=lambda x: x.start)   # O(NLogN) 這樣上面的就都不用做了        </span></span><br><span class="line">      res = [arr[<span class="number">0</span>]]</span><br><span class="line">      <span class="keyword">for</span> idx <span class="keyword">in</span> range(len(arr)):</span><br><span class="line">          prev, now = res[<span class="number">-1</span>], arr[idx]</span><br><span class="line">          <span class="keyword">if</span> res[<span class="number">-1</span>].end &lt; now.start:</span><br><span class="line">              res.append(now)</span><br><span class="line">          <span class="keyword">else</span>:</span><br><span class="line">              res[<span class="number">-1</span>].end = max(res[<span class="number">-1</span>].end, now.end)</span><br><span class="line">      <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>



<h4 id="Lintcode-653-K-closest-elemenets-near-target"><a href="#Lintcode-653-K-closest-elemenets-near-target" class="headerlink" title="Lintcode 653, K closest elemenets near target"></a>Lintcode 653, K closest elemenets near target</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lintcode653</span><span class="params">(self, A, k, target)</span>:</span></span><br><span class="line">	  <span class="comment"># 找到 A[left] &lt; target, A[right] &gt;= target</span></span><br><span class="line">       <span class="comment"># 也就是最接近 target 的两个数，他们肯定是相邻的</span></span><br><span class="line">       right = self.findUpperClosest(A, target)</span><br><span class="line">       left = right - <span class="number">1</span></span><br><span class="line">   </span><br><span class="line">   	<span class="comment"># 两根指针从中间往两边扩展，依次找到最接近的 k 个数</span></span><br><span class="line">       results = []</span><br><span class="line">       <span class="keyword">for</span> _ <span class="keyword">in</span> range(k):</span><br><span class="line">           <span class="keyword">if</span> self.isLeftCloser(A, target, left, right):</span><br><span class="line">               results.append(A[left])</span><br><span class="line">               left -= <span class="number">1</span></span><br><span class="line">           <span class="keyword">else</span>:</span><br><span class="line">               results.append(A[right])</span><br><span class="line">               right += <span class="number">1</span></span><br><span class="line">       </span><br><span class="line">       <span class="keyword">return</span> results</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">findUpperClosest</span><span class="params">(self, A, target)</span>:</span></span><br><span class="line">       <span class="comment"># find the first number &gt;= target in A</span></span><br><span class="line">       start, end = <span class="number">0</span>, len(A) - <span class="number">1</span></span><br><span class="line">       <span class="keyword">while</span> start + <span class="number">1</span> &lt; end:</span><br><span class="line">           mid = (start + end) // <span class="number">2</span></span><br><span class="line">           <span class="keyword">if</span> A[mid] &gt;= target:</span><br><span class="line">               end = mid</span><br><span class="line">           <span class="keyword">else</span>:</span><br><span class="line">               start = mid</span><br><span class="line">       </span><br><span class="line">       <span class="keyword">if</span> A[start] &gt;= target:</span><br><span class="line">           <span class="keyword">return</span> start</span><br><span class="line">       </span><br><span class="line">       <span class="keyword">if</span> A[end] &gt;= target:            </span><br><span class="line">           <span class="keyword">return</span> end</span><br><span class="line">       </span><br><span class="line">       <span class="comment"># 找不到的情况</span></span><br><span class="line">       <span class="keyword">return</span> len(A)</span><br><span class="line">       </span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">isLeftCloser</span><span class="params">(self, A, target, left, right)</span>:</span></span><br><span class="line">       <span class="keyword">if</span> left &lt; <span class="number">0</span>:</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">       <span class="keyword">if</span> right &gt;= len(A):</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">       <span class="keyword">return</span> target - A[left] &lt;= A[right] - target</span><br></pre></td></tr></table></figure>





<h2 id="B-Tree-amp-B-Tree"><a href="#B-Tree-amp-B-Tree" class="headerlink" title="B Tree &amp; B+ Tree"></a>B Tree &amp; B+ Tree</h2><h3 id="●-B-Tree-Balance-Tree"><a href="#●-B-Tree-Balance-Tree" class="headerlink" title="● B Tree - Balance Tree"></a>● B Tree - Balance Tree</h3><p>indexing for binary search in b-tree</p>
<img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd48nzmag6j317o0n87i9.jpg" alt="image-20200323223850264" style="zoom:67%;" />

<p>Ref <a href="https://www.bilibili.com/video/BV1p7411k7nU?from=search&amp;seid=14903204102279559784" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1p7411k7nU?from=search&amp;seid=14903204102279559784</a></p>
<p>根滿了，根要拆</p>
<p>根沒滿要先走到葉</p>
<p>​    葉沒滿，就直接插入</p>
<p>​    葉滿了，就拆分葉</p>
<h3 id="●-B"><a href="#●-B" class="headerlink" title="● B+"></a>● B+</h3><p>a variation of B tree in which all of the values are stored in the leaf nodes. </p>
<img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd4wyavvudj30wq0no410.jpg" alt="image-20200324123910488" style="zoom:67%;" />



<img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd4x00n4irj30wa0o00vc.jpg" alt="image-20200324124051188" style="zoom:67%;" />





<p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd4x3uxztjj30vs0lewia.jpg" alt="image-20200324124439801"></p>
<ul>
<li>value of B trees are ordered from least to greatest, the keys in the internalnodes contain the smallest values from each of its children starting form the second one</li>
</ul>
<img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd4xb27uakj30o80lawhk.jpg" alt="image-20200324125126983" style="zoom:67%;" />



<img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd4xebkh46j30wa0kwwje.jpg" alt="image-20200324125436567" style="zoom:67%;" />

<p>ref: <a href="https://www.youtube.com/watch?v=49P_GDeMDRo" target="_blank" rel="noopener">https://www.youtube.com/watch?v=49P_GDeMDRo</a></p>
<p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd497dfsn8j310i0b0t9d.jpg" alt="image-20200323225728609"></p>
<p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd49b4ahnxj31ng0u0u0u.jpg" alt="image-20200323230114499"></p>
<img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd4w3w9wtxj30q407wq3e.jpg" alt="image-20200324120956031" style="zoom:67%;" /></div><hr></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/56/"><i class="fa fa-chevron-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/56/">56</a><span class="page-number current">57</span><a class="page-number" href="/page/58/">58</a><span class="space">&hellip;</span><a class="page-number" href="/page/60/">60</a><a class="extend next" rel="next" href="/page/58/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2020 By Joe Huang</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>