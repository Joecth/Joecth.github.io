<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Algo. Ult./seminar_2 &amp; 3"><meta name="keywords" content=""><meta name="author" content="Joe Huang"><meta name="copyright" content="Joe Huang"><title>Algo. Ult./seminar_2 &amp; 3 | Awaken Desparado</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-180692466-1', 'auto');
ga('send', 'pageview');</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 4.1.1"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#645-識別名人"><span class="toc-number">1.</span> <span class="toc-text">645. 識別名人</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#654-稀疏矩陣乘法"><span class="toc-number">2.</span> <span class="toc-text">654. 稀疏矩陣乘法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#140-快速冪"><span class="toc-number">3.</span> <span class="toc-text">140. 快速冪</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Freq"><span class="toc-number">4.</span> <span class="toc-text">Freq:</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Seminar-3"><span class="toc-number"></span> <span class="toc-text">Seminar 3</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1310-數組除了自身的乘積"><span class="toc-number">1.</span> <span class="toc-text">1310. 數組除了自身的乘積</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1844-子數組和為K-II"><span class="toc-number">2.</span> <span class="toc-text">1844. 子數組和為K II</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1507-和至少为K的最短长度"><span class="toc-number">3.</span> <span class="toc-text">1507. 和至少为K的最短长度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#391-數飛機"><span class="toc-number">4.</span> <span class="toc-text">391. 數飛機</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#194-寻找单词"><span class="toc-number">5.</span> <span class="toc-text">194. 寻找单词</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Sol"><span class="toc-number">5.0.1.</span> <span class="toc-text">Sol</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#O-N-2-的預處理，太慢"><span class="toc-number">5.0.1.1.</span> <span class="toc-text">O(N^2) 的預處理，太慢</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#O-N-預處理-by-後往前遞推！"><span class="toc-number">5.0.1.2.</span> <span class="toc-text">O(N) 預處理 by 後往前遞推！</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#946-233-Matrix"><span class="toc-number">6.</span> <span class="toc-text">946. 233 Matrix</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#前綴和的定義和實現"><span class="toc-number">7.</span> <span class="toc-text">前綴和的定義和實現</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2D"><span class="toc-number">7.0.1.</span> <span class="toc-text">2D</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#動規V-S-前綴和"><span class="toc-number">7.0.2.</span> <span class="toc-text">動規V.S.前綴和</span></a></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Joe Huang</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">306</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">25</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">47</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Awaken Desparado</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">Algo. Ult./seminar_2 &amp; 3</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-05-30</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/AlgoUlt/">AlgoUlt.</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h2 id="645-識別名人"><a href="#645-識別名人" class="headerlink" title="645. 識別名人"></a>645. 識別名人</h2><ul>
<li><p>其他人他都不認識的，他就是名人</p>
</li>
<li><p>最多只會有一個名人，或「不存在」，不會有兩個名人</p>
</li>
<li><p>降低兩兩比較的時間！Trick! ==&gt; </p>
</li>
<li><p>as 892 Alien Dictionary, as 1836 Reaching Point</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">The knows API is already defined for you.</span></span><br><span class="line"><span class="string">@param a, person a</span></span><br><span class="line"><span class="string">@param b, person b</span></span><br><span class="line"><span class="string">@return a boolean, whether a knows b</span></span><br><span class="line"><span class="string">you can call Celebrity.knows(a, b)</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># @param &#123;int&#125; n a party with n people</span></span><br><span class="line">    <span class="comment"># @return &#123;int&#125; the celebrity's label or -1</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findCelebrity</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        <span class="comment"># return self.bf_NxN(n)</span></span><br><span class="line">        <span class="keyword">return</span> self.O_N(n)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">O_N</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        <span class="comment"># 候選人＝ 0 </span></span><br><span class="line">        <span class="comment"># for 循環遍歷其他的人 (1~n-1): i</span></span><br><span class="line">        <span class="comment">#     if i 認識候選人：</span></span><br><span class="line">        <span class="comment">#         i　不可能是名人</span></span><br><span class="line">        <span class="comment">#     if i 不認識至選人：</span></span><br><span class="line">        <span class="comment">#         候選人不可能是名人</span></span><br><span class="line">        <span class="comment">#         i　可能是名人</span></span><br><span class="line">        <span class="comment">#         ==&gt; 讓 i 成為最後的候選人</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># for 所有人判斷該候選人是否是名人</span></span><br><span class="line">        cand = <span class="number">0</span>    <span class="comment"># candidate</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n):</span><br><span class="line">            <span class="comment"># if Celebrity.knows(i, cand):</span></span><br><span class="line">            <span class="comment">#     cand = cand</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> Celebrity.knows(i, cand):</span><br><span class="line">                cand = i</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">if</span> i == cand:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">if</span> Celebrity.knows(cand, i) <span class="keyword">or</span> <span class="keyword">not</span> Celebrity.knows(i, cand):</span><br><span class="line">                <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        <span class="keyword">return</span> cand    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bf_NxN</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        <span class="comment"># Write your code here</span></span><br><span class="line">        <span class="comment"># for  所有人</span></span><br><span class="line">        <span class="comment">#   判斷這個人是否是名人 ==&gt; for其他所有人看是否其他人認識ｉ、ｉ是否認識其他人 </span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            is_celebrity = <span class="literal">True</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(n):</span><br><span class="line">                <span class="keyword">if</span> i == j:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                    </span><br><span class="line">                <span class="keyword">if</span> Celebrity.knows(i, j) <span class="keyword">or</span> <span class="keyword">not</span> Celebrity.knows(j, i):</span><br><span class="line">                    is_celebrity = <span class="literal">False</span></span><br><span class="line">            <span class="keyword">if</span> is_celebrity:</span><br><span class="line">                <span class="keyword">return</span> i</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br></pre></td></tr></table></figure>



<h2 id="654-稀疏矩陣乘法"><a href="#654-稀疏矩陣乘法" class="headerlink" title="654. 稀疏矩陣乘法"></a>654. 稀疏矩陣乘法</h2><ul>
<li>將兩個Matrix 相乘，</li>
</ul>
<ol>
<li><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfdpp1hf9gj30qa0c4q4t.jpg" alt="image-20200602095856594" style="zoom:50%;" />

<p>As Merge 2 sorted array, 雙指針讓兩條的值相等時再相乘</p>
<img src="/Users/joe/Library/Application Support/typora-user-images/image-20200602100301997.png" alt="image-20200602100301997" style="zoom:67%;" />



</li>
</ol>
<p>   Further:</p>
<ul>
<li><p>現在有兩個向量，非常稀疏，其中假設非0個數為n, 如何 O(n) 時間得到這兩個向量的乘積？</p>
<ul>
<li><p>如果是用arr存的話，再怎樣也要O(N)</p>
</li>
<li><p><strong>(Index, val)</strong>; LinkedList存才行  Arraylist<Node> or LinkedList<Node></p>
<ul>
<li>Two pointer method!</li>
</ul>
</li>
</ul>
</li>
<li><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfdqlv9hfrj308g08gt9m.jpg" alt="image-20200602103032402" style="zoom:50%;" />
</li>
<li><p>　給過來的要是Node才有意義，如果是Array的話就沒意義了</p>
</li>
</ul>
<ol start="2">
<li>PUSH method</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    @param A: a sparse matrix</span></span><br><span class="line"><span class="string">    @param B: a sparse matrix</span></span><br><span class="line"><span class="string">    @return: the result of A * B</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="comment"># </span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">multiply</span><span class="params">(self, A, B)</span>:</span></span><br><span class="line">        <span class="comment"># write your code here</span></span><br><span class="line">        <span class="comment"># return self.BF(A, B)</span></span><br><span class="line">        <span class="keyword">return</span> self.two_pointers(A, B)  <span class="comment"># optimization 1</span></span><br><span class="line">        <span class="keyword">return</span> self.push_model(A, B)    <span class="comment"># optimization 2</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment"># PUSH model: 通過原料加到結果裡面</span></span><br><span class="line">    <span class="comment"># 不是對於每個C裡的每個值拿A、B裡的每一個東西，而是看A裡面的每個值會對C裡的</span></span><br><span class="line">    <span class="comment"># 哪些值產生影響</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">push_model</span><span class="params">(self, A, B)</span>:</span></span><br><span class="line">        n = len(A)</span><br><span class="line">        m = len(A[<span class="number">0</span>])</span><br><span class="line">        k = len(B[<span class="number">0</span>])</span><br><span class="line">        </span><br><span class="line">        C = [[<span class="number">0</span>] * k <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 如果A中非0元素為常數級別 ==&gt; O(N^2)</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(m):</span><br><span class="line">                <span class="string">""" 以下兩行為PUSH model的優化 """</span></span><br><span class="line">                <span class="keyword">if</span> A[i][j] == <span class="number">0</span>:    <span class="comment"># 但B裡面還是沒有優化到</span></span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                <span class="keyword">for</span> t <span class="keyword">in</span> range(k):</span><br><span class="line">                    C[i][t] += A[i][j] * B[j][t]</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> C        </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">two_pointers_new</span><span class="params">(self, A, B)</span>:</span></span><br><span class="line">        n = len(A)</span><br><span class="line">        m = len(A[<span class="number">0</span>])</span><br><span class="line">        k = len(B[<span class="number">0</span>])</span><br><span class="line">        </span><br><span class="line">        row_vec = []</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">two_pointers</span><span class="params">(self, A, B)</span>:</span></span><br><span class="line">        n = len(A)</span><br><span class="line">        m = len(A[<span class="number">0</span>])</span><br><span class="line">        k = len(B[<span class="number">0</span>])</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 假設 n, m, k 是相同數量級</span></span><br><span class="line">        <span class="comment"># O(n^2)</span></span><br><span class="line">        row_vector = [</span><br><span class="line">            [</span><br><span class="line">                (j, A[i][j])</span><br><span class="line">                <span class="keyword">for</span> j <span class="keyword">in</span> range(m)</span><br><span class="line">                <span class="keyword">if</span> A[i][j] != <span class="number">0</span></span><br><span class="line">            ]    </span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(n)</span><br><span class="line">        ]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># O(n^2)</span></span><br><span class="line">        col_vector = [</span><br><span class="line">            [</span><br><span class="line">                (i, B[i][j])</span><br><span class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> range(m)</span><br><span class="line">                <span class="keyword">if</span> B[i][j] != <span class="number">0</span></span><br><span class="line">            ]    </span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(k)</span><br><span class="line">        ]</span><br><span class="line">        <span class="comment"># Java C++ 只能Hashmap套ArrayList</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># O(n^2 * O(self.multi()))</span></span><br><span class="line">        C = [</span><br><span class="line">                [</span><br><span class="line">                    self.multi(row, col)</span><br><span class="line">                    <span class="keyword">for</span> col <span class="keyword">in</span> col_vector</span><br><span class="line">                ]</span><br><span class="line">                <span class="keyword">for</span> row <span class="keyword">in</span> row_vector</span><br><span class="line">            ]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># C = [[0] * k for i in range(n)]</span></span><br><span class="line">        <span class="keyword">return</span> C</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># row = [(0,1), (2,3), (3,5)]</span></span><br><span class="line">        <span class="comment"># col = [(1,2), (3,5)]</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment"># O(len(row) + len(col)) ==&gt;  行向量與列向量中非0元素的個數</span></span><br><span class="line">    <span class="comment"># ==&gt; 假設非0元素個數是常數級  ==&gt;  O(1), 如 1000x1000，但只有10、20個有值</span></span><br><span class="line">    <span class="comment"># As Merge Two sorted array</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    A = [</span></span><br><span class="line"><span class="string">            [1,0,0],</span></span><br><span class="line"><span class="string">            [-1,0,3]</span></span><br><span class="line"><span class="string">        ]</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">    B = [</span></span><br><span class="line"><span class="string">            [7,0,0]</span></span><br><span class="line"><span class="string">            [0,0,0]</span></span><br><span class="line"><span class="string">            [0,0,1]</span></span><br><span class="line"><span class="string">        ]</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">    mapping_A:</span></span><br><span class="line"><span class="string">        0: [0]</span></span><br><span class="line"><span class="string">        1: [0,2]</span></span><br><span class="line"><span class="string">            　↑</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    mapping_B:</span></span><br><span class="line"><span class="string">        0:[0]</span></span><br><span class="line"><span class="string">        1:[]</span></span><br><span class="line"><span class="string">        2:[2]</span></span><br><span class="line"><span class="string">        　 ↑</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">multi</span><span class="params">(self, row, col)</span>:</span></span><br><span class="line">        <span class="comment"># 雙指針</span></span><br><span class="line">        i = <span class="number">0</span></span><br><span class="line">        j = <span class="number">0</span></span><br><span class="line">        ans = <span class="number">0</span> <span class="comment"># 向量相乘後的結果</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; len(row) <span class="keyword">and</span> j &lt; len(col):</span><br><span class="line">            index1, val1 = row[i]</span><br><span class="line">            index2, val2 = col[j]</span><br><span class="line">            <span class="keyword">if</span> index1 &lt; index2:</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> index1 &gt; index2:</span><br><span class="line">                j += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                ans += val1 * val2</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">                j += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> ans</span><br><span class="line">                </span><br><span class="line">    <span class="comment"># PULL model</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">BF</span><span class="params">(self, A, B)</span>:</span></span><br><span class="line">        m, n, k = len(A), len(A[<span class="number">0</span>]), len(B[<span class="number">0</span>])</span><br><span class="line">        C = [[<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(k)] <span class="keyword">for</span> _ <span class="keyword">in</span> range(m)]</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(m):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(k):</span><br><span class="line">                <span class="keyword">for</span> t <span class="keyword">in</span> range(n):</span><br><span class="line">                    C[i][j] += A[i][t] * B[t][j]</span><br><span class="line">        <span class="keyword">return</span> C</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">BF_old</span><span class="params">(self, A, B)</span>:</span></span><br><span class="line">        n = len(A)</span><br><span class="line">        m = len(A[<span class="number">0</span>])</span><br><span class="line">        k = len(B[<span class="number">0</span>])</span><br><span class="line">        </span><br><span class="line">        C = [[<span class="number">0</span>]*k <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(k):</span><br><span class="line">                <span class="comment"># C[i][j] = A[i][t] * B[t][j]</span></span><br><span class="line">                <span class="keyword">for</span> t <span class="keyword">in</span> range(m):</span><br><span class="line">                    C[i][j] += A[i][t] * B[t][j]</span><br><span class="line">        <span class="keyword">return</span> C</span><br></pre></td></tr></table></figure>



<h2 id="140-快速冪"><a href="#140-快速冪" class="headerlink" title="140. 快速冪"></a>140. 快速冪</h2><ul>
<li>求 a**n%b</li>
<li>其中 n非常大 (n &lt;= 10**9)</li>
<li>如何獲得logn的複雜度？</li>
<li>思想：a*^1000 &lt;== (a^500)^2</li>
<li>a ^ 10000000000 &lt;== a ^ 5000000000 &lt;== </li>
<li>問題規模: n -&gt; n/2 -&gt; n/4 -&gt; n/8 -&gt; n/16</li>
<li>討論平方關係：<ul>
<li>x^(n/2) * x(^n/2): O(N)，只是divide &amp; conquer，但每個還是重複算了</li>
<li>x^(n/2) ** 2: O(logN)   思想不同上面的！是真正的切半</li>
</ul>
</li>
<li>related to 949 fibII、65</li>
</ul>
<h2 id="Freq"><a href="#Freq" class="headerlink" title="Freq:"></a>Freq:</h2><p>—————– 很常見 </p>
<ol>
<li>BFS</li>
<li>模擬(interger -&gt; roman OA)、隱式圖老題 (數獨、word ladder (X)，word break Ⅱ 必須要最優化, dfs暴力指數級，dp(O(N)))、K largest … (Amazon)</li>
</ol>
<p>—————– 比較常見</p>
<ol start="3">
<li><p>DFS、二叉樹、基礎DP(背包、序列型dp、坐標型dp、雙序列型dp(LCS)、常見的問題(LIS、LPS))、二分答案、前缀和</p>
</li>
<li><p>LRU、LFU、雙指針 (Sliding Window), LInkedList (老題、快慢、環、相交點)、Copy Linked List with random pointer、掃描線、單調棧</p>
</li>
</ol>
<p>—————– 基本不怎麼出現</p>
<ol start="5">
<li>二分搜索、數據結構(heap, quick select)、比較難的DP(區間DP、概率DP、狀態壓縮DP (TSP)), Union find, sort, trie (quantcast(OA)), segment tree，紅黑樹(G)，dfs非遞歸實現 (樹的非遞歸遍歷)、矩陣快速冪</li>
<li>Floyd, dij, spfa</li>
</ol>
<p>Graph ==&gt; BFS, DFS, targan(Amazon), Union find, dij, Floyd (最小生成樹)</p>
<ul>
<li>Find Critical connection (Amazon!) V</li>
</ul>
<p>A onsite: Stone Game</p>
<p>Word Ladder 2</p>
<h1 id="Seminar-3"><a href="#Seminar-3" class="headerlink" title="Seminar 3"></a>Seminar 3</h1><ul>
<li></li>
</ul>
<h2 id="1310-數組除了自身的乘積"><a href="#1310-數組除了自身的乘積" class="headerlink" title="1310. 數組除了自身的乘積"></a>1310. 數組除了自身的乘積</h2><ol>
<li>左往右，前綴積: prefix[i] = nums[0] * … * nums[i]</li>
<li>右往左，後綴積: suffix[i] = nums[i] * … * nums[n-1</li>
<li>遍歷所有位置 outpus[i] = prefix[i-1] * suffix[i+1]</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    @param nums: an array of integers</span></span><br><span class="line"><span class="string">    @return: the product of all the elements of nums except nums[i].</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">productExceptSelf</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="comment"># write your code here</span></span><br><span class="line">        <span class="comment"># return self.O_N(nums)</span></span><br><span class="line">        <span class="keyword">return</span> self.O_1(nums)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">O_1</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="comment"># 從前往後掃，把當前的前綴積放到output中</span></span><br><span class="line">        <span class="comment"># 從後往前掃，把當前的後綴積乘上output[i]</span></span><br><span class="line">        n = len(nums)</span><br><span class="line">        <span class="keyword">if</span> n == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">            </span><br><span class="line">        output = [<span class="number">1</span>] * n</span><br><span class="line"></span><br><span class="line">        prefix = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            output[i] = prefix</span><br><span class="line">            prefix *= nums[i]</span><br><span class="line">        </span><br><span class="line">        suffix = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n<span class="number">-1</span>, <span class="number">-1</span>, <span class="number">-1</span>):</span><br><span class="line">            output[i] *= suffix</span><br><span class="line">            suffix *= nums[i]</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> output</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">O_N</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="comment"># 1. 左往右，前綴積: prefix[i] = nums[0] * ... * nums[i]</span></span><br><span class="line">        <span class="comment"># 2. 右往左，後綴積: suffix[i] = nums[i] * ... * nums[n-1</span></span><br><span class="line">        <span class="comment"># 3. 遍歷所有位置 outpus[i] = prefix[i-1] * suffix[i+1]</span></span><br><span class="line">        n = len(nums)</span><br><span class="line">        <span class="keyword">if</span> n == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">            </span><br><span class="line">        output = [<span class="number">0</span>] * n</span><br><span class="line">        prefix = [<span class="number">0</span>] * n</span><br><span class="line">        suffix = [<span class="number">0</span>] * n</span><br><span class="line">        </span><br><span class="line">        prefix[<span class="number">0</span>] = nums[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n):</span><br><span class="line">            prefix[i] = prefix[i<span class="number">-1</span>] * nums[i]</span><br><span class="line">        </span><br><span class="line">        suffix[n<span class="number">-1</span>] = nums[n<span class="number">-1</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n<span class="number">-2</span>, <span class="number">-1</span>, <span class="number">-1</span>):</span><br><span class="line">            suffix[i] = suffix[i+<span class="number">1</span>] * nums[i]</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">                output[i] = suffix[i+<span class="number">1</span>]</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">if</span> i == n - <span class="number">1</span>:</span><br><span class="line">                output[i] = prefix[i<span class="number">-1</span>]</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            </span><br><span class="line">            output[i] = prefix[i<span class="number">-1</span>] * suffix[i+<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">return</span> output</span><br></pre></td></tr></table></figure>



<h2 id="1844-子數組和為K-II"><a href="#1844-子數組和為K-II" class="headerlink" title="1844. 子數組和為K II"></a>1844. 子數組和為K II</h2><ul>
<li>為何不能用雙指針？<ul>
<li>因為有負數的。。。太慘。。</li>
</ul>
</li>
<li>基础版：838子数组和为K</li>
<li>Follow up: 1507.和至少為K的最短長度</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfg232v0fqj30wg0eqadb.jpg" alt="image-20200604103838917"></p>
<h2 id="1507-和至少为K的最短长度"><a href="#1507-和至少为K的最短长度" class="headerlink" title="1507. 和至少为K的最短长度"></a>1507. 和至少为K的最短长度</h2><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfg2ia573fj30y80jcn3e.jpg" alt="image-20200604105311696"></p>
<img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfg2oc4xwbj30im0ictc7.jpg" alt="image-20200604105910757" style="zoom:67%;" />



<h2 id="391-數飛機"><a href="#391-數飛機" class="headerlink" title="391. 數飛機"></a>391. 數飛機</h2><ul>
<li>差分前綴和</li>
<li>根據原數組獲得差分數組 ==&gt; 求前綴和</li>
<li>什麼是差分數組？</li>
</ul>
<img src="/Users/joe/Library/Application Support/typora-user-images/image-20200604112647832.png" alt="image-20200604112647832" style="zoom:67%;" />



<h2 id="194-寻找单词"><a href="#194-寻找单词" class="headerlink" title="194. 寻找单词"></a>194. 寻找单词</h2><ol>
<li>BF 雙指針</li>
</ol>
<img src="/Users/joe/Library/Application Support/typora-user-images/image-20200604113217218.png" alt="image-20200604113217218" style="zoom:67%;" />

<ol start="2">
<li><p>大暴力 2^N 空間</p>
</li>
<li><p>hashmap 存所有字母出現的位置</p>
<ul>
<li>o:[2,4,9,15]</li>
<li>index = 5</li>
<li>去找下一個o<ul>
<li>二分</li>
</ul>
</li>
<li>aaaaaaaaaaa<ul>
<li>a: [1,2,3,4,5,6,7,8,9,10]</li>
<li>index = 4</li>
</ul>
</li>
<li>O(m x logN x k)</li>
</ul>
</li>
<li><p>當前字符串的後一個任意字符的位置 ★待學習　</p>
</li>
</ol>
<h4 id="Sol"><a href="#Sol" class="headerlink" title="Sol"></a>Sol</h4><h5 id="O-N-2-的預處理，太慢"><a href="#O-N-2-的預處理，太慢" class="headerlink" title="O(N^2) 的預處理，太慢"></a>O(N^2) 的預處理，太慢</h5><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfppb5ahcjj30ry0dcaf6.jpg" alt="image-20200612185220046"></p>
<h5 id="O-N-預處理-by-後往前遞推！"><a href="#O-N-預處理-by-後往前遞推！" class="headerlink" title="O(N) 預處理 by 後往前遞推！"></a>O(N) 預處理 by 後往前遞推！</h5><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfpq0quxeuj30ia0kc7be.jpg" alt="image-20200612191700269"></p>
<img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfppn80qp6j308c03wgmj.jpg" alt="image-20200612190400078" style="zoom: 67%;" />

<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfppol54aej30c600m74i.jpg" alt="image-20200612190519367"></p>
<h2 id="946-233-Matrix"><a href="#946-233-Matrix" class="headerlink" title="946. 233 Matrix"></a>946. 233 Matrix</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">MOD = <span class="number">10000007</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Matrix</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n, m)</span>:</span></span><br><span class="line">        self.mat = [[<span class="number">0</span> <span class="keyword">for</span> j <span class="keyword">in</span> range(m)] <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line">        self.n = n</span><br><span class="line">        self.m = m</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># A * B ==&gt; A.__mul__(B)    n*m (x) m*k</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__mul__</span><span class="params">(self, matrix)</span>:</span></span><br><span class="line">        k = len(matrix.mat[<span class="number">0</span>])</span><br><span class="line">        tmp = Matrix(self.n, k) <span class="comment"># <span class="doctag">TODO:</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    @param X: a list of integers</span></span><br><span class="line"><span class="string">    @param m: an integer</span></span><br><span class="line"><span class="string">    @return: return an integer</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">calcTheValueOfAnm</span><span class="params">(self, X, m)</span>:</span></span><br><span class="line">        <span class="comment"># write your code here</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> X <span class="keyword">and</span> m == <span class="number">0</span>:    <span class="comment"># 特判</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="comment"># return self.O_NxM_MLE(X, m)</span></span><br><span class="line">        <span class="comment"># return self.O_N_TLE(X, m)</span></span><br><span class="line">        <span class="comment"># return self.O_lgN(X, m)   # TODO ... not OK now</span></span><br><span class="line">        <span class="keyword">return</span> self.sol(X, m)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sol</span><span class="params">(self, X, m)</span>:</span></span><br><span class="line">        <span class="comment"># write your code here</span></span><br><span class="line">        n = len(X)</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">0</span> <span class="keyword">and</span> m == <span class="number">0</span>):</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span>(m == <span class="number">0</span>):</span><br><span class="line">            <span class="keyword">return</span> X[n - <span class="number">1</span>]</span><br><span class="line">        self.n, self.mod = n + <span class="number">2</span>, <span class="number">10000007</span></span><br><span class="line">        A = [[<span class="number">0</span> <span class="keyword">for</span> j <span class="keyword">in</span> range(n + <span class="number">2</span>)] <span class="keyword">for</span> i <span class="keyword">in</span> range(n + <span class="number">2</span>)]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n + <span class="number">1</span>):</span><br><span class="line">            A[i][<span class="number">0</span>] = <span class="number">10</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n + <span class="number">2</span>):</span><br><span class="line">            A[i][n + <span class="number">1</span>] = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, i + <span class="number">1</span>):</span><br><span class="line">                A[i][j] = <span class="number">1</span></span><br><span class="line">        tmp = self.power(A, m);</span><br><span class="line">        ans = tmp[n][<span class="number">0</span>] * <span class="number">23</span> + tmp[n][n + <span class="number">1</span>] * <span class="number">3</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            ans += tmp[n][i] * X[i - <span class="number">1</span>]</span><br><span class="line">        <span class="keyword">return</span> ans % <span class="number">10000007</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mul</span><span class="params">(self, A, B)</span>:</span></span><br><span class="line">        tmp = [[<span class="number">0</span> <span class="keyword">for</span> j <span class="keyword">in</span> range(self.n)] <span class="keyword">for</span> i <span class="keyword">in</span> range(self.n)]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(self.n):</span><br><span class="line">            <span class="keyword">for</span> k <span class="keyword">in</span> range(self.n):</span><br><span class="line">                <span class="keyword">if</span> (A[i][k] == <span class="number">0</span>):</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                <span class="keyword">for</span> j <span class="keyword">in</span> range(self.n):</span><br><span class="line">                    tmp[i][j] = (tmp[i][j] + A[i][k] * B[k][j]) % self.mod</span><br><span class="line">        <span class="keyword">return</span> tmp</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">power</span><span class="params">(self, A, a)</span>:</span></span><br><span class="line">        B = [[<span class="number">0</span> <span class="keyword">for</span> j <span class="keyword">in</span> range(self.n)] <span class="keyword">for</span> i <span class="keyword">in</span> range(self.n)]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(self.n):</span><br><span class="line">            B[i][i] = <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> a &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">if</span> (a % <span class="number">2</span> == <span class="number">1</span>):</span><br><span class="line">                B = self.mul(B, A)</span><br><span class="line">            A = self.mul(A, A)</span><br><span class="line">            a //= <span class="number">2</span></span><br><span class="line">        <span class="keyword">return</span> B</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">O_lgN_tmpl</span><span class="params">(self, X, m)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span>    <span class="comment"># <span class="doctag">TODO:</span></span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    23      10*A[0][0]+3        10*A[0][1]+3        10*A[0][2]+3</span></span><br><span class="line"><span class="string">    a1      a1+↑</span></span><br><span class="line"><span class="string">    a2      a2+↑</span></span><br><span class="line"><span class="string">    a3      a3+↑</span></span><br><span class="line"><span class="string">    a4      a4+↑</span></span><br><span class="line"><span class="string">    """</span>    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">O_lgN</span><span class="params">(self, X, m)</span>:</span>  <span class="comment"># FastPow, Buggy... for m, n and DIM</span></span><br><span class="line">        n = len(X)</span><br><span class="line">        col = [<span class="number">0</span>] * (n+<span class="number">2</span>)</span><br><span class="line">        col[<span class="number">0</span>] = <span class="number">23</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n+<span class="number">2</span><span class="number">-1</span>): <span class="comment">#  23</span></span><br><span class="line">            <span class="comment"># print(col)</span></span><br><span class="line">            col[i] = X[i<span class="number">-1</span>]       <span class="comment">#  a1</span></span><br><span class="line">                                  <span class="comment">#  a2</span></span><br><span class="line">                                  <span class="comment">#  a3</span></span><br><span class="line">                                  <span class="comment">#  3</span></span><br><span class="line">        col[<span class="number">-1</span>] = <span class="number">3</span></span><br><span class="line">        print(<span class="string">"col: &#123;&#125;"</span>.format(col))</span><br><span class="line">        <span class="comment"># T : (n+2) x (m+2)</span></span><br><span class="line">        <span class="string">"""""</span></span><br><span class="line"><span class="string">        doc WRONG!!! ↓  n should be equal to len(vec)</span></span><br><span class="line"><span class="string">        [   </span></span><br><span class="line"><span class="string">            [10, 0, 0, 0, 1],</span></span><br><span class="line"><span class="string">            [10, 1, 0, 0, 1],</span></span><br><span class="line"><span class="string">            [10, 1, 1, 0, 1],</span></span><br><span class="line"><span class="string">        ]</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">            CORRECT　↓  for [0,0,3], 2</span></span><br><span class="line"><span class="string">        [   </span></span><br><span class="line"><span class="string">            [10, 0, 0, 0, 1],</span></span><br><span class="line"><span class="string">            [10, 1, 0, 0, 1],</span></span><br><span class="line"><span class="string">            [10, 1, 1, 0, 1],</span></span><br><span class="line"><span class="string">            [10, 1, 1, 1, 1],</span></span><br><span class="line"><span class="string">            [10, 1, 1, 1, 1],            </span></span><br><span class="line"><span class="string">        ]            </span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># T = [[0] * (m+2) for _ in range(n+2)]   # WRONG!!!</span></span><br><span class="line">        T = [[<span class="number">0</span>] * (n+<span class="number">2</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(n+<span class="number">2</span>)]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n+<span class="number">2</span>):</span><br><span class="line">            T[i][<span class="number">0</span>] = <span class="number">10</span></span><br><span class="line">            T[i][<span class="number">-1</span>] = <span class="number">1</span></span><br><span class="line">        <span class="comment"># print("T: \n&#123;&#125;".format(T))</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n+<span class="number">2</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, n+<span class="number">2</span>):</span><br><span class="line">                <span class="keyword">if</span> i &gt;= j:</span><br><span class="line">                    T[i][j] = <span class="number">1</span></span><br><span class="line">        print(<span class="string">"T OK: \n&#123;&#125;"</span>.format(T))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(m):</span><br><span class="line">            col = self.transform(T, col)</span><br><span class="line">            col[<span class="number">-1</span>] = <span class="number">3</span></span><br><span class="line">            print(col)</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">return</span> col[<span class="number">-2</span>]</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">transform</span><span class="params">(self, A, vec)</span>:</span>    <span class="comment"># diff frome general __mul__ 'cause of DIM issue, so better use class template...</span></span><br><span class="line">        n, m = len(A), len(A[<span class="number">0</span>])</span><br><span class="line">        print(n, m, len(vec))</span><br><span class="line">        k = <span class="number">1</span></span><br><span class="line">        C = [<span class="number">0</span> <span class="keyword">for</span> j <span class="keyword">in</span> range(n+<span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(m):</span><br><span class="line">                C[i] += A[i][j] * vec[j]</span><br><span class="line">        <span class="keyword">return</span> C</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># def mul(self, A, B):</span></span><br><span class="line">    <span class="comment">#     n, m, k = len(A), len(A[0]), len(B[0])</span></span><br><span class="line">    <span class="comment">#     print(n, m, len(B), k)</span></span><br><span class="line">    <span class="comment">#     C = [[0 for _ in range(k)] for _ in range(n)]</span></span><br><span class="line">    <span class="comment">#     for i in range(n):</span></span><br><span class="line">    <span class="comment">#         for t in range(k):</span></span><br><span class="line">    <span class="comment">#             for j in range(m):</span></span><br><span class="line">    <span class="comment">#                 C[i][t] = A[i][j] * B[j][t]</span></span><br><span class="line">    <span class="comment">#     return C</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">O_N_TLE</span><span class="params">(self, X, m)</span>:</span></span><br><span class="line">        n = len(X)</span><br><span class="line">        <span class="comment"># T = [[0] * (m+1) for _ in range(n+1)]</span></span><br><span class="line">        col = [<span class="number">0</span>] * (n+<span class="number">1</span>)</span><br><span class="line">        col[<span class="number">0</span>] = <span class="number">23</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># for j in range(1, m+1):</span></span><br><span class="line">        <span class="comment">#     T[0][j] = 10*T[0][j-1] +  3</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n+<span class="number">1</span>):</span><br><span class="line">            col[i] = X[i<span class="number">-1</span>]</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, m+<span class="number">1</span>):</span><br><span class="line">            <span class="comment"># print(T)</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, n+<span class="number">1</span>):</span><br><span class="line">                <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">                    col[i] = <span class="number">10</span> * col[i] + <span class="number">3</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    col[i] = col[i] + col[i<span class="number">-1</span>]</span><br><span class="line">            </span><br><span class="line">        <span class="comment"># print(T)</span></span><br><span class="line">        <span class="keyword">return</span> col[n] % MOD</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">O_NxM_MLE</span><span class="params">(self, X, m)</span>:</span></span><br><span class="line">        n = len(X)</span><br><span class="line">        T = [[<span class="number">0</span>] * (m+<span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(n+<span class="number">1</span>)]</span><br><span class="line">        T[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">23</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, m+<span class="number">1</span>):</span><br><span class="line">            T[<span class="number">0</span>][j] = <span class="number">10</span>*T[<span class="number">0</span>][j<span class="number">-1</span>] +  <span class="number">3</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n+<span class="number">1</span>):</span><br><span class="line">            T[i][<span class="number">0</span>] = X[i<span class="number">-1</span>]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># print(T)</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n+<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, m+<span class="number">1</span>):</span><br><span class="line">                T[i][j] = T[i<span class="number">-1</span>][j] + T[j][i<span class="number">-1</span>]</span><br><span class="line">        <span class="comment"># print(T)</span></span><br><span class="line">        <span class="keyword">return</span> T[n][m] % MOD</span><br></pre></td></tr></table></figure>



<h2 id="前綴和的定義和實現"><a href="#前綴和的定義和實現" class="headerlink" title="前綴和的定義和實現"></a>前綴和的定義和實現</h2><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfnnqe58rzj30qg0cg77y.jpg" alt="image-20200611002631135"></p>
<p>![image-20200611002923263](/Users/joe/Library/Application Support/typora-user-images/image-20200611002923263.png)</p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfnnwnq0x7j30ue0eg79y.jpg" alt="image-20200611003241851"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfnny2cwesj30ts0cmzmq.jpg" alt="image-20200611003404254"></p>
<h4 id="2D"><a href="#2D" class="headerlink" title="2D"></a>2D</h4><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfpably4w2j30ue0em44a.jpg" alt="image-20200612101348111"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfpaj7hx6oj30tu0emqde.jpg" alt="image-20200612102108325"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfpajm0uz8j30tu0dw0xw.jpg" alt="image-20200612102132182"></p>
<h4 id="動規V-S-前綴和"><a href="#動規V-S-前綴和" class="headerlink" title="動規V.S.前綴和"></a>動規V.S.前綴和</h4><ul>
<li><p>前綴和是一種特殊的動規</p>
</li>
<li><p>e.g.</p>
<ul>
<li><p>打劫房屋</p>
</li>
<li><p>不同路徑2D DP, 也是一種前綴和、DP、</p>
</li>
<li><p>爬樓梯</p>
<ul>
<li>dp = dp[i-1] + dp[i-2]</li>
</ul>
</li>
<li><p>股票</p>
<ul>
<li><p>DP思維: dp[i] profit</p>
<ul>
<li>dp[i] = max(dp[i-1], a[i] - min_cost)</li>
</ul>
</li>
<li><p>前綴思想：</p>
<ul>
<li><p>前綴最小值</p>
<p>Min_price, max_profit</p>
</li>
</ul>
</li>
<li><p>思維路徑：</p>
<ul>
<li>先想簡單的方法試起<ol>
<li>前綴<ol>
<li>前綴最小、最大</li>
<li>前綴和</li>
</ol>
</li>
<li>雙指針</li>
</ol>
</li>
<li>再想進階的辦法<ol>
<li>動規</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
<li><p>簡單法做起</p>
</li>
</ul>
</li>
</ul>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Joe Huang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://yoursite.com/2019/05/30/Algo.%20Ult./seminar_2%20&amp;%203/">http://yoursite.com/2019/05/30/Algo.%20Ult./seminar_2%20&amp;%203/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2019/06/07/Web/2019-06-07-Requests'%20secret:%20pool_connections%20and%20pool_maxsize/"><i class="fa fa-chevron-left">  </i><span>Web/2019-06-07-Requests' secret: pool_connections and pool_maxsize</span></a></div><div class="next-post pull-right"><a href="/2019/05/23/Algo.%20Ult./seminar_1/"><span>Algo. Ult./seminar_1</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2020 By Joe Huang</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>