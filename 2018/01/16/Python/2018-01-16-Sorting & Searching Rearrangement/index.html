<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Python/2018-01-16-Sorting &amp; Searching Rearrangement"><meta name="keywords" content=""><meta name="author" content="Joe Huang"><meta name="copyright" content="Joe Huang"><title>Python/2018-01-16-Sorting &amp; Searching Rearrangement | Awaken Desparado</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 4.1.1"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#I-Sort"><span class="toc-number">1.</span> <span class="toc-text">I-Sort</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#B-Sort"><span class="toc-number">2.</span> <span class="toc-text">B-Sort</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#S-Sort"><span class="toc-number">3.</span> <span class="toc-text">S-Sort</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#H-sort-Heap-sort"><span class="toc-number">4.</span> <span class="toc-text">H-sort, Heap-sort</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Fina-Style-fr-G4G"><span class="toc-number">4.1.</span> <span class="toc-text">Fina Style, fr, G4G</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Heap"><span class="toc-number">5.</span> <span class="toc-text">Heap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Priority-Queu"><span class="toc-number">6.</span> <span class="toc-text">Priority Queu</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Q-Sort"><span class="toc-number">7.</span> <span class="toc-text">Q-Sort</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Final-Style-Small-to-Large"><span class="toc-number">7.1.</span> <span class="toc-text">Final Style: Small to Large</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Q-Select"><span class="toc-number">8.</span> <span class="toc-text">Q-Select</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Q-Select-Recursive-K-largest"><span class="toc-number">8.1.</span> <span class="toc-text">Q-Select Recursive, K largest</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Code"><span class="toc-number">8.1.1.</span> <span class="toc-text">Code</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Median"><span class="toc-number">8.2.</span> <span class="toc-text">Median</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#M-Sort"><span class="toc-number">9.</span> <span class="toc-text">M-Sort</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Final-Style-more-record-of-mine-on-464"><span class="toc-number">9.1.</span> <span class="toc-text">Final Style, more record of mine on 464</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Reverse-Pairs"><span class="toc-number">9.2.</span> <span class="toc-text">Reverse Pairs</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cyclic-Sort"><span class="toc-number">10.</span> <span class="toc-text">Cyclic-Sort</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Rehash"><span class="toc-number">11.</span> <span class="toc-text">Rehash</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#B-Tree-amp-B-Tree"><span class="toc-number"></span> <span class="toc-text">B Tree &amp; B+ Tree</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#●-B-Tree-Balance-Tree"><span class="toc-number">1.</span> <span class="toc-text">● B Tree - Balance Tree</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#●-B"><span class="toc-number">2.</span> <span class="toc-text">● B+</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Joe Huang</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">276</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">25</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">39</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Awaken Desparado</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">Python/2018-01-16-Sorting &amp; Searching Rearrangement</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-01-16</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Python/">Python</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h3 id="I-Sort"><a href="#I-Sort" class="headerlink" title="I-Sort"></a>I-Sort</h3><p>Used when playing pokers</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">arr</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, len(A)):</span><br><span class="line">  val = A[i]</span><br><span class="line">  j = i<span class="number">-1</span></span><br><span class="line">  <span class="keyword">while</span> j&gt;=<span class="number">0</span> <span class="keyword">and</span> A[j]&gt;val:</span><br><span class="line">    A[j+<span class="number">1</span>] = A[j]</span><br><span class="line">    j -= <span class="number">1</span></span><br><span class="line">  A[j+<span class="number">1</span>] = val</span><br></pre></td></tr></table></figure>

<p>O(n), O(n^2) Worst when inversed sorted.</p>
<h3 id="B-Sort"><a href="#B-Sort" class="headerlink" title="B-Sort"></a>B-Sort</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">b_sort</span><span class="params">(A=[<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>])</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(A)):</span><br><span class="line">        swapped = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>, len(A)-i<span class="number">-1</span>):</span><br><span class="line">            <span class="keyword">if</span> A[j] &gt; A[j+<span class="number">1</span>]:</span><br><span class="line">                <span class="comment"># A[j] = A[j+1]</span></span><br><span class="line">                A[j], A[j+<span class="number">1</span>] = A[j+<span class="number">1</span>], A[j]</span><br><span class="line">                swapped = <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line">        <span class="keyword">if</span> swapped == <span class="literal">False</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">b_sort() </span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">final_count = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, n):</span><br><span class="line">    round_count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>, n-i<span class="number">-1</span>):</span><br><span class="line">        <span class="keyword">if</span> a[j] &gt; a[j+<span class="number">1</span>]:</span><br><span class="line">            round_count += <span class="number">1</span></span><br><span class="line">            a[j], a[j+<span class="number">1</span>] = a[j+<span class="number">1</span>], a[j]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> round_count == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    final_count += round_count</span><br></pre></td></tr></table></figure>

<p>O(n), O(n^2) Worst when inversed sorted.</p>
<h3 id="S-Sort"><a href="#S-Sort" class="headerlink" title="S-Sort"></a>S-Sort</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(A)):</span><br><span class="line">  min_idx = i</span><br><span class="line">  <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, len(A)):</span><br><span class="line">    <span class="keyword">if</span> A[j] &lt; A[min_idx]:</span><br><span class="line">      min_idx = j</span><br><span class="line">  A[i], A[min_idx] = A[min_idx], A[i]</span><br></pre></td></tr></table></figure>

<p>O(n^2), O(n^2)</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayoeij9eoj31620h8wpf.jpg" alt="image-20200116202922983"></p>
<h3 id="H-sort-Heap-sort"><a href="#H-sort-Heap-sort" class="headerlink" title="H-sort, Heap-sort"></a>H-sort, Heap-sort</h3><h4 id="Fina-Style-fr-G4G"><a href="#Fina-Style-fr-G4G" class="headerlink" title="Fina Style, fr, G4G"></a>Fina Style, fr, G4G</h4><p><a href="https://www.youtube.com/watch?v=JSmFZMJURug" target="_blank" rel="noopener">https://www.youtube.com/watch?v=JSmFZMJURug</a></p>
<p><a href="https://www.bilibili.com/video/av18980178/" target="_blank" rel="noopener">https://www.bilibili.com/video/av18980178/</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python program for implementation of heap Sort </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># To heapify subtree rooted at index i. </span></span><br><span class="line"><span class="comment"># n is size of heap </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">heapify</span><span class="params">(arr, n, i)</span>:</span> </span><br><span class="line">    largest = i <span class="comment"># Initialize largest as root </span></span><br><span class="line">    l = <span class="number">2</span> * i + <span class="number">1</span>     <span class="comment"># left = 2*i + 1 </span></span><br><span class="line">    r = <span class="number">2</span> * i + <span class="number">2</span>     <span class="comment"># right = 2*i + 2 </span></span><br><span class="line">  </span><br><span class="line">    <span class="comment"># See if left child of root exists and is </span></span><br><span class="line">    <span class="comment"># greater than root </span></span><br><span class="line">    <span class="keyword">if</span> l &lt; n <span class="keyword">and</span> arr[i] &lt; arr[l]: </span><br><span class="line">        largest = l </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># See if right child of root exists and is </span></span><br><span class="line">    <span class="comment"># greater than root </span></span><br><span class="line">    <span class="keyword">if</span> r &lt; n <span class="keyword">and</span> arr[largest] &lt; arr[r]: </span><br><span class="line">        largest = r </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># Change root, if needed </span></span><br><span class="line">    <span class="keyword">if</span> largest != i: </span><br><span class="line">        arr[i],arr[largest] = arr[largest],arr[i] <span class="comment"># swap </span></span><br><span class="line">  </span><br><span class="line">        <span class="comment"># Heapify the root. </span></span><br><span class="line">        heapify(arr, n, largest) </span><br><span class="line">  </span><br><span class="line"><span class="comment"># The main function to sort an array of given size </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">heapSort</span><span class="params">(arr)</span>:</span> </span><br><span class="line">    n = len(arr) </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># Build a maxheap. </span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n, <span class="number">-1</span>, <span class="number">-1</span>): </span><br><span class="line">        heapify(arr, n, i) </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># One by one extract elements </span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n<span class="number">-1</span>, <span class="number">0</span>, <span class="number">-1</span>): </span><br><span class="line">        arr[i], arr[<span class="number">0</span>] = arr[<span class="number">0</span>], arr[i] <span class="comment"># swap </span></span><br><span class="line">        heapify(arr, i, <span class="number">0</span>) </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Driver code to test above </span></span><br><span class="line">arr = [ <span class="number">12</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>] </span><br><span class="line">heapSort(arr) </span><br><span class="line">n = len(arr) </span><br><span class="line"><span class="keyword">print</span> (<span class="string">"Sorted array is"</span>) </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(n): </span><br><span class="line">    <span class="keyword">print</span> (<span class="string">"%d"</span> %arr[i]), </span><br><span class="line"><span class="comment"># This code is contributed by Mohit Kumra</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayphqqjdqj311w0tkgso.jpg" alt="image-20200116210706828"></p>
<hr>
<h3 id="Heap"><a href="#Heap" class="headerlink" title="Heap"></a>Heap</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinHeap</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.heapList = [<span class="number">0</span>]</span><br><span class="line">        self.currentSize = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">percUp</span><span class="params">(self,i)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> i // <span class="number">2</span> &gt; <span class="number">0</span>:</span><br><span class="line">          <span class="keyword">if</span> self.heapList[i] &lt; self.heapList[i // <span class="number">2</span>]:</span><br><span class="line">             tmp = self.heapList[i // <span class="number">2</span>]</span><br><span class="line">             self.heapList[i // <span class="number">2</span>] = self.heapList[i]</span><br><span class="line">             self.heapList[i] = tmp</span><br><span class="line">          i = i // <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">insert</span><span class="params">(self,k)</span>:</span></span><br><span class="line">      self.heapList.append(k)</span><br><span class="line">      self.currentSize = self.currentSize + <span class="number">1</span></span><br><span class="line">      self.percUp(self.currentSize)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">percDown</span><span class="params">(self,i)</span>:</span></span><br><span class="line">      <span class="keyword">while</span> (i * <span class="number">2</span>) &lt;= self.currentSize:</span><br><span class="line">          mc = self.minChild(i)</span><br><span class="line">          <span class="keyword">if</span> self.heapList[i] &gt; self.heapList[mc]:</span><br><span class="line">              tmp = self.heapList[i]</span><br><span class="line">              self.heapList[i] = self.heapList[mc]</span><br><span class="line">              self.heapList[mc] = tmp</span><br><span class="line">          i = mc</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minChild</span><span class="params">(self,i)</span>:</span></span><br><span class="line">      <span class="keyword">if</span> i * <span class="number">2</span> + <span class="number">1</span> &gt; self.currentSize:</span><br><span class="line">          <span class="keyword">return</span> i * <span class="number">2</span></span><br><span class="line">      <span class="keyword">else</span>:</span><br><span class="line">          <span class="keyword">if</span> self.heapList[i*<span class="number">2</span>] &lt; self.heapList[i*<span class="number">2</span>+<span class="number">1</span>]:</span><br><span class="line">              <span class="keyword">return</span> i * <span class="number">2</span></span><br><span class="line">          <span class="keyword">else</span>:</span><br><span class="line">              <span class="keyword">return</span> i * <span class="number">2</span> + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">delMin</span><span class="params">(self)</span>:</span></span><br><span class="line">      retval = self.heapList[<span class="number">1</span>]</span><br><span class="line">      self.heapList[<span class="number">1</span>] = self.heapList[self.currentSize]</span><br><span class="line">      self.currentSize = self.currentSize - <span class="number">1</span></span><br><span class="line">      self.heapList.pop()</span><br><span class="line">      self.percDown(<span class="number">1</span>)</span><br><span class="line">      <span class="keyword">return</span> retval</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">buildHeap</span><span class="params">(self,alist)</span>:</span></span><br><span class="line">      i = len(alist) // <span class="number">2</span></span><br><span class="line">      self.currentSize = len(alist)</span><br><span class="line">      self.heapList = [<span class="number">0</span>] + alist[:]</span><br><span class="line">      <span class="keyword">while</span> (i &gt; <span class="number">0</span>):</span><br><span class="line">          self.percDown(i)</span><br><span class="line">          i = i - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">bh = BinHeap()</span><br><span class="line">bh.buildHeap([<span class="number">9</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line">print(bh.delMin())</span><br><span class="line">print(bh.delMin())</span><br><span class="line">print(bh.delMin())</span><br><span class="line">print(bh.delMin())</span><br><span class="line">print(bh.delMin())</span><br></pre></td></tr></table></figure>

<p>copied fr: <a href="https://runestone.academy/runestone/books/published/pythonds/Trees/BinaryHeapImplementation.html" target="_blank" rel="noopener">https://runestone.academy/runestone/books/published/pythonds/Trees/BinaryHeapImplementation.html</a></p>
<p>Also, </p>
<ol>
<li><a href="https://alrightchiu.github.io/SecondRound/comparison-sort-heap-sortdui-ji-pai-xu-fa.html" target="_blank" rel="noopener">https://alrightchiu.github.io/SecondRound/comparison-sort-heap-sortdui-ji-pai-xu-fa.html</a></li>
<li><a href="https://blog.csdn.net/lighthear/article/details/79945528" target="_blank" rel="noopener">https://blog.csdn.net/lighthear/article/details/79945528</a></li>
</ol>
<h3 id="Priority-Queu"><a href="#Priority-Queu" class="headerlink" title="Priority Queu"></a>Priority Queu</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Abstract &amp; Encapsulate</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PriorityQueue</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, cmp = lambda x, y: x &gt; y)</span>:</span></span><br><span class="line">        self.container = []</span><br><span class="line">        self.getKey = functools.cmp_to_key(</span><br><span class="line">            <span class="keyword">lambda</span> x, y: <span class="number">-1</span> <span class="keyword">if</span> cmp(x, y) <span class="keyword">else</span> <span class="number">1</span> <span class="keyword">if</span> cmp(y, x) <span class="keyword">else</span> <span class="number">0</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">push</span><span class="params">(self, item)</span>:</span></span><br><span class="line">        heapq.heappush(self.container, (self.getKey(item), item))</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pop</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> heapq.heappop(self.container)[<span class="number">1</span>]</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># 使用样例 1</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------------------------</span></span><br><span class="line">pq = PriorityQueue()</span><br><span class="line"> </span><br><span class="line">pq.push(<span class="number">1</span>)</span><br><span class="line">pq.push(<span class="number">2</span>)</span><br><span class="line">pq.push(<span class="number">3</span>)</span><br><span class="line"> </span><br><span class="line">print(pq.pop())</span><br><span class="line">print(pq.pop())</span><br><span class="line">print(pq.pop())</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># 使用样例 2</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------------------------</span></span><br><span class="line">pq = PriorityQueue(<span class="keyword">lambda</span> x, y: x[<span class="number">0</span>] &lt; y[<span class="number">0</span>])</span><br><span class="line"> </span><br><span class="line">pq.push((<span class="number">4</span>, <span class="number">3</span>))</span><br><span class="line">pq.push((<span class="number">3</span>, <span class="number">2</span>))</span><br><span class="line">pq.push((<span class="number">2</span>, <span class="number">1</span>))</span><br><span class="line"> </span><br><span class="line">print(pq.pop())</span><br><span class="line">print(pq.pop())</span><br><span class="line">print(pq.pop())</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line"><span class="comment"># (2, 1)</span></span><br><span class="line"><span class="comment"># (3, 2)</span></span><br><span class="line"><span class="comment"># (4, 3)</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># 使用样例 3</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------------------------</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x, y, z)</span>:</span></span><br><span class="line">        self.x = x</span><br><span class="line">        self.y = y</span><br><span class="line">        self.z = z</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> str(self.__dict__)</span><br><span class="line"> </span><br><span class="line">pq = PriorityQueue(<span class="keyword">lambda</span> l, r: l.y &gt; r.y <span class="keyword">if</span> l.x == r.x <span class="keyword">else</span> l.x &lt; r.x)</span><br><span class="line"> </span><br><span class="line">pq.push(Point(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line">pq.push(Point(<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>))</span><br><span class="line">pq.push(Point(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>))</span><br><span class="line"> </span><br><span class="line">print(pq.pop())</span><br><span class="line">print(pq.pop())</span><br><span class="line">print(pq.pop())</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line"><span class="comment"># &#123;'x': 1, 'y': 2, 'z': 3&#125;</span></span><br><span class="line"><span class="comment"># &#123;'x': 4, 'y': 5, 'z': 6&#125;</span></span><br><span class="line"><span class="comment"># &#123;'x': 4, 'y': 3, 'z': 2&#125;</span></span><br></pre></td></tr></table></figure>



<h3 id="Q-Sort"><a href="#Q-Sort" class="headerlink" title="Q-Sort"></a>Q-Sort</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This function takes last element as pivot, places </span></span><br><span class="line"><span class="comment"># the pivot element at its correct position in sorted </span></span><br><span class="line"><span class="comment"># array, and places all smaller (smaller than pivot) </span></span><br><span class="line"><span class="comment"># to left of pivot and all greater elements to right </span></span><br><span class="line"><span class="comment"># of pivot </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">partition</span><span class="params">(arr,low,high)</span>:</span> </span><br><span class="line">    i = ( low<span class="number">-1</span> )         <span class="comment"># index of smaller element </span></span><br><span class="line">    pivot = arr[high]     <span class="comment"># pivot </span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(low , high): </span><br><span class="line">  </span><br><span class="line">        <span class="comment"># If current element is smaller than or </span></span><br><span class="line">        <span class="comment"># equal to pivot </span></span><br><span class="line">        <span class="keyword">if</span>   arr[j] &lt;= pivot: </span><br><span class="line">          </span><br><span class="line">            <span class="comment"># increment index of smaller element </span></span><br><span class="line">            i = i+<span class="number">1</span> </span><br><span class="line">            arr[i],arr[j] = arr[j],arr[i] </span><br><span class="line">  </span><br><span class="line">    arr[i+<span class="number">1</span>],arr[high] = arr[high],arr[i+<span class="number">1</span>] </span><br><span class="line">    <span class="keyword">return</span> ( i+<span class="number">1</span> ) </span><br><span class="line">  </span><br><span class="line"><span class="comment"># The main function that implements QuickSort </span></span><br><span class="line"><span class="comment"># arr[] --&gt; Array to be sorted, </span></span><br><span class="line"><span class="comment"># low  --&gt; Starting index, </span></span><br><span class="line"><span class="comment"># high  --&gt; Ending index </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># Function to do Quick sort </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">quickSort</span><span class="params">(arr,low,high)</span>:</span> </span><br><span class="line">    <span class="keyword">if</span> low &lt; high: </span><br><span class="line">  </span><br><span class="line">        <span class="comment"># pi is partitioning index, arr[p] is now </span></span><br><span class="line">        <span class="comment"># at right place </span></span><br><span class="line">        pi = partition(arr,low,high) </span><br><span class="line">  </span><br><span class="line">        <span class="comment"># Separately sort elements before </span></span><br><span class="line">        <span class="comment"># partition and after partition </span></span><br><span class="line">        quickSort(arr, low, pi<span class="number">-1</span>) </span><br><span class="line">        quickSort(arr, pi+<span class="number">1</span>, high)</span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">data = [<span class="number">89</span>, <span class="number">34</span>, <span class="number">23</span>, <span class="number">78</span>, <span class="number">67</span>, <span class="number">100</span>, <span class="number">66</span>, <span class="number">29</span>, <span class="number">79</span>, <span class="number">55</span>, <span class="number">78</span>, <span class="number">88</span>, <span class="number">92</span>, <span class="number">96</span>, <span class="number">96</span>, <span class="number">23</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">quicksort</span><span class="params">(data, left, right)</span>:</span> <span class="comment"># 輸入資料，和從兩邊開始的位置</span></span><br><span class="line">    <span class="keyword">if</span> left &gt;= right :            <span class="comment"># 如果左邊大於右邊，就跳出function</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    i = left                      <span class="comment"># 左邊的代理人</span></span><br><span class="line">    j = right                     <span class="comment"># 右邊的代理人</span></span><br><span class="line">    key = data[left]                 <span class="comment"># 基準點</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> i != j:                  </span><br><span class="line">        <span class="keyword">while</span> data[j] &gt; key <span class="keyword">and</span> i &lt; j:   <span class="comment"># 從右邊開始找，找比基準點小的值</span></span><br><span class="line">            j -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> data[i] &lt;= key <span class="keyword">and</span> i &lt; j:  <span class="comment"># 從左邊開始找，找比基準點大的值</span></span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> i &lt; j:                        <span class="comment"># 當左右代理人沒有相遇時，互換值</span></span><br><span class="line">            data[i], data[j] = data[j], data[i] </span><br><span class="line"></span><br><span class="line">    <span class="comment"># 將基準點歸換至代理人相遇點</span></span><br><span class="line">    data[left] = data[i] </span><br><span class="line">    data[i] = key</span><br><span class="line"></span><br><span class="line">    quicksort(data, left, i<span class="number">-1</span>)   <span class="comment"># 繼續處理較小部分的子循環</span></span><br><span class="line">    quicksort(data, i+<span class="number">1</span>, right)  <span class="comment"># 繼續處理較大部分的子循環</span></span><br><span class="line"></span><br><span class="line">quicksort(data, <span class="number">0</span>, len(data)<span class="number">-1</span>)</span><br><span class="line">print(data)</span><br></pre></td></tr></table></figure>



<h4 id="Final-Style-Small-to-Large"><a href="#Final-Style-Small-to-Large" class="headerlink" title="Final Style: Small to Large"></a>Final Style: Small to Large</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Q_Sort</span><span class="params">(self, nums, left, right)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> left &gt; right:</span><br><span class="line">        <span class="keyword">return</span> </span><br><span class="line">        </span><br><span class="line">    pivot = nums[left]</span><br><span class="line">    i, j = left, right</span><br><span class="line">    <span class="keyword">while</span> i &lt;= j:</span><br><span class="line">        <span class="keyword">while</span> i &lt;= j <span class="keyword">and</span> nums[i] &lt; pivot:</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> i &lt;= j <span class="keyword">and</span> nums[j] &gt; pivot:</span><br><span class="line">            j -= <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> i &lt;= j:</span><br><span class="line">            nums[i], nums[j] = nums[j], nums[i]</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">            j -= <span class="number">1</span></span><br><span class="line">    <span class="comment"># print(i, j)</span></span><br><span class="line">    self.Q_Sort(nums, left, j)</span><br><span class="line">    self.Q_Sort(nums, i, right)</span><br></pre></td></tr></table></figure>



<h3 id="Q-Select"><a href="#Q-Select" class="headerlink" title="Q-Select"></a>Q-Select</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">kClosest</span><span class="params">(self, points: <span class="string">'List[List[int]]'</span>, K: <span class="string">'int'</span>)</span> -&gt; 'List[List[int]]':</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Time complexity : O(N)</span></span><br><span class="line">        <span class="comment"># Space complexity : O(1)</span></span><br><span class="line">        </span><br><span class="line">        dist = <span class="keyword">lambda</span> x : points[x][<span class="number">0</span>]**<span class="number">2</span> + points[x][<span class="number">1</span>]**<span class="number">2</span></span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">quickselect</span><span class="params">(l, r, K)</span>:</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">while</span> l &lt; r :</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># To avoid the worst case</span></span><br><span class="line">                i = random.randint(l, r)</span><br><span class="line">                points[i], points[l] = points[l], points[i]</span><br><span class="line">                </span><br><span class="line">                mid = partition(l, r)</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> K &gt; mid :</span><br><span class="line">                    l = mid+<span class="number">1</span></span><br><span class="line">                <span class="keyword">elif</span> K &lt; mid :</span><br><span class="line">                    r = mid<span class="number">-1</span></span><br><span class="line">                <span class="keyword">else</span> :</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">            </span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">partition</span><span class="params">(l, r)</span>:</span></span><br><span class="line">            </span><br><span class="line">            i = l <span class="comment"># start index</span></span><br><span class="line">            pivot = dist(i)</span><br><span class="line">            </span><br><span class="line">            l += <span class="number">1</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">while</span> <span class="literal">True</span> :</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">while</span> l&lt;r <span class="keyword">and</span> dist(l)&lt;pivot:</span><br><span class="line">                    l+=<span class="number">1</span></span><br><span class="line">                    </span><br><span class="line">                <span class="keyword">while</span> l&lt;=r <span class="keyword">and</span> dist(r)&gt;=pivot:</span><br><span class="line">                    r-=<span class="number">1</span></span><br><span class="line">                    </span><br><span class="line">                <span class="keyword">if</span> l&gt;=r:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                </span><br><span class="line">                points[l], points[r] = points[r], points[l]</span><br><span class="line">                </span><br><span class="line">            points[r], points[i] = points[i], points[r]</span><br><span class="line">            <span class="keyword">return</span> r</span><br><span class="line">            </span><br><span class="line">        quickselect(<span class="number">0</span>, len(points)<span class="number">-1</span>, K)</span><br><span class="line">        <span class="keyword">return</span> points[:K]</span><br></pre></td></tr></table></figure>

<p>The worst-case time taken by a randomized quick-select is not O(n). It is O(n^2).<br>{The worst case is when you want to select the minimum element and your pivot at every stage happens to be the last element in the list at that stage.Comment if you didn’t get this.}</p>
<p>However the expected time taken by a randomized quick-select is O(n).<br>I hope you understand the difference.</p>
<p>4.7k views · <a href="https://www.quora.com/How-is-time-taken-by-a-randomized-quick-select-algorithm-in-O-n#" target="_blank" rel="noopener">View Upvoters</a></p>
<h4 id="Q-Select-Recursive-K-largest"><a href="#Q-Select-Recursive-K-largest" class="headerlink" title="Q-Select Recursive, K largest"></a>Q-Select Recursive, K largest</h4><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggis7t29ubj30q00e03zo.jpg" alt="image-20200707211441434"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ggis76piakj30ni0kygrn.jpg" alt="image-20200707223346040"></p>
<h5 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">kthLargestElement</span><span class="params">(self, n, nums)</span>:</span></span><br><span class="line">    <span class="comment"># write your code here</span></span><br><span class="line">    <span class="keyword">return</span> self.Q_select(nums, <span class="number">0</span>, len(nums)<span class="number">-1</span>, n)</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Q_select</span><span class="params">(self, nums, left, right, k)</span>:</span></span><br><span class="line">    pivot = nums[left]</span><br><span class="line">    i, j = left, right</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> i &lt;= j:    </span><br><span class="line">        <span class="keyword">while</span> i &lt;= j <span class="keyword">and</span> nums[i] &gt; pivot:</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> i &lt;= j <span class="keyword">and</span> nums[j] &lt; pivot:</span><br><span class="line">            j -= <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> i &lt;= j:</span><br><span class="line">            tmp = nums[i]</span><br><span class="line">            nums[i] = nums[j]</span><br><span class="line">            nums[j] = tmp</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">            j -= <span class="number">1</span></span><br><span class="line">    <span class="comment"># print(nums)</span></span><br><span class="line">    <span class="comment"># if k &lt;= j:</span></span><br><span class="line">    <span class="keyword">if</span> left + k - <span class="number">1</span> &lt;= j:</span><br><span class="line">        <span class="keyword">return</span> self.Q_select(nums, left, j, k)</span><br><span class="line">    <span class="comment"># if k &gt;= i:</span></span><br><span class="line">    <span class="keyword">if</span> left + k - <span class="number">1</span> &gt;= i:</span><br><span class="line">        <span class="keyword">return</span> self.Q_select(nums, i, right, k-(i-left))</span><br><span class="line">    <span class="keyword">return</span> nums[j+<span class="number">1</span>]</span><br></pre></td></tr></table></figure>



<h4 id="Median"><a href="#Median" class="headerlink" title="Median"></a>Median</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    @param nums: A list of integers</span></span><br><span class="line"><span class="string">    @return: An integer denotes the middle number of the array</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">median</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="comment"># write your code here</span></span><br><span class="line">        n = len(nums)</span><br><span class="line">        k = <span class="number">0</span></span><br><span class="line">        <span class="comment"># if n % 2 == 1:</span></span><br><span class="line">        <span class="comment">#     k = n//2 + 1</span></span><br><span class="line">        <span class="comment"># else:</span></span><br><span class="line">        <span class="comment">#     k = n//2 + 1</span></span><br><span class="line">        k = n//<span class="number">2</span> + <span class="number">1</span>    <span class="comment"># Since I make it in DECENDING order</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> self.Q_select(nums, <span class="number">0</span>, n<span class="number">-1</span>, k)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Q_select</span><span class="params">(self, nums, left, right, k)</span>:</span></span><br><span class="line">        pivot = nums[left]</span><br><span class="line">        i, j = left, right</span><br><span class="line">        <span class="keyword">while</span> i &lt;= j:</span><br><span class="line">            <span class="keyword">while</span> i &lt;= j <span class="keyword">and</span> nums[i] &gt; pivot:</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> j &lt;= j <span class="keyword">and</span> nums[j] &lt; pivot:</span><br><span class="line">                j -= <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> i &lt;= j:</span><br><span class="line">                nums[i], nums[j] = nums[j], nums[i]</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">                j -= <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        offset_id = left + k - <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> offset_id &lt;= j:</span><br><span class="line">            <span class="keyword">return</span> self.Q_select(nums, left, j, k)</span><br><span class="line">        <span class="keyword">if</span> offset_id &gt;= i:</span><br><span class="line">            <span class="keyword">return</span> self.Q_select(nums, i, right, k-(i-left))</span><br><span class="line">        <span class="keyword">return</span> nums[j+<span class="number">1</span>]</span><br></pre></td></tr></table></figure>







<h3 id="M-Sort"><a href="#M-Sort" class="headerlink" title="M-Sort"></a>M-Sort</h3><p>Nxlg(N), where lg(N) is height</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python program for implementation of MergeSort </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mergeSort</span><span class="params">(arr)</span>:</span> </span><br><span class="line">    <span class="keyword">if</span> len(arr) &gt;<span class="number">1</span>: </span><br><span class="line">        mid = len(arr)//<span class="number">2</span> <span class="comment">#Finding the mid of the array </span></span><br><span class="line">        L = arr[:mid] <span class="comment"># Dividing the array elements  </span></span><br><span class="line">        R = arr[mid:] <span class="comment"># into 2 halves </span></span><br><span class="line">  </span><br><span class="line">        mergeSort(L) <span class="comment"># Sorting the first half </span></span><br><span class="line">        mergeSort(R) <span class="comment"># Sorting the second half </span></span><br><span class="line">  </span><br><span class="line">        i = j = k = <span class="number">0</span></span><br><span class="line">          </span><br><span class="line">        <span class="comment"># Copy data to temp arrays L[] and R[] </span></span><br><span class="line">        <span class="keyword">while</span> i &lt; len(L) <span class="keyword">and</span> j &lt; len(R): </span><br><span class="line">            <span class="keyword">if</span> L[i] &lt; R[j]: </span><br><span class="line">                arr[k] = L[i] </span><br><span class="line">                i+=<span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>: </span><br><span class="line">                arr[k] = R[j] </span><br><span class="line">                j+=<span class="number">1</span></span><br><span class="line">            k+=<span class="number">1</span></span><br><span class="line">          </span><br><span class="line">        <span class="comment"># Checking if any element was left </span></span><br><span class="line">        <span class="keyword">while</span> i &lt; len(L): </span><br><span class="line">            arr[k] = L[i] </span><br><span class="line">            i+=<span class="number">1</span></span><br><span class="line">            k+=<span class="number">1</span></span><br><span class="line">          </span><br><span class="line">        <span class="keyword">while</span> j &lt; len(R): </span><br><span class="line">            arr[k] = R[j] </span><br><span class="line">            j+=<span class="number">1</span></span><br><span class="line">            k+=<span class="number">1</span></span><br></pre></td></tr></table></figure>



<h4 id="Final-Style-more-record-of-mine-on-464"><a href="#Final-Style-more-record-of-mine-on-464" class="headerlink" title="Final Style, more record of mine on 464"></a>Final Style, more record of mine on 464</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">    <span class="string">""" M Sort """</span></span><br><span class="line">    temp = [<span class="number">0</span>] * len(A)</span><br><span class="line">    self.M_Sort(A, <span class="number">0</span>, len(A)<span class="number">-1</span>, temp)</span><br><span class="line">    <span class="keyword">return</span> A</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">M_Sort</span><span class="params">(self, nums, left, right, temp)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> left &gt;= right:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    mid = left + (right - left)//<span class="number">2</span></span><br><span class="line">    self.M_Sort(nums, left, mid, temp)</span><br><span class="line">    self.M_Sort(nums, mid+<span class="number">1</span>, right, temp)</span><br><span class="line">    </span><br><span class="line">    i, j = left, mid+<span class="number">1</span></span><br><span class="line">    <span class="comment"># k = 0</span></span><br><span class="line">    k = left    <span class="comment"># CRITICAL</span></span><br><span class="line">    <span class="keyword">while</span> i &lt;= mid <span class="keyword">and</span> j &lt;= right:</span><br><span class="line">        <span class="keyword">if</span> nums[i] &lt;= nums[j]:</span><br><span class="line">            temp[k] = nums[i]</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            temp[k] = nums[j]</span><br><span class="line">            j += <span class="number">1</span></span><br><span class="line">        k += <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> i &lt;= mid:</span><br><span class="line">        temp[k] = nums[i]</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">        k += <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> j &lt;= right:</span><br><span class="line">        temp[k] = nums[j]</span><br><span class="line">        j += <span class="number">1</span></span><br><span class="line">        k += <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> idx <span class="keyword">in</span> range(left, right+<span class="number">1</span>):</span><br><span class="line">        nums[idx] = temp[idx]</span><br></pre></td></tr></table></figure>



<h4 id="Reverse-Pairs"><a href="#Reverse-Pairs" class="headerlink" title="Reverse Pairs"></a>Reverse Pairs</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">reversePairs</span><span class="params">(self, A)</span>:</span></span><br><span class="line">    <span class="comment"># Write your code here</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> A:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    temp = [<span class="number">0</span>] * len(A)</span><br><span class="line">    <span class="keyword">return</span> self.M_Sort(A, <span class="number">0</span>, len(A)<span class="number">-1</span>, temp)</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">M_Sort</span><span class="params">(self, nums, left, right, temp)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> left &gt;= right:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">    mid = left + (right - left)//<span class="number">2</span></span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    count += self.M_Sort(nums, left, mid, temp)</span><br><span class="line">    count += self.M_Sort(nums, mid+<span class="number">1</span>, right, temp)</span><br><span class="line">    </span><br><span class="line">    i, j = left, mid + <span class="number">1</span></span><br><span class="line">    k = left</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> i &lt;= mid <span class="keyword">and</span> j &lt;= right:</span><br><span class="line">        <span class="keyword">if</span> nums[i] &lt;= nums[j]:</span><br><span class="line">        <span class="comment"># if nums[i] &lt; nums[j]:</span></span><br><span class="line">            temp[k] = nums[i]</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            temp[k] = nums[j]</span><br><span class="line">            j += <span class="number">1</span></span><br><span class="line">            count += mid + <span class="number">1</span> - i</span><br><span class="line">        k += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">while</span> i &lt;= mid:</span><br><span class="line">        temp[k] = nums[i]</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">        k += <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> j &lt;= right:</span><br><span class="line">        temp[k] = nums[j]</span><br><span class="line">        j += <span class="number">1</span></span><br><span class="line">        k += <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(left, right+<span class="number">1</span>):</span><br><span class="line">        nums[i] = temp[i]    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> count</span><br></pre></td></tr></table></figure>



<h3 id="Cyclic-Sort"><a href="#Cyclic-Sort" class="headerlink" title="Cyclic-Sort"></a>Cyclic-Sort</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">firstMissingPositive</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> nums:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        <span class="comment"># return self.BF(nums)</span></span><br><span class="line">        <span class="comment"># return self.helper_FAILED(nums)   # FAILED w/ N space</span></span><br><span class="line">        <span class="keyword">return</span> self.helper_cyclic_sort(nums)    <span class="comment"># STILL BUGGY, fixed.... &gt;&lt;</span></span><br><span class="line">        <span class="keyword">return</span> self.O_1_Hashing(nums)</span><br><span class="line">        <span class="keyword">return</span> self.sol_magic(nums)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sol_magic</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        nums.append(<span class="number">0</span>)</span><br><span class="line">        n = len(nums)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)): <span class="comment">#delete those useless elements</span></span><br><span class="line">            <span class="keyword">if</span> nums[i]&lt;<span class="number">0</span> <span class="keyword">or</span> nums[i]&gt;=n:</span><br><span class="line">                nums[i]=<span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)): <span class="comment">#use the index as the hash to record the frequency of each number</span></span><br><span class="line">            nums[nums[i]%n]+=n</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,len(nums)):</span><br><span class="line">            <span class="keyword">if</span> nums[i]/n==<span class="number">0</span>:</span><br><span class="line">                <span class="keyword">return</span> i</span><br><span class="line">        <span class="keyword">return</span> n</span><br><span class="line">      <span class="comment"># re: https://leetcode.com/problems/first-missing-positive/discuss/17080/Python-O(1)-space-O(n)-time-solution-with-explanation</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">helper_cyclic_sort</span><span class="params">(self, nums)</span>:</span>  <span class="comment"># 原地一直换直到找到自己</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        1 2 0 </span></span><br><span class="line"><span class="string">            i = 0: 2 1 0 =&gt; 0 1 2, j=0</span></span><br><span class="line"><span class="string">            i = 1: 0 1 2, j=1</span></span><br><span class="line"><span class="string">            i = 2: 0 1 2, j=2</span></span><br><span class="line"><span class="string">                        return j + 1 == 3</span></span><br><span class="line"><span class="string">            </span></span><br><span class="line"><span class="string">        3 4 -1 1 </span></span><br><span class="line"><span class="string">            i = 0: 1 4 -1 3 =&gt; 4 1 -1 3 ==&gt; OOR, j stand still</span></span><br><span class="line"><span class="string">            i = 1: 4 1 -1 3, j=1</span></span><br><span class="line"><span class="string">            i = 2: 4 1 -1 3, j stand still</span></span><br><span class="line"><span class="string">            i = 3: 4 1 -1 3            </span></span><br><span class="line"><span class="string">                        ==&gt; X! nums[] == -1, return 2  </span></span><br><span class="line"><span class="string">                        return j + 1 == 2</span></span><br><span class="line"><span class="string">                    </span></span><br><span class="line"><span class="string">        7 8 9 11 12 </span></span><br><span class="line"><span class="string">            i = 0: 7 8 9 11 12 =&gt; OOR, so, j stand still</span></span><br><span class="line"><span class="string">            i = 1: 7 8 9 11 12 =&gt; OOR, so, j stand still</span></span><br><span class="line"><span class="string">            i = 2: 7 8 9 11 12 =&gt; OOR, so, j stand still</span></span><br><span class="line"><span class="string">            i = 3: 7 8 9 11 12 =&gt; OOR, so, j stand still</span></span><br><span class="line"><span class="string">            i = 4: 7 8 9 11 12 =&gt; OOR, so, j stand still</span></span><br><span class="line"><span class="string">                        return j + 1 == 1</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        n = len(nums)</span><br><span class="line">        j = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n):</span><br><span class="line">            <span class="keyword">if</span> nums[i] &lt; <span class="number">0</span> <span class="keyword">or</span> nums[i] &gt; n:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            end = nums[i]<span class="number">-1</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># while nums[i] != nums[end]: #==&gt; TLE</span></span><br><span class="line">            <span class="keyword">while</span> nums[i] &gt; <span class="number">0</span> <span class="keyword">and</span> nums[i] &lt;= n <span class="keyword">and</span> nums[i] != nums[end]:</span><br><span class="line">                <span class="comment"># swap(nums, to, i)</span></span><br><span class="line">                nums[end], nums[i] = nums[i], nums[end]</span><br><span class="line">                end = nums[i] - <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">if</span> nums[i] != i+<span class="number">1</span>:</span><br><span class="line">                <span class="keyword">return</span> i+<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> n+<span class="number">1</span></span><br><span class="line"><span class="comment">#             while i != nums[i-1]:</span></span><br><span class="line"><span class="comment">#                 pos = nums[i-1]</span></span><br><span class="line"><span class="comment">#                 nums[i-1], nums[pos] = nums[pos], nums[i-1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#             # if i == nums[i-1]:</span></span><br><span class="line"><span class="comment">#             #     nums[i-1] = -1</span></span><br><span class="line"><span class="comment">#         i = 0</span></span><br><span class="line"><span class="comment">#         for i in range(0, n):</span></span><br><span class="line"><span class="comment">#             # if i != nums[i-1]:</span></span><br><span class="line"><span class="comment">#             if i+1 != nums[i]:</span></span><br><span class="line"><span class="comment">#                 return i+1 # if nums[i] != 1 else 2</span></span><br><span class="line"><span class="comment">#         return i + 1 if len(nums) &gt; 1 else 2</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">O_1_Hashing</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        3,4,-1,1    2</span></span><br><span class="line"><span class="string">        1,-1,3,4</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        f==hash : "nums[i]"" ==&gt; should be at pos of "nums[i]-1"</span></span><br><span class="line"><span class="string">                    1               0</span></span><br><span class="line"><span class="string">                    3               2</span></span><br><span class="line"><span class="string">                    4               3</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        n = len(nums)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="comment"># idx = nums[i]-1  BUGGY!!! INFINITE LOOP</span></span><br><span class="line">            <span class="comment"># while nums[i] &gt; 0 and nums[i] &lt;= n and nums[i] != nums[idx]:</span></span><br><span class="line">            <span class="keyword">while</span> nums[i] &gt; <span class="number">0</span> <span class="keyword">and</span> nums[i] &lt;= n <span class="keyword">and</span> nums[i] != nums[nums[i]<span class="number">-1</span>]:            </span><br><span class="line">                <span class="comment"># print(nums)</span></span><br><span class="line">                self.swap(nums, nums[i]<span class="number">-1</span>, i) <span class="comment"># stores nums[i] to nums[idx]</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">if</span> nums[i] != i+<span class="number">1</span>:  <span class="comment"># 3 should be at pos 2</span></span><br><span class="line">                <span class="keyword">return</span> i+<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> n+<span class="number">1</span>  <span class="comment"># also satisfy []</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">swap</span><span class="params">(self, nums, to, fr)</span>:</span></span><br><span class="line">        nums[to], nums[fr] = nums[fr], nums[to]</span><br><span class="line">    </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">helper_FAILED</span><span class="params">(self, nums)</span>:</span>  <span class="comment"># FAILED w/ N space</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        1 2 0 =&gt; 2 1 0 memo[2] =&gt; 2 1 0 memo[2]</span></span><br><span class="line"><span class="string">              =&gt; 0 1 2 memo[2]</span></span><br><span class="line"><span class="string">              =&gt; since 2 in memo, thus return i+1 == 3</span></span><br><span class="line"><span class="string">                        </span></span><br><span class="line"><span class="string">        3 4 -1 1 ==&gt; 1 4 -1 3 memo [1]</span></span><br><span class="line"><span class="string">                 ==&gt; when i == 1, notice 4 OOR</span></span><br><span class="line"><span class="string">                 ==&gt; check 1 in memo (start fr cur i)</span></span><br><span class="line"><span class="string">                 ==&gt; check 2 not in memo</span></span><br><span class="line"><span class="string">                                ==&gt; return 2</span></span><br><span class="line"><span class="string">                    </span></span><br><span class="line"><span class="string">        7 8 9 11 12 </span></span><br><span class="line"><span class="string">                ==&gt; when i == 0, notcie 7 OOR</span></span><br><span class="line"><span class="string">                ==&gt; check 0 not in memo (start fr cur i)</span></span><br><span class="line"><span class="string">                    is 0 valiid? No!</span></span><br><span class="line"><span class="string">                ==&gt; check 1 not in memo</span></span><br><span class="line"><span class="string">                                ==&gt; return 1</span></span><br><span class="line"><span class="string">                WRONG!</span></span><br><span class="line"><span class="string">                FAILED if 7 8 9 1 12</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        memo = set(nums)    <span class="comment"># ==&gt; O(N) space for checking!</span></span><br><span class="line">        n = len(nums)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">            <span class="keyword">if</span> nums[i] != i:</span><br><span class="line">                <span class="keyword">if</span> nums[i] &lt; n:</span><br><span class="line">                    nums[i], nums[nums[i]] = nums[nums[i]], nums[i]</span><br><span class="line">                    memo.add(nums[i])</span><br><span class="line">                <span class="keyword">else</span>:   <span class="comment"># OOR</span></span><br><span class="line">                    j = i</span><br><span class="line">                    <span class="comment"># if j in memo:</span></span><br><span class="line">                    <span class="comment">#     j += 1</span></span><br><span class="line">                    <span class="keyword">while</span> j <span class="keyword">in</span> memo:</span><br><span class="line">                        j += <span class="number">1</span></span><br><span class="line">                    <span class="keyword">return</span> j+<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> nums[i] + <span class="number">1</span></span><br><span class="line">                    </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">BF</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        nums.sort()     <span class="comment"># NxLog(N)</span></span><br><span class="line">        max_ = nums[<span class="number">-1</span>]</span><br><span class="line">        prev = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> n <span class="keyword">in</span> nums:</span><br><span class="line">            <span class="keyword">if</span> n &lt;= <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">if</span> n - prev &gt; <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">return</span> prev + <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                prev = n</span><br><span class="line">        <span class="keyword">return</span> prev+<span class="number">1</span></span><br></pre></td></tr></table></figure>



<h3 id="Rehash"><a href="#Rehash" class="headerlink" title="Rehash"></a>Rehash</h3><blockquote>
<p>1)<img src="https://tva1.sinaimg.cn/large/00831rSTgy1gcsoq9faroj30z80kadlq.jpg" alt="img"></p>
</blockquote>
<p>fr: <a href="https://blog.csdn.net/dalong3976/article/details/83934609" target="_blank" rel="noopener">https://blog.csdn.net/dalong3976/article/details/83934609</a></p>
<blockquote>
<p> HashMap的容量为什么是2的n次幂，和这个(n - 1) &amp; hash的计算方法有着千丝万缕的关系，符号&amp;是按位与的计算，这是位运算，计算机能直接运算，特别高效，按位与&amp;的计算方法是，只有当对应位置的数据都为1时，运算结果也为1，当HashMap的容量是2的n次幂时，(n-1)的2进制也就是1111111***111这样形式的，这样与添加元素的hash值进行位运算时，能够充分的散列，使得添加的元素均匀分布在HashMap的每个位置上，减少hash碰撞，下面举例进行说明。</p>
<p>  当HashMap的容量是16时，它的二进制是10000，(n-1)的二进制是01111，与hash值得计算结果如下：</p>
<p>上面四种情况我们可以看出，不同的hash值，和(n-1)进行位运算后，能够得出不同的值，使得添加的元素能够均匀分布在集合中不同的位置上，避免hash碰撞。</p>
<p>  下面就来看一下HashMap的容量不是2的n次幂的情况，当容量为10时，二进制为01010，(n-1)的二进制是01001，向里面添加同样的元素，结果为：</p>
<p>可以看出，有三个不同的元素进过&amp;运算得出了同样的结果，严重的hash碰撞了。</p>
<p>终上所述，HashMap计算添加元素的位置时，使用的位运算，这是特别高效的运算；另外，HashMap的初始容量是2的n次幂，扩容也是2倍的形式进行扩容，是因为容量是2的n次幂，可以使得添加的元素均匀分布在HashMap中的数组上，减少hash碰撞，避免形成链表的结构，使得查询效率降低！<br>————————————————<br>版权声明：本文为CSDN博主「猿人小郑」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href="https://blog.csdn.net/Apeopl/article/details/88935422" target="_blank" rel="noopener">https://blog.csdn.net/Apeopl/article/details/88935422</a></p>
</blockquote>
<p>fr: <a href="https://blog.csdn.net/Apeopl/article/details/88935422?depth_1-utm_source=distribute.pc_relevant.none-task&amp;utm_source=distribute.pc_relevant.none-task" target="_blank" rel="noopener">https://blog.csdn.net/Apeopl/article/details/88935422?depth_1-utm_source=distribute.pc_relevant.none-task&amp;utm_source=distribute.pc_relevant.none-task</a></p>
<h2 id="B-Tree-amp-B-Tree"><a href="#B-Tree-amp-B-Tree" class="headerlink" title="B Tree &amp; B+ Tree"></a>B Tree &amp; B+ Tree</h2><h3 id="●-B-Tree-Balance-Tree"><a href="#●-B-Tree-Balance-Tree" class="headerlink" title="● B Tree - Balance Tree"></a>● B Tree - Balance Tree</h3><p>indexing for binary search in b-tree</p>
<img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd48nzmag6j317o0n87i9.jpg" alt="image-20200323223850264" style="zoom:67%;" />

<p>Ref <a href="https://www.bilibili.com/video/BV1p7411k7nU?from=search&amp;seid=14903204102279559784" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1p7411k7nU?from=search&amp;seid=14903204102279559784</a></p>
<p>根滿了，根要拆</p>
<p>根沒滿要先走到葉</p>
<p>​    葉沒滿，就直接插入</p>
<p>​    葉滿了，就拆分葉</p>
<h3 id="●-B"><a href="#●-B" class="headerlink" title="● B+"></a>● B+</h3><p>a variation of B tree in which all of the values are stored in the leaf nodes. </p>
<img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd4wyavvudj30wq0no410.jpg" alt="image-20200324123910488" style="zoom:67%;" />



<img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd4x00n4irj30wa0o00vc.jpg" alt="image-20200324124051188" style="zoom:67%;" />





<p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd4x3uxztjj30vs0lewia.jpg" alt="image-20200324124439801"></p>
<ul>
<li>value of B trees are ordered from least to greatest, the keys in the internalnodes contain the smallest values from each of its children starting form the second one</li>
</ul>
<img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd4xb27uakj30o80lawhk.jpg" alt="image-20200324125126983" style="zoom:67%;" />



<img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd4xebkh46j30wa0kwwje.jpg" alt="image-20200324125436567" style="zoom:67%;" />

<p>ref: <a href="https://www.youtube.com/watch?v=49P_GDeMDRo" target="_blank" rel="noopener">https://www.youtube.com/watch?v=49P_GDeMDRo</a></p>
<p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd497dfsn8j310i0b0t9d.jpg" alt="image-20200323225728609"></p>
<p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd49b4ahnxj31ng0u0u0u.jpg" alt="image-20200323230114499"></p>
<img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd4w3w9wtxj30q407wq3e.jpg" alt="image-20200324120956031" style="zoom:67%;" /></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Joe Huang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://yoursite.com/2018/01/16/Python/2018-01-16-Sorting%20&amp;%20Searching%20Rearrangement/">http://yoursite.com/2018/01/16/Python/2018-01-16-Sorting%20&amp;%20Searching%20Rearrangement/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2018/02/13/C++/2018-02-13-LRU/"><i class="fa fa-chevron-left">  </i><span>C++/2018-02-13-LRU</span></a></div><div class="next-post pull-right"><a href="/2017/12/29/Python/2017-12-29-Multiprocessing%20&amp;%20Multithreading/"><span>Python/2017-12-29-Multiprocessing &amp; Multithreading</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2020 By Joe Huang</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>